;(function($){function prepare(){var extended=false;function extend(plot,extendOptions){if(!plot.extendedBy||!plot.extendedBy.indexOf("jquery.flot.mathquillLegend")<0){var setupGrid=plot.setupGrid;plot.setupGrid=function(){setupGrid();mathquillLegend(plot,plot.getCanvas())}}return plot}var originPlot=$.plot;if(!extended){$.plot=function(placeholder,data,options){var plot=extend(originPlot(placeholder,data,options),options);window.testPlot=plot;plot.extendedBy=plot.extendedBy||[];plot.extendedBy.push("jquery.flot.mathquillLegend");return plot};for(var p in originPlot){$.plot[p]=originPlot[p]}$.plot.extendedBy=$.plot.extendedBy||[];$.plot.extendedBy.push("jquery.flot.mathquillLegend");extended=true}}prepare();function mathquillLegend(plot,canvasContext){$(".mathquill-embedded-latex").mathquill();var $legendTable=$("div.legend > table");var $legendBackground=$("div.legend > div");$legendBackground.width($legendTable.outerWidth());$legendBackground.height($legendTable.outerHeight())}})(jQuery)