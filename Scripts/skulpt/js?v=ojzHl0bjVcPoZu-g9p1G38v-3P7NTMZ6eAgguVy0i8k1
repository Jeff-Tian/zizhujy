(function(){function p(){return"("+Array.prototype.slice.call(arguments).join("|")+")"}function po(){return p.apply(null,arguments)+"?"}function as(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1}function vs(n,t){for(var i=n.length;0<i&&-1!==t.indexOf(n.charAt(i-1));--i);return n.substring(0,i)}function ri(n,t){return this.filename=n,this.grammar=t,this}function ys(n,t){for(var i=n.length;i--;)if(n[i][0]===t[0]&&n[i][1]===t[1])return!0;return!1}function ps(i,r){var u;void 0===r&&(r="file_input");u=new ri(i,n.ParseTables);"file_input"===r?u.setup(n.ParseTables.sym.file_input):t.asserts.fail("todo;");var f=n.Tokenizer.Tokens.T_COMMENT,e=n.Tokenizer.Tokens.T_NL,o=n.Tokenizer.Tokens.T_OP,s=new n.Tokenizer(i,"single_input"===r,function(t,i,r,s,h){if(t!==f&&t!==e&&(t===o&&(t=n.OpMap[i]),u.addtoken(t,i,[r,s,h])))return!0});return function(t){if(t=s.generateTokens(t)){if("done"!==t)throw new n.builtin.ParseError("incomplete input",this.filename);return u.rootnode}return!1}}function l(){}function c(){}function nt(){}function pt(){}function tt(){}function ct(){}function su(){}function lf(){}function hu(){}function cu(){}function lu(){}function au(){}function vu(){}function yu(){}function pu(){}function wu(){}function or(){}function bu(){}function ku(){}function du(){}function af(){}function vf(){}function yf(){}function pf(){}function wf(){}function bf(){}function kf(){}function df(){}function gf(){}function ne(){}function te(){}function ie(){}function re(){}function ue(){}function gu(n){return this.body=n,this}function ge(n){return this.body=n,this}function no(n){return t.asserts.assert(null!==n&&void 0!==n),this.body=n,this}function to(n){return this.body=n,this}function li(n,i,r,u,f,e){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.name=n,this.args=i,this.body=r,this.decorator_list=u,this.lineno=f,this.col_offset=e,this}function wt(n,i,r,u,f,e){return t.asserts.assert(null!==n&&void 0!==n),this.name=n,this.bases=i,this.body=r,this.decorator_list=u,this.lineno=f,this.col_offset=e,this}function ai(n,t,i){return this.value=n,this.lineno=t,this.col_offset=i,this}function sr(n,t,i){return this.targets=n,this.lineno=t,this.col_offset=i,this}function hr(n,i,r,u){return t.asserts.assert(null!==i&&void 0!==i),this.targets=n,this.value=i,this.lineno=r,this.col_offset=u,this}function vi(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),t.asserts.assert(null!==r&&void 0!==r),this.target=n,this.op=i,this.value=r,this.lineno=u,this.col_offset=f,this}function yi(n,t,i,r,u){return this.dest=n,this.values=t,this.nl=i,this.lineno=r,this.col_offset=u,this}function cr(n,i,r,u,f,e){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.target=n,this.iter=i,this.body=r,this.orelse=u,this.lineno=f,this.col_offset=e,this}function pi(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),this.test=n,this.body=i,this.orelse=r,this.lineno=u,this.col_offset=f,this}function ot(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),this.test=n,this.body=i,this.orelse=r,this.lineno=u,this.col_offset=f,this}function nf(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),this.context_expr=n,this.optional_vars=i,this.body=r,this.lineno=u,this.col_offset=f,this}function bt(n,t,i,r,u){return this.type=n,this.inst=t,this.tback=i,this.lineno=r,this.col_offset=u,this}function lr(n,t,i,r,u){return this.body=n,this.handlers=t,this.orelse=i,this.lineno=r,this.col_offset=u,this}function ar(n,t,i,r){return this.body=n,this.finalbody=t,this.lineno=i,this.col_offset=r,this}function wi(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),this.test=n,this.msg=i,this.lineno=r,this.col_offset=u,this}function vr(n,t,i){return this.names=n,this.lineno=t,this.col_offset=i,this}function yr(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),this.module=n,this.names=i,this.level=r,this.lineno=u,this.col_offset=f,this}function tf(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),this.body=n,this.globals=i,this.locals=r,this.lineno=u,this.col_offset=f,this}function pr(n,t,i){return this.names=n,this.lineno=t,this.col_offset=i,this}function bi(n,i,r){return t.asserts.assert(null!==n&&void 0!==n),this.value=n,this.lineno=i,this.col_offset=r,this}function wr(n,t){return this.lineno=n,this.col_offset=t,this}function br(n,t){return this.lineno=n,this.col_offset=t,this}function kr(n,t){return this.lineno=n,this.col_offset=t,this}function kt(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),this.op=n,this.values=i,this.lineno=r,this.col_offset=u,this}function dt(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),t.asserts.assert(null!==r&&void 0!==r),this.left=n,this.op=i,this.right=r,this.lineno=u,this.col_offset=f,this}function lt(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.op=n,this.operand=i,this.lineno=r,this.col_offset=u,this}function gt(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.args=n,this.body=i,this.lineno=r,this.col_offset=u,this}function ki(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),t.asserts.assert(null!==r&&void 0!==r),this.test=n,this.body=i,this.orelse=r,this.lineno=u,this.col_offset=f,this}function di(n,t,i,r){return this.keys=n,this.values=t,this.lineno=i,this.col_offset=r,this}function ui(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),this.elt=n,this.generators=i,this.lineno=r,this.col_offset=u,this}function fi(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),this.elt=n,this.generators=i,this.lineno=r,this.col_offset=u,this}function ei(n,t,i){return this.value=n,this.lineno=t,this.col_offset=i,this}function gi(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),this.left=n,this.ops=i,this.comparators=r,this.lineno=u,this.col_offset=f,this}function ni(n,i,r,u,f,e,o){return t.asserts.assert(null!==n&&void 0!==n),this.func=n,this.args=i,this.keywords=r,this.starargs=u,this.kwargs=f,this.lineno=e,this.col_offset=o,this}function oi(n,i,r){return t.asserts.assert(null!==n&&void 0!==n),this.n=n,this.lineno=i,this.col_offset=r,this}function si(n,i,r){return t.asserts.assert(null!==n&&void 0!==n),this.s=n,this.lineno=i,this.col_offset=r,this}function st(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),t.asserts.assert(null!==r&&void 0!==r),this.value=n,this.attr=i,this.ctx=r,this.lineno=u,this.col_offset=f,this}function it(n,i,r,u,f){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),t.asserts.assert(null!==r&&void 0!==r),this.value=n,this.slice=i,this.ctx=r,this.lineno=u,this.col_offset=f,this}function k(n,i,r,u){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.id=n,this.ctx=i,this.lineno=r,this.col_offset=u,this}function hi(n,i,r,u){return t.asserts.assert(null!==i&&void 0!==i),this.elts=n,this.ctx=i,this.lineno=r,this.col_offset=u,this}function rt(n,i,r,u){return t.asserts.assert(null!==i&&void 0!==i),this.elts=n,this.ctx=i,this.lineno=r,this.col_offset=u,this}function rf(){return this}function nr(n,t,i){return this.lower=n,this.upper=t,this.step=i,this}function dr(n){return this.dims=n,this}function ti(n){return t.asserts.assert(null!==n&&void 0!==n),this.value=n,this}function tr(n,i,r){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.target=n,this.iter=i,this.ifs=r,this}function gr(n,t,i,r,u){return this.type=n,this.name=t,this.body=i,this.lineno=r,this.col_offset=u,this}function nu(n,t,i,r){return this.args=n,this.vararg=t,this.kwarg=i,this.defaults=r,this}function fe(n,i){return t.asserts.assert(null!==n&&void 0!==n),t.asserts.assert(null!==i&&void 0!==i),this.arg=n,this.value=i,this}function ir(n,i){return t.asserts.assert(null!==n&&void 0!==n),this.name=n,this.asname=i,this}function ws(n,t){this.c_encoding=n;this.c_filename=t}function u(n){return t.asserts.assert(void 0!==n),null===n.children?0:n.children.length}function i(n,i){return t.asserts.assert(void 0!==n),t.asserts.assert(void 0!==i),n.children[i]}function h(n,i){t.asserts.assert(n.type===i,"node wasn't expected type")}function y(i){return t.asserts.assert("string"==typeof i,"expecting string, got "+typeof i),new n.builtin.str(i)}function at(n){var o,f,s;switch(n.type){case r.single_input:if(i(n,0).type===e.T_NEWLINE)break;else return at(i(n,0));case r.file_input:for(o=0,f=0;f<u(n);++f)s=i(n,f),s.type===r.stmt&&(o+=at(s));return o;case r.stmt:return at(i(n,0));case r.compound_stmt:return 1;case r.simple_stmt:return Math.floor(u(n)/2);case r.suite:if(1===u(n))return at(i(n,0));for(o=0,f=2;f<u(n)-1;++f)o+=at(i(n,f));return o;default:t.asserts.fail("Non-statement found")}return 0}function ii(t,i,r,u){if("None"===r)throw new n.builtin.SyntaxError("assignment to None",t.c_filename,u);if("True"===r||"False"===r)throw new n.builtin.SyntaxError("assignment to True or False is forbidden",t.c_filename,u);}function rr(i,r,u,f){t.asserts.assert(u!==tt&&u!==pt);var o=null,e=null;switch(r.constructor){case st:case k:u===c&&ii(i,f,r.attr,f.lineno);r.ctx=u;break;case it:r.ctx=u;break;case hi:r.ctx=u;o=r.elts;break;case rt:if(0===r.elts.length)throw new n.builtin.SyntaxError("can't assign to ()",i.c_filename,f.lineno);r.ctx=u;o=r.elts;break;case gt:e="lambda";break;case ni:e="function call";break;case kt:case dt:case lt:e="operator";break;case fi:e="generator expression";break;case ei:e="yield expression";break;case ui:e="list comprehension";break;case di:case oi:case si:e="literal";break;case gi:e="comparison";break;case ki:e="conditional expression";break;default:t.asserts.fail("unhandled expression in assignment")}if(e)throw new n.builtin.SyntaxError("can't "+(u===c?"assign to":"delete")+" "+e,i.c_filename,f.lineno);if(o)for(r=0;r<o.length;++r)rr(i,o[r],u,f)}function io(n){return t.asserts.assert(void 0!==b[n.type]),b[n.type]}function bs(n,f){if(h(f,r.comp_op),1===u(f))switch(f=i(f,0),f.type){case e.T_LESS:return kf;case e.T_GREATER:return gf;case e.T_EQEQUAL:return wf;case e.T_LESSEQUAL:return df;case e.T_GREATEREQUAL:return ne;case e.T_NOTEQUAL:return bf;case e.T_NAME:if("in"===f.value)return re;if("is"===f.value)return te}else if(2===u(f)&&i(f,0).type===e.T_NAME){if("in"===i(f,1).value)return ue;if("is"===i(f,0).value)return ie}t.asserts.fail("invalid comp_op")}function ee(n,f){t.asserts.assert(f.type===r.testlist||f.type===r.listmaker||f.type===r.testlist_gexp||f.type===r.testlist_safe||f.type===r.testlist1);for(var s=[],e=0;e<u(f);e+=2)t.asserts.assert(i(f,e).type===r.test||i(f,e).type===r.old_test),s[e/2]=o(n,i(f,e));return s}function a(n,f){var l,a,o,s,c;if(h(f,r.suite),l=[],a=0,i(f,0).type===r.simple_stmt)for(f=i(f,0),o=u(f)-1,i(f,o-1).type===e.T_SEMI&&(o-=1),s=0;s<o;s+=2)l[a++]=iu(n,i(f,s));else for(s=2;s<u(f)-1;++s)if(o=i(f,s),h(o,r.stmt),1===at(o))l[a++]=iu(n,o);else for(o=i(o,0),h(o,r.simple_stmt),c=0;c<u(o);c+=2){if(0===u(i(o,c))){t.asserts.assert(c+1===u(o));break}l[a++]=iu(n,i(o,c))}return t.asserts.assert(a===at(f)),l}function ks(n,f,e){if(h(f,r.except_clause),h(e,r.suite),1===u(f))return new gr(null,null,a(n,e),f.lineno,f.col_offset);if(2===u(f))return new gr(o(n,i(f,1)),null,a(n,e),f.lineno,f.col_offset);if(4===u(f)){var s=o(n,i(f,3));return rr(n,s,c,i(f,3)),new gr(o(n,i(f,1)),s,a(n,e),f.lineno,f.col_offset)}t.asserts.fail("wrong number of children for except clause")}function ds(f,o){var s=u(o),c=(s-3)/3,v,p=[],y=null,l;if(h(o,r.try_stmt),v=a(f,i(o,2)),i(o,s-3).type===e.T_NAME)"finally"===i(o,s-3).value?(9<=s&&i(o,s-6).type===e.T_NAME&&(p=a(f,i(o,s-4)),c--),y=a(f,i(o,s-1))):p=a(f,i(o,s-1)),c--;else if(i(o,s-3).type!==r.except_clause)throw new n.builtin.SyntaxError("malformed 'try' statement",f.c_filename,o.lineno);if(0<c){for(s=[],l=0;l<c;++l)s[l]=ks(f,i(o,3+3*l),i(o,5+3*l));if(c=new lr(v,s,p,o.lineno,o.col_offset),!y)return c;v=[c]}return t.asserts.assert(null!==y),new ar(v,y,o.lineno,o.col_offset)}function gs(n,t){h(t,r.dotted_name);for(var s=t.lineno,c=t.col_offset,f=y(i(t,0).value),e=new k(f,l,s,c),o=2;o<u(t);o+=2)f=y(i(t,o).value),e=new st(e,f,l,s,c);return e}function nh(n,t){h(t,r.decorator);h(i(t,0),e.T_AT);h(i(t,u(t)-1),e.T_NEWLINE);var f=gs(n,i(t,1));return 3===u(t)?f:5===u(t)?new ni(f,[],[],null,null,t.lineno,t.col_offset):ro(n,i(t,3),f)}function th(n,t){h(t,r.decorators);for(var e=[],f=0;f<u(t);++f)e[f]=nh(n,i(t,f));return e}function ih(n,u){var e,f;return h(u,r.decorated),e=th(n,i(u,0)),t.asserts.assert(i(u,1).type===r.funcdef||i(u,1).type===r.classdef),f=null,i(u,1).type===r.funcdef?f=fo(n,i(u,1),e):i(u,1)===r.classdef&&(f=eo(n,i(u,1),e)),f&&(f.lineno=u.lineno,f.col_offset=u.col_offset),f}function rh(n,t){return h(t,r.with_var),o(n,i(t,1))}function uh(n,u){var e=3,s,f;return t.asserts.assert(u.type===r.with_stmt),s=o(n,i(u,1)),i(u,2).type===r.with_var&&(f=rh(n,i(u,2)),rr(n,f,c,u),e=4),new nf(s,f,a(n,i(u,e)),u.lineno,u.col_offset)}function fh(n,f){var s,c=null,l=null,e=u(f);return t.asserts.assert(2===e||4===e||6===e),h(f,r.exec_stmt),s=o(n,i(f,1)),4<=e&&(c=o(n,i(f,3))),6===e&&(l=o(n,i(f,5))),new tf(s,c,l,f.lineno,f.col_offset)}function eh(n,f){var s,l,v;if(h(f,r.if_stmt),4===u(f))return new ot(o(n,i(f,1)),a(n,i(f,3)),[],f.lineno,f.col_offset);if(s=i(f,4).value.charAt(2),"s"===s)return new ot(o(n,i(f,1)),a(n,i(f,3)),a(n,i(f,6)),f.lineno,f.col_offset);if("i"===s){var s=u(f)-4,c=!1,v=[];for(i(f,s+1).type===e.T_NAME&&"s"===i(f,s+1).value.charAt(2)&&(c=!0,s-=3),s/=4,c&&(v=[new ot(o(n,i(f,u(f)-6)),a(n,i(f,u(f)-4)),a(n,i(f,u(f)-1)),i(f,u(f)-6).lineno,i(f,u(f)-6).col_offset)],s--),c=0;c<s;++c)l=5+4*(s-c-1),v=[new ot(o(n,i(f,l)),a(n,i(f,l+2)),v,i(f,l).lineno,i(f,l).col_offset)];return new ot(o(n,i(f,1)),a(n,i(f,3)),v,f.lineno,f.col_offset)}t.asserts.fail("unexpected token in 'if' statement")}function uf(n,t,f){var s,e,c;for(h(t,r.exprlist),s=[],e=0;e<u(t);e+=2)c=o(n,i(t,e)),s[e/2]=c,f&&rr(n,c,f,i(t,e));return s}function oh(n,t){return h(t,r.del_stmt),new sr(uf(n,i(t,1),nt),t.lineno,t.col_offset)}function sh(n,t){h(t,r.global_stmt);for(var e=[],f=1;f<u(t);f+=2)e[(f-1)/2]=y(i(t,f).value);return new pr(e,t.lineno,t.col_offset)}function hh(n,f){if(h(f,r.assert_stmt),2===u(f))return new wi(o(n,i(f,1)),null,f.lineno,f.col_offset);if(4===u(f))return new wi(o(n,i(f,1)),o(n,i(f,3)),f.lineno,f.col_offset);t.asserts.fail("improper number of parts to assert stmt")}function tu(f,o){n:for(;;)switch(o.type){case r.import_as_name:var s=null,h=y(i(o,0).value);return 3===u(o)&&(s=i(o,2).value),new ir(h,null==s?null:y(s));case r.dotted_as_name:if(1===u(o)){o=i(o,0);continue n}else return s=tu(f,i(o,0)),t.asserts.assert(!s.asname),s.asname=y(i(o,2).value),s;case r.dotted_name:if(1===u(o))return new ir(y(i(o,0).value),null);for(s="",h=0;h<u(o);h+=2)s+=i(o,h).value+".";return new ir(y(s.substr(0,s.length-1)),null);case e.T_STAR:return new ir(y("*"),null);default:throw new n.builtin.SyntaxError("unexpected import name",f.c_filename,o.lineno);}}function ch(t,f){var c,l,o,s;if(h(f,r.import_stmt),c=f.lineno,l=f.col_offset,f=i(f,0),f.type===r.import_name){for(f=i(f,1),h(f,r.dotted_as_names),o=[],s=0;s<u(f);s+=2)o[s/2]=tu(t,i(f,s));return new vr(o,c,l)}if(f.type===r.import_from){for(var a=null,v=0,o=1;o<u(f);++o){if(i(f,o).type===r.dotted_name){a=tu(t,i(f,o));o++;break}else if(i(f,o).type!==e.T_DOT)break;v++}++o;switch(i(f,o).type){case e.T_STAR:f=i(f,o);break;case e.T_LPAR:f=i(f,o+1);u(f);break;case r.import_as_names:if(f=i(f,o),o=u(f),0==o%2)throw new n.builtin.SyntaxError("trailing comma not allowed without surrounding parentheses",t.c_filename,f.lineno);break;default:throw new n.builtin.SyntaxError("Unexpected node-type in from-import",t.c_filename,f.lineno);}if(o=[],f.type===e.T_STAR)o[0]=tu(t,f);else for(s=0;s<u(f);s+=2)o[s/2]=tu(t,i(f,s));return new yr(y(a?a.name.v:""),o,v,c,l)}throw new n.builtin.SyntaxError("unknown import statement",t.c_filename,f.lineno);}function lh(n,f){return t.asserts.assert(f.type===r.testlist_gexp||f.type===r.argument),1<u(f)&&i(f,1).type===r.gen_for?oe(n,f):ht(n,f)}function ah(n,f){function w(n,t){for(var f=0;;){if((h(t,r.list_iter),i(t,0).type===r.list_for)||(t=i(t,0),h(t,r.list_if),f++,2==u(t)))return f;t=i(t,2)}}h(f,r.listmaker);t.asserts.assert(1<u(f));for(var b=o(n,i(f,0)),k=function(n,t){var e=0,f=i(t,1);n:for(;;){if(e++,h(f,r.list_for),5===u(f))f=i(f,4);else return e;t:for(;;){if(h(f,r.list_iter),f=i(f,0),f.type===r.list_for)continue n;else if(f.type===r.list_if)if(3===u(f)){f=i(f,2);continue t}else return e;break}break}}(n,f),p=[],e=i(f,1),a=0;a<k;++a){h(e,r.list_for);var s=i(e,1),v=uf(n,s,c),l=ht(n,i(e,3)),s=1===u(s)?new tr(v[0],l,[]):new tr(new rt(v,c,e.lineno,e.col_offset),l,[]);if(5===u(e)){for(var e=i(e,4),v=w(n,e),l=[],y=0;y<v;++y)h(e,r.list_iter),e=i(e,0),h(e,r.list_if),l[y]=o(n,i(e,1)),3===u(e)&&(e=i(e,2));e.type===r.list_iter&&(e=i(e,0));s.ifs=l}p[a]=s}return new ui(b,p,f.lineno,f.col_offset)}function vh(n,f){var s,h;if(i(f,0).type===e.T_MINUS&&2===u(f)&&(s=i(f,1),s.type===r.factor&&1===u(s)&&(s=i(s,0),s.type===r.power&&1===u(s)&&(s=i(s,0),s.type===r.atom))&&(h=i(s,0),h.type===e.T_NUMBER)))return h.value="-"+h.value,so(n,s);s=o(n,i(f,1));switch(i(f,0).type){case e.T_PLUS:return new lt(yf,s,f.lineno,f.col_offset);case e.T_MINUS:return new lt(pf,s,f.lineno,f.col_offset);case e.T_TILDE:return new lt(af,s,f.lineno,f.col_offset)}t.asserts.fail("unhandled factor")}function yh(n,t){var e=[];h(t,r.for_stmt);9===u(t)&&(e=a(n,i(t,8)));var f=i(t,1),o=uf(n,f,c),f=1===u(f)?o[0]:new rt(o,c,t.lineno,t.col_offset);return new cr(f,ht(n,i(t,3)),a(n,i(t,5)),e,t.lineno,t.col_offset)}function ro(t,f,s){var c,a,w;h(f,r.arglist);for(var y=0,p=0,v=0,l=0;l<u(f);++l)c=i(f,l),c.type===r.argument&&(1===u(c)?y++:i(c,1).type===r.gen_for?v++:p++);if(1<v||v&&(y||p))throw new n.builtin.SyntaxError("Generator expression must be parenthesized if not sole argument",t.c_filename,f.lineno);if(255<y+p+v)throw new n.builtin.SyntaxError("more than 255 arguments",t.c_filename,f.lineno);for(var v=[],b=[],p=y=0,d=null,g=null,l=0;l<u(f);++l)if(c=i(f,l),c.type===r.argument)if(1===u(c)){if(p)throw new n.builtin.SyntaxError("non-keyword arg after keyword arg",t.c_filename,f.lineno);if(d)throw new n.builtin.SyntaxError("only named arguments may follow *expression",t.c_filename,f.lineno);v[y++]=o(t,i(c,0))}else if(i(c,1).type===r.gen_for)v[y++]=oe(t,c);else{if(a=o(t,i(c,0)),a.constructor===gt)throw new n.builtin.SyntaxError("lambda cannot contain assignment",t.c_filename,f.lineno);if(a.constructor!==k)throw new n.builtin.SyntaxError("keyword can't be an expression",t.c_filename,f.lineno);for(a=a.id,ii(t,i(c,0),a,f.lineno),w=0;w<p;++w)if(b[w].arg===a)throw new n.builtin.SyntaxError("keyword argument repeated",t.c_filename,f.lineno);b[p++]=new fe(a,o(t,i(c,2)))}else c.type===e.T_STAR?d=o(t,i(f,++l)):c.type===e.T_DOUBLESTAR&&(g=o(t,i(f,++l)));return new ni(s,v,b,d,g,s.lineno,s.col_offset)}function ph(n,f,o){var c;if(h(f,r.trailer),i(f,0).type===e.T_LPAR)return 2===u(f)?new ni(o,[],[],null,null,f.lineno,f.col_offset):ro(n,i(f,1),o);if(i(f,0).type===e.T_DOT)return new st(o,y(i(f,1).value),l,f.lineno,f.col_offset);if(h(i(f,0),e.T_LSQB),h(i(f,2),e.T_RSQB),f=i(f,1),1===u(f))return new it(o,oo(n,i(f,0)),l,f.lineno,f.col_offset);for(var v=!0,a=[],s=0;s<u(f);s+=2)c=oo(n,i(f,s)),c.constructor!==ti&&(v=!1),a[s/2]=c;if(!v)return new it(o,new dr(a),l,f.lineno,f.col_offset);for(n=[],s=0;s<a.length;++s)c=a[s],t.asserts.assert(c.constructor===ti&&null!==c.value&&void 0!==c.value),n[s]=c.value;return a=new rt(n,l,f.lineno,f.col_offset),new it(o,new ti(a),l,f.lineno,f.col_offset)}function wh(n,f){var e;h(f,r.flow_stmt);e=i(f,0);switch(e.type){case r.break_stmt:return new br(f.lineno,f.col_offset);case r.continue_stmt:return new kr(f.lineno,f.col_offset);case r.yield_stmt:return new bi(o(n,i(e,0)),f.lineno,f.col_offset);case r.return_stmt:return 1===u(e)?new ai(null,f.lineno,f.col_offset):new ai(ht(n,i(e,1)),f.lineno,f.col_offset);case r.raise_stmt:if(1===u(e))return new bt(null,null,null,f.lineno,f.col_offset);if(2===u(e))return new bt(o(n,i(e,1)),null,null,f.lineno,f.col_offset);if(4===u(e))return new bt(o(n,i(e,1)),o(n,i(e,3)),null,f.lineno,f.col_offset);if(6===u(e))return new bt(o(n,i(e,1)),o(n,i(e,3)),o(n,i(e,5)),f.lineno,f.col_offset);default:t.asserts.fail("unexpected flow_stmt")}t.asserts.fail("unhandled flow statement")}function uo(f,s){var l,v=null,p=null,a,g;if(s.type===r.parameters){if(2===u(s))return new nu([],null,null,[]);s=i(s,1)}h(s,r.varargslist);for(var w=[],b=[],d=!1,c=0,nt=0,tt=0;c<u(s);)switch(l=i(s,c),l.type){case r.fpdef:a=0;n:for(;;){if(c+1<u(s)&&i(s,c+1).type===e.T_EQUAL)b[nt++]=o(f,i(s,c+2)),c+=2,d=!0;else if(d){if(a)throw new n.builtin.SyntaxError("parenthesized arg with default",f.c_filename,s.lineno);throw new n.builtin.SyntaxError("non-default argument follows default argument",f.c_filename,s.lineno);}if(3===u(l)){if(l=i(l,1),1!==u(l))throw new n.builtin.SyntaxError("tuple parameter unpacking has been removed",f.c_filename,s.lineno);a=!0;l=i(l,0);t.asserts.assert(l.type===r.fpdef);continue n}if(i(l,0).type===e.T_NAME&&(ii(f,s,i(l,0).value,s.lineno),g=y(i(l,0).value),w[tt++]=new k(g,ct,l.lineno,l.col_offset)),c+=2,a)throw new n.builtin.SyntaxError("parenthesized argument names are invalid",f.c_filename,s.lineno);break}break;case e.T_STAR:ii(f,i(s,c+1),i(s,c+1).value,s.lineno);v=y(i(s,c+1).value);c+=3;break;case e.T_DOUBLESTAR:ii(f,i(s,c+1),i(s,c+1).value,s.lineno);p=y(i(s,c+1).value);c+=3;break;default:t.asserts.fail("unexpected node in varargslist")}return new nu(w,v,p,b)}function fo(n,t,u){var f,e;return h(t,r.funcdef),f=y(i(t,1).value),ii(n,i(t,1),i(t,1).value,t.lineno),e=uo(n,i(t,2)),n=a(n,i(t,4)),new li(f,e,n,u,t.lineno,t.col_offset)}function bh(n,f){return t.asserts.assert(0<u(f)),h(f,r.testlist),1===u(f)?[o(n,i(f,0))]:ee(n,f)}function eo(n,t,f){var o,s;return(h(t,r.classdef),ii(n,t,i(t,1).value,t.lineno),o=y(i(t,1).value),4===u(t))?new wt(o,[],a(n,i(t,3)),f,t.lineno,t.col_offset):i(t,3).type===e.T_RPAR?new wt(o,[],a(n,i(t,5)),f,t.lineno,t.col_offset):(s=bh(n,i(t,3)),n=a(n,i(t,6)),new wt(o,s,n,f,t.lineno,t.col_offset))}function kh(n,t){var r,f;return 3===u(t)?(r=new nu([],null,null,[]),f=o(n,i(t,2))):(r=uo(n,i(t,1)),f=o(n,i(t,3))),new gt(r,f,t.lineno,t.col_offset)}function oe(n,f){function b(n,t){for(var f=0;;){if((h(t,r.gen_iter),i(t,0).type===r.gen_for)||(t=i(t,0),h(t,r.gen_if),f++,2==u(t)))return f;t=i(t,2)}}t.asserts.assert(f.type===r.testlist_gexp||f.type===r.argument);t.asserts.assert(1<u(f));for(var k=o(n,i(f,0)),d=function(n,f){var o=0,e=i(f,1);n:for(;;){if(o++,h(e,r.gen_for),5===u(e))e=i(e,4);else return o;t:for(;;){if(h(e,r.gen_iter),e=i(e,0),e.type===r.gen_for)continue n;else if(e.type===r.gen_if)if(3===u(e)){e=i(e,2);continue t}else return o;break}break}t.asserts.fail("logic error in countGenFors")}(n,f),p=[],e=i(f,1),a=0;a<d;++a){h(e,r.gen_for);var s=i(e,1),v=uf(n,s,c),l=o(n,i(e,3)),s=1===u(s)?new tr(v[0],l,[]):new tr(new rt(v,c,e.lineno,e.col_offset),l,[]);if(5===u(e)){for(var e=i(e,4),v=b(n,e),w=[],y=0;y<v;++y)h(e,r.gen_iter),e=i(e,0),h(e,r.gen_if),l=o(n,i(e,1)),w[y]=l,3===u(e)&&(e=i(e,2));e.type===r.gen_iter&&(e=i(e,0));s.ifs=w}p[a]=s}return new fi(k,p,f.lineno,f.col_offset)}function dh(n,f){if(h(f,r.while_stmt),4===u(f))return new pi(o(n,i(f,1)),a(n,i(f,3)),[],f.lineno,f.col_offset);if(7===u(f))return new pi(o(n,i(f,1)),a(n,i(f,3)),a(n,i(f,6)),f.lineno,f.col_offset);t.asserts.fail("wrong number of tokens for 'while' stmt")}function gh(n,u){h(u,r.augassign);u=i(u,0);switch(u.value.charAt(0)){case"+":return hu;case"-":return cu;case"/":return"/"===u.value.charAt(1)?du:au;case"%":return vu;case"<":return pu;case">":return wu;case"&":return ku;case"^":return bu;case"|":return or;case"*":return"*"===u.value.charAt(1)?yu:lu;default:t.asserts.fail("invalid augassign")}}function nc(n,t){for(var e=new dt(o(n,i(t,0)),io(i(t,1)),o(n,i(t,2)),t.lineno,t.col_offset),s=(u(t)-1)/2,r=1;r<s;++r)var f=i(t,2*r+1),h=io(f),c=o(n,i(t,2*r+2)),e=new dt(e,h,c,f.lineno,f.col_offset);return e}function ht(n,f){return t.asserts.assert(0<u(f)),f.type===r.testlist_gexp?1<u(f)&&t.asserts.assert(i(f,1).type!==r.gen_for):t.asserts.assert(f.type===r.testlist||f.type===r.testlist_safe||f.type===r.testlist1),1===u(f)?o(n,i(f,0)):new rt(ee(n,f),l,f.lineno,f.col_offset)}function tc(t,f){var s,l,a;if(h(f,r.expr_stmt),1===u(f))return new bi(ht(t,i(f,0)),f.lineno,f.col_offset);if(i(f,1).type===r.augassign){s=i(f,0);l=ht(t,s);switch(l.constructor){case fi:throw new n.builtin.SyntaxError("augmented assignment to generator expression not possible",t.c_filename,f.lineno);case ei:throw new n.builtin.SyntaxError("augmented assignment to yield expression not possible",t.c_filename,f.lineno);case k:ii(t,s,l.id,f.lineno);break;case st:case it:break;default:throw new n.builtin.SyntaxError("illegal expression for augmented assignment",t.c_filename,f.lineno);}return rr(t,l,c,s),s=i(f,2),s=s.type===r.testlist?ht(t,s):o(t,s),new vi(l,gh(t,i(f,1)),s,f.lineno,f.col_offset)}for(h(i(f,1),e.T_EQUAL),l=[],a=0;a<u(f)-2;a+=2){if(s=i(f,a),s.type===r.yield_expr)throw new n.builtin.SyntaxError("assignment to yield expression not possible",t.c_filename,f.lineno);s=ht(t,s);rr(t,s,c,i(f,a));l[a/2]=s}return s=i(f,u(f)-1),s=s.type===r.testlist?ht(t,s):o(t,s),new hr(l,s,f.lineno,f.col_offset)}function ic(n,r){return t.asserts.assert(5===u(r)),new ki(o(n,i(r,2)),o(n,i(r,0)),o(n,i(r,4)),r.lineno,r.col_offset)}function rc(n,i){var u=i.charAt(0),e=!1,s=!1,r;if("u"===u||"U"===u?(i=i.substr(1),u=i.charAt(0),s=!0):("r"===u||"R"===u)&&(i=i.substr(1),u=i.charAt(0),e=!0),t.asserts.assert("b"!==u&&"B"!==u,"todo; haven't done b'' strings yet"),t.asserts.assert("'"===u||'"'===u&&i.charAt(i.length-1)===u),i=i.substr(1,i.length-2),s&&(i=unescape(encodeURIComponent(i))),4<=i.length&&i.charAt(0)===u&&i.charAt(1)===u&&(t.asserts.assert(i.charAt(i.length-1)===u&&i.charAt(i.length-2)===u),i=i.substr(2,i.length-4)),e||-1===i.indexOf("\\"))u=y(decodeURIComponent(escape(i)));else{for(var u=y,e=i,s=e.length,f="",o=0;o<s;++o)if(r=e.charAt(o),"\\"===r){if(++o,r=e.charAt(o),"n"===r)f+="\n";else if("\\"===r)f+="\\";else if("t"===r)f+="\t";else if("r"===r)f+="\r";else if("b"===r)f+="\b";else if("f"===r)f+="\f";else if("v"===r)f+="\v";else if("0"===r)f+="\x00";else if('"'===r)f+='"';else if("'"===r)f+="'";else if("\n"!==r)if("x"===r)var r=e.charAt(++o),h=e.charAt(++o),f=f+String.fromCharCode(parseInt(r+h,16));else if("u"===r||"U"===r)var r=e.charAt(++o),h=e.charAt(++o),c=e.charAt(++o),l=e.charAt(++o),f=f+String.fromCharCode(parseInt(r+h,16),parseInt(c+l,16));else f+="\\"+r}else f+=r;u=u(f)}return u}function uc(t,r){h(i(r,0),e.T_STRING);for(var o=new n.builtin.str(""),f=0;f<u(r);++f)try{o=o.sq$concat(rc(t,i(r,f).value))}catch(s){throw new n.builtin.SyntaxError("invalid string (possibly contains a unicode character)",t.c_filename,i(r,f).lineno);}return o}function fc(t,i,r){var u=i.charAt(i.length-1);if("j"===u||"J"===u)throw new n.builtin.SyntaxError("complex numbers are currently unsupported",t.c_filename,r);if("l"===u||"L"===u)return n.longFromStr(i.substr(0,i.length-1),0);if(-1!==i.indexOf("."))return new n.builtin.nmber(parseFloat(i),n.builtin.nmber.float$);if(r=i,t=!1,"-"===i.charAt(0)&&(r=i.substr(1),t=!0),"0"!==r.charAt(0)||"x"!==r.charAt(1)&&"X"!==r.charAt(1)){if(-1!==i.indexOf("e")||-1!==i.indexOf("E"))return new n.builtin.nmber(parseFloat(i),n.builtin.nmber.float$);"0"!==r.charAt(0)||"b"!==r.charAt(1)&&"B"!==r.charAt(1)?"0"===r.charAt(0)?"0"===r?r=0:(r=r.substring(1),("o"===r.charAt(0)||"O"===r.charAt(0))&&(r=r.substring(1)),r=parseInt(r,8)):r=parseInt(r,10):(r=r.substring(2),r=parseInt(r,2))}else r=r.substring(2),r=parseInt(r,16);return r>n.builtin.lng.threshold$&&Math.floor(r)===r&&-1===i.indexOf("e")&&-1===i.indexOf("E")?n.longFromStr(i,0):t?new n.builtin.nmber(-r,n.builtin.int$):new n.builtin.nmber(r,n.builtin.int$)}function oo(n,t){h(t,r.subscript);var f=i(t,0),a=null,s=null,c=null;return f.type===e.T_DOT?new rf:1===u(t)&&f.type===r.test?new ti(o(n,f)):(f.type===r.test&&(a=o(n,f)),f.type===e.T_COLON?1<u(t)&&(f=i(t,1),f.type===r.test&&(s=o(n,f))):2<u(t)&&(f=i(t,2),f.type===r.test&&(s=o(n,f))),f=i(t,u(t)-1),f.type===r.sliceop&&(1===u(f)?(f=i(f,0),c=new k(y("None"),l,f.lineno,f.col_offset)):(f=i(f,1),f.type===r.test&&(c=o(n,f)))),new nr(a,s,c))}function so(f,s){var c=i(s,0);switch(c.type){case e.T_NAME:return new k(y(c.value),l,s.lineno,s.col_offset);case e.T_STRING:return new si(uc(f,s),s.lineno,s.col_offset);case e.T_NUMBER:return new oi(fc(f,c.value,s.lineno),s.lineno,s.col_offset);case e.T_LPAR:return c=i(s,1),c.type===e.T_RPAR?new rt([],l,s.lineno,s.col_offset):c.type===r.yield_expr?o(f,c):1<u(c)&&i(c,1).type===r.gen_for?oe(f,c):lh(f,c);case e.T_LSQB:return(c=i(s,1),c.type===e.T_RSQB)?new hi([],l,s.lineno,s.col_offset):(h(c,r.listmaker),1===u(c)||i(c,1).type===e.T_COMMA?new hi(ee(f,c),l,s.lineno,s.col_offset):ah(f,c));case e.T_LBRACE:c=i(s,1);u(c);for(var v=[],p=[],a=0;a<u(c);a+=4)v[a/4]=o(f,i(c,a)),p[a/4]=o(f,i(c,a+2));return new di(v,p,s.lineno,s.col_offset);case e.T_BACKQUOTE:throw new n.builtin.SyntaxError("backquote not supported, use repr()",f.c_filename,s.lineno);default:t.asserts.fail("unhandled atom",c.type)}}function ec(n,t){var f,s,e;if(h(t,r.power),f=so(n,i(t,0)),1===u(t))return f;for(s=1;s<u(t);++s){if(e=i(t,s),e.type!==r.trailer)break;e=ph(n,e,f);e.lineno=f.lineno;e.col_offset=f.col_offset;f=e}return i(t,u(t)-1).type===r.factor&&(s=o(n,i(t,u(t)-1)),f=new dt(f,yu,s,t.lineno,t.col_offset)),f}function o(n,f){var s,e;n:for(;;){switch(f.type){case r.test:case r.old_test:if(i(f,0).type===r.lambdef||i(f,0).type===r.old_lambdef)return kh(n,i(f,0));if(1<u(f))return ic(n,f);case r.or_test:case r.and_test:if(1===u(f)){f=i(f,0);continue n}for(s=[],e=0;e<u(f);e+=2)s[e/2]=o(n,i(f,e));return"and"===i(f,1).value?new kt(su,s,f.lineno,f.col_offset):(t.asserts.assert("or"===i(f,1).value),new kt(lf,s,f.lineno,f.col_offset));case r.not_test:if(1===u(f)){f=i(f,0);continue n}else return new lt(vf,o(n,i(f,1)),f.lineno,f.col_offset);case r.comparison:if(1===u(f)){f=i(f,0);continue n}else{for(var s=[],h=[],e=1;e<u(f);e+=2)s[(e-1)/2]=bs(n,i(f,e)),h[(e-1)/2]=o(n,i(f,e+1));return new gi(o(n,i(f,0)),s,h,f.lineno,f.col_offset)}case r.expr:case r.xor_expr:case r.and_expr:case r.shift_expr:case r.arith_expr:case r.term:if(1===u(f)){f=i(f,0);continue n}return nc(n,f);case r.yield_expr:return e=null,2===u(f)&&(e=ht(n,i(f,1))),new ei(e,f.lineno,f.col_offset);case r.factor:if(1===u(f)){f=i(f,0);continue n}return vh(n,f);case r.power:return ec(n,f);default:t.asserts.fail("unhandled expr","n.type: %d",f.type)}break}}function oc(n,t){var f=1,l=null,s,c;for(h(t,r.print_stmt),2<=u(t)&&i(t,1).type===e.T_RIGHTSHIFT&&(l=o(n,i(t,2)),f=4),s=[],c=0;f<u(t);f+=2,++c)s[c]=o(n,i(t,f));return f=i(t,u(t)-1).type===e.T_COMMA?!1:!0,new yi(l,s,f,t.lineno,t.col_offset)}function iu(n,f){if(f.type===r.stmt&&(t.asserts.assert(1===u(f)),f=i(f,0)),f.type===r.simple_stmt&&(t.asserts.assert(1===at(f)),f=i(f,0)),f.type===r.small_stmt)switch(h(f,r.small_stmt),f=i(f,0),f.type){case r.expr_stmt:return tc(n,f);case r.print_stmt:return oc(n,f);case r.del_stmt:return oh(n,f);case r.pass_stmt:return new wr(f.lineno,f.col_offset);case r.flow_stmt:return wh(n,f);case r.import_stmt:return ch(n,f);case r.global_stmt:return sh(n,f);case r.exec_stmt:return fh(n,f);case r.assert_stmt:return hh(n,f);default:t.asserts.fail("unhandled small_stmt")}else{var e=i(f,0);h(f,r.compound_stmt);switch(e.type){case r.if_stmt:return eh(n,e);case r.while_stmt:return dh(n,e);case r.for_stmt:return yh(n,e);case r.try_stmt:return ds(n,e);case r.with_stmt:return uh(n,e);case r.funcdef:return fo(n,e,[]);case r.classdef:return eo(n,e,[]);case r.decorated:return ih(n,e);default:t.asserts.assert("unhandled compound_stmt")}}}function g(n,t,i){this.__name=n;this.__flags=t;this.__scope=t>>ur&of;this.__namespaces=i||[]}function w(n,t,i,r,u){this.symFlags={};this.name=t;this.varnames=[];this.children=[];this.blockType=i;this.returnsValue=this.varkeywords=this.varargs=this.generator=this.childHasFree=this.hasFree=this.isNested=!1;this.lineno=u;this.table=n;n.cur&&(n.cur.nested||n.cur.blockType===ft)&&(this.isNested=!0);r.scopeId=co++;n.stss[r.scopeId]=this;this.symbols={}}function v(n){this.filename=n;this.top=this.cur=null;this.stack=[];this.curClass=this.global=null;this.tmpname=0;this.stss={}}function et(n,t){for(var i in t)n[i]=t[i]}function f(n,t,i,r){this.filename=n;this.st=t;this.flags=i;this.interactive=!1;this.nestlevel=0;this.u=null;this.stack=[];this.result=[];this.allUnits=[];this.source=r?r.split("\n"):!1}function lo(){this.private_=this.name=this.ste=null;this.lineno=this.firstlineno=0;this.linenoSet=!1;this.localnames=[];this.blocknum=0;this.blocks=[];this.curblock=0;this.scopename=null;this.suffixCode=this.switchCode=this.varDeclsCode=this.prefixCode="";this.breakBlocks=[];this.continueBlocks=[];this.exceptBlocks=[];this.finallyBlocks=[]}function ae(n){return!0!==ao[n]?n:n+"_$rw$"}function fr(n){return vo[n]?n+"_$rn$":n}function fu(t,i){var r=i.v,u=null;return null===t||null===r||"_"!==r.charAt(0)||"_"!==r.charAt(1)||"_"===r.charAt(r.length-1)&&"_"===r.charAt(r.length-2)?i:(u=t.v,u.replace(/_/g,""),""===u)?i:(u=t.v,u.replace(/^_*/,""),new n.builtin.str("_"+u+r))}var yt=!0,t=t||{},n,eu,er,ci,d,cf,r,e,b,co,s,ao,vo,yo;for(t.global=this,t.exportPath_=function(n,i,r){n=n.split(".");r=r||t.global;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(var u;n.length&&(u=n.shift());)n.length||void 0===i?r=r[u]?r[u]:r[u]={}:r[u]=i},t.define=function(n,i){var r=i;yt||t.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(t.global.CLOSURE_DEFINES,n)&&(r=t.global.CLOSURE_DEFINES[n]);t.exportPath_(n,r)},t.DEBUG=!1,t.LOCALE="en",t.TRUSTED_SITE=!0,t.provide=function(n){if(!yt){if(t.isProvided_(n))throw Error('Namespace "'+n+'" already declared.');delete t.implicitNamespaces_[n];for(var i=n;(i=i.substring(0,i.lastIndexOf(".")))&&!t.getObjectByName(i);)t.implicitNamespaces_[i]=!0}t.exportPath_(n)},t.setTestOnly=function(n){if(yt&&!t.DEBUG)throw n=n||"",Error("Importing test-only code into non-debug environment"+n?": "+n:".");},yt||(t.isProvided_=function(n){return!t.implicitNamespaces_[n]&&!!t.getObjectByName(n)},t.implicitNamespaces_={}),t.getObjectByName=function(n,i){for(var f=n.split("."),r=i||t.global,u;u=f.shift();)if(t.isDefAndNotNull(r[u]))r=r[u];else return null;return r},t.globalize=function(n,i){var u=i||t.global;for(var r in n)u[r]=n[r]},t.addDependency=function(n,i,r){var f,u,e;if(t.DEPENDENCIES_ENABLED){for(n=n.replace(/\\/g,"/"),u=t.dependencies_,e=0;f=i[e];e++)u.nameToPath[f]=n,n in u.pathToNames||(u.pathToNames[n]={}),u.pathToNames[n][f]=!0;for(f=0;i=r[f];f++)n in u.requires||(u.requires[n]={}),u.requires[n][i]=!0}},t.ENABLE_DEBUG_LOADER=!0,t.require=function(n){if(!yt&&!t.isProvided_(n)){if(t.ENABLE_DEBUG_LOADER){var i=t.getPathFromDeps_(n);if(i){t.included_[i]=!0;t.writeScripts_();return}}n="goog.require could not find: "+n;t.global.console&&t.global.console.error(n);throw Error(n);}},t.basePath="",t.nullFunction=function(){},t.identityFunction=function(n){return n},t.abstractMethod=function(){throw Error("unimplemented abstract method");},t.addSingletonGetter=function(n){n.getInstance=function(){return n.instance_?n.instance_:(t.DEBUG&&(t.instantiatedSingletons_[t.instantiatedSingletons_.length]=n),n.instance_=new n)}},t.instantiatedSingletons_=[],t.DEPENDENCIES_ENABLED=!yt&&t.ENABLE_DEBUG_LOADER,t.DEPENDENCIES_ENABLED&&(t.included_={},t.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},t.inHtmlDocument_=function(){var n=t.global.document;return"undefined"!=typeof n&&"write"in n},t.findBasePath_=function(){var u,n;if(t.global.CLOSURE_BASE_PATH)t.basePath=t.global.CLOSURE_BASE_PATH;else if(t.inHtmlDocument_())for(u=t.global.document.getElementsByTagName("script"),n=u.length-1;0<=n;--n){var i=u[n].src,r=i.lastIndexOf("?"),r=-1==r?i.length:r;if("base.js"==i.substr(r-7,7)){t.basePath=i.substr(0,r-7);break}}},t.importScript_=function(n){var i=t.global.CLOSURE_IMPORT_SCRIPT||t.writeScriptTag_;!t.dependencies_.written[n]&&i(n)&&(t.dependencies_.written[n]=!0)},t.writeScriptTag_=function(n){if(t.inHtmlDocument_()){var i=t.global.document;if("complete"==i.readyState){if(/\bdeps.js$/.test(n))return!1;throw Error('Cannot write "'+n+'" after document load');}return i.write('<script type="text/javascript" src="'+n+'"><\/script>'),!0}return!1},t.writeScripts_=function(){function u(i){if(!(i in n.written)){if(!(i in n.visited)&&(n.visited[i]=!0,i in n.requires))for(var e in n.requires[i])if(!t.isProvided_(e))if(e in n.nameToPath)u(n.nameToPath[e]);else throw Error("Undefined nameToPath for "+e);i in f||(f[i]=!0,r.push(i))}}var r=[],f={},n=t.dependencies_;for(var i in t.included_)n.written[i]||u(i);for(i=0;i<r.length;i++)if(r[i])t.importScript_(t.basePath+r[i]);else throw Error("Undefined script input");},t.getPathFromDeps_=function(n){return n in t.dependencies_.nameToPath?t.dependencies_.nameToPath[n]:null},t.findBasePath_(),t.global.CLOSURE_NO_DEPS||t.importScript_(t.basePath+"deps.js")),t.typeOf=function(n){var t=typeof n,i;if("object"==t)if(n){if(n instanceof Array)return"array";if(n instanceof Object)return t;if(i=Object.prototype.toString.call(n),"[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof n.length&&"undefined"!=typeof n.splice&&"undefined"!=typeof n.propertyIsEnumerable&&!n.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof n.call&&"undefined"!=typeof n.propertyIsEnumerable&&!n.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==t&&"undefined"==typeof n.call)return"object";return t},t.isDef=function(n){return void 0!==n},t.isNull=function(n){return null===n},t.isDefAndNotNull=function(n){return null!=n},t.isArray=function(n){return"array"==t.typeOf(n)},t.isArrayLike=function(n){var i=t.typeOf(n);return"array"==i||"object"==i&&"number"==typeof n.length},t.isDateLike=function(n){return t.isObject(n)&&"function"==typeof n.getFullYear},t.isString=function(n){return"string"==typeof n},t.isBoolean=function(n){return"boolean"==typeof n},t.isNumber=function(n){return"number"==typeof n},t.isFunction=function(n){return"function"==t.typeOf(n)},t.isObject=function(n){var t=typeof n;return"object"==t&&null!=n||"function"==t},t.getUid=function(n){return n[t.UID_PROPERTY_]||(n[t.UID_PROPERTY_]=++t.uidCounter_)},t.removeUid=function(n){"removeAttribute"in n&&n.removeAttribute(t.UID_PROPERTY_);try{delete n[t.UID_PROPERTY_]}catch(i){}},t.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),t.uidCounter_=0,t.getHashCode=t.getUid,t.removeHashCode=t.removeUid,t.cloneObject=function(n){var i=t.typeOf(n),r;if("object"==i||"array"==i){if(n.clone)return n.clone();i="array"==i?[]:{};for(r in n)i[r]=t.cloneObject(n[r]);return i}return n},t.bindNative_=function(n){return n.call.apply(n.bind,arguments)},t.bindJs_=function(n,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}},t.bind=function(){return t.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t.bindNative_:t.bindJs_,t.bind.apply(null,arguments)},t.partial=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){var i=Array.prototype.slice.call(arguments);return i.unshift.apply(i,t),n.apply(this,i)}},t.mixin=function(n,t){for(var i in t)n[i]=t[i]},t.now=t.TRUSTED_SITE&&Date.now||function(){return+new Date},t.globalEval=function(n){if(t.global.execScript)t.global.execScript(n,"JavaScript");else if(t.global.eval)if(null==t.evalWorksForGlobals_&&(t.global.eval("var _et_ = 1;"),"undefined"!=typeof t.global._et_?(delete t.global._et_,t.evalWorksForGlobals_=!0):t.evalWorksForGlobals_=!1),t.evalWorksForGlobals_)t.global.eval(n);else{var r=t.global.document,i=r.createElement("script");i.type="text/javascript";i.defer=!1;i.appendChild(r.createTextNode(n));r.body.appendChild(i);r.body.removeChild(i)}else throw Error("goog.globalEval not available");},t.evalWorksForGlobals_=null,t.getCssName=function(n,i){var u=function(n){return t.cssNameMapping_[n]||n},r=function(n){n=n.split("-");for(var i=[],t=0;t<n.length;t++)i.push(u(n[t]));return i.join("-")},r=t.cssNameMapping_?"BY_WHOLE"==t.cssNameMappingStyle_?u:r:function(n){return n};return i?n+"-"+r(i):r(n)},t.setCssNameMapping=function(n,i){t.cssNameMapping_=n;t.cssNameMappingStyle_=i},!yt&&t.global.CLOSURE_CSS_NAME_MAPPING&&(t.cssNameMapping_=t.global.CLOSURE_CSS_NAME_MAPPING),t.getMsg=function(n,t){var r=t||{},i,u;for(i in r)u=(""+r[i]).replace(/\$/g,"$$$$"),n=n.replace(RegExp("\\{\\$"+i+"\\}","gi"),u);return n},t.getMsgWithFallback=function(n){return n},t.exportSymbol=function(n,i,r){t.exportPath_(n,i,r)},t.exportProperty=function(n,t,i){n[t]=i},t.inherits=function(n,t){function i(){}i.prototype=t.prototype;n.superClass_=t.prototype;n.prototype=new i;n.prototype.constructor=n},t.base=function(n,i){var u=arguments.callee.caller;if(t.DEBUG&&!u)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(u.superClass_)return u.superClass_.constructor.apply(n,Array.prototype.slice.call(arguments,1));for(var f=Array.prototype.slice.call(arguments,2),e=!1,r=n.constructor;r;r=r.superClass_&&r.superClass_.constructor)if(r.prototype[i]===u)e=!0;else if(e)return r.prototype[i].apply(n,f);if(n[i]===u)return n.constructor.prototype[i].apply(n,f);throw Error("goog.base called from a method of one name to a method of a different name");},t.scope=function(n){n.call(t.global)},t.string={},t.string.Unicode={NBSP:" "},t.string.startsWith=function(n,t){return 0==n.lastIndexOf(t,0)},t.string.endsWith=function(n,t){var i=n.length-t.length;return 0<=i&&n.indexOf(t,i)==i},t.string.caseInsensitiveStartsWith=function(n,i){return 0==t.string.caseInsensitiveCompare(i,n.substr(0,i.length))},t.string.caseInsensitiveEndsWith=function(n,i){return 0==t.string.caseInsensitiveCompare(i,n.substr(n.length-i.length,i.length))},t.string.caseInsensitiveEquals=function(n,t){return n.toLowerCase()==t.toLowerCase()},t.string.subs=function(n){for(var t=n.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<t.length;)i+=t.shift()+r.shift();return i+t.join("%s")},t.string.collapseWhitespace=function(n){return n.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},t.string.isEmpty=function(n){return/^[\s\xa0]*$/.test(n)},t.string.isEmptySafe=function(n){return t.string.isEmpty(t.string.makeSafe(n))},t.string.isBreakingWhitespace=function(n){return!/[^\t\n\r ]/.test(n)},t.string.isAlpha=function(n){return!/[^a-zA-Z]/.test(n)},t.string.isNumeric=function(n){return!/[^0-9]/.test(n)},t.string.isAlphaNumeric=function(n){return!/[^a-zA-Z0-9]/.test(n)},t.string.isSpace=function(n){return" "==n},t.string.isUnicodeChar=function(n){return 1==n.length&&" "<=n&&"~">=n||""<=n&&"�">=n},t.string.stripNewlines=function(n){return n.replace(/(\r\n|\r|\n)+/g," ")},t.string.canonicalizeNewlines=function(n){return n.replace(/(\r\n|\r|\n)/g,"\n")},t.string.normalizeWhitespace=function(n){return n.replace(/\xa0|\s/g," ")},t.string.normalizeSpaces=function(n){return n.replace(/\xa0|[ \t]+/g," ")},t.string.collapseBreakingSpaces=function(n){return n.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},t.string.trim=function(n){return n.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},t.string.trimLeft=function(n){return n.replace(/^[\s\xa0]+/,"")},t.string.trimRight=function(n){return n.replace(/[\s\xa0]+$/,"")},t.string.caseInsensitiveCompare=function(n,t){var i=String(n).toLowerCase(),r=String(t).toLowerCase();return i<r?-1:i==r?0:1},t.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,t.string.numerateCompare=function(n,i){var e,o;if(n==i)return 0;if(!n)return-1;if(!i)return 1;for(var r=n.toLowerCase().match(t.string.numerateCompareRegExp_),u=i.toLowerCase().match(t.string.numerateCompareRegExp_),s=Math.min(r.length,u.length),f=0;f<s;f++)if(e=r[f],o=u[f],e!=o)return r=parseInt(e,10),!isNaN(r)&&(u=parseInt(o,10),!isNaN(u)&&r-u)?r-u:e<o?-1:1;return r.length!=u.length?r.length-u.length:n<i?-1:1},t.string.urlEncode=function(n){return encodeURIComponent(String(n))},t.string.urlDecode=function(n){return decodeURIComponent(n.replace(/\+/g," "))},t.string.newLineToBr=function(n,t){return n.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},t.string.htmlEscape=function(n,i){return i?n.replace(t.string.amperRe_,"&amp;").replace(t.string.ltRe_,"&lt;").replace(t.string.gtRe_,"&gt;").replace(t.string.quotRe_,"&quot;"):t.string.allRe_.test(n)?(-1!=n.indexOf("&")&&(n=n.replace(t.string.amperRe_,"&amp;")),-1!=n.indexOf("<")&&(n=n.replace(t.string.ltRe_,"&lt;")),-1!=n.indexOf(">")&&(n=n.replace(t.string.gtRe_,"&gt;")),-1!=n.indexOf('"')&&(n=n.replace(t.string.quotRe_,"&quot;")),n):n},t.string.amperRe_=/&/g,t.string.ltRe_=/</g,t.string.gtRe_=/>/g,t.string.quotRe_=/\"/g,t.string.allRe_=/[&<>\"]/,t.string.unescapeEntities=function(n){return t.string.contains(n,"&")?"document"in t.global?t.string.unescapeEntitiesUsingDom_(n):t.string.unescapePureXmlEntities_(n):n},t.string.unescapeEntitiesUsingDom_=function(n){var i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=document.createElement("div");return n.replace(t.string.HTML_ENTITY_PATTERN_,function(n,t){var u=i[n],f;return u?u:("#"==t.charAt(0)&&(f=Number("0"+t.substr(1)),isNaN(f)||(u=String.fromCharCode(f))),u||(r.innerHTML=n+" ",u=r.firstChild.nodeValue.slice(0,-1)),i[n]=u)})},t.string.unescapePureXmlEntities_=function(n){return n.replace(/&([^;]+);/g,function(n,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var i=Number("0"+t.substr(1));if(!isNaN(i))return String.fromCharCode(i)}return n}})},t.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,t.string.whitespaceEscape=function(n,i){return t.string.newLineToBr(n.replace(/  /g," &#160;"),i)},t.string.stripQuotes=function(n,t){for(var u,r=t.length,i=0;i<r;i++)if(u=1==r?t:t.charAt(i),n.charAt(0)==u&&n.charAt(n.length-1)==u)return n.substring(1,n.length-1);return n},t.string.truncate=function(n,i,r){return r&&(n=t.string.unescapeEntities(n)),n.length>i&&(n=n.substring(0,i-3)+"..."),r&&(n=t.string.htmlEscape(n)),n},t.string.truncateMiddle=function(n,i,r,u){if(r&&(n=t.string.unescapeEntities(n)),u&&n.length>i){u>i&&(u=i);var f=n.length-u;n=n.substring(0,i-u)+"..."+n.substring(f)}else n.length>i&&(u=Math.floor(i/2),f=n.length-u,n=n.substring(0,u+i%2)+"..."+n.substring(f));return r&&(n=t.string.htmlEscape(n)),n},t.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0b":"\\x0B",'"':'\\"',"\\":"\\\\"},t.string.jsEscapeCache_={"'":"\\'"},t.string.quote=function(n){var u,i,r,f;if(n=String(n),n.quote)return n.quote();for(u=['"'],i=0;i<n.length;i++)r=n.charAt(i),f=r.charCodeAt(0),u[i+1]=t.string.specialEscapeChars_[r]||(31<f&&127>f?r:t.string.escapeChar(r));return u.push('"'),u.join("")},t.string.escapeString=function(n){for(var r=[],i=0;i<n.length;i++)r[i]=t.string.escapeChar(n.charAt(i));return r.join("")},t.string.escapeChar=function(n){if(n in t.string.jsEscapeCache_)return t.string.jsEscapeCache_[n];if(n in t.string.specialEscapeChars_)return t.string.jsEscapeCache_[n]=t.string.specialEscapeChars_[n];var i=n,r=n.charCodeAt(0);return 31<r&&127>r?i=n:(256>r?(i="\\x",16>r||256<r)&&(i+="0"):(i="\\u",4096>r&&(i+="0")),i+=r.toString(16).toUpperCase()),t.string.jsEscapeCache_[n]=i},t.string.toMap=function(n){for(var i={},t=0;t<n.length;t++)i[n.charAt(t)]=!0;return i},t.string.contains=function(n,t){return-1!=n.indexOf(t)},t.string.countOf=function(n,t){return n&&t?n.split(t).length-1:0},t.string.removeAt=function(n,t,i){var r=n;return 0<=t&&t<n.length&&0<i&&(r=n.substr(0,t)+n.substr(t+i,n.length-t-i)),r},t.string.remove=function(n,i){var r=RegExp(t.string.regExpEscape(i),"");return n.replace(r,"")},t.string.removeAll=function(n,i){var r=RegExp(t.string.regExpEscape(i),"g");return n.replace(r,"")},t.string.regExpEscape=function(n){return String(n).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},t.string.repeat=function(n,t){return Array(t+1).join(n)},t.string.padNumber=function(n,i,r){return n=t.isDef(r)?n.toFixed(r):String(n),r=n.indexOf("."),-1==r&&(r=n.length),t.string.repeat("0",Math.max(0,i-r))+n},t.string.makeSafe=function(n){return null==n?"":String(n)},t.string.buildString=function(){return Array.prototype.join.call(arguments,"")},t.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t.now()).toString(36)},t.string.compareVersions=function(n,i){for(var r,u,f=0,o=t.string.trim(String(n)).split("."),s=t.string.trim(String(i)).split("."),h=Math.max(o.length,s.length),e=0;0==f&&e<h;e++){var c=o[e]||"",l=s[e]||"",a=RegExp("(\\d*)(\\D*)","g"),v=RegExp("(\\d*)(\\D*)","g");do{if(r=a.exec(c)||["","",""],u=v.exec(l)||["","",""],0==r[0].length&&0==u[0].length)break;var f=0==r[1].length?0:parseInt(r[1],10),y=0==u[1].length?0:parseInt(u[1],10),f=t.string.compareElements_(f,y)||t.string.compareElements_(0==r[2].length,0==u[2].length)||t.string.compareElements_(r[2],u[2])}while(0==f)}return f},t.string.compareElements_=function(n,t){return n<t?-1:n>t?1:0},t.string.HASHCODE_MAX_=4294967296,t.string.hashCode=function(n){for(var i=0,r=0;r<n.length;++r)i=31*i+n.charCodeAt(r),i%=t.string.HASHCODE_MAX_;return i},t.string.uniqueStringCounter_=2147483648*Math.random()|0,t.string.createUniqueString=function(){return"goog_"+t.string.uniqueStringCounter_++},t.string.toNumber=function(n){var i=Number(n);return 0==i&&t.string.isEmpty(n)?NaN:i},t.string.isLowerCamelCase=function(n){return/^[a-z]+([A-Z][a-z]*)*$/.test(n)},t.string.isUpperCamelCase=function(n){return/^([A-Z][a-z]*)+$/.test(n)},t.string.toCamelCase=function(n){return String(n).replace(/\-([a-z])/g,function(n,t){return t.toUpperCase()})},t.string.toSelectorCase=function(n){return String(n).replace(/([A-Z])/g,"-$1").toLowerCase()},t.string.toTitleCase=function(n,i){var r=t.isString(i)?t.string.regExpEscape(i):"\\s";return n.replace(RegExp("(^"+(r?"|["+r+"]+":"")+")([a-z])","g"),function(n,t,i){return t+i.toUpperCase()})},t.string.parseInt=function(n){return isFinite(n)&&(n=String(n)),t.isString(n)?/^\s*-?0x/i.test(n)?parseInt(n,16):parseInt(n,10):NaN},t.string.splitLimit=function(n,t,i){n=n.split(t);for(var r=[];0<i&&n.length;)r.push(n.shift()),i--;return n.length&&r.push(n.join(t)),r},t.debug={},t.debug.Error=function(n){Error.captureStackTrace?Error.captureStackTrace(this,t.debug.Error):this.stack=Error().stack||"";n&&(this.message=String(n))},t.inherits(t.debug.Error,Error),t.debug.Error.prototype.name="CustomError",t.asserts={},t.asserts.ENABLE_ASSERTS=t.DEBUG,t.asserts.AssertionError=function(n,i){i.unshift(n);t.debug.Error.call(this,t.string.subs.apply(null,i));i.shift();this.messagePattern=n},t.inherits(t.asserts.AssertionError,t.debug.Error),t.asserts.AssertionError.prototype.name="AssertionError",t.asserts.doAssertFailure_=function(n,i,r,u){var f="Assertion failed",e;r?(f=f+(": "+r),e=u):n&&(f+=": "+n,e=i);throw new t.asserts.AssertionError(""+f,e||[]);},t.asserts.assert=function(n,i){return t.asserts.ENABLE_ASSERTS&&!n&&t.asserts.doAssertFailure_("",null,i,Array.prototype.slice.call(arguments,2)),n},t.asserts.fail=function(n){if(t.asserts.ENABLE_ASSERTS)throw new t.asserts.AssertionError("Failure"+(n?": "+n:""),Array.prototype.slice.call(arguments,1));},t.asserts.assertNumber=function(n,i){return t.asserts.ENABLE_ASSERTS&&!t.isNumber(n)&&t.asserts.doAssertFailure_("Expected number but got %s: %s.",[t.typeOf(n),n],i,Array.prototype.slice.call(arguments,2)),n},t.asserts.assertString=function(n,i){return t.asserts.ENABLE_ASSERTS&&!t.isString(n)&&t.asserts.doAssertFailure_("Expected string but got %s: %s.",[t.typeOf(n),n],i,Array.prototype.slice.call(arguments,2)),n},t.asserts.assertFunction=function(n,i){return t.asserts.ENABLE_ASSERTS&&!t.isFunction(n)&&t.asserts.doAssertFailure_("Expected function but got %s: %s.",[t.typeOf(n),n],i,Array.prototype.slice.call(arguments,2)),n},t.asserts.assertObject=function(n,i){return t.asserts.ENABLE_ASSERTS&&!t.isObject(n)&&t.asserts.doAssertFailure_("Expected object but got %s: %s.",[t.typeOf(n),n],i,Array.prototype.slice.call(arguments,2)),n},t.asserts.assertArray=function(n,i){return t.asserts.ENABLE_ASSERTS&&!t.isArray(n)&&t.asserts.doAssertFailure_("Expected array but got %s: %s.",[t.typeOf(n),n],i,Array.prototype.slice.call(arguments,2)),n},t.asserts.assertBoolean=function(n,i){return t.asserts.ENABLE_ASSERTS&&!t.isBoolean(n)&&t.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[t.typeOf(n),n],i,Array.prototype.slice.call(arguments,2)),n},t.asserts.assertInstanceof=function(n,i,r){return!t.asserts.ENABLE_ASSERTS||n instanceof i||t.asserts.doAssertFailure_("instanceof check failed.",null,r,Array.prototype.slice.call(arguments,3)),n},t.asserts.assertObjectPrototypeIsIntact=function(){for(var n in Object.prototype)t.asserts.fail(n+" should not be enumerable in Object.prototype.")},n=n||{},n.configure=function(i){n.output=i.output||n.output;t.asserts.assert("function"==typeof n.output);n.debugout=i.debugout||n.debugout;t.asserts.assert("function"==typeof n.debugout);n.read=i.read||n.read;t.asserts.assert("function"==typeof n.read);n.timeoutMsg=i.timeoutMsg||n.timeoutMsg;t.asserts.assert("function"==typeof n.timeoutMsg);t.exportSymbol("Sk.timeoutMsg",n.timeoutMsg);n.sysargv=i.sysargv||n.sysargv;t.asserts.assert(t.isArrayLike(n.sysargv));n.python3=i.python3||n.python3;t.asserts.assert("boolean"==typeof n.python3);n.inputfun=i.inputfun||n.inputfun;t.asserts.assert("function"==typeof n.inputfun);n.throwSystemExit=i.systemexit||!1;t.asserts.assert("boolean"==typeof n.throwSystemExit);n.retainGlobals=i.retainglobals||!1;t.asserts.assert("boolean"==typeof n.throwSystemExit);i.syspath&&(n.syspath=i.syspath,t.asserts.assert(t.isArrayLike(n.syspath)),n.realsyspath=void 0,n.sysmodules=new n.builtin.dict([]));n.misceval.softspace_=!1},t.exportSymbol("Sk.configure",n.configure),n.timeoutMsg=function(){return"Program exceeded run time limit."},t.exportSymbol("Sk.timeoutMsg",n.timeoutMsg),n.output=function(){},n.read=function(){throw"Sk.read has not been implemented";},n.sysargv=[],n.getSysArgv=function(){return n.sysargv},t.exportSymbol("Sk.getSysArgv",n.getSysArgv),n.syspath=[],n.inBrowser=void 0!==t.global.document,n.debugout=function(){},function(){void 0!==t.global.write?n.output=t.global.write:void 0!==t.global.console&&void 0!==t.global.console.log?n.output=function(n){t.global.console.log(n)}:void 0!==t.global.print&&(n.output=t.global.print);void 0!==t.global.print&&(n.debugout=t.global.print)}(),n.inBrowser||(t.global.CLOSURE_IMPORT_SCRIPT=function(n){return t.global.eval(t.global.read("support/closure-library/closure/goog/"+n)),!0}),n.python3=!1,n.inputfun=function(n){return prompt(n)},t.exportSymbol("Sk.python3",n.python3),t.exportSymbol("Sk.inputfun",n.inputfun),n.builtin={},n.builtin.range=function(t,i,r){var f=[],u;if(n.builtin.pyCheckArgs("range",arguments,1,3),n.builtin.pyCheckType("start","integer",n.builtin.checkInt(t)),void 0!==i&&n.builtin.pyCheckType("stop","integer",n.builtin.checkInt(i)),void 0!==r&&n.builtin.pyCheckType("step","integer",n.builtin.checkInt(r)),t=n.builtin.asnum$(t),i=n.builtin.asnum$(i),r=n.builtin.asnum$(r),void 0===i&&void 0===r?(i=t,t=0,r=1):void 0===r&&(r=1),0===r)throw new n.builtin.ValueError("range() step argument must not be zero");if(0<r)for(u=t;u<i;u+=r)f.push(new n.builtin.nmber(u,n.builtin.nmber.int$));else for(u=t;u>i;u+=r)f.push(new n.builtin.nmber(u,n.builtin.nmber.int$));return new n.builtin.list(f)},n.builtin.asnum$=function(t){return void 0===t||null===t?t:t.constructor===n.builtin.none?null:t.constructor===n.builtin.bool?t.v?1:0:"number"==typeof t?t:"string"==typeof t?t:t.constructor===n.builtin.nmber?t.v:t.constructor===n.builtin.lng?t.cantBeInt()?t.str$(10,!0):t.toInt$():t.constructor===n.builtin.biginteger?0<t.trueCompare(new n.builtin.biginteger(n.builtin.lng.threshold$))||0>t.trueCompare(new n.builtin.biginteger(-n.builtin.lng.threshold$))?t.toString():t.intValue():t},t.exportSymbol("Sk.builtin.asnum$",n.builtin.asnum$),n.builtin.assk$=function(t,i){return new n.builtin.nmber(t,i)},t.exportSymbol("Sk.builtin.assk$",n.builtin.assk$),n.builtin.asnum$nofloat=function(t){if(void 0===t||null===t)return t;if(t.constructor===n.builtin.none)return null;if(t.constructor===n.builtin.bool)return t.v?1:0;if("number"==typeof t&&(t=t.toString()),t.constructor===n.builtin.nmber&&(t=t.v.toString()),t.constructor===n.builtin.lng&&(t=t.str$(10,!0)),t.constructor===n.builtin.biginteger&&(t=t.toString()),0>t.indexOf(".")&&0>t.indexOf("e")&&0>t.indexOf("E"))return t;var r=0,i;if(0<=t.indexOf("e")?(i=t.substr(0,t.indexOf("e")),r=t.substr(t.indexOf("e")+1)):0<=t.indexOf("E")?(i=t.substr(0,t.indexOf("e")),r=t.substr(t.indexOf("E")+1)):i=t,r=parseInt(r,10),t=i.indexOf("."),0>t){if(0<=r){for(;0<r--;)i+="0";return i}return i.length>-r?i.substr(0,i.length+r):0}for(i=0==t?i.substr(1):t<i.length?i.substr(0,t)+i.substr(t+1):i.substr(0,t),t+=r;t>i.length;)i+="0";return 0>=t?0:i.substr(0,t)},t.exportSymbol("Sk.builtin.asnum$nofloat",n.builtin.asnum$nofloat),n.builtin.round=function(t,i){var r;if(n.builtin.pyCheckArgs("round",arguments,1,2),!n.builtin.checkNumber(t))throw new n.builtin.TypeError("a float is required");if(void 0!==i&&!n.misceval.isIndex(i))throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object cannot be interpreted as an index");return void 0===i&&(i=0),t=n.builtin.asnum$(t),i=n.misceval.asIndex(i),r=Math.pow(10,i),r=Math.round(t*r)/r,new n.builtin.nmber(r,n.builtin.nmber.float$)},n.builtin.len=function(t){if(n.builtin.pyCheckArgs("len",arguments,1,1),t.sq$length)return new n.builtin.nmber(t.sq$length(),n.builtin.nmber.int$);if(t.mp$length)return new n.builtin.nmber(t.mp$length(),n.builtin.nmber.int$);if(t.tp$length)return new n.builtin.nmber(t.tp$length(),n.builtin.nmber.int$);throw new n.builtin.TypeError("object of type '"+n.abstr.typeName(t)+"' has no len()");},n.builtin.min=function(){n.builtin.pyCheckArgs("min",arguments,1);for(var t=n.misceval.arrayFromArguments(arguments),r=t[0],i=1;i<t.length;++i)n.misceval.richCompareBool(t[i],r,"Lt")&&(r=t[i]);return r},n.builtin.max=function(){n.builtin.pyCheckArgs("max",arguments,1);for(var t=n.misceval.arrayFromArguments(arguments),r=t[0],i=1;i<t.length;++i)n.misceval.richCompareBool(t[i],r,"Gt")&&(r=t[i]);return r},n.builtin.any=function(t){var r,i;if(n.builtin.pyCheckArgs("any",arguments,1),!n.builtin.checkIterable(t))throw new n.builtin.TypeError("'"+n.abstr.typeName(t)+"' object is not iterable");for(r=t.tp$iter(),i=r.tp$iternext();void 0!==i;i=r.tp$iternext())if(n.misceval.isTrue(i))return n.builtin.bool.true$;return n.builtin.bool.false$},n.builtin.all=function(t){var r,i;if(n.builtin.pyCheckArgs("all",arguments,1),!n.builtin.checkIterable(t))throw new n.builtin.TypeError("'"+n.abstr.typeName(t)+"' object is not iterable");for(r=t.tp$iter(),i=r.tp$iternext();void 0!==i;i=r.tp$iternext())if(!n.misceval.isTrue(i))return n.builtin.bool.false$;return n.builtin.bool.true$},n.builtin.sum=function(t,i){var r,f,u,e;if(n.builtin.pyCheckArgs("sum",arguments,1,2),n.builtin.pyCheckType("iter","iterable",n.builtin.checkIterable(t)),void 0!==i&&n.builtin.checkString(i))throw new n.builtin.TypeError("sum() can't sum strings [use ''.join(seq) instead]");for(r=void 0===i?new n.builtin.nmber(0,n.builtin.nmber.int$):i,f=t.tp$iter(),u=f.tp$iternext();void 0!==u;u=f.tp$iternext())if(u.skType===n.builtin.nmber.float$?(e=!0,r.skType!==n.builtin.nmber.float$&&(r=new n.builtin.nmber(n.builtin.asnum$(r),n.builtin.nmber.float$))):u instanceof n.builtin.lng&&(e||r instanceof n.builtin.lng||(r=new n.builtin.lng(r))),void 0!==r.nb$add(u))r=r.nb$add(u);else throw new n.builtin.TypeError("unsupported operand type(s) for +: '"+n.abstr.typeName(r)+"' and '"+n.abstr.typeName(u)+"'");return r},n.builtin.zip=function(){var r,u,i,f,t,e;if(0===arguments.length)return new n.builtin.list([]);for(r=[],t=0;t<arguments.length;t++)if(arguments[t].tp$iter)r.push(arguments[t].tp$iter());else throw"TypeError: argument "+t+" must support iteration";for(u=[],i=!1;!i;){for(f=[],t=0;t<arguments.length;t++){if(e=r[t].tp$iternext(),void 0===e){i=!0;break}f.push(e)}i||u.push(new n.builtin.tuple(f))}return new n.builtin.list(u)},n.builtin.abs=function(t){return n.builtin.pyCheckArgs("abs",arguments,1,1),n.builtin.pyCheckType("x","number",n.builtin.checkNumber(t)),new n.builtin.nmber(Math.abs(n.builtin.asnum$(t)),t.skType)},n.builtin.ord=function(t){if(n.builtin.pyCheckArgs("ord",arguments,1,1),!n.builtin.checkString(t))throw new n.builtin.TypeError("ord() expected a string of length 1, but "+n.abstr.typeName(t)+" found");if(1!==t.v.length)throw new n.builtin.TypeError("ord() expected a character, but string of length "+t.v.length+" found");return new n.builtin.nmber(t.v.charCodeAt(0),n.builtin.nmber.int$)},n.builtin.chr=function(t){if(n.builtin.pyCheckArgs("chr",arguments,1,1),!n.builtin.checkInt(t))throw new n.builtin.TypeError("an integer is required");if(t=n.builtin.asnum$(t),0>t||255<t)throw new n.builtin.ValueError("chr() arg not in range(256)");return new n.builtin.str(String.fromCharCode(t))},n.builtin.int2str_=function(t,i,r){var u="",f;return t instanceof n.builtin.lng?(f="",2!==i&&(f="L"),u=t.str$(i,!1),t.nb$isnegative()?new n.builtin.str("-"+r+u+f):new n.builtin.str(r+u+f)):(t=n.misceval.asIndex(t),u=t.toString(i),0>t?new n.builtin.str("-"+r+u.slice(1)):new n.builtin.str(r+u))},n.builtin.hex=function(t){if(n.builtin.pyCheckArgs("hex",arguments,1,1),!n.misceval.isIndex(t))throw new n.builtin.TypeError("hex() argument can't be converted to hex");return n.builtin.int2str_(t,16,"0x")},n.builtin.oct=function(t){if(n.builtin.pyCheckArgs("oct",arguments,1,1),!n.misceval.isIndex(t))throw new n.builtin.TypeError("oct() argument can't be converted to hex");return n.builtin.int2str_(t,8,"0")},n.builtin.bin=function(t){if(n.builtin.pyCheckArgs("bin",arguments,1,1),!n.misceval.isIndex(t))throw new n.builtin.TypeError("'"+n.abstr.typeName(t)+"' object can't be interpreted as an index");return n.builtin.int2str_(t,2,"0b")},n.builtin.dir=function(t){n.builtin.pyCheckArgs("dir",arguments,1,1);var e=function(t){var i=null;return-1!==["__bases__","__mro__","__class__"].indexOf(t)?null:(-1!==t.indexOf("$")?i=n.builtin.dir.slotNameToRichName(t):"_"!==t.charAt(t.length-1)?i=t:"_"===t.charAt(0)&&(i=t),i)},f=[],i,r,u,o,s;for(i in t.constructor.prototype)(r=e(i))&&f.push(new n.builtin.str(r));if(t.$d)if(t.$d.tp$iter)for(u=t.$d.tp$iter(),i=u.tp$iternext();void 0!==i;i=u.tp$iternext())r=new n.builtin.str(i),(r=e(r.v))&&f.push(new n.builtin.str(r));else for(r in t.$d)f.push(new n.builtin.str(r));if(u=t.tp$mro)for(u=t.tp$mro,i=0;i<u.v.length;++i)for(s in o=u.v[i],o)o.hasOwnProperty(s)&&(r=e(s))&&f.push(new n.builtin.str(r));return f.sort(function(n,t){return(n.v>t.v)-(n.v<t.v)}),new n.builtin.list(f.filter(function(n,t,i){return n!==i[t+1]}))},n.builtin.dir.slotNameToRichName=function(){},n.builtin.repr=function(t){return n.builtin.pyCheckArgs("repr",arguments,1,1),n.misceval.objectRepr(t)},n.builtin.open=function(t,i,r){if(n.builtin.pyCheckArgs("open",arguments,1,3),void 0===i&&(i=new n.builtin.str("r")),"r"!==i.v&&"rb"!==i.v)throw"todo; haven't implemented non-read opens";return new n.builtin.file(t,i,r)},n.builtin.isinstance=function(t,i){var r,u;if(n.builtin.pyCheckArgs("isinstance",arguments,2,2),!(n.builtin.checkClass(i)||i instanceof n.builtin.tuple))throw new n.builtin.TypeError("isinstance() arg 2 must be a class, type, or tuple of classes and types");if(i===n.builtin.int_.prototype.ob$type)return"number"===t.tp$name&&t.skType===n.builtin.nmber.int$?n.builtin.bool.true$:n.builtin.bool.false$;if(i===n.builtin.float_.prototype.ob$type)return"number"===t.tp$name&&t.skType===n.builtin.nmber.float$?n.builtin.bool.true$:n.builtin.bool.false$;if(i===n.builtin.none.prototype.ob$type)return t instanceof n.builtin.none?n.builtin.bool.true$:n.builtin.bool.false$;if(t.ob$type===i)return n.builtin.bool.true$;if(i instanceof n.builtin.tuple){for(r=0;r<i.v.length;++r)if(n.misceval.isTrue(n.builtin.isinstance(t,i.v[r])))return n.builtin.bool.true$;return n.builtin.bool.false$}return u=function(t,i){if(t===i)return n.builtin.bool.true$;if(void 0===t.$d)return n.builtin.bool.false$;for(var f=t.$d.mp$subscript(n.builtin.type.basesStr_),r=0;r<f.v.length;++r)if(n.misceval.isTrue(u(f.v[r],i)))return n.builtin.bool.true$;return n.builtin.bool.false$},u(t.ob$type,i)},n.builtin.hashCount=0,n.builtin.hash=function(t){if(n.builtin.pyCheckArgs("hash",arguments,1,1),t instanceof Object&&void 0!==t.tp$hash)return t.$savedHash_?t.$savedHash_:(t.$savedHash_=t.tp$hash(),t.$savedHash_);if(t instanceof Object&&void 0!==t.__hash__)return n.misceval.callsim(t.__hash__,t);if(t instanceof n.builtin.bool)return t.v?new n.builtin.nmber(1,n.builtin.nmber.int$):new n.builtin.nmber(0,n.builtin.nmber.int$);if(t instanceof n.builtin.none)return new n.builtin.nmber(0,n.builtin.nmber.int$);if(t instanceof Object)return void 0===t.__id&&(n.builtin.hashCount+=1,t.__id=n.builtin.hashCount),new n.builtin.nmber(t.__id,n.builtin.nmber.int$);if("number"==typeof t||null===t||!0===t||!1===t)throw new n.builtin.TypeError("unsupported Javascript type");return new n.builtin.str(typeof t+" "+String(t))},n.builtin.getattr=function(t,i,r){if(n.builtin.pyCheckArgs("getattr",arguments,2,3),!n.builtin.checkString(i))throw new n.builtin.TypeError("attribute name must be string");var u=t.tp$getattr(i.v);if(void 0===u){if(void 0!==r)return r;throw new n.builtin.AttributeError("'"+n.abstr.typeName(t)+"' object has no attribute '"+i.v+"'");}return u},n.builtin.raw_input=function(t){return t=t?t.v:"",t=n.inputfun(t),new n.builtin.str(t)},n.builtin.input=n.builtin.raw_input,n.builtin.jseval=function(n){t.global.eval(n)},n.builtin.jsmillis=function(){return(new Date).valueOf()},n.builtin.superbi=function(){throw new n.builtin.NotImplementedError("super is not yet implemented, please report your use case as a github issue.");},n.builtin.eval_=function(){throw new n.builtin.NotImplementedError("eval is not yet implemented");},n.builtin.map=function(t,i){var f,u,r,e,o,s;if(n.builtin.pyCheckArgs("map",arguments,2),2<arguments.length){f=[];u=Array.prototype.slice.apply(arguments).slice(1);for(r in u){if(!n.builtin.checkIterable(u[r]))throw f=parseInt(r,10)+2,new n.builtin.TypeError("argument "+f+" to map() must support iteration");u[r]=u[r].tp$iter()}for(;;){e=[];o=0;for(r in u)s=u[r].tp$iternext(),void 0===s?(e.push(n.builtin.none.none$),o++):e.push(s);if(o!==u.length)f.push(e);else break}i=new n.builtin.list(f)}if(!n.builtin.checkIterable(i))throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object is not iterable");for(f=[],u=i.tp$iter(),r=u.tp$iternext();void 0!==r;r=u.tp$iternext())t===n.builtin.none.none$?(r instanceof Array&&(r=new n.builtin.tuple(r)),f.push(r)):(r instanceof Array||(r=[r]),f.push(n.misceval.apply(t,void 0,void 0,void 0,r)));return new n.builtin.list(f)},n.builtin.reduce=function(t,i,r){var u,f,e;if(n.builtin.pyCheckArgs("reduce",arguments,2,3),!n.builtin.checkIterable(i))throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object is not iterable");if(u=i.tp$iter(),void 0===r&&(r=u.tp$iternext(),void 0===r))throw new n.builtin.TypeError("reduce() of empty sequence with no initial value");for(f=r,e=u.tp$iternext();void 0!==e;e=u.tp$iternext())f=n.misceval.callsim(t,f,e);return f},n.builtin.filter=function(t,i){var r,e,u,s;if(n.builtin.pyCheckArgs("filter",arguments,2,2),!n.builtin.checkIterable(i))throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object is not iterable");var r=function(){return[]},o=function(n,t){return n.push(t),n},f=function(t){return new n.builtin.list(t)};for(i.__class__===n.builtin.str?(r=function(){return new n.builtin.str("")},o=function(n,t){return n.sq$concat(t)},f=function(n){return n}):i.__class__===n.builtin.tuple&&(f=function(t){return new n.builtin.tuple(t)}),r=r(),e=i.tp$iter(),u=e.tp$iternext();void 0!==u;u=e.tp$iternext())s=t===n.builtin.none.none$?n.builtin.bool(u):n.misceval.callsim(t,u),n.misceval.isTrue(s)&&(r=o(r,u));return f(r)},n.builtin.hasattr=function(t,i){if(n.builtin.pyCheckArgs("hasattr",arguments,2,2),!n.builtin.checkString(i))throw new n.builtin.TypeError("hasattr(): attribute name must be string");if(t.tp$getattr)return t.tp$getattr(i.v)?n.builtin.bool.true$:n.builtin.bool.false$;throw new n.builtin.AttributeError("Object has no tp$getattr method");},n.builtin.pow=function(t,i,r){n.builtin.pyCheckArgs("pow",arguments,2,3);r instanceof n.builtin.none&&(r=void 0);var u=n.builtin.asnum$(t),f=n.builtin.asnum$(i);if(n.builtin.asnum$(r),!n.builtin.checkNumber(t)||!n.builtin.checkNumber(i)){if(void 0===r)throw new n.builtin.TypeError("unsupported operand type(s) for pow(): '"+n.abstr.typeName(t)+"' and '"+n.abstr.typeName(i)+"'");throw new n.builtin.TypeError("unsupported operand type(s) for pow(): '"+n.abstr.typeName(t)+"', '"+n.abstr.typeName(i)+"', '"+n.abstr.typeName(r)+"'");}if(0>u&&i.skType===n.builtin.nmber.float$)throw new n.builtin.ValueError("negative number cannot be raised to a fractional power");if(void 0===r)return u=Math.pow(u,f),t.skType===n.builtin.nmber.float$||i.skType===n.builtin.nmber.float$||0>f?new n.builtin.nmber(u,n.builtin.nmber.float$):t instanceof n.builtin.lng||i instanceof n.builtin.lng?new n.builtin.lng(u):new n.builtin.nmber(u,n.builtin.nmber.int$);if(!n.builtin.checkInt(t)||!n.builtin.checkInt(i)||!n.builtin.checkInt(r))throw new n.builtin.TypeError("pow() 3rd argument not allowed unless all arguments are integers");if(0>f)throw new n.builtin.TypeError("pow() 2nd argument cannot be negative when 3rd argument specified");return t instanceof n.builtin.lng||i instanceof n.builtin.lng||r instanceof n.builtin.lng||Infinity===Math.pow(u,f)?(t=new n.builtin.lng(t),t.nb$power(i,r)):new n.builtin.nmber(Math.pow(u,f),n.builtin.nmber.int$).nb$remainder(r)},n.builtin.quit=function(t){t=new n.builtin.str(t).v;throw new n.builtin.SystemExit(t);},n.builtin.sorted=function(t,i,r,u){var o,f,e;if(void 0===r||r instanceof n.builtin.none)i instanceof n.builtin.none||void 0===i||(o=i),t=new n.builtin.list(t);else{for(o=i instanceof n.builtin.none||void 0===i?function(t,i){return n.misceval.richCompareBool(t[0],i[0],"Lt")?new n.builtin.nmber(-1,n.builtin.nmber.int$):new n.builtin.nmber(0,n.builtin.nmber.int$)}:function(t,r){return n.misceval.callsim(i,t[0],r[0])},t=t.tp$iter(),f=t.tp$iternext(),e=[];void 0!==f;)e.push([n.misceval.callsim(r,f),f]),f=t.tp$iternext();t=new n.builtin.list(e)}if(void 0!==o?t.list_sort_(t,o):t.list_sort_(t),u&&t.list_reverse_(t),void 0!==r&&!(r instanceof n.builtin.none)){for(t=t.tp$iter(),f=t.tp$iternext(),e=[];void 0!==f;)e.push(f[1]),f=t.tp$iternext();t=new n.builtin.list(e)}return t},n.builtin.sorted.co_varnames=["cmp","key","reverse"],n.builtin.sorted.$defaults=[n.builtin.none,n.builtin.none,!1],n.builtin.sorted.co_numargs=4,n.builtin.issubclass=function(t,i){var u,r;if(n.builtin.pyCheckArgs("issubclass",arguments,2,2),!(n.builtin.checkClass(i)||i instanceof n.builtin.tuple))throw new n.builtin.TypeError("issubclass() arg 2 must be a classinfo, type, or tuple of classes and types");if(i===n.builtin.int_.prototype.ob$type||i===n.builtin.float_.prototype.ob$type||i===n.builtin.none.prototype.ob$type||t.ob$type===i)return!0;if(u=function(t,i){var f,r;if(t===i)return!0;if(void 0!==t.$d&&t.$d.mp$subscript)f=t.$d.mp$subscript(n.builtin.type.basesStr_);else return!1;for(r=0;r<f.v.length;++r)if(u(f.v[r],i))return!0;return!1},i instanceof n.builtin.tuple){for(r=0;r<i.v.length;++r)if(n.builtin.issubclass(t,i.v[r]))return!0;return!1}return u(t,i)},n.builtin.globals=function(){var t=new n.builtin.dict([]);for(var i in n.globals)t.mp$ass_subscript(new n.builtin.str(i),n.globals[i]);return t},n.builtin.bytearray=function(){throw new n.builtin.NotImplementedError("bytearray is not yet implemented");},n.builtin.callable=function(){throw new n.builtin.NotImplementedError("callable is not yet implemented");},n.builtin.complex=function(){throw new n.builtin.NotImplementedError("complex is not yet implemented");},n.builtin.delattr=function(){throw new n.builtin.NotImplementedError("delattr is not yet implemented");},n.builtin.divmod=function(){throw new n.builtin.NotImplementedError("divmod is not yet implemented");},n.builtin.execfile=function(){throw new n.builtin.NotImplementedError("execfile is not yet implemented");},n.builtin.format=function(){throw new n.builtin.NotImplementedError("format is not yet implemented");},n.builtin.frozenset=function(){throw new n.builtin.NotImplementedError("frozenset is not yet implemented");},n.builtin.help=function(){throw new n.builtin.NotImplementedError("help is not yet implemented");},n.builtin.iter=function(){throw new n.builtin.NotImplementedError("iter is not yet implemented");},n.builtin.locals=function(){throw new n.builtin.NotImplementedError("locals is not yet implemented");},n.builtin.memoryview=function(){throw new n.builtin.NotImplementedError("memoryview is not yet implemented");},n.builtin.next_=function(){throw new n.builtin.NotImplementedError("next is not yet implemented");},n.builtin.property=function(){throw new n.builtin.NotImplementedError("property is not yet implemented");},n.builtin.reload=function(){throw new n.builtin.NotImplementedError("reload is not yet implemented");},n.builtin.reversed=function(){throw new n.builtin.NotImplementedError("reversed is not yet implemented");},n.builtin.unichr=function(){throw new n.builtin.NotImplementedError("unichr is not yet implemented");},n.builtin.vars=function(){throw new n.builtin.NotImplementedError("vars is not yet implemented");},n.builtin.xrange=n.builtin.range,n.builtin.apply_=function(){throw new n.builtin.NotImplementedError("apply is not yet implemented");},n.builtin.buffer=function(){throw new n.builtin.NotImplementedError("buffer is not yet implemented");},n.builtin.coerce=function(){throw new n.builtin.NotImplementedError("coerce is not yet implemented");},n.builtin.intern=function(){throw new n.builtin.NotImplementedError("intern is not yet implemented");},n.builtin.Exception=function(t){t=Array.prototype.slice.call(arguments);for(var i=0;i<t.length;++i)"string"==typeof t[i]&&(t[i]=new n.builtin.str(t[i]));this.args=new n.builtin.tuple(t);this.filename=n.currFilename?n.currFilename:3<=this.args.sq$length()?this.args.v[1].v?this.args.v[1].v:"<unknown>":"<unknown>";this.lineno=3<=this.args.sq$length()?this.args.v[2]:0<n.currLineNo?n.currLineNo:"<unknown>";this.colno=0<n.currColNo?n.currColNo:"<unknown>"},n.builtin.Exception.prototype.tp$name="Exception",n.builtin.Exception.prototype.tp$str=function(){var t,i;if(t=""+this.tp$name,this.args&&(t+=": "+(0<this.args.v.length?this.args.v[0].v:"")),t+=" on line "+this.lineno,4<this.args.v.length){for(t+="\n"+this.args.v[4].v+"\n",i=0;i<this.args.v[3];++i)t+=" ";t+="^\n"}return new n.builtin.str(t)},n.builtin.Exception.prototype.toString=function(){return this.tp$str().v},t.exportSymbol("Sk.builtin.Exception",n.builtin.Exception),n.builtin.AssertionError=function(){if(!(this instanceof n.builtin.AssertionError)){var t=Object.create(n.builtin.AssertionError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.AssertionError,n.builtin.Exception),n.builtin.AssertionError.prototype.tp$name="AssertionError",t.exportSymbol("Sk.builtin.AssertionError",n.builtin.AssertionError),n.builtin.AttributeError=function(){if(!(this instanceof n.builtin.AttributeError)){var t=Object.create(n.builtin.AttributeError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.AttributeError,n.builtin.Exception),n.builtin.AttributeError.prototype.tp$name="AttributeError",n.builtin.ImportError=function(){if(!(this instanceof n.builtin.ImportError)){var t=Object.create(n.builtin.ImportError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.ImportError,n.builtin.Exception),n.builtin.ImportError.prototype.tp$name="ImportError",n.builtin.IndentationError=function(){if(!(this instanceof n.builtin.IndentationError)){var t=Object.create(n.builtin.IndentationError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.IndentationError,n.builtin.Exception),n.builtin.IndentationError.prototype.tp$name="IndentationError",n.builtin.IndexError=function(){if(!(this instanceof n.builtin.IndexError)){var t=Object.create(n.builtin.IndexError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.IndexError,n.builtin.Exception),n.builtin.IndexError.prototype.tp$name="IndexError",n.builtin.KeyError=function(){if(!(this instanceof n.builtin.KeyError)){var t=Object.create(n.builtin.KeyError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.KeyError,n.builtin.Exception),n.builtin.KeyError.prototype.tp$name="KeyError",n.builtin.NameError=function(){if(!(this instanceof n.builtin.NameError)){var t=Object.create(n.builtin.NameError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.NameError,n.builtin.Exception),n.builtin.NameError.prototype.tp$name="NameError",n.builtin.OverflowError=function(){if(!(this instanceof n.builtin.OverflowError)){var t=Object.create(n.builtin.OverflowError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.OverflowError,n.builtin.Exception),n.builtin.OverflowError.prototype.tp$name="OverflowError",n.builtin.ParseError=function(){if(!(this instanceof n.builtin.ParseError)){var t=Object.create(n.builtin.ParseError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.ParseError,n.builtin.Exception),n.builtin.ParseError.prototype.tp$name="ParseError",n.builtin.SystemExit=function(){if(!(this instanceof n.builtin.SystemExit)){var t=Object.create(n.builtin.SystemExit.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.SystemExit,n.builtin.Exception),n.builtin.SystemExit.prototype.tp$name="SystemExit",t.exportSymbol("Sk.builtin.SystemExit",n.builtin.SystemExit),n.builtin.SyntaxError=function(){if(!(this instanceof n.builtin.SyntaxError)){var t=Object.create(n.builtin.SyntaxError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.SyntaxError,n.builtin.Exception),n.builtin.SyntaxError.prototype.tp$name="SyntaxError",n.builtin.TokenError=function(){if(!(this instanceof n.builtin.TokenError)){var t=Object.create(n.builtin.TokenError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.TokenError,n.builtin.Exception),n.builtin.TokenError.prototype.tp$name="TokenError",n.builtin.TypeError=function(){if(!(this instanceof n.builtin.TypeError)){var t=Object.create(n.builtin.TypeError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.TypeError,n.builtin.Exception),n.builtin.TypeError.prototype.tp$name="TypeError",t.exportSymbol("Sk.builtin.TypeError",n.builtin.TypeError),n.builtin.ValueError=function(){if(!(this instanceof n.builtin.ValueError)){var t=Object.create(n.builtin.ValueError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.ValueError,n.builtin.Exception),n.builtin.ValueError.prototype.tp$name="ValueError",t.exportSymbol("Sk.builtin.ValueError",n.builtin.ValueError),n.builtin.ZeroDivisionError=function(){if(!(this instanceof n.builtin.ZeroDivisionError)){var t=Object.create(n.builtin.ZeroDivisionError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.ZeroDivisionError,n.builtin.Exception),n.builtin.ZeroDivisionError.prototype.tp$name="ZeroDivisionError",n.builtin.TimeLimitError=function(){if(!(this instanceof n.builtin.TimeLimitError)){var t=Object.create(n.builtin.TimeLimitError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.TimeLimitError,n.builtin.Exception),n.builtin.TimeLimitError.prototype.tp$name="TimeLimitError",t.exportSymbol("Sk.builtin.TimeLimitError",n.builtin.TimeLimitError),n.builtin.IOError=function(){if(!(this instanceof n.builtin.IOError)){var t=Object.create(n.builtin.IOError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.IOError,n.builtin.Exception),n.builtin.IOError.prototype.tp$name="IOError",t.exportSymbol("Sk.builtin.IOError",n.builtin.IOError),n.builtin.NotImplementedError=function(){if(!(this instanceof n.builtin.NotImplementedError)){var t=Object.create(n.builtin.NotImplementedError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.NotImplementedError,n.builtin.Exception),n.builtin.NotImplementedError.prototype.tp$name="NotImplementedError",t.exportSymbol("Sk.builtin.NotImplementedError",n.builtin.NotImplementedError),n.builtin.NegativePowerError=function(){if(!(this instanceof n.builtin.NegativePowerError)){var t=Object.create(n.builtin.NegativePowerError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.NegativePowerError,n.builtin.Exception),n.builtin.NegativePowerError.prototype.tp$name="NegativePowerError",t.exportSymbol("Sk.builtin.NegativePowerError",n.builtin.NegativePowerError),n.builtin.OperationError=function(){if(!(this instanceof n.builtin.OperationError)){var t=Object.create(n.builtin.OperationError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.OperationError,n.builtin.Exception),n.builtin.OperationError.prototype.tp$name="OperationError",t.exportSymbol("Sk.builtin.OperationError",n.builtin.OperationError),n.builtin.SystemError=function(){if(!(this instanceof n.builtin.SystemError)){var t=Object.create(n.builtin.SystemError.prototype);return t.constructor.apply(t,arguments),t}n.builtin.Exception.apply(this,arguments)},t.inherits(n.builtin.SystemError,n.builtin.Exception),n.builtin.SystemError.prototype.tp$name="SystemError",t.exportSymbol("Sk.builtin.SystemError",n.builtin.SystemError),n.currLineNo=-1,n.currColNo=-1,n.currFilename="",t.exportSymbol("Sk",n),t.exportProperty(n,"currLineNo",n.currLineNo),t.exportProperty(n,"currColNo",n.currColNo),t.exportProperty(n,"currFilename",n.currFilename),n.builtin.type=function(i,r,u){if(void 0===r&&void 0===u)return i.constructor===n.builtin.nmber?i.skType===n.builtin.nmber.int$?n.builtin.int_.prototype.ob$type:n.builtin.float_.prototype.ob$type:i.ob$type;var f=function(t,i,r,u){if(!(this instanceof f))return new f(t,i,r,u);u=u||[];this.$d=new n.builtin.dict([]);var e=n.builtin.type.typeLookup(this.ob$type,"__init__");return void 0!==e&&(u.unshift(this),n.misceval.apply(e,t,i,r,u)),this};for(var e in u)f.prototype[e]=u[e],f[e]=u[e];return f.__class__=f,f.sk$klass=!0,f.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr,f.prototype.tp$setattr=n.builtin.object.prototype.GenericSetAttr,f.prototype.tp$descr_get=function(){t.asserts.fail("in type tp$descr_get")},f.prototype.$r=function(){var t=this.tp$getattr("__repr__"),r;return void 0!==t?n.misceval.apply(t,void 0,void 0,void 0,[]):(t=u.__module__,r="",t&&(r=t.v+"."),new n.builtin.str("<"+r+i+" object>"))},f.prototype.tp$str=function(){var t=this.tp$getattr("__str__");return void 0!==t?n.misceval.apply(t,void 0,void 0,void 0,[]):this.$r()},f.prototype.tp$length=function(){var t=this.tp$getattr("__len__");if(void 0!==t)return n.misceval.apply(t,void 0,void 0,void 0,[]);t=n.abstr.typeName(this);throw new n.builtin.AttributeError(t+" instance has no attribute '__len__'");},f.prototype.tp$call=function(t,i){var r=this.tp$getattr("__call__");if(r)return n.misceval.apply(r,void 0,void 0,i,t);throw new n.builtin.TypeError("'"+n.abstr.typeName(this)+"' object is not callable");},f.prototype.tp$iter=function(){var t=this.tp$getattr("__iter__"),i=n.abstr.typeName(this);if(t)return n.misceval.callsim(t);throw new n.builtin.TypeError("'"+i+"' object is not iterable");},f.prototype.tp$iternext=function(){var i=this.tp$getattr("next");return t.asserts.assert(void 0!==i,"iter() should have caught this"),n.misceval.callsim(i)},f.prototype.tp$getitem=function(t){var i=this.tp$getattr("__getitem__");if(void 0!==i)return n.misceval.apply(i,void 0,void 0,void 0,[t]);throw new n.builtin.TypeError("'"+n.abstr.typeName(this)+"' object does not support indexing");},f.prototype.tp$setitem=function(t,i){var r=this.tp$getattr("__setitem__");if(void 0!==r)return n.misceval.apply(r,void 0,void 0,void 0,[t,i]);throw new n.builtin.TypeError("'"+n.abstr.typeName(this)+"' object does not support item assignment");},f.prototype.tp$name=i,r&&(f.$d=new n.builtin.dict([]),f.$d.mp$ass_subscript(n.builtin.type.basesStr_,new n.builtin.tuple(r)),r=n.builtin.type.buildMRO(f),f.$d.mp$ass_subscript(n.builtin.type.mroStr_,r),f.tp$mro=r),f.prototype.ob$type=f,n.builtin.type.makeIntoTypeObj(i,f),f.tp$setattr=n.builtin.type.prototype.tp$setattr,f},n.builtin.type.makeTypeObj=function(t,i){return n.builtin.type.makeIntoTypeObj(t,i),i},n.builtin.type.makeIntoTypeObj=function(i,r){return t.asserts.assert(void 0!==i),t.asserts.assert(void 0!==r),r.ob$type=n.builtin.type,r.tp$name=i,r.$r=function(){var t=r.__module__,u="",i;return t&&(u=t.v+"."),i="class",t||r.sk$klass||(i="type"),new n.builtin.str("<"+i+" '"+u+r.tp$name+"'>")},r.tp$str=void 0,r.tp$getattr=n.builtin.type.prototype.tp$getattr,r.tp$setattr=n.builtin.object.prototype.GenericSetAttr,r.tp$richcompare=n.builtin.type.prototype.tp$richcompare,r.sk$type=!0,r},n.builtin.type.ob$type=n.builtin.type,n.builtin.type.tp$name="type",n.builtin.type.$r=function(){return new n.builtin.str("<type 'type'>")},n.builtin.type.prototype.tp$getattr=function(t){var i=n.builtin.type.typeLookup(this,t),r;return(void 0!==i&&null!==i&&void 0!==i.ob$type&&(r=i.ob$type.tp$descr_get),this.$d&&(t=this.$d.mp$lookup(new n.builtin.str(t)),void 0!==t))?t:r?r.call(i,null,this):void 0!==i?i:void 0},n.builtin.type.prototype.tp$setattr=function(n,t){this[n]=t},n.builtin.type.typeLookup=function(t,i){var f=t.tp$mro,e=new n.builtin.str(i),r,u;if(!f)return t.prototype[i];for(u=0;u<f.v.length;++u){if(r=f.v[u],r.hasOwnProperty(i))return r[i];if(r=r.$d.mp$lookup(e),void 0!==r)return r}},n.builtin.type.mroMerge_=function(t){for(var u,i,r,f,s,e,o=[];;){for(i=0;i<t.length;++i)if(r=t[i],0!==r.length)break;if(i===t.length)return o;for(u=[],i=0;i<t.length;++i)if(r=t[i],0!==r.length){r=r[0];f=0;n:for(;f<t.length;++f)for(s=t[f],e=1;e<s.length;++e)if(s[e]===r)break n;f===t.length&&u.push(r)}if(0===u.length)throw new n.builtin.TypeError("Inconsistent precedences in type hierarchy");for(u=u[0],o.push(u),i=0;i<t.length;++i)r=t[i],0<r.length&&r[0]===u&&r.splice(0,1)}},n.builtin.type.buildMRO_=function(t){var r=[[t]],u,i;for(t=t.$d.mp$subscript(n.builtin.type.basesStr_),i=0;i<t.v.length;++i)r.push(n.builtin.type.buildMRO_(t.v[i]));for(u=[],i=0;i<t.v.length;++i)u.push(t.v[i]);return r.push(u),n.builtin.type.mroMerge_(r)},n.builtin.type.buildMRO=function(t){return new n.builtin.tuple(n.builtin.type.buildMRO_(t))},n.builtin.type.prototype.tp$richcompare=function(t,i){if(t.ob$type==n.builtin.type&&this.$r&&t.$r){var r=this.$r(),u=t.$r();return r.tp$richcompare(u,i)}},n.builtin.object=function(){return(this instanceof n.builtin.object)?(this.$d=new n.builtin.dict([]),this):new n.builtin.object},n.builtin.object.prototype.GenericGetAttr=function(i){var r,f,u;if(t.asserts.assert("string"==typeof i),r=this.ob$type,t.asserts.assert(void 0!==r,"object has no ob$type!"),r=n.builtin.type.typeLookup(r,i),void 0!==r&&null!==r&&void 0!==r.ob$type&&(f=r.ob$type.tp$descr_get),this.$d){if(this.$d.mp$lookup)u=this.$d.mp$lookup(new n.builtin.str(i));else if(this.$d.mp$subscript)try{u=this.$d.mp$subscript(new n.builtin.str(i))}catch(e){u=void 0}else"object"==typeof this.$d&&(u=this.$d[i]);if(void 0!==u)return u}return f?f.call(r,this,this.ob$type):void 0!==r?r:void 0},t.exportSymbol("Sk.builtin.object.prototype.GenericGetAttr",n.builtin.object.prototype.GenericGetAttr),n.builtin.object.prototype.GenericSetAttr=function(i,r){t.asserts.assert("string"==typeof i);this.$d.mp$ass_subscript?this.$d.mp$ass_subscript(new n.builtin.str(i),r):"object"==typeof this.$d&&(this.$d[i]=r)},t.exportSymbol("Sk.builtin.object.prototype.GenericSetAttr",n.builtin.object.prototype.GenericSetAttr),n.builtin.object.prototype.HashNotImplemented=function(){throw new n.builtin.TypeError("unhashable type: '"+n.abstr.typeName(this)+"'");},n.builtin.object.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr,n.builtin.object.prototype.tp$setattr=n.builtin.object.prototype.GenericSetAttr,n.builtin.object.prototype.ob$type=n.builtin.type.makeIntoTypeObj("object",n.builtin.object),n.builtin.none=function(){},n.builtin.none.prototype.ob$type=n.builtin.type.makeIntoTypeObj("NoneType",n.builtin.none),n.builtin.none.prototype.tp$name="NoneType",n.builtin.none.none$=Object.create(n.builtin.none.prototype,{v:{value:null,enumerable:!0}}),t.exportSymbol("Sk.builtin.none",n.builtin.none),n.builtin.bool=function(t){return n.builtin.pyCheckArgs("bool",arguments,1),n.misceval.isTrue(t)?n.builtin.bool.true$:n.builtin.bool.false$},n.builtin.bool.prototype.tp$name="bool",n.builtin.bool.prototype.ob$type=n.builtin.type.makeIntoTypeObj("bool",n.builtin.bool),n.builtin.bool.prototype.$r=function(){return this.v?new n.builtin.str("True"):new n.builtin.str("False")},n.builtin.bool.true$=Object.create(n.builtin.bool.prototype,{v:{value:!0,enumerable:!0}}),n.builtin.bool.false$=Object.create(n.builtin.bool.prototype,{v:{value:!1,enumerable:!0}}),t.exportSymbol("Sk.builtin.bool",n.builtin.bool),n.builtin.pyCheckArgs=function(t,i,r,u,f,e){i=i.length;var o="";if(void 0===u&&(u=Infinity),f&&(i-=1),e&&(i-=1),i<r||i>u)throw o=(r===u?t+"() takes exactly "+r+" arguments":i<r?t+"() takes at least "+r+" arguments":t+"() takes at most "+u+" arguments")+(" ("+i+" given)"),new n.builtin.TypeError(o);},t.exportSymbol("Sk.builtin.pyCheckArgs",n.builtin.pyCheckArgs),n.builtin.pyCheckType=function(t,i,r){if(!r)throw new n.builtin.TypeError(t+" must be a "+i);},t.exportSymbol("Sk.builtin.pyCheckType",n.builtin.pyCheckType),n.builtin.checkSequence=function(n){return null!==n&&void 0!==n.mp$subscript},t.exportSymbol("Sk.builtin.checkSequence",n.builtin.checkSequence),n.builtin.checkIterable=function(n){return null!==n&&void 0!==n.tp$iter},t.exportSymbol("Sk.builtin.checkIterable",n.builtin.checkIterable),n.builtin.checkNumber=function(t){return null!==t&&("number"==typeof t||t instanceof n.builtin.nmber||t instanceof n.builtin.lng||t instanceof n.builtin.bool)},t.exportSymbol("Sk.builtin.checkNumber",n.builtin.checkNumber),n.builtin.checkInt=function(t){return null!==t&&("number"==typeof t&&t===(t|0)||t instanceof n.builtin.nmber&&t.skType===n.builtin.nmber.int$||t instanceof n.builtin.lng||t instanceof n.builtin.bool)},t.exportSymbol("Sk.builtin.checkInt",n.builtin.checkInt),n.builtin.checkString=function(t){return null!==t&&t.__class__==n.builtin.str},t.exportSymbol("Sk.builtin.checkString",n.builtin.checkString),n.builtin.checkClass=function(n){return null!==n&&n.sk$type},t.exportSymbol("Sk.builtin.checkClass",n.builtin.checkClass),n.builtin.checkBool=function(t){return t instanceof n.builtin.bool},t.exportSymbol("Sk.builtin.checkBool",n.builtin.checkBool),n.builtin.checkNone=function(t){return t instanceof n.builtin.none},t.exportSymbol("Sk.builtin.checkNone",n.builtin.checkNone),n.builtin.checkFunction=function(n){return null!==n&&void 0!==n.tp$call},t.exportSymbol("Sk.builtin.checkFunction",n.builtin.checkFunction),n.builtin.func=function(n,t,i,r){if(this.func_code=n,this.func_globals=t||null,void 0!==r)for(var u in r)i[u]=r[u];return this.func_closure=i,this},t.exportSymbol("Sk.builtin.func",n.builtin.func),n.builtin.func.prototype.tp$name="function",n.builtin.func.prototype.tp$descr_get=function(i,r){return t.asserts.assert(void 0!==i&&void 0!==r),null==i?this:new n.builtin.method(this,i)},n.builtin.func.prototype.tp$call=function(t,i){var r,e,f;if(this.func_closure&&t.push(this.func_closure),r=this.func_code.co_kwargs,e=[],this.func_code.no_kw&&i)throw r=this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>",new n.builtin.TypeError(r+"() takes no keyword arguments");if(i)for(var h=i.length,o=this.func_code.co_varnames,s=o&&o.length,u=0;u<h;u+=2){for(f=0;f<s&&i[u]!==o[f];++f);if(o&&f!==s)t[f]=i[u+1];else if(r)e.push(new n.builtin.str(i[u])),e.push(i[u+1]);else throw r=this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>",new n.builtin.TypeError(r+"() got an unexpected keyword argument '"+i[u]+"'");}return r&&t.unshift(e),this.func_code.apply(this.func_globals,t)},n.builtin.func.prototype.tp$getattr=function(n){return this[n]},n.builtin.func.prototype.tp$setattr=function(n,t){this[n]=t},n.builtin.func.prototype.ob$type=n.builtin.type.makeTypeObj("function",new n.builtin.func(null,null)),n.builtin.func.prototype.$r=function(){return new n.builtin.str("<function "+(this.func_code&&this.func_code.co_name&&this.func_code.co_name.v||"<native JS>")+">")},n.nativejs={FN_ARGS:/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT:/,/,FN_ARG:/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS:/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,formalParameterList:function(n){var t=[],i;n=n.toString().replace(this.STRIP_COMMENTS,"").match(this.FN_ARGS)[1].split(this.FN_ARG_SPLIT);for(i in n)n[i].replace(this.FN_ARG,function(n,i,r){t.push(r)});return t},func:function(t){return t.co_name=new n.builtin.str(t.name),t.co_varnames=n.nativejs.formalParameterList(t),new n.builtin.func(t)},func_nokw:function(t){return t.co_name=new n.builtin.str(t.name),t.co_varnames=n.nativejs.formalParameterList(t),t.no_kw=!0,new n.builtin.func(t)}},t.exportSymbol("Sk.nativejs.func",n.nativejs.func),t.exportSymbol("Sk.nativejs.func_nokw",n.nativejs.func_nokw),n.builtin.method=function(n,t){this.im_func=n;this.im_self=t},t.exportSymbol("Sk.builtin.method",n.builtin.method),n.builtin.method.prototype.tp$call=function(i,r){var o,u;if(t.asserts.assert(this.im_self,"should just be a function, not a method since there's no self?"),t.asserts.assert(this.im_func instanceof n.builtin.func),i.unshift(this.im_self),r)for(o=r.length,u=0;u<o;u+=2){for(var e=this.im_func.func_code.co_varnames,s=e&&e.length,f=0;f<s&&r[u]!==e[f];++f);i[f]=r[u+1]}return this.im_func.func_code.apply(this.im_func.func_globals,i)},n.builtin.method.prototype.$r=function(){return new n.builtin.str("<bound method "+this.im_self.ob$type.tp$name+"."+(this.im_func.func_code&&this.im_func.func_code.co_name&&this.im_func.func_code.co_name.v||"<native JS>")+" of "+this.im_self.$r().v+">")},n.misceval={},n.misceval.isIndex=function(t){return null===t||t.constructor===n.builtin.lng||t.tp$index||!0===t||!1===t?!0:n.builtin.checkInt(t)},t.exportSymbol("Sk.misceval.isIndex",n.misceval.isIndex),n.misceval.asIndex=function(i){if(n.misceval.isIndex(i)&&null!==i){if(!0===i)return 1;if(!1===i)return 0;if("number"==typeof i)return i;if(i.constructor===n.builtin.nmber)return i.v;if(i.constructor===n.builtin.lng)return i.tp$index();t.asserts.fail("todo asIndex;")}},n.misceval.applySlice=function(t,i,r){return t.sq$slice&&n.misceval.isIndex(i)&&n.misceval.isIndex(r)?(i=n.misceval.asIndex(i),void 0===i&&(i=0),r=n.misceval.asIndex(r),void 0===r&&(r=1e100),n.abstr.sequenceGetSlice(t,i,r)):n.abstr.objectGetItem(t,new n.builtin.slice(i,r,null))},t.exportSymbol("Sk.misceval.applySlice",n.misceval.applySlice),n.misceval.assignSlice=function(t,i,r,u){if(t.sq$ass_slice&&n.misceval.isIndex(i)&&n.misceval.isIndex(r))i=n.misceval.asIndex(i)||0,r=n.misceval.asIndex(r)||1e100,null===u?n.abstr.sequenceDelSlice(t,i,r):n.abstr.sequenceSetSlice(t,i,r,u);else return r=new n.builtin.slice(i,r),null===u?n.abstr.objectDelItem(t,r):n.abstr.objectSetItem(t,r,u)},t.exportSymbol("Sk.misceval.assignSlice",n.misceval.assignSlice),n.misceval.arrayFromArguments=function(t){var i,r;if(1!=t.length)return t;if(i=t[0],i instanceof n.builtin.set)i=i.tp$iter().$obj;else if(i instanceof n.builtin.dict)i=n.builtin.dict.prototype.keys.func_code(i);else if(i instanceof n.builtin.str){for(t=[],i=i.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())t.push(r);return t}return i instanceof n.builtin.list||i instanceof n.builtin.tuple?i.v:t},t.exportSymbol("Sk.misceval.arrayFromArguments",n.misceval.arrayFromArguments),n.misceval.swappedOp_={Eq:"Eq",NotEq:"NotEq",Lt:"GtE",LtE:"Gt",Gt:"LtE",GtE:"Lt",Is:"IsNot",IsNot:"Is",In_:"NotIn",NotIn:"In_"},n.misceval.richCompareBool=function(i,r,u){var f,e,c;if(t.asserts.assert(null!==i&&void 0!==i,"passed null or undefined parameter to Sk.misceval.richCompareBool"),t.asserts.assert(null!==r&&void 0!==r,"passed null or undefined parameter to Sk.misceval.richCompareBool"),f=new n.builtin.type(i),e=new n.builtin.type(r),f!==e&&("GtE"===u||"Gt"===u||"LtE"===u||"Lt"===u)){var h=[n.builtin.float_.prototype.ob$type,n.builtin.int_.prototype.ob$type,n.builtin.lng.prototype.ob$type,n.builtin.bool.prototype.ob$type],o=[n.builtin.dict.prototype.ob$type,n.builtin.enumerate.prototype.ob$type,n.builtin.list.prototype.ob$type,n.builtin.str.prototype.ob$type,n.builtin.tuple.prototype.ob$type],l=h.indexOf(f),s=o.indexOf(f),h=h.indexOf(e),o=o.indexOf(e);if(f===n.builtin.none.prototype.ob$type)switch(u){case"Lt":return!0;case"LtE":return!0;case"Gt":return!1;case"GtE":return!1}if(e===n.builtin.none.prototype.ob$type)switch(u){case"Lt":return!1;case"LtE":return!1;case"Gt":return!0;case"GtE":return!0}if(-1!==l&&-1!==o)switch(u){case"Lt":return!0;case"LtE":return!0;case"Gt":return!1;case"GtE":return!1}if(-1!==s&&-1!==h)switch(u){case"Lt":return!1;case"LtE":return!1;case"Gt":return!0;case"GtE":return!0}if(-1!==s&&-1!==o)switch(u){case"Lt":return s<o;case"LtE":return s<=o;case"Gt":return s>o;case"GtE":return s>=o}}if("Is"===u)return i instanceof n.builtin.nmber&&r instanceof n.builtin.nmber?0===i.numberCompare(r)&&i.skType===r.skType:i instanceof n.builtin.lng&&r instanceof n.builtin.lng?0===i.longCompare(r):i===r;if("IsNot"===u)return i instanceof n.builtin.nmber&&r instanceof n.builtin.nmber?0!==i.numberCompare(r)||i.skType!==r.skType:i instanceof n.builtin.lng&&r instanceof n.builtin.lng?0!==i.longCompare(r):i!==r;if("In"===u)return n.abstr.sequenceContains(r,i);if("NotIn"===u)return!n.abstr.sequenceContains(r,i);if(i.tp$richcompare&&void 0!==(c=i.tp$richcompare(r,u))||r.tp$richcompare&&void 0!==(c=r.tp$richcompare(i,n.misceval.swappedOp_[u])))return c;if(e={Eq:"__eq__",NotEq:"__ne__",Gt:"__gt__",GtE:"__ge__",Lt:"__lt__",LtE:"__le__"},f=e[u],e=e[n.misceval.swappedOp_[u]],i[f])return n.misceval.isTrue(n.misceval.callsim(i[f],i,r));if(r[e])return n.misceval.isTrue(n.misceval.callsim(r[e],r,i));if(i.__cmp__){if(f=n.misceval.callsim(i.__cmp__,i,r),f=n.builtin.asnum$(f),"Eq"===u)return 0===f;if("NotEq"===u)return 0!==f;if("Lt"===u)return 0>f;if("Gt"===u)return 0<f;if("LtE"===u)return 0>=f;if("GtE"===u)return 0<=f}if(r.__cmp__){if(f=n.misceval.callsim(r.__cmp__,r,i),f=n.builtin.asnum$(f),"Eq"===u)return 0===f;if("NotEq"===u)return 0!==f;if("Lt"===u)return 0<f;if("Gt"===u)return 0>f;if("LtE"===u)return 0<=f;if("GtE"===u)return 0>=f}if(i instanceof n.builtin.none&&r instanceof n.builtin.none||i instanceof n.builtin.bool&&r instanceof n.builtin.bool){if("Eq"===u)return i.v===r.v;if("NotEq"===u)return i.v!==r.v;if("Gt"===u)return i.v>r.v;if("GtE"===u)return i.v>=r.v;if("Lt"===u)return i.v<r.v;if("LtE"===u)return i.v<=r.v}if("Eq"===u)return i instanceof n.builtin.str&&r instanceof n.builtin.str?i.v===r.v:i===r;if("NotEq"===u)return i instanceof n.builtin.str&&r instanceof n.builtin.str?i.v!==r.v:i!==r;i=n.abstr.typeName(i);r=n.abstr.typeName(r);throw new n.builtin.ValueError("don't know how to compare '"+i+"' and '"+r+"'");},t.exportSymbol("Sk.misceval.richCompareBool",n.misceval.richCompareBool),n.misceval.objectRepr=function(i){return t.asserts.assert(void 0!==i,"trying to repr undefined"),null===i||i instanceof n.builtin.none?new n.builtin.str("None"):!0===i?new n.builtin.str("True"):!1===i?new n.builtin.str("False"):"number"==typeof i?new n.builtin.str(""+i):i.$r?i.constructor===n.builtin.nmber?Infinity===i.v?new n.builtin.str("inf"):-Infinity===i.v?new n.builtin.str("-inf"):i.$r():i.$r():i.tp$name?new n.builtin.str("<"+i.tp$name+" object>"):new n.builtin.str("<unknown>")},t.exportSymbol("Sk.misceval.objectRepr",n.misceval.objectRepr),n.misceval.opAllowsEquality=function(n){switch(n){case"LtE":case"Eq":case"GtE":return!0}return!1},t.exportSymbol("Sk.misceval.opAllowsEquality",n.misceval.opAllowsEquality),n.misceval.isTrue=function(t){if(!0===t)return!0;if(!1===t||null===t||t.constructor===n.builtin.none)return!1;if(t.constructor===n.builtin.bool)return t.v;if("number"==typeof t)return 0!==t;if(t instanceof n.builtin.lng)return t.nb$nonzero();if(t.constructor===n.builtin.nmber)return 0!==t.v;if(t.mp$length)return 0!==t.mp$length();if(t.sq$length)return 0!==t.sq$length();if(t.__nonzero__){if(t=n.misceval.callsim(t.__nonzero__,t),!n.builtin.checkInt(t))throw new n.builtin.TypeError("__nonzero__ should return an int");return 0!==n.builtin.asnum$(t)}if(t.__len__){if(t=n.misceval.callsim(t.__len__,t),!n.builtin.checkInt(t))throw new n.builtin.TypeError("__len__ should return an int");return 0!==n.builtin.asnum$(t)}return!0},t.exportSymbol("Sk.misceval.isTrue",n.misceval.isTrue),n.misceval.softspace_=!1,n.misceval.print_=function(t){n.misceval.softspace_&&("\n"!==t&&n.output(" "),n.misceval.softspace_=!1);t=new n.builtin.str(t);n.output(t.v);(0===t.v.length||"\n"!==t.v[t.v.length-1]&&"\t"!==t.v[t.v.length-1]&&"\r"!==t.v[t.v.length-1]||" "===t.v[t.v.length-1])&&(n.misceval.softspace_=!0)},t.exportSymbol("Sk.misceval.print_",n.misceval.print_),n.misceval.loadname=function(t,i){var r=i[t];if(void 0!==r||(r=n.builtins[t],void 0!==r))return r;t=t.replace("_$rw$","");t=t.replace("_$rn$","");throw new n.builtin.NameError("name '"+t+"' is not defined");},t.exportSymbol("Sk.misceval.loadname",n.misceval.loadname),n.misceval.call=function(t,i,r,u,f){return f=Array.prototype.slice.call(arguments,4),n.misceval.apply(t,i,r,u,f)},t.exportSymbol("Sk.misceval.call",n.misceval.call),n.misceval.callsim=function(t,i){return i=Array.prototype.slice.call(arguments,1),n.misceval.apply(t,void 0,void 0,void 0,i)},t.exportSymbol("Sk.misceval.callsim",n.misceval.callsim),n.misceval.apply=function(i,r,u,f,e){var o,s;if(null===i||i instanceof n.builtin.none)throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object is not callable");if("function"==typeof i){if(i.sk$klass)return i.apply(null,[r,u,f,e]);if(u)for(o=u.tp$iter(),u=o.tp$iternext();void 0!==u;u=o.tp$iternext())e.push(u);if(r&&t.asserts.fail("kwdict not implemented;"),void 0!==f&&0<f.length){if(!i.co_varnames)throw new n.builtin.ValueError("Keyword arguments are not supported by this function");for(r=i.co_numargs-i.co_varnames.length,s=e.length-r,e=e.concat(i.$defaults.slice(s)),u=0;u<f.length;u+=2){if(o=i.co_varnames.indexOf(f[u]),-1===o)throw new n.builtin.TypeError("'"+f[u]+"' is an invalid keyword argument for this function");if(o<s)throw new n.builtin.TypeError("Argument given by name ('"+f[u]+"') and position ("+(o+r+1)+")");e[o+r]=f[u+1]}}return i.apply(null,e)}if(s=i.tp$call,void 0!==s){if(u)for(o=u.tp$iter(),u=o.tp$iternext();void 0!==u;u=o.tp$iternext())e.push(u);return r&&t.asserts.fail("kwdict not implemented;"),s.call(i,e,f,r)}if(s=i.__call__,void 0!==s)return e.unshift(i),n.misceval.apply(s,f,e,r,u);throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object is not callable");},t.exportSymbol("Sk.misceval.apply",n.misceval.apply),n.misceval.buildClass=function(t,i,r,u){var e=n.builtin.type,f={};return i(t,f,[]),f.__module__=t.__name__,n.misceval.callsim(e,r,u,f)},t.exportSymbol("Sk.misceval.buildClass",n.misceval.buildClass),n.abstr={},n.abstr.typeName=function(t){return t instanceof n.builtin.nmber?t.skType:void 0!==t.tp$name?t.tp$name:"<invalid type>"},n.abstr.binop_type_error=function(t,i,r){t=n.abstr.typeName(t);i=n.abstr.typeName(i);throw new n.builtin.TypeError("unsupported operand type(s) for "+r+": '"+t+"' and '"+i+"'");},n.abstr.boNameToSlotFuncLhs_=function(n,t){if(null!==n)switch(t){case"Add":return n.nb$add?n.nb$add:n.__add__;case"Sub":return n.nb$subtract?n.nb$subtract:n.__sub__;case"Mult":return n.nb$multiply?n.nb$multiply:n.__mul__;case"Div":return n.nb$divide?n.nb$divide:n.__div__;case"FloorDiv":return n.nb$floor_divide?n.nb$floor_divide:n.__floordiv__;case"Mod":return n.nb$remainder?n.nb$remainder:n.__mod__;case"Pow":return n.nb$power?n.nb$power:n.__pow__;case"LShift":return n.nb$lshift?n.nb$lshift:n.__lshift__;case"RShift":return n.nb$rshift?n.nb$rshift:n.__rshift__;case"BitAnd":return n.nb$and?n.nb$and:n.__and__;case"BitXor":return n.nb$xor?n.nb$xor:n.__xor__;case"BitOr":return n.nb$or?n.nb$or:n.__or__}},n.abstr.boNameToSlotFuncRhs_=function(n,t){if(null!==n)switch(t){case"Add":return n.nb$add?n.nb$add:n.__radd__;case"Sub":return n.nb$subtract?n.nb$subtract:n.__rsub__;case"Mult":return n.nb$multiply?n.nb$multiply:n.__rmul__;case"Div":return n.nb$divide?n.nb$divide:n.__rdiv__;case"FloorDiv":return n.nb$floor_divide?n.nb$floor_divide:n.__rfloordiv__;case"Mod":return n.nb$remainder?n.nb$remainder:n.__rmod__;case"Pow":return n.nb$power?n.nb$power:n.__rpow__;case"LShift":return n.nb$lshift?n.nb$lshift:n.__rlshift__;case"RShift":return n.nb$rshift?n.nb$rshift:n.__rrshift__;case"BitAnd":return n.nb$and?n.nb$and:n.__rand__;case"BitXor":return n.nb$xor?n.nb$xor:n.__rxor__;case"BitOr":return n.nb$or?n.nb$or:n.__ror__}},n.abstr.iboNameToSlotFunc_=function(n,t){switch(t){case"Add":return n.nb$inplace_add?n.nb$inplace_add:n.__iadd__;case"Sub":return n.nb$inplace_subtract?n.nb$inplace_subtract:n.__isub__;case"Mult":return n.nb$inplace_multiply?n.nb$inplace_multiply:n.__imul__;case"Div":return n.nb$inplace_divide?n.nb$inplace_divide:n.__idiv__;case"FloorDiv":return n.nb$inplace_floor_divide?n.nb$inplace_floor_divide:n.__ifloordiv__;case"Mod":return n.nb$inplace_remainder;case"Pow":return n.nb$inplace_power;case"LShift":return n.nb$inplace_lshift?n.nb$inplace_lshift:n.__ilshift__;case"RShift":return n.nb$inplace_rshift?n.nb$inplace_rshift:n.__irshift__;case"BitAnd":return n.nb$inplace_and;case"BitOr":return n.nb$inplace_or;case"BitXor":return n.nb$inplace_xor?n.nb$inplace_xor:n.__ixor__}},n.abstr.binary_op_=function(t,i,r){var u;if((u=n.abstr.boNameToSlotFuncLhs_(t,r),void 0!==u&&(u=u.call?u.call(t,i):n.misceval.callsim(u,t,i),void 0!==u))||(u=n.abstr.boNameToSlotFuncRhs_(i,r),void 0!==u&&(u=u.call?u.call(i,t):n.misceval.callsim(u,i,t),void 0!==u)))return u;n.abstr.binop_type_error(t,i,r)},n.abstr.binary_iop_=function(t,i,r){var u;if((u=n.abstr.iboNameToSlotFunc_(t,r),void 0!==u&&(u=u.call?u.call(t,i):n.misceval.callsim(u,t,i),void 0!==u))||(u=n.abstr.iboNameToSlotFunc_(i,r),void 0!==u&&(u=u.call?u.call(i,t):n.misceval.callsim(u,i,t),void 0!==u)))return u;n.abstr.binop_type_error(t,i,r)},n.abstr.numOpAndPromote=function(t,i,r){if(null!==t&&null!==i){if("number"==typeof t&&"number"==typeof i)return r=r(t,i),(r>n.builtin.lng.threshold$||r<-n.builtin.lng.threshold$)&&Math.floor(r)===r?[n.builtin.lng.fromInt$(t),n.builtin.lng.fromInt$(i)]:r;if(void 0===t||void 0===i)throw new n.builtin.NameError("Undefined variable in expression");if(t.constructor===n.builtin.lng||t.constructor===n.builtin.nmber)return[t,i];if("number"==typeof t)return[new n.builtin.nmber(t,void 0),i]}},n.abstr.boNumPromote_={Add:function(n,t){return n+t},Sub:function(n,t){return n-t},Mult:function(n,t){return n*t},Mod:function(t,i){if(0===i)throw new n.builtin.ZeroDivisionError("division or modulo by zero");var r=t%i;return 0>r*i?r+i:r},Div:function(t,i){if(0===i)throw new n.builtin.ZeroDivisionError("division or modulo by zero");return t/i},FloorDiv:function(t,i){if(0===i)throw new n.builtin.ZeroDivisionError("division or modulo by zero");return Math.floor(t/i)},Pow:Math.pow,BitAnd:function(n,t){var i=n&t;return 0>i&&(i+=4294967296),i},BitOr:function(n,t){var i=n|t;return 0>i&&(i+=4294967296),i},BitXor:function(n,t){var i=n^t;return 0>i&&(i+=4294967296),i},LShift:function(t,i){if(0>i)throw new n.builtin.ValueError("negative shift count");var r=t<<i;return r>t?r:t*Math.pow(2,i)},RShift:function(t,i){if(0>i)throw new n.builtin.ValueError("negative shift count");var r=t>>i;return 0<t&&0>r&&(r&=Math.pow(2,32-i)-1),r}},n.abstr.numberBinOp=function(t,i,r){var u=n.abstr.boNumPromote_[r];if(void 0!==u){if((u=n.abstr.numOpAndPromote(t,i,u),"number"==typeof u)||void 0!==u&&u.constructor===n.builtin.nmber||void 0!==u&&u.constructor===n.builtin.lng)return u;void 0!==u&&(t=u[0],i=u[1])}return n.abstr.binary_op_(t,i,r)},t.exportSymbol("Sk.abstr.numberBinOp",n.abstr.numberBinOp),n.abstr.numberInplaceBinOp=function(t,i,r){var u=n.abstr.boNumPromote_[r];if(void 0!==u){if((u=n.abstr.numOpAndPromote(t,i,u),"number"==typeof u)||void 0!==u&&u.constructor===n.builtin.nmber||void 0!==u&&u.constructor===n.builtin.lng)return u;void 0!==u&&(t=u[0],i=u[1])}return n.abstr.binary_iop_(t,i,r)},t.exportSymbol("Sk.abstr.numberInplaceBinOp",n.abstr.numberInplaceBinOp),n.abstr.numberUnaryOp=function(t,i){if("Not"===i)return n.misceval.isTrue(t)?n.builtin.bool.false$:n.builtin.bool.true$;if(t instanceof n.builtin.nmber||t instanceof n.builtin.bool){var r=n.builtin.asnum$(t);if("USub"===i)return new n.builtin.nmber(-r,t.skType);if("UAdd"===i)return new n.builtin.nmber(r,t.skType);if("Invert"===i)return new n.builtin.nmber(~r,t.skType)}else{if("USub"===i&&t.nb$negative)return t.nb$negative();if("UAdd"===i&&t.nb$positive)return t.nb$positive();if("Invert"===i&&t.nb$invert)return t.nb$invert()}r=n.abstr.typeName(t);throw new n.builtin.TypeError("unsupported operand type for "+i+" '"+r+"'");},t.exportSymbol("Sk.abstr.numberUnaryOp",n.abstr.numberUnaryOp),n.abstr.fixSeqIndex_=function(t,i){return i=n.builtin.asnum$(i),0>i&&t.sq$length&&(i+=t.sq$length()),i},n.abstr.sequenceContains=function(t,i){var r,u;if(t.sq$contains)return t.sq$contains(i);if(r=n.abstr.typeName(t),!t.tp$iter)throw new n.builtin.TypeError("argument of type '"+r+"' is not iterable");for(r=t.tp$iter(),u=r.tp$iternext();void 0!==u;u=r.tp$iternext())if(n.misceval.richCompareBool(u,i,"Eq"))return!0;return!1},n.abstr.sequenceConcat=function(t,i){if(t.sq$concat)return t.sq$concat(i);var r=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+r+"' object can't be concatenated");},n.abstr.sequenceGetIndexOf=function(t,i){if(t.index)return n.misceval.callsim(t.index,t,i);var r=n.abstr.typeName(t);if("dict"===r)throw new n.builtin.NotImplementedError("looking up dict key from value is not yet implemented (supported in Python 2.6)");throw new n.builtin.TypeError("argument of type '"+r+"' is not iterable");},n.abstr.sequenceGetCountOf=function(t,i){if(t.count)return n.misceval.callsim(t.count,t,i);var r=n.abstr.typeName(t);throw new n.builtin.TypeError("argument of type '"+r+"' is not iterable");},n.abstr.sequenceGetItem=function(t,i){if(t.mp$subscript)return t.mp$subscript(i);var r=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+r+"' object is unsubscriptable");},n.abstr.sequenceSetItem=function(t,i,r){if(t.mp$ass_subscript)return t.mp$ass_subscript(i,r);t=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+t+"' object does not support item assignment");},n.abstr.sequenceDelItem=function(t,i){if(t.sq$del_item)i=n.abstr.fixSeqIndex_(t,i),t.sq$del_item(i);else{var r=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+r+"' object does not support item deletion");}},n.abstr.sequenceRepeat=function(t,i,r){if(r=n.builtin.asnum$(r),void 0===n.misceval.asIndex(r))throw t=n.abstr.typeName(r),new n.builtin.TypeError("can't multiply sequence by non-int of type '"+t+"'");return t.call(i,r)},n.abstr.sequenceGetSlice=function(t,i,r){if(t.sq$slice)return i=n.abstr.fixSeqIndex_(t,i),r=n.abstr.fixSeqIndex_(t,r),t.sq$slice(i,r);if(t.mp$subscript)return t.mp$subscript(new n.builtin.slice(i,r));t=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+t+"' object is unsliceable");},n.abstr.sequenceDelSlice=function(t,i,r){if(t.sq$del_slice)i=n.abstr.fixSeqIndex_(t,i),r=n.abstr.fixSeqIndex_(t,r),t.sq$del_slice(i,r);else throw t=n.abstr.typeName(t),new n.builtin.TypeError("'"+t+"' doesn't support slice deletion");},n.abstr.sequenceSetSlice=function(t,i,r,u){if(t.sq$ass_slice)i=n.abstr.fixSeqIndex_(t,i),r=n.abstr.fixSeqIndex_(t,r),t.sq$ass_slice(i,r,u);else if(t.mp$ass_subscript)t.mp$ass_subscript(new n.builtin.slice(i,r),u);else throw t=n.abstr.typeName(t),new n.builtin.TypeError("'"+t+"' object doesn't support slice assignment");},n.abstr.objectAdd=function(t,i){if(t.nb$add)return t.nb$add(i);var r=n.abstr.typeName(t),u=n.abstr.typeName(i);throw new n.builtin.TypeError("unsupported operand type(s) for +: '"+r+"' and '"+u+"'");},n.abstr.objectNegative=function(t){if("number"==typeof n.builtin.asnum$(t))return n.builtin.nmber.prototype.nb$negative.call(t);t=n.abstr.typeName(t);throw new n.builtin.TypeError("bad operand type for unary -: '"+t+"'");},n.abstr.objectPositive=function(t){var i=n.abstr.typeName(t),r=n.builtin.asnum$(t);if("bool"===i)return new n.builtin.nmber(r,"int");if("number"==typeof r)return n.builtin.nmber.prototype.nb$positive.call(t);throw new n.builtin.TypeError("bad operand type for unary +: '"+i+"'");},n.abstr.objectDelItem=function(t,i){if(null!==t){if(t.mp$del_subscript){t.mp$del_subscript(i);return}if(t.sq$ass_item){var r=n.misceval.asIndex(i);if(void 0===r)throw r=n.abstr.typeName(i),new n.builtin.TypeError("sequence index must be integer, not '"+r+"'");n.abstr.sequenceDelItem(t,r);return}}r=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+r+"' object does not support item deletion");},t.exportSymbol("Sk.abstr.objectDelItem",n.abstr.objectDelItem),n.abstr.objectGetItem=function(t,i){if(null!==t){if(t.mp$subscript)return t.mp$subscript(i);if(n.misceval.isIndex(i)&&t.sq$item)return n.abstr.sequenceGetItem(t,n.misceval.asIndex(i));if(t.tp$getitem)return t.tp$getitem(i)}var r=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+r+"' does not support indexing");},t.exportSymbol("Sk.abstr.objectGetItem",n.abstr.objectGetItem),n.abstr.objectSetItem=function(t,i,r){if(null!==t){if(t.mp$ass_subscript)return t.mp$ass_subscript(i,r);if(n.misceval.isIndex(i)&&t.sq$ass_item)return n.abstr.sequenceSetItem(t,n.misceval.asIndex(i),r);if(t.tp$setitem)return t.tp$setitem(i,r)}t=n.abstr.typeName(t);throw new n.builtin.TypeError("'"+t+"' does not support item assignment");},t.exportSymbol("Sk.abstr.objectSetItem",n.abstr.objectSetItem),n.abstr.gattr=function(t,i){var u=n.abstr.typeName(t),r;if(null===t)throw new n.builtin.AttributeError("'"+u+"' object has no attribute '"+i+"'");if(r=void 0,t.__getattr__?r=n.misceval.callsim(t.__getattr__,t,i):void 0!==t.tp$getattr&&(r=t.tp$getattr(i)),void 0===r)throw new n.builtin.AttributeError("'"+u+"' object has no attribute '"+i+"'");return r},t.exportSymbol("Sk.abstr.gattr",n.abstr.gattr),n.abstr.sattr=function(t,i,r){var u=n.abstr.typeName(t);if(null===t)throw new n.builtin.AttributeError("'"+u+"' object has no attribute '"+i+"'");if(t.__setattr__)n.misceval.callsim(t.__setattr__,t,i,r);else if(void 0!==t.tp$setattr)t.tp$setattr(i,r);else throw new n.builtin.AttributeError("'"+u+"' object has no attribute '"+i+"'");},t.exportSymbol("Sk.abstr.sattr",n.abstr.sattr),n.abstr.iter=function(t){if(t.tp$iter)return t.tp$iter();throw new n.builtin.TypeError("'"+n.abstr.typeName(t)+"' object is not iterable");},t.exportSymbol("Sk.abstr.iter",n.abstr.iter),n.abstr.iternext=function(n){return n.tp$iternext()},t.exportSymbol("Sk.abstr.iternext",n.abstr.iternext),n.mergeSort=function(t,i,r,u){n.quickSort(t,i,r,u)},n.quickSort=function(i,r,u,f){t.asserts.assert(!u,"todo;");r||(r=n.mergeSort.stdCmp);var e=function(t,i,u,f){var s,c,o,h;if(u-1>i){for(o=i+Math.floor(Math.random()*(u-i)),c=t[o],s=t[o],t[o]=t[u-1],t[u-1]=s,o=i,h=i;h<u-1;++h)s=f?n.misceval.callsim(r,c,t[h]):n.misceval.callsim(r,t[h],c),0>n.builtin.asnum$(s)&&(s=t[o],t[o]=t[h],t[h]=s,++o);s=t[u-1];t[u-1]=t[o];t[o]=s;e(t,i,o,f);e(t,o+1,u,f)}};return e(i,0,i.length,f),null},n.mergeSort.stdCmp=new n.builtin.func(function(t,i){return n.misceval.richCompareBool(t,i,"Lt")?-1:0}),n.builtin.list=function(t){if(!(this instanceof n.builtin.list))return new n.builtin.list(t);if(void 0===t)this.v=[];else if("[object Array]"===Object.prototype.toString.apply(t))this.v=t;else if(t.tp$iter){this.v=[];t=t.tp$iter();for(var i=t.tp$iternext();void 0!==i;i=t.tp$iternext())this.v.push(i)}else throw new n.builtin.ValueError("expecting Array or iterable");return this.__class__=n.builtin.list,this.v=this.v,this},n.builtin.list.prototype.ob$type=n.builtin.type.makeIntoTypeObj("list",n.builtin.list),n.builtin.list.prototype.list_iter_=function(){var n={tp$iter:function(){return n},$obj:this,$index:0,tp$iternext:function(){if(!(n.$index>=n.$obj.v.length))return n.$obj.v[n.$index++]}};return n},n.builtin.list.prototype.list_concat_=function(t){if(!t.__class__||t.__class__!=n.builtin.list)throw new n.builtin.TypeError("can only concatenate list to list");for(var r=this.v.slice(),i=0;i<t.v.length;++i)r.push(t.v[i]);return new n.builtin.list(r)},n.builtin.list.prototype.list_del_item_=function(t){if(t=n.builtin.asnum$(t),0>t||t>=this.v.length)throw new n.builtin.IndexError("list assignment index out of range");this.list_del_slice_(t,t+1)},n.builtin.list.prototype.list_del_slice_=function(t,i){t=n.builtin.asnum$(t);i=n.builtin.asnum$(i);var r=[];r.unshift(i-t);r.unshift(t);this.v.splice.apply(this.v,r)},n.builtin.list.prototype.list_ass_item_=function(t,i){if(t=n.builtin.asnum$(t),0>t||t>=this.v.length)throw new n.builtin.IndexError("list assignment index out of range");this.v[t]=i},n.builtin.list.prototype.list_ass_slice_=function(t,i,r){t=n.builtin.asnum$(t);i=n.builtin.asnum$(i);r=r.v.slice(0);r.unshift(i-t);r.unshift(t);this.v.splice.apply(this.v,r)},n.builtin.list.prototype.tp$name="list",n.builtin.list.prototype.$r=function(){for(var i=[],r=this.tp$iter(),t=r.tp$iternext();void 0!==t;t=r.tp$iternext())i.push(n.misceval.objectRepr(t).v);return new n.builtin.str("["+i.join(", ")+"]")},n.builtin.list.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr,n.builtin.list.prototype.tp$hash=n.builtin.object.prototype.HashNotImplemented,n.builtin.list.prototype.tp$richcompare=function(i,r){var o,f,e,u;if(this===i&&n.misceval.opAllowsEquality(r))return!0;if(!i.__class__||i.__class__!=n.builtin.list)return"Eq"===r?!1:"NotEq"===r?!0:!1;for(o=this.v,i=i.v,f=o.length,e=i.length,u=0;u<f&&u<e&&n.misceval.richCompareBool(o[u],i[u],"Eq");++u);if(u>=f||u>=e)switch(r){case"Lt":return f<e;case"LtE":return f<=e;case"Eq":return f===e;case"NotEq":return f!==e;case"Gt":return f>e;case"GtE":return f>=e;default:t.asserts.fail()}return"Eq"===r?!1:"NotEq"===r?!0:n.misceval.richCompareBool(o[u],i[u],r)},n.builtin.list.prototype.tp$iter=n.builtin.list.prototype.list_iter_,n.builtin.list.prototype.sq$length=function(){return this.v.length},n.builtin.list.prototype.sq$concat=n.builtin.list.prototype.list_concat_,n.builtin.list.prototype.nb$add=n.builtin.list.prototype.list_concat_,n.builtin.list.prototype.nb$inplace_add=n.builtin.list.prototype.list_concat_,n.builtin.list.prototype.sq$repeat=function(t){var r,u,i;if(!n.builtin.checkInt(t))throw new n.builtin.TypeError("can't multiply sequence by non-int of type '"+n.abstr.typeName(t)+"'");for(t=n.builtin.asnum$(t),r=[],u=0;u<t;++u)for(i=0;i<this.v.length;++i)r.push(this.v[i]);return new n.builtin.list(r)},n.builtin.list.prototype.nb$multiply=n.builtin.list.prototype.sq$repeat,n.builtin.list.prototype.nb$inplace_multiply=n.builtin.list.prototype.sq$repeat,n.builtin.list.prototype.sq$ass_item=n.builtin.list.prototype.list_ass_item_,n.builtin.list.prototype.sq$del_item=n.builtin.list.prototype.list_del_item_,n.builtin.list.prototype.sq$ass_slice=n.builtin.list.prototype.list_ass_slice_,n.builtin.list.prototype.sq$del_slice=n.builtin.list.prototype.list_del_slice_,n.builtin.list.prototype.list_subscript_=function(t){var i,r;if(n.misceval.isIndex(t)){if(i=n.misceval.asIndex(t),void 0!==i){if(0>i&&(i=this.v.length+i),0>i||i>=this.v.length)throw new n.builtin.IndexError("list index out of range");return this.v[i]}}else if(t instanceof n.builtin.slice)return r=[],t.sssiter$(this,function(n,t){r.push(t.v[n])}),new n.builtin.list(r);throw new n.builtin.TypeError("list indices must be integers, not "+n.abstr.typeName(t));},n.builtin.list.prototype.list_ass_subscript_=function(t,i){var r,u,f;if(n.misceval.isIndex(t)){if(r=n.misceval.asIndex(t),void 0!==r){0>r&&(r=this.v.length+r);this.list_ass_item_(r,i);return}}else if(t instanceof n.builtin.slice){if(r=t.indices(this.v.length),1===r[2])this.list_ass_slice_(r[0],r[1],i);else{if(u=[],t.sssiter$(this,function(n){u.push(n)}),f=0,u.length!==i.v.length)throw new n.builtin.ValueError("attempt to assign sequence of size "+i.v.length+" to extended slice of size "+u.length);for(r=0;r<u.length;++r)this.v.splice(u[r],1,i.v[f]),f+=1}return}throw new n.builtin.TypeError("list indices must be integers, not "+n.abstr.typeName(t));},n.builtin.list.prototype.list_del_subscript_=function(t){var i;if(n.misceval.isIndex(t)){if(i=n.misceval.asIndex(t),void 0!==i){0>i&&(i=this.v.length+i);this.list_del_item_(i);return}}else if(t instanceof n.builtin.slice){if(i=t.indices(this.v.length),1===i[2])this.list_del_slice_(i[0],i[1]);else{var u=this,r=0,f=0<i[2]?1:0;t.sssiter$(this,function(n){u.v.splice(n-r,1);r+=f})}return}throw new n.builtin.TypeError("list indices must be integers, not "+typeof t);},n.builtin.list.prototype.mp$subscript=n.builtin.list.prototype.list_subscript_,n.builtin.list.prototype.mp$ass_subscript=n.builtin.list.prototype.list_ass_subscript_,n.builtin.list.prototype.mp$del_subscript=n.builtin.list.prototype.list_del_subscript_,n.builtin.list.prototype.__getitem__=new n.builtin.func(function(t,i){return n.builtin.list.prototype.list_subscript_.call(t,i)}),n.builtin.list.prototype.list_sort_=function(t,i,r,u){var h=void 0!==r&&null!==r,e=void 0!==i&&null!==i,f,s,o,c;if(void 0==u&&(u=!1),f=new n.builtin.timSort(t),t.v=[],s=new n.builtin.nmber(0,n.builtin.nmber.int$),h)for(f.lt=e?function(t,r){var u=n.misceval.callsim(i,t[0],r[0]);return n.misceval.richCompareBool(u,s,"Lt")}:function(t,i){return n.misceval.richCompareBool(t[0],i[0],"Lt")},o=0;o<f.listlength;o++)e=f.list.v[o],c=n.misceval.callsim(r,e),f.list.v[o]=[c,e];else e&&(f.lt=function(t,r){var u=n.misceval.callsim(i,t,r);return n.misceval.richCompareBool(u,s,"Lt")});if(u&&f.list.list_reverse_(f.list),f.sort(),u&&f.list.list_reverse_(f.list),h)for(r=0;r<f.listlength;r++)e=f.list.v[r][1],f.list.v[r]=e;if(r=0<t.sq$length(),t.v=f.list.v,r)throw new n.builtin.OperationError("list modified during sort");return n.builtin.none.none$},n.builtin.list.prototype.list_reverse_=function(t){n.builtin.pyCheckArgs("reverse",arguments,1,1);for(var u=t.v,r=[],i=t.v.length-1;-1<i;--i)r.push(u[i]);return t.v=r,n.builtin.none.none$},n.builtin.list.prototype.__iter__=new n.builtin.func(function(t){return n.builtin.pyCheckArgs("__iter__",arguments,1,1),t.list_iter_()}),n.builtin.list.prototype.append=new n.builtin.func(function(t,i){return n.builtin.pyCheckArgs("append",arguments,2,2),t.v.push(i),n.builtin.none.none$}),n.builtin.list.prototype.insert=new n.builtin.func(function(t,i,r){if(n.builtin.pyCheckArgs("insert",arguments,3,3),!n.builtin.checkNumber(i))throw new n.builtin.TypeError("an integer is required");return i=n.builtin.asnum$(i),0>i&&(i+=t.v.length),0>i?i=0:i>t.v.length&&(i=t.v.length),t.v.splice(i,0,r),n.builtin.none.none$}),n.builtin.list.prototype.extend=new n.builtin.func(function(t,i){if(n.builtin.pyCheckArgs("extend",arguments,2,2),!n.builtin.checkIterable(i))throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object is not iterable");if(t==i){for(var f=[],u=i.tp$iter(),r=u.tp$iternext();void 0!==r;r=u.tp$iternext())f.push(r);return t.v.push.apply(t.v,f),n.builtin.none.none$}for(u=i.tp$iter(),r=u.tp$iternext();void 0!==r;r=u.tp$iternext())t.v.push(r);return n.builtin.none.none$}),n.builtin.list.prototype.pop=new n.builtin.func(function(t,i){if(n.builtin.pyCheckArgs("pop",arguments,1,2),void 0===i&&(i=t.v.length-1),!n.builtin.checkNumber(i))throw new n.builtin.TypeError("an integer is required");if(i=n.builtin.asnum$(i),0>i&&(i+=t.v.length),0>i||i>=t.v.length)throw new n.builtin.IndexError("pop index out of range");var r=t.v[i];return t.v.splice(i,1),r}),n.builtin.list.prototype.remove=new n.builtin.func(function(t,i){n.builtin.pyCheckArgs("remove",arguments,2,2);var r=n.builtin.list.prototype.index.func_code(t,i);return t.v.splice(n.builtin.asnum$(r),1),n.builtin.none.none$}),n.builtin.list.prototype.index=new n.builtin.func(function(t,i,r,u){if(n.builtin.pyCheckArgs("index",arguments,2,4),void 0!==r&&!n.builtin.checkInt(r))throw new n.builtin.TypeError("slice indices must be integers");if(void 0!==u&&!n.builtin.checkInt(u))throw new n.builtin.TypeError("slice indices must be integers");var f=t.v.length,e=t.v;for(r=void 0===r?0:r.v,0>r&&(r=0<=r+f?r+f:0),u=void 0===u?f:u.v,0>u&&(u=0<=u+f?u+f:0),f=r;f<u;++f)if(n.misceval.richCompareBool(e[f],i,"Eq"))return n.builtin.assk$(f,n.builtin.nmber.int$);throw new n.builtin.ValueError("list.index(x): x not in list");}),n.builtin.list.prototype.count=new n.builtin.func(function(t,i){n.builtin.pyCheckArgs("count",arguments,2,2);for(var f=t.v.length,e=t.v,u=0,r=0;r<f;++r)n.misceval.richCompareBool(e[r],i,"Eq")&&(u+=1);return new n.builtin.nmber(u,n.builtin.nmber.int$)}),n.builtin.list.prototype.reverse=new n.builtin.func(n.builtin.list.prototype.list_reverse_),n.builtin.list.prototype.sort=new n.builtin.func(n.builtin.list.prototype.list_sort_),n.builtin.list.prototype.sort.func_code.co_varnames=["__self__","cmp","key","reverse"],t.exportSymbol("Sk.builtin.list",n.builtin.list),eu={},n.builtin.str=function(t){if(void 0===t&&(t=""),t instanceof n.builtin.str&&t!==n.builtin.str.prototype.ob$type)return t;if(!(this instanceof n.builtin.str))return new n.builtin.str(t);if(!0===t)t="True";else if(!1===t)t="False";else if(null===t||t instanceof n.builtin.none)t="None";else if(t instanceof n.builtin.bool)t=t.v?"True":"False";else if("number"==typeof t)t=t.toString(),"Infinity"===t?t="inf":"-Infinity"===t&&(t="-inf");else if("string"!=typeof t){if(void 0!==t.tp$str){if(t=t.tp$str(),!(t instanceof n.builtin.str))throw new n.builtin.ValueError("__str__ didn't return a str");return t}return n.misceval.objectRepr(t)}return Object.prototype.hasOwnProperty.call(eu,"1"+t)?eu["1"+t]:(this.__class__=n.builtin.str,this.v=this.v=t,eu["1"+t]=this,this)},t.exportSymbol("Sk.builtin.str",n.builtin.str),n.builtin.str.$emptystr=new n.builtin.str(""),n.builtin.str.prototype.mp$subscript=function(t){if(t=n.builtin.asnum$(t),"number"==typeof t&&Math.floor(t)===t){if(0>t&&(t=this.v.length+t),0>t||t>=this.v.length)throw new n.builtin.IndexError("string index out of range");return new n.builtin.str(this.v.charAt(t))}if(t instanceof n.builtin.slice){var i="";return t.sssiter$(this,function(n,t){0<=n&&n<t.v.length&&(i+=t.v.charAt(n))}),new n.builtin.str(i)}throw new n.builtin.TypeError("string indices must be numbers, not "+typeof t);},n.builtin.str.prototype.sq$length=function(){return this.v.length},n.builtin.str.prototype.sq$concat=function(t){if(!t||!n.builtin.checkString(t))throw t=n.abstr.typeName(t),new n.builtin.TypeError("cannot concatenate 'str' and '"+t+"' objects");return new n.builtin.str(this.v+t.v)},n.builtin.str.prototype.nb$add=n.builtin.str.prototype.sq$concat,n.builtin.str.prototype.nb$inplace_add=n.builtin.str.prototype.sq$concat,n.builtin.str.prototype.sq$repeat=function(t){if(!n.builtin.checkInt(t))throw new n.builtin.TypeError("can't multiply sequence by non-int of type '"+n.abstr.typeName(t)+"'");t=n.builtin.asnum$(t);for(var i="",r=0;r<t;++r)i+=this.v;return new n.builtin.str(i)},n.builtin.str.prototype.nb$multiply=n.builtin.str.prototype.sq$repeat,n.builtin.str.prototype.nb$inplace_multiply=n.builtin.str.prototype.sq$repeat,n.builtin.str.prototype.sq$item=function(){t.asserts.fail()},n.builtin.str.prototype.sq$slice=function(t,i){return t=n.builtin.asnum$(t),i=n.builtin.asnum$(i),0>t&&(t=0),new n.builtin.str(this.v.substr(t,i-t))},n.builtin.str.prototype.sq$contains=function(t){if(void 0===t.v||t.v.constructor!=String)throw new n.builtin.TypeError("TypeError: 'In <string> requires string as left operand");return-1!=this.v.indexOf(t.v)?!0:!1},n.builtin.str.prototype.tp$name="str",n.builtin.str.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr,n.builtin.str.prototype.tp$iter=function(){var t={tp$iter:function(){return t},$obj:this,$index:0,tp$iternext:function(){if(!(t.$index>=t.$obj.v.length))return new n.builtin.str(t.$obj.v.substr(t.$index++,1))}};return t},n.builtin.str.prototype.tp$richcompare=function(i,r){if(i instanceof n.builtin.str)switch(r){case"Lt":return this.v<i.v;case"LtE":return this.v<=i.v;case"Eq":return this.v===i.v;case"NotEq":return this.v!==i.v;case"Gt":return this.v>i.v;case"GtE":return this.v>=i.v;default:t.asserts.fail()}},n.builtin.str.prototype.$r=function(){var r="'",t;-1!==this.v.indexOf("'")&&-1===this.v.indexOf('"')&&(r='"');for(var f=this.v.length,i=r,u=0;u<f;++u)t=this.v.charAt(u),t===r||"\\"===t?i+="\\"+t:"\t"===t?i+="\\t":"\n"===t?i+="\\n":"\r"===t?i+="\\r":" ">t||127<=t?(t=t.charCodeAt(0).toString(16),2>t.length&&(t="0"+t),i+="\\x"+t):i+=t;return new n.builtin.str(i+r)},n.builtin.str.re_escape_=function(n){for(var t,i=[],r=0;r<n.length;++r)t=n.charAt(r),/^[A-Za-z0-9]+$/.test(t)?i.push(t):"\\000"===t?i.push("\\000"):i.push("\\"+t);return i.join("")},n.builtin.str.prototype.lower=new n.builtin.func(function(t){return n.builtin.pyCheckArgs("lower",arguments,1,1),new n.builtin.str(t.v.toLowerCase())}),n.builtin.str.prototype.upper=new n.builtin.func(function(t){return n.builtin.pyCheckArgs("upper",arguments,1,1),new n.builtin.str(t.v.toUpperCase())}),n.builtin.str.prototype.capitalize=new n.builtin.func(function(t){n.builtin.pyCheckArgs("capitalize",arguments,1,1);var i=t.v,u,r;if(0===i.length)return new n.builtin.str("");for(u=i.charAt(0).toUpperCase(),r=1;r<i.length;r++)u+=i.charAt(r).toLowerCase();return new n.builtin.str(u)}),n.builtin.str.prototype.join=new n.builtin.func(function(t,i){n.builtin.pyCheckArgs("join",arguments,2,2);n.builtin.pyCheckType("seq","iterable",n.builtin.checkIterable(i));for(var u=[],f=i.tp$iter(),r=f.tp$iternext();void 0!==r;r=f.tp$iternext()){if(r.constructor!==n.builtin.str)throw"TypeError: sequence item "+u.length+": expected string, "+typeof r+" found";u.push(r.v)}return new n.builtin.str(u.join(t.v))}),n.builtin.str.prototype.split=new n.builtin.func(function(t,i,r){var f,u;if(n.builtin.pyCheckArgs("split",arguments,1,3),(void 0===i||i instanceof n.builtin.none)&&(i=null),null!==i&&!n.builtin.checkString(i))throw new n.builtin.TypeError("expected a string");if(null!==i&&""===i.v)throw new n.builtin.ValueError("empty separator");if(void 0!==r&&!n.builtin.checkInt(r))throw new n.builtin.TypeError("an integer is required");r=n.builtin.asnum$(r);f=/[\s]+/g;u=t.v;null===i?u=u.trimLeft():(f=i.v.replace(/([.*+?=|\\\/()\[\]\{\}^$])/g,"\\$1"),f=RegExp(f,"g"));for(var e=[],o,s=0,h=0;null!=(o=f.exec(u))&&o.index!==f.lastIndex&&!(e.push(new n.builtin.str(u.substring(s,o.index))),s=f.lastIndex,h+=1,r&&h>=r););return u=u.substring(s),(null!==i||0<u.length)&&e.push(new n.builtin.str(u)),new n.builtin.list(e)}),n.builtin.str.prototype.strip=new n.builtin.func(function(t,i){if(n.builtin.pyCheckArgs("strip",arguments,1,2),void 0!==i&&!n.builtin.checkString(i))throw new n.builtin.TypeError("strip arg must be None or str");var r;return void 0===i?r=/^\s+|\s+$/g:(r=n.builtin.str.re_escape_(i.v),r=RegExp("^["+r+"]+|["+r+"]+$","g")),new n.builtin.str(t.v.replace(r,""))}),n.builtin.str.prototype.lstrip=new n.builtin.func(function(t,i){if(n.builtin.pyCheckArgs("lstrip",arguments,1,2),void 0!==i&&!n.builtin.checkString(i))throw new n.builtin.TypeError("lstrip arg must be None or str");var r;return void 0===i?r=/^\s+/g:(r=n.builtin.str.re_escape_(i.v),r=RegExp("^["+r+"]+","g")),new n.builtin.str(t.v.replace(r,""))}),n.builtin.str.prototype.rstrip=new n.builtin.func(function(t,i){if(n.builtin.pyCheckArgs("rstrip",arguments,1,2),void 0!==i&&!n.builtin.checkString(i))throw new n.builtin.TypeError("rstrip arg must be None or str");var r;return void 0===i?r=/\s+$/g:(r=n.builtin.str.re_escape_(i.v),r=RegExp("["+r+"]+$","g")),new n.builtin.str(t.v.replace(r,""))}),n.builtin.str.prototype.partition=new n.builtin.func(function(t,i){n.builtin.pyCheckArgs("partition",arguments,2,2);n.builtin.pyCheckType("sep","string",n.builtin.checkString(i));var r=new n.builtin.str(i),u=t.v.indexOf(r.v);return 0>u?new n.builtin.tuple([t,n.builtin.str.$emptystr,n.builtin.str.$emptystr]):new n.builtin.tuple([new n.builtin.str(t.v.substring(0,u)),r,new n.builtin.str(t.v.substring(u+r.v.length))])}),n.builtin.str.prototype.rpartition=new n.builtin.func(function(t,i){n.builtin.pyCheckArgs("rpartition",arguments,2,2);n.builtin.pyCheckType("sep","string",n.builtin.checkString(i));var r=new n.builtin.str(i),u=t.v.lastIndexOf(r.v);return 0>u?new n.builtin.tuple([n.builtin.str.$emptystr,n.builtin.str.$emptystr,t]):new n.builtin.tuple([new n.builtin.str(t.v.substring(0,u)),r,new n.builtin.str(t.v.substring(u+r.v.length))])}),n.builtin.str.prototype.count=new n.builtin.func(function(t,i,r,u){if(n.builtin.pyCheckArgs("count",arguments,2,4),!n.builtin.checkString(i))throw new n.builtin.TypeError("expected a character buffer object");if(void 0!==r&&!n.builtin.checkInt(r))throw new n.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==u&&!n.builtin.checkInt(u))throw new n.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===r?r=0:(r=n.builtin.asnum$(r),r=0<=r?r:t.v.length+r);void 0===u?u=t.v.length:(u=n.builtin.asnum$(u),u=0<=u?u:t.v.length+u);var f=RegExp(i.v,"g");return(f=t.v.slice(r,u).match(f))?new n.builtin.nmber(f.length,n.builtin.nmber.int$):new n.builtin.nmber(0,n.builtin.nmber.int$)}),n.builtin.str.prototype.ljust=new n.builtin.func(function(t,i,r){if(n.builtin.pyCheckArgs("ljust",arguments,2,3),!n.builtin.checkInt(i))throw new n.builtin.TypeError("integer argument exepcted, got "+n.abstr.typeName(i));if(void 0!==r&&(!n.builtin.checkString(r)||1!==r.v.length))throw new n.builtin.TypeError("must be char, not "+n.abstr.typeName(r));if(r=void 0===r?" ":r.v,i=n.builtin.asnum$(i),t.v.length>=i)return t;var u=Array.prototype.join.call({length:Math.floor(i-t.v.length)+1},r);return new n.builtin.str(t.v+u)}),n.builtin.str.prototype.rjust=new n.builtin.func(function(t,i,r){if(n.builtin.pyCheckArgs("rjust",arguments,2,3),!n.builtin.checkInt(i))throw new n.builtin.TypeError("integer argument exepcted, got "+n.abstr.typeName(i));if(void 0!==r&&(!n.builtin.checkString(r)||1!==r.v.length))throw new n.builtin.TypeError("must be char, not "+n.abstr.typeName(r));if(r=void 0===r?" ":r.v,i=n.builtin.asnum$(i),t.v.length>=i)return t;var u=Array.prototype.join.call({length:Math.floor(i-t.v.length)+1},r);return new n.builtin.str(u+t.v)}),n.builtin.str.prototype.center=new n.builtin.func(function(t,i,r){if(n.builtin.pyCheckArgs("center",arguments,2,3),!n.builtin.checkInt(i))throw new n.builtin.TypeError("integer argument exepcted, got "+n.abstr.typeName(i));if(void 0!==r&&(!n.builtin.checkString(r)||1!==r.v.length))throw new n.builtin.TypeError("must be char, not "+n.abstr.typeName(r));if(r=void 0===r?" ":r.v,i=n.builtin.asnum$(i),t.v.length>=i)return t;var u=Array.prototype.join.call({length:Math.floor((i-t.v.length)/2)+1},r),u=u+t.v+u;return u.length<i&&(u+=r),new n.builtin.str(u)}),n.builtin.str.prototype.find=new n.builtin.func(function(t,i,r,u){if(n.builtin.pyCheckArgs("find",arguments,2,4),!n.builtin.checkString(i))throw new n.builtin.TypeError("expected a character buffer object");if(void 0!==r&&!n.builtin.checkInt(r))throw new n.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==u&&!n.builtin.checkInt(u))throw new n.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===r?r=0:(r=n.builtin.asnum$(r),r=0<=r?r:t.v.length+r);void 0===u?u=t.v.length:(u=n.builtin.asnum$(u),u=0<=u?u:t.v.length+u);var f=t.v.indexOf(i.v,r);return new n.builtin.nmber(f>=r&&f<u?f:-1,n.builtin.nmber.int$)}),n.builtin.str.prototype.index=new n.builtin.func(function(t,i,r,u){n.builtin.pyCheckArgs("index",arguments,2,4);var f=n.misceval.callsim(t.find,t,i,r,u);if(-1===n.builtin.asnum$(f))throw new n.builtin.ValueError("substring not found");return f}),n.builtin.str.prototype.rfind=new n.builtin.func(function(t,i,r,u){if(n.builtin.pyCheckArgs("rfind",arguments,2,4),!n.builtin.checkString(i))throw new n.builtin.TypeError("expected a character buffer object");if(void 0!==r&&!n.builtin.checkInt(r))throw new n.builtin.TypeError("slice indices must be integers or None or have an __index__ method");if(void 0!==u&&!n.builtin.checkInt(u))throw new n.builtin.TypeError("slice indices must be integers or None or have an __index__ method");void 0===r?r=0:(r=n.builtin.asnum$(r),r=0<=r?r:t.v.length+r);void 0===u?u=t.v.length:(u=n.builtin.asnum$(u),u=0<=u?u:t.v.length+u);var f=t.v.lastIndexOf(i.v,u),f=f!==u?f:t.v.lastIndexOf(i.v,u-1);return new n.builtin.nmber(f>=r&&f<u?f:-1,n.builtin.nmber.int$)}),n.builtin.str.prototype.rindex=new n.builtin.func(function(t,i,r,u){n.builtin.pyCheckArgs("rindex",arguments,2,4);var f=n.misceval.callsim(t.rfind,t,i,r,u);if(-1===n.builtin.asnum$(f))throw new n.builtin.ValueError("substring not found");return f}),n.builtin.str.prototype.startswith=new n.builtin.func(function(t,i){return n.builtin.pyCheckArgs("startswith",arguments,2,2),n.builtin.pyCheckType("tgt","string",n.builtin.checkString(i)),n.builtin.bool(0==t.v.indexOf(i.v))}),n.builtin.str.prototype.endswith=new n.builtin.func(function(t,i){return n.builtin.pyCheckArgs("endswith",arguments,2,2),n.builtin.pyCheckType("tgt","string",n.builtin.checkString(i)),n.builtin.bool(-1!==t.v.indexOf(i.v,t.v.length-i.v.length))}),n.builtin.str.prototype.replace=new n.builtin.func(function(t,i,r,u){var f,e;if(n.builtin.pyCheckArgs("replace",arguments,3,4),n.builtin.pyCheckType("oldS","string",n.builtin.checkString(i)),n.builtin.pyCheckType("newS","string",n.builtin.checkString(r)),void 0!==u&&!n.builtin.checkInt(u))throw new n.builtin.TypeError("integer argument expected, got "+n.abstr.typeName(u));return(u=n.builtin.asnum$(u),f=RegExp(n.builtin.str.re_escape_(i.v),"g"),void 0===u||0>u)?new n.builtin.str(t.v.replace(f,r.v)):(e=0,new n.builtin.str(t.v.replace(f,function(n){return e++,e<=u?r.v:n})))}),n.builtin.str.prototype.isdigit=new n.builtin.func(function(t){var i,r;if(n.builtin.pyCheckArgs("isdigit",arguments,1,1),0===t.v.length)return n.builtin.bool(!1);for(i=0;i<t.v.length;i++)if(r=t.v.charAt(i),"0">r||"9"<r)return n.builtin.bool(!1);return n.builtin.bool(!0)}),n.builtin.str.prototype.ob$type=n.builtin.type.makeIntoTypeObj("str",n.builtin.str),n.builtin.str.prototype.nb$remainder=function(i){i.constructor===n.builtin.tuple||void 0!==i.mp$subscript&&i.constructor!==n.builtin.str||(i=new n.builtin.tuple([i]));var r=0,u=this.v.replace(/%(\([a-zA-Z0-9]+\))?([#0 +\-]+)?(\*|[0-9]+)?(\.(\*|[0-9]+))?[hlL]?([diouxXeEfFgGcrs%])/g,function(u,f,e,o,s,h,c){var l;o=n.builtin.asnum$(o);s=n.builtin.asnum$(s);(void 0===f||""===f)&&(l=r++);var a=!1,v=!1,y=!1,p=!1,w=!1;if(e&&(-1!==e.indexOf("-")?v=!0:-1!==e.indexOf("0")&&(a=!0),-1!==e.indexOf("+")?p=!0:-1!==e.indexOf(" ")&&(y=!0),w=-1!==e.indexOf("#")),s&&(s=parseInt(s.substr(1),10)),e=function(i,r){var f,u,e,o;if(r=n.builtin.asnum$(r),e=!1,"number"==typeof i?(0>i&&(i=-i,e=!0),u=i.toString(r)):i instanceof n.builtin.nmber?(u=i.str$(r,!1),2<u.length&&".0"===u.substr(-2)&&(u=u.substr(0,u.length-2)),e=i.nb$isnegative()):i instanceof n.builtin.lng&&(u=i.str$(r,!1),e=i.nb$isnegative()),t.asserts.assert(void 0!==u,"unhandled number format"),o=!1,s)for(f=u.length;f<s;++f)u="0"+u,o=!0;return f="",e?f="-":p?f="+"+f:y&&(f=" "+f),w&&(16===r?f+="0x":8!==r||o||"0"===u||(f+="0")),[f,u]},u=function(n){var i=n[0],t;if(n=n[1],o)if(o=parseInt(o,10),t=n.length+i.length,a)for(;t<o;++t)n="0"+n;else if(v)for(;t<o;++t)n+=" ";else for(;t<o;++t)i=" "+i;return i+n},i.constructor===n.builtin.tuple)f=i.v[l];else if(void 0!==i.mp$subscript)f=f.substring(1,f.length-1),f=i.mp$subscript(new n.builtin.str(f));else throw new n.builtin.AttributeError(i.tp$name+" instance has no attribute 'mp$subscript'");switch(c){case"d":case"i":return u(e(f,10));case"o":return u(e(f,8));case"x":return u(e(f,16));case"X":return u(e(f,16)).toUpperCase();case"f":case"F":case"e":case"E":case"g":case"G":return(f=n.builtin.asnum$(f),"string"==typeof f&&(f=Number(f)),Infinity===f)?"inf":-Infinity===f?"-inf":isNaN(f)?"nan":(l=["toExponential","toFixed","toPrecision"]["efg".indexOf(c.toLowerCase())],(void 0===s||""===s)&&("e"===c||"E"===c?s=6:("f"===c||"F"===c)&&(s=7)),f=f[l](s),-1!=="EFG".indexOf(c)&&(f=f.toUpperCase()),u(["",f]));case"c":if("number"==typeof f)return String.fromCharCode(f);if(f instanceof n.builtin.nmber)return String.fromCharCode(f.v);if(f instanceof n.builtin.lng)return String.fromCharCode(f.str$(10,!1)[0]);if(f.constructor===n.builtin.str)return f.v.substr(0,1);throw new n.builtin.TypeError("an integer is required");case"r":return c=n.builtin.repr(f),s?c.v.substr(0,s):c.v;case"s":return c=new n.builtin.str(f),s?c.v.substr(0,s):c.v;case"%":return"%"}});return new n.builtin.str(u)},n.builtin.tuple=function(t){if(!(this instanceof n.builtin.tuple))return new n.builtin.tuple(t);if(void 0===t&&(t=[]),"[object Array]"===Object.prototype.toString.apply(t))this.v=t;else if(t.tp$iter){this.v=[];t=t.tp$iter();for(var i=t.tp$iternext();void 0!==i;i=t.tp$iternext())this.v.push(i)}else throw new n.builtin.ValueError("expecting Array or iterable");return this.__class__=n.builtin.tuple,this.v=this.v,this},n.builtin.tuple.prototype.tp$name="tuple",n.builtin.tuple.prototype.$r=function(){if(0===this.v.length)return new n.builtin.str("()");for(var t=[],i=0;i<this.v.length;++i)t[i]=n.misceval.objectRepr(this.v[i]).v;return t=t.join(", "),1===this.v.length&&(t+=","),new n.builtin.str("("+t+")")},n.builtin.tuple.prototype.mp$subscript=function(t){var i,r;if(n.misceval.isIndex(t)){if(i=n.misceval.asIndex(t),void 0!==i){if(0>i&&(i=this.v.length+i),0>i||i>=this.v.length)throw new n.builtin.IndexError("tuple index out of range");return this.v[i]}}else if(t instanceof n.builtin.slice)return r=[],t.sssiter$(this,function(n,t){r.push(t.v[n])}),new n.builtin.tuple(r);throw new n.builtin.TypeError("tuple indices must be integers, not "+n.abstr.typeName(t));},n.builtin.tuple.prototype.tp$hash=function(){for(var u,f=1000003,t=3430008,i=this.v.length,r=0;r<i;++r){if(u=n.builtin.hash(this.v[r]).v,-1===u)return new n.builtin.nmber(-1,n.builtin.nmber.int$);t=(t^u)*f;f+=82520+i+i}return t+=97531,-1===t&&(t=-2),new n.builtin.nmber(t,n.builtin.nmber.int$)},n.builtin.tuple.prototype.sq$repeat=function(t){var r,u,i;for(t=n.builtin.asnum$(t),r=[],u=0;u<t;++u)for(i=0;i<this.v.length;++i)r.push(this.v[i]);return new n.builtin.tuple(r)},n.builtin.tuple.prototype.nb$multiply=n.builtin.tuple.prototype.sq$repeat,n.builtin.tuple.prototype.nb$inplace_multiply=n.builtin.tuple.prototype.sq$repeat,n.builtin.tuple.prototype.ob$type=n.builtin.type.makeIntoTypeObj("tuple",n.builtin.tuple),n.builtin.tuple.prototype.tp$iter=function(){var n={tp$iter:function(){return n},$obj:this,$index:0,tp$iternext:function(){if(!(n.$index>=n.$obj.v.length))return n.$obj.v[n.$index++]}};return n},n.builtin.tuple.prototype.__iter__=new n.builtin.func(function(t){return n.builtin.pyCheckArgs("__iter__",arguments,1,1),t.tp$iter()}),n.builtin.tuple.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr,n.builtin.tuple.prototype.tp$richcompare=function(i,r){var o,f,e,u;if(!i.__class__||i.__class__!=n.builtin.tuple)return"Eq"===r?!1:"NotEq"===r?!0:!1;for(o=this.v,i=i.v,f=o.length,e=i.length,u=0;u<f&&u<e&&n.misceval.richCompareBool(o[u],i[u],"Eq");++u);if(u>=f||u>=e)switch(r){case"Lt":return f<e;case"LtE":return f<=e;case"Eq":return f===e;case"NotEq":return f!==e;case"Gt":return f>e;case"GtE":return f>=e;default:t.asserts.fail()}return"Eq"===r?!1:"NotEq"===r?!0:n.misceval.richCompareBool(o[u],i[u],r)},n.builtin.tuple.prototype.sq$concat=function(t){return new n.builtin.tuple(this.v.concat(t.v))},n.builtin.tuple.prototype.nb$add=n.builtin.tuple.prototype.sq$concat,n.builtin.tuple.prototype.nb$inplace_add=n.builtin.tuple.prototype.sq$concat,n.builtin.tuple.prototype.sq$length=function(){return this.v.length},n.builtin.tuple.prototype.index=new n.builtin.func(function(t,i){for(var u=t.v.length,f=t.v,r=0;r<u;++r)if(n.misceval.richCompareBool(f[r],i,"Eq"))return n.builtin.assk$(r,n.builtin.nmber.int$);throw new n.builtin.ValueError("tuple.index(x): x not in tuple");}),n.builtin.tuple.prototype.count=new n.builtin.func(function(t,i){for(var f=t.v.length,e=t.v,u=0,r=0;r<f;++r)n.misceval.richCompareBool(e[r],i,"Eq")&&(u+=1);return new n.builtin.nmber(u,n.builtin.nmber.int$)}),t.exportSymbol("Sk.builtin.tuple",n.builtin.tuple),n.builtin.dict=function(t){var r,i,u;if(!(this instanceof n.builtin.dict))return new n.builtin.dict(t);if(void 0===t&&(t=[]),this.size=0,"[object Array]"===Object.prototype.toString.apply(t))for(i=0;i<t.length;i+=2)this.mp$ass_subscript(t[i],t[i+1]);else if(t instanceof n.builtin.dict)for(r=t.tp$iter(),i=r.tp$iternext();void 0!==i;i=r.tp$iternext())u=t.mp$subscript(i),void 0===u&&(u=null),this.mp$ass_subscript(i,u);else if(t.tp$iter)for(r=t.tp$iter(),i=r.tp$iternext();void 0!==i;i=r.tp$iternext())if(i.mp$subscript)this.mp$ass_subscript(i.mp$subscript(0),i.mp$subscript(1));else throw new n.builtin.TypeError("element "+this.size+" is not a sequence");else throw new n.builtin.TypeError("object is not iterable");return this.__class__=n.builtin.dict,this},n.builtin.dict.prototype.ob$type=n.builtin.type.makeIntoTypeObj("dict",n.builtin.dict),er=n.builtin.hash,n.builtin.dict.prototype.key$lookup=function(t,i){for(var u,f,r=0;r<t.items.length;r++)if(u=t.items[r],f=n.misceval.richCompareBool(u.lhs,i,"Eq"))return u;return null},n.builtin.dict.prototype.key$pop=function(t,i){for(var u,f,r=0;r<t.items.length;r++)if(u=t.items[r],f=n.misceval.richCompareBool(u.lhs,i,"Eq"))return t.items.splice(r,1),this.size-=1,u},n.builtin.dict.prototype.mp$lookup=function(n){var t=this[er(n).v];if(void 0!==t&&(n=this.key$lookup(t,n)))return n.rhs},n.builtin.dict.prototype.mp$subscript=function(t){var i=this.mp$lookup(t);if(void 0!==i)return i;t=new n.builtin.str(t);throw new n.builtin.KeyError(t.v);},n.builtin.dict.prototype.sq$contains=function(n){return void 0!==this.mp$lookup(n)},n.builtin.dict.prototype.mp$ass_subscript=function(n,t){var i=er(n),r=this[i.v];void 0===r?(r={$hash:i,items:[{lhs:n,rhs:t}]},this[i.v]=r,this.size+=1):(i=this.key$lookup(r,n))?i.rhs=t:(r.items.push({lhs:n,rhs:t}),this.size+=1)},n.builtin.dict.prototype.mp$del_subscript=function(t){var i=this[er(t).v];if(void 0===i||(i=this.key$pop(i,t),void 0===i)){t=new n.builtin.str(t);throw new n.builtin.KeyError(t.v);}},n.builtin.dict.prototype.tp$iter=function(){var u=[],r,t,i,n;for(r in this)if(this.hasOwnProperty(r)&&(t=this[r],t&&void 0!==t.$hash))for(i=0;i<t.items.length;i++)u.push(t.items[i].lhs);return n={tp$iter:function(){return n},$obj:this,$index:0,$keys:u,tp$iternext:function(){if(!(n.$index>=n.$keys.length))return n.$keys[n.$index++]}}},n.builtin.dict.prototype.__iter__=new n.builtin.func(function(t){return n.builtin.pyCheckArgs("__iter__",arguments,1,1),t.tp$iter()}),n.builtin.dict.prototype.$r=function(){for(var i,r=[],u=this.tp$iter(),t=u.tp$iternext();void 0!==t;t=u.tp$iternext())i=this.mp$subscript(t),void 0===i&&(i=null),r.push(n.misceval.objectRepr(t).v+": "+n.misceval.objectRepr(i).v);return new n.builtin.str("{"+r.join(", ")+"}")},n.builtin.dict.prototype.mp$length=function(){return this.size},n.builtin.dict.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr,n.builtin.dict.prototype.tp$hash=n.builtin.object.prototype.HashNotImplemented,n.builtin.dict.prototype.tp$richcompare=function(i,r){var f,e,u;if(this===i&&n.misceval.opAllowsEquality(r))return!0;switch(r){case"Lt":return;case"LtE":return;case"Eq":break;case"NotEq":break;case"Gt":return;case"GtE":return;default:t.asserts.fail()}if(!(i instanceof n.builtin.dict)||this.size!==i.size)return"Eq"===r?!1:!0;for(f=this.tp$iter(),u=f.tp$iternext();void 0!==u;u=f.tp$iternext())if(e=this.mp$subscript(u),u=i.mp$subscript(u),!n.misceval.richCompareBool(e,u,"Eq"))return"Eq"===r?!1:!0;return"Eq"===r?!0:!1},n.builtin.dict.prototype.get=new n.builtin.func(function(t,i,r){return void 0===r&&(r=n.builtin.none.none$),t=t.mp$lookup(i),void 0===t&&(t=r),t}),n.builtin.dict.prototype.pop=new n.builtin.func(function(t,i,r){var u=er(i),u=t[u.v];if(void 0!==u&&(t=t.key$pop(u,i),void 0!==t))return t.rhs;if(void 0!==r)return r;i=new n.builtin.str(i);throw new n.builtin.KeyError(i.v);}),n.builtin.dict.prototype.has_key=new n.builtin.func(function(t,i){return n.builtin.bool(t.sq$contains(i))}),n.builtin.dict.prototype.items=new n.builtin.func(function(t){for(var r,u=[],f=t.tp$iter(),i=f.tp$iternext();void 0!==i;i=f.tp$iternext())r=t.mp$subscript(i),void 0===r&&(r=null),u.push(new n.builtin.tuple([i,r]));return new n.builtin.list(u)}),n.builtin.dict.prototype.keys=new n.builtin.func(function(t){var r=[],i;for(t=t.tp$iter(),i=t.tp$iternext();void 0!==i;i=t.tp$iternext())r.push(i);return new n.builtin.list(r)}),n.builtin.dict.prototype.values=new n.builtin.func(function(t){for(var r=[],u=t.tp$iter(),i=u.tp$iternext();void 0!==i;i=u.tp$iternext())i=t.mp$subscript(i),void 0===i&&(i=null),r.push(i);return new n.builtin.list(r)}),n.builtin.dict.prototype.tp$name="dict",t.exportSymbol("Sk.builtin.dict",n.builtin.dict),n.builtin.biginteger=function(n,t,i){null!=n&&("number"==typeof n?this.fromNumber(n,t,i):null==t&&"string"!=typeof n?this.fromString(n,256):this.fromString(n,t))},n.builtin.biginteger.canary=0xdeadbeefcafe,n.builtin.biginteger.j_lm=15715070==(n.builtin.biginteger.canary&16777215),n.builtin.biginteger.nbi=function(){return new n.builtin.biginteger(null)},n.builtin.biginteger.prototype.am1=function(n,t,i,r,u,f){for(;0<=--f;){var e=t*this[n++]+i[r]+u;u=Math.floor(e/67108864);i[r++]=e&67108863}return u},n.builtin.biginteger.prototype.am2=function(n,t,i,r,u,f){var o=t&32767;for(t>>=15;0<=--f;){var e=this[n]&32767,s=this[n++]>>15,h=t*e+s*o,e=o*e+((h&32767)<<15)+i[r]+(u&1073741823);u=(e>>>30)+(h>>>15)+t*s+(u>>>30);i[r++]=e&1073741823}return u},n.builtin.biginteger.prototype.am3=function(n,t,i,r,u,f){var o=t&16383;for(t>>=14;0<=--f;){var e=this[n]&16383,s=this[n++]>>14,h=t*e+s*o,e=o*e+((h&16383)<<14)+i[r]+u;u=(e>>28)+(h>>14)+t*s;i[r++]=e&268435455}return u},n.builtin.biginteger.prototype.am=n.builtin.biginteger.prototype.am3,n.builtin.biginteger.dbits=28,n.builtin.biginteger.prototype.DB=n.builtin.biginteger.dbits,n.builtin.biginteger.prototype.DM=(1<<n.builtin.biginteger.dbits)-1,n.builtin.biginteger.prototype.DV=1<<n.builtin.biginteger.dbits,n.builtin.biginteger.BI_FP=52,n.builtin.biginteger.prototype.FV=Math.pow(2,n.builtin.biginteger.BI_FP),n.builtin.biginteger.prototype.F1=n.builtin.biginteger.BI_FP-n.builtin.biginteger.dbits,n.builtin.biginteger.prototype.F2=2*n.builtin.biginteger.dbits-n.builtin.biginteger.BI_FP,n.builtin.biginteger.BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",n.builtin.biginteger.BI_RC=[],ci=48,d=0;9>=d;++d)n.builtin.biginteger.BI_RC[ci++]=d;for(ci=97,d=10;36>d;++d)n.builtin.biginteger.BI_RC[ci++]=d;for(ci=65,d=10;36>d;++d)n.builtin.biginteger.BI_RC[ci++]=d;n.builtin.biginteger.int2char=function(t){return n.builtin.biginteger.BI_RM.charAt(t)};n.builtin.biginteger.intAt=function(t,i){var r=n.builtin.biginteger.BI_RC[t.charCodeAt(i)];return null==r?-1:r};n.builtin.biginteger.prototype.bnpCopyTo=function(n){for(var t=this.t-1;0<=t;--t)n[t]=this[t];n.t=this.t;n.s=this.s};n.builtin.biginteger.prototype.bnpFromInt=function(n){this.t=1;this.s=0>n?-1:0;0<n?this[0]=n:-1>n?this[0]=n+this.DV:this.t=0};n.builtin.biginteger.nbv=function(t){var i=new n.builtin.biginteger(null);return i.bnpFromInt(t),i};n.builtin.biginteger.prototype.bnpFromString=function(t,i){var u,f;if(16==i)u=4;else if(8==i)u=3;else if(256==i)u=8;else if(2==i)u=1;else if(32==i)u=5;else if(4==i)u=2;else{this.fromRadix(t,i);return}this.s=this.t=0;for(var e=t.length,o=!1,r=0;0<=--e;)f=8==u?t[e]&255:n.builtin.biginteger.intAt(t,e),0>f?"-"==t.charAt(e)&&(o=!0):(o=!1,0==r?this[this.t++]=f:r+u>this.DB?(this[this.t-1]|=(f&(1<<this.DB-r)-1)<<r,this[this.t++]=f>>this.DB-r):this[this.t-1]|=f<<r,r+=u,r>=this.DB&&(r-=this.DB));8==u&&0!=(t[0]&128)&&(this.s=-1,0<r&&(this[this.t-1]|=(1<<this.DB-r)-1<<r));this.clamp();o&&n.builtin.biginteger.ZERO.subTo(this,this)};n.builtin.biginteger.prototype.bnpClamp=function(){for(var n=this.s&this.DM;0<this.t&&this[this.t-1]==n;)--this.t};n.builtin.biginteger.prototype.bnToString=function(t){if(0>this.s)return"-"+this.negate().toString(t);if(16==t)t=4;else if(8==t)t=3;else if(2==t)t=1;else if(32==t)t=5;else if(4==t)t=2;else return this.toRadix(t);var o=(1<<t)-1,u,f=!1,e="",r=this.t,i=this.DB-r*this.DB%t;if(0<r--)for(i<this.DB&&0<(u=this[r]>>i)&&(f=!0,e=n.builtin.biginteger.int2char(u));0<=r;)i<t?(u=(this[r]&(1<<i)-1)<<t-i,u|=this[--r]>>(i+=this.DB-t)):(u=this[r]>>(i-=t)&o,0>=i&&(i+=this.DB,--r)),0<u&&(f=!0),f&&(e+=n.builtin.biginteger.int2char(u));return f?e:"0"};n.builtin.biginteger.prototype.bnNegate=function(){var t=n.builtin.biginteger.nbi();return n.builtin.biginteger.ZERO.subTo(this,t),t};n.builtin.biginteger.prototype.bnAbs=function(){return 0>this.s?this.negate():this};n.builtin.biginteger.prototype.bnCompareTo=function(n){var t=this.s-n.s,i;if(0!=t)return t;if(i=this.t,t=i-n.t,0!=t)return 0>this.s?-t:t;for(;0<=--i;)if(0!=(t=this[i]-n[i]))return t;return 0};n.builtin.biginteger.nbits=function(n){var i=1,t;return 0!=(t=n>>>16)&&(n=t,i+=16),0!=(t=n>>8)&&(n=t,i+=8),0!=(t=n>>4)&&(n=t,i+=4),0!=(t=n>>2)&&(n=t,i+=2),0!=n>>1&&(i+=1),i};n.builtin.biginteger.prototype.bnBitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+n.builtin.biginteger.nbits(this[this.t-1]^this.s&this.DM)};n.builtin.biginteger.prototype.bnpDLShiftTo=function(n,t){for(var i=this.t-1;0<=i;--i)t[i+n]=this[i];for(i=n-1;0<=i;--i)t[i]=0;t.t=this.t+n;t.s=this.s};n.builtin.biginteger.prototype.bnpDRShiftTo=function(n,t){for(var i=n;i<this.t;++i)t[i-n]=this[i];t.t=Math.max(this.t-n,0);t.s=this.s};n.builtin.biginteger.prototype.bnpLShiftTo=function(n,t){for(var u=n%this.DB,e=this.DB-u,o=(1<<e)-1,r=Math.floor(n/this.DB),f=this.s<<u&this.DM,i=this.t-1;0<=i;--i)t[i+r+1]=this[i]>>e|f,f=(this[i]&o)<<u;for(i=r-1;0<=i;--i)t[i]=0;t[r]=f;t.t=this.t+r+1;t.s=this.s;t.clamp()};n.builtin.biginteger.prototype.bnpRShiftTo=function(n,t){var i,r;if(t.s=this.s,i=Math.floor(n/this.DB),i>=this.t)t.t=0;else{var u=n%this.DB,f=this.DB-u,e=(1<<u)-1;for(t[0]=this[i]>>u,r=i+1;r<this.t;++r)t[r-i-1]|=(this[r]&e)<<f,t[r-i]=this[r]>>u;0<u&&(t[this.t-i-1]|=(this.s&e)<<f);t.t=this.t-i;t.clamp()}};n.builtin.biginteger.prototype.bnpSubTo=function(n,t){for(var r=0,i=0,u=Math.min(n.t,this.t);r<u;)i+=this[r]-n[r],t[r++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i-=n.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<n.t;)i-=n[r],t[r++]=i&this.DM,i>>=this.DB;i-=n.s}t.s=0>i?-1:0;-1>i?t[r++]=this.DV+i:0<i&&(t[r++]=i);t.t=r;t.clamp()};n.builtin.biginteger.prototype.bnpMultiplyTo=function(t,i){var u=this.abs(),f=t.abs(),r=u.t;for(i.t=r+f.t;0<=--r;)i[r]=0;for(r=0;r<f.t;++r)i[r+u.t]=u.am(0,f[r],i,r,0,u.t);i.s=0;i.clamp();this.s!=t.s&&n.builtin.biginteger.ZERO.subTo(i,i)};n.builtin.biginteger.prototype.bnpSquareTo=function(n){for(var r,i=this.abs(),t=n.t=2*i.t;0<=--t;)n[t]=0;for(t=0;t<i.t-1;++t)r=i.am(t,i[t],n,2*t,0,1),(n[t+i.t]+=i.am(t+1,2*i[t],n,2*t+1,r,i.t-t-1))>=i.DV&&(n[t+i.t]-=i.DV,n[t+i.t+1]=1);0<n.t&&(n[n.t-1]+=i.am(t,i[t],n,2*t,0,1));n.s=0;n.clamp()};n.builtin.biginteger.prototype.bnpDivRemTo=function(t,i,r){var u=t.abs(),e,f,a,s,l;if(!(0>=u.t))if(e=this.abs(),e.t<u.t)null!=i&&i.fromInt(0),null!=r&&this.copyTo(r);else if(null==r&&(r=n.builtin.biginteger.nbi()),f=n.builtin.biginteger.nbi(),a=this.s,t=t.s,s=this.DB-n.builtin.biginteger.nbits(u[u.t-1]),0<s?(u.lShiftTo(s,f),e.lShiftTo(s,r)):(u.copyTo(f),e.copyTo(r)),u=f.t,e=f[u-1],0!=e){var v=e*(1<<this.F1)+(1<u?f[u-2]>>this.F2:0),y=this.FV/v,v=(1<<this.F1)/v,p=1<<this.F2,h=r.t,c=h-u,o=null==i?n.builtin.biginteger.nbi():i;for(f.dlShiftTo(c,o),0<=r.compareTo(o)&&(r[r.t++]=1,r.subTo(o,r)),n.builtin.biginteger.ONE.dlShiftTo(u,o),o.subTo(f,f);f.t<u;)f[f.t++]=0;for(;0<=--c;)if(l=r[--h]==e?this.DM:Math.floor(r[h]*y+(r[h-1]+p)*v),(r[h]+=f.am(0,l,r,c,0,u))<l)for(f.dlShiftTo(c,o),r.subTo(o,r);r[h]<--l;)r.subTo(o,r);null!=i&&(r.drShiftTo(u,i),a!=t&&n.builtin.biginteger.ZERO.subTo(i,i));r.t=u;r.clamp();0<s&&r.rShiftTo(s,r);0>a&&n.builtin.biginteger.ZERO.subTo(r,r)}};n.builtin.biginteger.prototype.bnMod=function(t){var i=n.builtin.biginteger.nbi();return this.abs().divRemTo(t,null,i),0>this.s&&0<i.compareTo(n.builtin.biginteger.ZERO)&&t.subTo(i,i),i};n.builtin.biginteger.Classic=function(n){this.m=n};n.builtin.biginteger.prototype.cConvert=function(n){return 0>n.s||0<=n.compareTo(this.m)?n.mod(this.m):n};n.builtin.biginteger.prototype.cRevert=function(n){return n};n.builtin.biginteger.prototype.cReduce=function(n){n.divRemTo(this.m,null,n)};n.builtin.biginteger.prototype.cMulTo=function(n,t,i){n.multiplyTo(t,i);this.reduce(i)};n.builtin.biginteger.prototype.cSqrTo=function(n,t){n.squareTo(t);this.reduce(t)};n.builtin.biginteger.Classic.prototype.convert=n.builtin.biginteger.prototype.cConvert;n.builtin.biginteger.Classic.prototype.revert=n.builtin.biginteger.prototype.cRevert;n.builtin.biginteger.Classic.prototype.reduce=n.builtin.biginteger.prototype.cReduce;n.builtin.biginteger.Classic.prototype.mulTo=n.builtin.biginteger.prototype.cMulTo;n.builtin.biginteger.Classic.prototype.sqrTo=n.builtin.biginteger.prototype.cSqrTo;n.builtin.biginteger.prototype.bnpInvDigit=function(){var t;if(1>this.t||(t=this[0],0==(t&1)))return 0;var n=t&3,n=n*(2-(t&15)*n)&15,n=n*(2-(t&255)*n)&255,n=n*(2-((t&65535)*n&65535))&65535,n=n*(2-t*n%this.DV)%this.DV;return 0<n?this.DV-n:-n};n.builtin.biginteger.Montgomery=function(n){this.m=n;this.mp=n.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<n.DB-15)-1;this.mt2=2*n.t};n.builtin.biginteger.prototype.montConvert=function(t){var i=n.builtin.biginteger.nbi();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),0>t.s&&0<i.compareTo(n.builtin.biginteger.ZERO)&&this.m.subTo(i,i),i};n.builtin.biginteger.prototype.montRevert=function(t){var i=n.builtin.biginteger.nbi();return t.copyTo(i),this.reduce(i),i};n.builtin.biginteger.prototype.montReduce=function(n){for(var t;n.t<=this.mt2;)n[n.t++]=0;for(t=0;t<this.m.t;++t){var i=n[t]&32767,r=i*this.mpl+((i*this.mph+(n[t]>>15)*this.mpl&this.um)<<15)&n.DM,i=t+this.m.t;for(n[i]+=this.m.am(0,r,n,t,0,this.m.t);n[i]>=n.DV;)n[i]-=n.DV,n[++i]++}n.clamp();n.drShiftTo(this.m.t,n);0<=n.compareTo(this.m)&&n.subTo(this.m,n)};n.builtin.biginteger.prototype.montSqrTo=function(n,t){n.squareTo(t);this.reduce(t)};n.builtin.biginteger.prototype.montMulTo=function(n,t,i){n.multiplyTo(t,i);this.reduce(i)};n.builtin.biginteger.Montgomery.prototype.convert=n.builtin.biginteger.prototype.montConvert;n.builtin.biginteger.Montgomery.prototype.revert=n.builtin.biginteger.prototype.montRevert;n.builtin.biginteger.Montgomery.prototype.reduce=n.builtin.biginteger.prototype.montReduce;n.builtin.biginteger.Montgomery.prototype.mulTo=n.builtin.biginteger.prototype.montMulTo;n.builtin.biginteger.Montgomery.prototype.sqrTo=n.builtin.biginteger.prototype.montSqrTo;n.builtin.biginteger.prototype.bnpIsEven=function(){return 0==(0<this.t?this[0]&1:this.s)};n.builtin.biginteger.prototype.bnpExp=function(t,i){if(4294967295<t||1>t)return n.builtin.biginteger.ONE;var r=n.builtin.biginteger.nbi(),u=n.builtin.biginteger.nbi(),f=i.convert(this),e=n.builtin.biginteger.nbits(t)-1;for(f.copyTo(r);0<=--e;)if(i.sqrTo(r,u),0<(t&1<<e))i.mulTo(u,f,r);else var o=r,r=u,u=o;return i.revert(r)};n.builtin.biginteger.prototype.bnModPowInt=function(t,i){var r;return r=256>t||i.isEven()?new n.builtin.biginteger.Classic(i):new n.builtin.biginteger.Montgomery(i),this.exp(t,r)};n.builtin.biginteger.prototype.copyTo=n.builtin.biginteger.prototype.bnpCopyTo;n.builtin.biginteger.prototype.fromInt=n.builtin.biginteger.prototype.bnpFromInt;n.builtin.biginteger.prototype.fromString=n.builtin.biginteger.prototype.bnpFromString;n.builtin.biginteger.prototype.clamp=n.builtin.biginteger.prototype.bnpClamp;n.builtin.biginteger.prototype.dlShiftTo=n.builtin.biginteger.prototype.bnpDLShiftTo;n.builtin.biginteger.prototype.drShiftTo=n.builtin.biginteger.prototype.bnpDRShiftTo;n.builtin.biginteger.prototype.lShiftTo=n.builtin.biginteger.prototype.bnpLShiftTo;n.builtin.biginteger.prototype.rShiftTo=n.builtin.biginteger.prototype.bnpRShiftTo;n.builtin.biginteger.prototype.subTo=n.builtin.biginteger.prototype.bnpSubTo;n.builtin.biginteger.prototype.multiplyTo=n.builtin.biginteger.prototype.bnpMultiplyTo;n.builtin.biginteger.prototype.squareTo=n.builtin.biginteger.prototype.bnpSquareTo;n.builtin.biginteger.prototype.divRemTo=n.builtin.biginteger.prototype.bnpDivRemTo;n.builtin.biginteger.prototype.invDigit=n.builtin.biginteger.prototype.bnpInvDigit;n.builtin.biginteger.prototype.isEven=n.builtin.biginteger.prototype.bnpIsEven;n.builtin.biginteger.prototype.exp=n.builtin.biginteger.prototype.bnpExp;n.builtin.biginteger.prototype.toString=n.builtin.biginteger.prototype.bnToString;n.builtin.biginteger.prototype.negate=n.builtin.biginteger.prototype.bnNegate;n.builtin.biginteger.prototype.abs=n.builtin.biginteger.prototype.bnAbs;n.builtin.biginteger.prototype.compareTo=n.builtin.biginteger.prototype.bnCompareTo;n.builtin.biginteger.prototype.bitLength=n.builtin.biginteger.prototype.bnBitLength;n.builtin.biginteger.prototype.mod=n.builtin.biginteger.prototype.bnMod;n.builtin.biginteger.prototype.modPowInt=n.builtin.biginteger.prototype.bnModPowInt;n.builtin.biginteger.ZERO=n.builtin.biginteger.nbv(0);n.builtin.biginteger.ONE=n.builtin.biginteger.nbv(1);n.builtin.biginteger.prototype.bnClone=function(){var t=n.builtin.biginteger.nbi();return this.copyTo(t),t};n.builtin.biginteger.prototype.bnIntValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};n.builtin.biginteger.prototype.bnByteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};n.builtin.biginteger.prototype.bnShortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};n.builtin.biginteger.prototype.bnpChunkSize=function(n){return Math.floor(Math.LN2*this.DB/Math.log(n))};n.builtin.biginteger.prototype.bnSigNum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};n.builtin.biginteger.prototype.bnpToRadix=function(t){if(null==t&&(t=10),0==this.signum()||2>t||36<t)return"0";var u=this.chunkSize(t),u=Math.pow(t,u),e=n.builtin.biginteger.nbv(u),i=n.builtin.biginteger.nbi(),r=n.builtin.biginteger.nbi(),f="";for(this.divRemTo(e,i,r);0<i.signum();)f=(u+r.intValue()).toString(t).substr(1)+f,i.divRemTo(e,i,r);return r.intValue().toString(t)+f};n.builtin.biginteger.prototype.bnpFromRadix=function(t,i){var e;this.fromInt(0);null==i&&(i=10);for(var o=this.chunkSize(i),h=Math.pow(i,o),s=!1,f=0,r=0,u=0;u<t.length;++u)if(e=n.builtin.biginteger.intAt(t,u),0>e){if("-"==t.charAt(u)&&0==this.signum()&&(s=!0),"."==t.charAt(u))break}else r=i*r+e,++f>=o&&(this.dMultiply(h),this.dAddOffset(r,0),r=f=0);0<f&&(this.dMultiply(Math.pow(i,f)),this.dAddOffset(r,0));s&&n.builtin.biginteger.ZERO.subTo(this,this)};n.builtin.biginteger.prototype.bnpFromNumber=function(t,i,r){if("number"==typeof i)if(2>t)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.builtin.biginteger.ONE.shiftLeft(t-1),n.builtin.biginteger.op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.builtin.biginteger.ONE.shiftLeft(t-1),this);this.fromString(t+"")};n.builtin.biginteger.prototype.bnToByteArray=function(){var i=this.t,u=[],n,t,r;if(u[0]=this.s,n=this.DB-i*this.DB%8,r=0,0<i--)for(n<this.DB&&(t=this[i]>>n)!=(this.s&this.DM)>>n&&(u[r++]=t|this.s<<this.DB-n);0<=i;)(8>n?(t=(this[i]&(1<<n)-1)<<8-n,t|=this[--i]>>(n+=this.DB-8)):(t=this[i]>>(n-=8)&255,0>=n&&(n+=this.DB,--i)),0!=(t&128)&&(t|=-256),0==r&&(this.s&128)!=(t&128)&&++r,0<r||t!=this.s)&&(u[r++]=t);return u};n.builtin.biginteger.prototype.bnEquals=function(n){return 0==this.compareTo(n)};n.builtin.biginteger.prototype.bnMin=function(n){return 0>this.compareTo(n)?this:n};n.builtin.biginteger.prototype.bnMax=function(n){return 0<this.compareTo(n)?this:n};n.builtin.biginteger.prototype.bnpBitwiseTo=function(n,t,i){for(var u,f=Math.min(n.t,this.t),r=0;r<f;++r)i[r]=t(this[r],n[r]);if(n.t<this.t){for(u=n.s&this.DM,r=f;r<this.t;++r)i[r]=t(this[r],u);i.t=this.t}else{for(u=this.s&this.DM,r=f;r<n.t;++r)i[r]=t(u,n[r]);i.t=n.t}i.s=t(this.s,n.s);i.clamp()};n.builtin.biginteger.op_and=function(n,t){return n&t};n.builtin.biginteger.prototype.bnAnd=function(t){var i=n.builtin.biginteger.nbi();return this.bitwiseTo(t,n.builtin.biginteger.op_and,i),i};n.builtin.biginteger.op_or=function(n,t){return n|t};n.builtin.biginteger.prototype.bnOr=function(t){var i=n.builtin.biginteger.nbi();return this.bitwiseTo(t,n.builtin.biginteger.op_or,i),i};n.builtin.biginteger.op_xor=function(n,t){return n^t};n.builtin.biginteger.prototype.bnXor=function(t){var i=n.builtin.biginteger.nbi();return this.bitwiseTo(t,n.builtin.biginteger.op_xor,i),i};n.builtin.biginteger.op_andnot=function(n,t){return n&~t};n.builtin.biginteger.prototype.bnAndNot=function(t){var i=n.builtin.biginteger.nbi();return this.bitwiseTo(t,n.builtin.biginteger.op_andnot,i),i};n.builtin.biginteger.prototype.bnNot=function(){for(var t=n.builtin.biginteger.nbi(),i=0;i<this.t;++i)t[i]=this.DM&~this[i];return t.t=this.t,t.s=~this.s,t};n.builtin.biginteger.prototype.bnShiftLeft=function(t){var i=n.builtin.biginteger.nbi();return 0>t?this.rShiftTo(-t,i):this.lShiftTo(t,i),i};n.builtin.biginteger.prototype.bnShiftRight=function(t){var i=n.builtin.biginteger.nbi();return 0>t?this.lShiftTo(-t,i):this.rShiftTo(t,i),i};n.builtin.biginteger.lbit=function(n){if(0==n)return-1;var t=0;return 0==(n&65535)&&(n>>=16,t+=16),0==(n&255)&&(n>>=8,t+=8),0==(n&15)&&(n>>=4,t+=4),0==(n&3)&&(n>>=2,t+=2),0==(n&1)&&++t,t};n.builtin.biginteger.prototype.bnGetLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+n.builtin.biginteger.lbit(this[t]);return 0>this.s?this.t*this.DB:-1};n.builtin.biginteger.cbit=function(n){for(var t=0;0!=n;)n&=n-1,++t;return t};n.builtin.biginteger.prototype.bnBitCount=function(){for(var i=0,r=this.s&this.DM,t=0;t<this.t;++t)i+=n.builtin.biginteger.cbit(this[t]^r);return i};n.builtin.biginteger.prototype.bnTestBit=function(n){var t=Math.floor(n/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<n%this.DB)};n.builtin.biginteger.prototype.bnpChangeBit=function(t,i){var r=n.builtin.biginteger.ONE.shiftLeft(t);return this.bitwiseTo(r,i,r),r};n.builtin.biginteger.prototype.bnSetBit=function(t){return this.changeBit(t,n.builtin.biginteger.op_or)};n.builtin.biginteger.prototype.bnClearBit=function(t){return this.changeBit(t,n.builtin.biginteger.op_andnot)};n.builtin.biginteger.prototype.bnFlipBit=function(t){return this.changeBit(t,n.builtin.biginteger.op_xor)};n.builtin.biginteger.prototype.bnpAddTo=function(n,t){for(var r=0,i=0,u=Math.min(n.t,this.t);r<u;)i+=this[r]+n[r],t[r++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i+=n.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<n.t;)i+=n[r],t[r++]=i&this.DM,i>>=this.DB;i+=n.s}t.s=0>i?-1:0;0<i?t[r++]=i:-1>i&&(t[r++]=this.DV+i);t.t=r;t.clamp()};n.builtin.biginteger.prototype.bnAdd=function(t){var i=n.builtin.biginteger.nbi();return this.addTo(t,i),i};n.builtin.biginteger.prototype.bnSubtract=function(t){var i=n.builtin.biginteger.nbi();return this.subTo(t,i),i};n.builtin.biginteger.prototype.bnMultiply=function(t){var i=n.builtin.biginteger.nbi();return this.multiplyTo(t,i),i};n.builtin.biginteger.prototype.bnDivide=function(t){var i=n.builtin.biginteger.nbi();return this.divRemTo(t,i,null),i};n.builtin.biginteger.prototype.bnRemainder=function(t){var i=n.builtin.biginteger.nbi();return this.divRemTo(t,null,i),i};n.builtin.biginteger.prototype.bnDivideAndRemainder=function(t){var i=n.builtin.biginteger.nbi(),r=n.builtin.biginteger.nbi();return this.divRemTo(t,i,r),[i,r]};n.builtin.biginteger.prototype.bnpDMultiply=function(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()};n.builtin.biginteger.prototype.bnpDAddOffset=function(n,t){if(0!=n){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=n;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}};n.builtin.biginteger.NullExp=function(){};n.builtin.biginteger.prototype.nNop=function(n){return n};n.builtin.biginteger.prototype.nMulTo=function(n,t,i){n.multiplyTo(t,i)};n.builtin.biginteger.prototype.nSqrTo=function(n,t){n.squareTo(t)};n.builtin.biginteger.NullExp.prototype.convert=n.builtin.biginteger.prototype.nNop;n.builtin.biginteger.NullExp.prototype.revert=n.builtin.biginteger.prototype.nNop;n.builtin.biginteger.NullExp.prototype.mulTo=n.builtin.biginteger.prototype.nMulTo;n.builtin.biginteger.NullExp.prototype.sqrTo=n.builtin.biginteger.prototype.nSqrTo;n.builtin.biginteger.prototype.bnPow=function(t){return this.exp(t,new n.builtin.biginteger.NullExp)};n.builtin.biginteger.prototype.bnpMultiplyLowerTo=function(n,t,i){var r=Math.min(this.t+n.t,t),u;for(i.s=0,i.t=r;0<r;)i[--r]=0;for(u=i.t-this.t;r<u;++r)i[r+this.t]=this.am(0,n[r],i,r,0,this.t);for(u=Math.min(n.t,t);r<u;++r)this.am(0,n[r],i,r,0,t-r);i.clamp()};n.builtin.biginteger.prototype.bnpMultiplyUpperTo=function(n,t,i){--t;var r=i.t=this.t+n.t-t;for(i.s=0;0<=--r;)i[r]=0;for(r=Math.max(t-this.t,0);r<n.t;++r)i[this.t+r-t]=this.am(t-r,n[r],i,0,0,this.t+r-t);i.clamp();i.drShiftTo(1,i)};n.builtin.biginteger.Barrett=function(t){this.r2=n.builtin.biginteger.nbi();this.q3=n.builtin.biginteger.nbi();n.builtin.biginteger.ONE.dlShiftTo(2*t.t,this.r2);this.mu=this.r2.divide(t);this.m=t};n.builtin.biginteger.prototype.barrettConvert=function(t){if(0>t.s||t.t>2*this.m.t)return t.mod(this.m);if(0>t.compareTo(this.m))return t;var i=n.builtin.biginteger.nbi();return t.copyTo(i),this.reduce(i),i};n.builtin.biginteger.prototype.barrettRevert=function(n){return n};n.builtin.biginteger.prototype.barrettReduce=function(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>n.compareTo(this.r2);)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);0<=n.compareTo(this.m);)n.subTo(this.m,n)};n.builtin.biginteger.prototype.barrettSqrTo=function(n,t){n.squareTo(t);this.reduce(t)};n.builtin.biginteger.prototype.barrettMulTo=function(n,t,i){n.multiplyTo(t,i);this.reduce(i)};n.builtin.biginteger.Barrett.prototype.convert=n.builtin.biginteger.prototype.barrettConvert;n.builtin.biginteger.Barrett.prototype.revert=n.builtin.biginteger.prototype.barrettRevert;n.builtin.biginteger.Barrett.prototype.reduce=n.builtin.biginteger.prototype.barrettReduce;n.builtin.biginteger.Barrett.prototype.mulTo=n.builtin.biginteger.prototype.barrettMulTo;n.builtin.biginteger.Barrett.prototype.sqrTo=n.builtin.biginteger.prototype.barrettSqrTo;n.builtin.biginteger.prototype.bnModPow=function(t,i){var r=t.bitLength(),l,f=n.builtin.biginteger.nbv(1),e;if(0>=r)return f;l=18>r?1:48>r?3:144>r?4:768>r?5:6;e=8>r?new n.builtin.biginteger.Classic(i):i.isEven()?new n.builtin.biginteger.Barrett(i):new n.builtin.biginteger.Montgomery(i);var h=[],u=3,a=l-1,v=(1<<l)-1;if(h[1]=e.convert(this),1<l)for(r=n.builtin.biginteger.nbi(),e.sqrTo(h[1],r);u<=v;)h[u]=n.builtin.biginteger.nbi(),e.mulTo(r,h[u-2],h[u]),u+=2;for(var o=t.t-1,c,y=!0,s=n.builtin.biginteger.nbi(),r=n.builtin.biginteger.nbits(t[o])-1;0<=o;){for(r>=a?c=t[o]>>r-a&v:(c=(t[o]&(1<<r+1)-1)<<a-r,0<o&&(c|=t[o-1]>>this.DB+r-a)),u=l;0==(c&1);)c>>=1,--u;if(0>(r-=u)&&(r+=this.DB,--o),y)h[c].copyTo(f),y=!1;else{for(;1<u;)e.sqrTo(f,s),e.sqrTo(s,f),u-=2;0<u?e.sqrTo(f,s):(u=f,f=s,s=u);e.mulTo(s,h[c],f)}for(;0<=o&&0==(t[o]&1<<r);)e.sqrTo(f,s),u=f,f=s,s=u,0>--r&&(r=this.DB-1,--o)}return e.revert(f)};n.builtin.biginteger.prototype.bnGCD=function(n){var t=0>this.s?this.negate():this.clone(),i,r;if(n=0>n.s?n.negate():n.clone(),0>t.compareTo(n)&&(i=t,t=n,n=i),i=t.getLowestSetBit(),r=n.getLowestSetBit(),0>r)return t;for(i<r&&(r=i),0<r&&(t.rShiftTo(r,t),n.rShiftTo(r,n));0<t.signum();)0<(i=t.getLowestSetBit())&&t.rShiftTo(i,t),0<(i=n.getLowestSetBit())&&n.rShiftTo(i,n),0<=t.compareTo(n)?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return 0<r&&n.lShiftTo(r,n),n};n.builtin.biginteger.prototype.bnpModInt=function(n){var r,t,i;if(0>=n)return 0;if(r=this.DV%n,t=0>this.s?n-1:0,0<this.t)if(0==r)t=this[0]%n;else for(i=this.t-1;0<=i;--i)t=(r*t+this[i])%n;return t};n.builtin.biginteger.prototype.bnModInverse=function(t){var s=t.isEven();if(this.isEven()&&s||0==t.signum())return n.builtin.biginteger.ZERO;for(var u=t.clone(),f=this.clone(),e=n.builtin.biginteger.nbv(1),r=n.builtin.biginteger.nbv(0),o=n.builtin.biginteger.nbv(0),i=n.builtin.biginteger.nbv(1);0!=u.signum();){for(;u.isEven();)u.rShiftTo(1,u),s?(e.isEven()&&r.isEven()||(e.addTo(this,e),r.subTo(t,r)),e.rShiftTo(1,e)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);for(;f.isEven();)f.rShiftTo(1,f),s?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(t,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);0<=u.compareTo(f)?(u.subTo(f,u),s&&e.subTo(o,e),r.subTo(i,r)):(f.subTo(u,f),s&&o.subTo(e,o),i.subTo(r,i))}if(0!=f.compareTo(n.builtin.biginteger.ONE))return n.builtin.biginteger.ZERO;if(0<=i.compareTo(t))return i.subtract(t);if(0>i.signum())i.addTo(t,i);else return i;return 0>i.signum()?i.add(t):i};n.builtin.biginteger.lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];n.builtin.biginteger.lplim=67108864/n.builtin.biginteger.lowprimes[n.builtin.biginteger.lowprimes.length-1];n.builtin.biginteger.prototype.bnIsProbablePrime=function(t){var i,r=this.abs(),u,f;if(1==r.t&&r[0]<=n.builtin.biginteger.lowprimes[n.builtin.biginteger.lowprimes.length-1]){for(i=0;i<n.builtin.biginteger.lowprimes.length;++i)if(r[0]==n.builtin.biginteger.lowprimes[i])return!0;return!1}if(r.isEven())return!1;for(i=1;i<n.builtin.biginteger.lowprimes.length;){for(u=n.builtin.biginteger.lowprimes[i],f=i+1;f<n.builtin.biginteger.lowprimes.length&&u<n.builtin.biginteger.lplim;)u*=n.builtin.biginteger.lowprimes[f++];for(u=r.modInt(u);i<f;)if(0==u%n.builtin.biginteger.lowprimes[i++])return!1}return r.millerRabin(t)};n.builtin.biginteger.prototype.bnpMillerRabin=function(t){var r=this.subtract(n.builtin.biginteger.ONE),f=r.getLowestSetBit(),o,e,u,i,s;if(0>=f)return!1;for(o=r.shiftRight(f),t=t+1>>1,t>n.builtin.biginteger.lowprimes.length&&(t=n.builtin.biginteger.lowprimes.length),e=n.builtin.biginteger.nbi(),u=0;u<t;++u)if(e.fromInt(n.builtin.biginteger.lowprimes[u]),i=e.modPow(o,this),0!=i.compareTo(n.builtin.biginteger.ONE)&&0!=i.compareTo(r)){for(s=1;s++<f&&0!=i.compareTo(r);)if(i=i.modPowInt(2,this),0==i.compareTo(n.builtin.biginteger.ONE))return!1;if(0!=i.compareTo(r))return!1}return!0};n.builtin.biginteger.prototype.isnegative=function(){return 0>this.s};n.builtin.biginteger.prototype.ispositive=function(){return 0<=this.s};n.builtin.biginteger.prototype.trueCompare=function(n){return 0<=this.s&&0>n.s?1:0>this.s&&0<=n.s?-1:this.compare(n)};n.builtin.biginteger.prototype.chunkSize=n.builtin.biginteger.prototype.bnpChunkSize;n.builtin.biginteger.prototype.toRadix=n.builtin.biginteger.prototype.bnpToRadix;n.builtin.biginteger.prototype.fromRadix=n.builtin.biginteger.prototype.bnpFromRadix;n.builtin.biginteger.prototype.fromNumber=n.builtin.biginteger.prototype.bnpFromNumber;n.builtin.biginteger.prototype.bitwiseTo=n.builtin.biginteger.prototype.bnpBitwiseTo;n.builtin.biginteger.prototype.changeBit=n.builtin.biginteger.prototype.bnpChangeBit;n.builtin.biginteger.prototype.addTo=n.builtin.biginteger.prototype.bnpAddTo;n.builtin.biginteger.prototype.dMultiply=n.builtin.biginteger.prototype.bnpDMultiply;n.builtin.biginteger.prototype.dAddOffset=n.builtin.biginteger.prototype.bnpDAddOffset;n.builtin.biginteger.prototype.multiplyLowerTo=n.builtin.biginteger.prototype.bnpMultiplyLowerTo;n.builtin.biginteger.prototype.multiplyUpperTo=n.builtin.biginteger.prototype.bnpMultiplyUpperTo;n.builtin.biginteger.prototype.modInt=n.builtin.biginteger.prototype.bnpModInt;n.builtin.biginteger.prototype.millerRabin=n.builtin.biginteger.prototype.bnpMillerRabin;n.builtin.biginteger.prototype.clone=n.builtin.biginteger.prototype.bnClone;n.builtin.biginteger.prototype.intValue=n.builtin.biginteger.prototype.bnIntValue;n.builtin.biginteger.prototype.byteValue=n.builtin.biginteger.prototype.bnByteValue;n.builtin.biginteger.prototype.shortValue=n.builtin.biginteger.prototype.bnShortValue;n.builtin.biginteger.prototype.signum=n.builtin.biginteger.prototype.bnSigNum;n.builtin.biginteger.prototype.toByteArray=n.builtin.biginteger.prototype.bnToByteArray;n.builtin.biginteger.prototype.equals=n.builtin.biginteger.prototype.bnEquals;n.builtin.biginteger.prototype.compare=n.builtin.biginteger.prototype.compareTo;n.builtin.biginteger.prototype.min=n.builtin.biginteger.prototype.bnMin;n.builtin.biginteger.prototype.max=n.builtin.biginteger.prototype.bnMax;n.builtin.biginteger.prototype.and=n.builtin.biginteger.prototype.bnAnd;n.builtin.biginteger.prototype.or=n.builtin.biginteger.prototype.bnOr;n.builtin.biginteger.prototype.xor=n.builtin.biginteger.prototype.bnXor;n.builtin.biginteger.prototype.andNot=n.builtin.biginteger.prototype.bnAndNot;n.builtin.biginteger.prototype.not=n.builtin.biginteger.prototype.bnNot;n.builtin.biginteger.prototype.shiftLeft=n.builtin.biginteger.prototype.bnShiftLeft;n.builtin.biginteger.prototype.shiftRight=n.builtin.biginteger.prototype.bnShiftRight;n.builtin.biginteger.prototype.getLowestSetBit=n.builtin.biginteger.prototype.bnGetLowestSetBit;n.builtin.biginteger.prototype.bitCount=n.builtin.biginteger.prototype.bnBitCount;n.builtin.biginteger.prototype.testBit=n.builtin.biginteger.prototype.bnTestBit;n.builtin.biginteger.prototype.setBit=n.builtin.biginteger.prototype.bnSetBit;n.builtin.biginteger.prototype.clearBit=n.builtin.biginteger.prototype.bnClearBit;n.builtin.biginteger.prototype.flipBit=n.builtin.biginteger.prototype.bnFlipBit;n.builtin.biginteger.prototype.add=n.builtin.biginteger.prototype.bnAdd;n.builtin.biginteger.prototype.subtract=n.builtin.biginteger.prototype.bnSubtract;n.builtin.biginteger.prototype.multiply=n.builtin.biginteger.prototype.bnMultiply;n.builtin.biginteger.prototype.divide=n.builtin.biginteger.prototype.bnDivide;n.builtin.biginteger.prototype.remainder=n.builtin.biginteger.prototype.bnRemainder;n.builtin.biginteger.prototype.divideAndRemainder=n.builtin.biginteger.prototype.bnDivideAndRemainder;n.builtin.biginteger.prototype.modPow=n.builtin.biginteger.prototype.bnModPow;n.builtin.biginteger.prototype.modInverse=n.builtin.biginteger.prototype.bnModInverse;n.builtin.biginteger.prototype.pow=n.builtin.biginteger.prototype.bnPow;n.builtin.biginteger.prototype.gcd=n.builtin.biginteger.prototype.bnGCD;n.builtin.biginteger.prototype.isProbablePrime=n.builtin.biginteger.prototype.bnIsProbablePrime;n.builtin.nmber=function(t,i){if(!(this instanceof n.builtin.nmber))return new n.builtin.nmber(t,i);if(t instanceof n.builtin.str&&(t=t.v),t instanceof n.builtin.nmber)this.v=t.v,this.skType=t.skType;else if("number"==typeof t){if(this.v=t,void 0===i)this.skType=t>n.builtin.nmber.threshold$||t<-n.builtin.nmber.threshold$||0!=t%1?n.builtin.nmber.float$:n.builtin.nmber.int$;else if(this.skType=i,i===n.builtin.nmber.int$&&(t>n.builtin.nmber.threshold$||t<-n.builtin.nmber.threshold$))return new n.builtin.lng(t)}else{if("string"==typeof t){var r=n.numberFromStr(t);return void 0!==i&&(r.skType=i),i===n.builtin.nmber.int$&&(r.v>n.builtin.nmber.threshold$||r.v<-n.builtin.nmber.threshold$)?new n.builtin.lng(t):r}if(t instanceof n.builtin.lng)return n.numberFromStr(t.str$(10,!0));if(t instanceof n.builtin.biginteger){if(r=n.numberFromStr(t.toString()),void 0!==i&&(r.skType=i),i===n.builtin.nmber.int$&&(r.v>n.builtin.nmber.threshold$||r.v<-n.builtin.nmber.threshold$))return new n.builtin.lng(t)}else this.v=0,this.skType=void 0===i?n.builtin.nmber.int$:i}return this};n.builtin.nmber.prototype.tp$index=function(){return this.v};n.builtin.nmber.prototype.tp$hash=function(){return new n.builtin.nmber(this.v,n.builtin.nmber.int$)};n.builtin.nmber.prototype.tp$name="number";n.builtin.nmber.prototype.ob$type=n.builtin.type.makeIntoTypeObj("number",n.builtin.nmber);n.builtin.nmber.threshold$=Math.pow(2,53);n.builtin.nmber.float$="float";n.builtin.nmber.int$="int";n.builtin.nmber.fromInt$=function(t){return new n.builtin.nmber(t,void 0)};n.numberFromStr=function(t){var r,i;return"inf"==t?new n.builtin.nmber(Infinity,void 0):"-inf"==t?new n.builtin.nmber(-Infinity,void 0):(r=new n.builtin.nmber(0,void 0),-1!==t.indexOf(".")||-1!==t.indexOf("e")||-1!==t.indexOf("E"))?(r.v=parseFloat(t),r.skType=n.builtin.nmber.float$,r):(i=t,"-"===t.charAt(0)&&(i=t.substr(1)),t="0"!==i.charAt(0)||"x"!==i.charAt(1)&&"X"!==i.charAt(1)?"0"!==i.charAt(0)||"b"!==i.charAt(1)&&"B"!==i.charAt(1)?"0"===i.charAt(0)?parseInt(t,8):parseInt(t,10):parseInt(t,2):parseInt(t,16),r.v=t,r.skType=n.builtin.nmber.int$,r)};t.exportSymbol("Sk.numberFromStr",n.numberFromStr);n.builtin.nmber.prototype.clone=function(){return new n.builtin.nmber(this,void 0)};n.builtin.nmber.prototype.toFixed=function(t){return t=n.builtin.asnum$(t),this.v.toFixed(t)};n.builtin.nmber.prototype.nb$add=function(t){var i;return("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.nmber)?(i=new n.builtin.nmber(this.v+t.v,void 0),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$?i.skType=n.builtin.nmber.float$:(i.skType=n.builtin.nmber.int$,i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$add(t.v)),i):t instanceof n.builtin.lng?this.skType===n.builtin.nmber.float$?new n.builtin.nmber(this.v+parseFloat(t.str$(10,!0)),n.builtin.nmber.float$):new n.builtin.lng(this.v).nb$add(t):void 0};n.builtin.nmber.prototype.nb$subtract=function(t){var i;return("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.nmber)?(i=new n.builtin.nmber(this.v-t.v,void 0),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$?i.skType=n.builtin.nmber.float$:(i.skType=n.builtin.nmber.int$,i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$subtract(t.v)),i):t instanceof n.builtin.lng?this.skType===n.builtin.nmber.float$?new n.builtin.nmber(this.v-parseFloat(t.str$(10,!0)),n.builtin.nmber.float$):new n.builtin.lng(this.v).nb$subtract(t):void 0};n.builtin.nmber.prototype.nb$multiply=function(t){var i;return("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.nmber)?(i=new n.builtin.nmber(this.v*t.v,void 0),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$?i.skType=n.builtin.nmber.float$:(i.skType=n.builtin.nmber.int$,i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$multiply(t.v)),i):t instanceof n.builtin.lng?this.skType===n.builtin.nmber.float$?new n.builtin.nmber(this.v*parseFloat(t.str$(10,!0)),n.builtin.nmber.float$):new n.builtin.lng(this.v).nb$multiply(t):void 0};n.builtin.nmber.prototype.nb$divide=function(t){var i;if("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.nmber){if(0==t.v)throw new n.builtin.ZeroDivisionError("integer division or modulo by zero");return Infinity===this.v?Infinity===t.v||-Infinity===t.v?new n.builtin.nmber(NaN,n.builtin.nmber.float$):t.nb$isnegative()?new n.builtin.nmber(-Infinity,n.builtin.nmber.float$):new n.builtin.nmber(Infinity,n.builtin.nmber.float$):-Infinity===this.v?Infinity===t.v||-Infinity===t.v?new n.builtin.nmber(NaN,n.builtin.nmber.float$):t.nb$isnegative()?new n.builtin.nmber(Infinity,n.builtin.nmber.float$):new n.builtin.nmber(-Infinity,n.builtin.nmber.float$):(i=new n.builtin.nmber(this.v/t.v,void 0),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$||n.python3?i.skType=n.builtin.nmber.float$:(i.v=Math.floor(i.v),i.skType=n.builtin.nmber.int$,i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$divide(t.v)),i)}if(t instanceof n.builtin.lng){if(0==t.longCompare(n.builtin.biginteger.ZERO))throw new n.builtin.ZeroDivisionError("integer division or modulo by zero");return Infinity===this.v?t.nb$isnegative()?new n.builtin.nmber(-Infinity,n.builtin.nmber.float$):new n.builtin.nmber(Infinity,n.builtin.nmber.float$):-Infinity===this.v?t.nb$isnegative()?new n.builtin.nmber(Infinity,n.builtin.nmber.float$):new n.builtin.nmber(-Infinity,n.builtin.nmber.float$):i=this.skType===n.builtin.nmber.float$||n.python3?new n.builtin.nmber(this.v/parseFloat(t.str$(10,!0)),n.builtin.nmber.float$):new n.builtin.lng(this.v).nb$divide(t)}};n.builtin.nmber.prototype.nb$floor_divide=function(t){var i;if("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),Infinity===this.v||-Infinity===this.v)return new n.builtin.nmber(NaN,n.builtin.nmber.float$);if(t instanceof n.builtin.nmber){if(0==t.v)throw new n.builtin.ZeroDivisionError("integer division or modulo by zero");return Infinity===t.v?this.nb$isnegative()?new n.builtin.nmber(-1,n.builtin.nmber.float$):new n.builtin.nmber(0,n.builtin.nmber.float$):-Infinity===t.v?this.nb$isnegative()||!this.nb$nonzero()?new n.builtin.nmber(0,n.builtin.nmber.float$):new n.builtin.nmber(-1,n.builtin.nmber.float$):(i=new n.builtin.nmber(Math.floor(this.v/t.v),void 0),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$?i.skType=n.builtin.nmber.float$:(i.v=Math.floor(i.v),i.skType=n.builtin.nmber.int$,i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$floor_divide(t.v)),i)}if(t instanceof n.builtin.lng){if(0==t.longCompare(n.builtin.biginteger.ZERO))throw new n.builtin.ZeroDivisionError("integer division or modulo by zero");return this.skType===n.builtin.nmber.float$?(i=Math.floor(this.v/parseFloat(t.str$(10,!0))),i=new n.builtin.nmber(i,n.builtin.nmber.float$)):i=new n.builtin.lng(this.v).nb$floor_divide(t),i}};n.builtin.nmber.prototype.nb$remainder=function(t){var i;if("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.nmber){if(0==t.v)throw new n.builtin.ZeroDivisionError("integer division or modulo by zero");return 0==this.v?this.skType==n.builtin.nmber.float$||t.skType==n.builtin.nmber.float$?new n.builtin.nmber(0,n.builtin.nmber.float$):new n.builtin.nmber(0,n.builtin.nmber.int$):Infinity===t.v?Infinity===this.v||-Infinity===this.v?new n.builtin.nmber(NaN,n.builtin.nmber.float$):this.nb$ispositive()?new n.builtin.nmber(this.v,n.builtin.nmber.float$):new n.builtin.nmber(Infinity,n.builtin.nmber.float$):(i=this.v%t.v,0>this.v?0<t.v&&0>i&&(i+=t.v):0>t.v&&0!=i&&(i+=t.v),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$?i=new n.builtin.nmber(i,n.builtin.nmber.float$):(i=new n.builtin.nmber(i,n.builtin.nmber.int$),i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$remainder(t.v)),i)}if(t instanceof n.builtin.lng){if(0==t.longCompare(n.builtin.biginteger.ZERO))throw new n.builtin.ZeroDivisionError("integer division or modulo by zero");return 0==this.v?this.skType===n.builtin.nmber.int$?new n.builtin.lng(0):new n.builtin.nmber(0,this.skType):(this.skType===n.builtin.nmber.float$?(t=parseFloat(t.str$(10,!0)),i=this.v%t,0>i?0<t&&0!=i&&(i+=t):0>t&&0!=i&&(i+=t),i=new n.builtin.nmber(i,n.builtin.nmber.float$)):i=new n.builtin.lng(this.v).nb$remainder(t),i)}};n.builtin.nmber.prototype.nb$power=function(t){var i;if("number"==typeof t?t=new n.builtin.nmber(t,void 0):t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.bool&&(t=new n.builtin.nmber(n.builtin.asnum$(t),void 0)),t instanceof n.builtin.nmber){if(0>this.v&&0!=t.v%1)throw new n.builtin.NegativePowerError("cannot raise a negative number to a fractional power");if(0==this.v&&0>t.v)throw new n.builtin.NegativePowerError("cannot raise zero to a negative power");if(i=new n.builtin.nmber(Math.pow(this.v,t.v),void 0),this.skType===n.builtin.nmber.float$||t.skType===n.builtin.nmber.float$||0>t.v?i.skType=n.builtin.nmber.float$:(i.v=Math.floor(i.v),i.skType=n.builtin.nmber.int$,i.v>n.builtin.nmber.threshold$||i.v<-n.builtin.nmber.threshold$)&&(i=new n.builtin.lng(this.v).nb$power(t.v)),Infinity===Math.abs(i.v)&&Infinity!==Math.abs(this.v)&&Infinity!==Math.abs(t.v))throw new n.builtin.OverflowError("Numerical result out of range");return i}if(t instanceof n.builtin.lng){if(0==this.v&&0>t.longCompare(n.builtin.biginteger.ZERO))throw new n.builtin.NegativePowerError("cannot raise zero to a negative power");return this.skType===n.builtin.nmber.float$||t.nb$isnegative()?new n.builtin.nmber(Math.pow(this.v,parseFloat(t.str$(10,!0))),n.builtin.nmber.float$):new n.builtin.lng(this.v).nb$power(t)}};n.builtin.nmber.prototype.nb$and=function(t){return t=n.builtin.asnum$(t),t&=this.v,void 0!==t&&0>t&&(t+=4294967296),void 0!==t?new n.builtin.nmber(t,void 0):void 0};n.builtin.nmber.prototype.nb$or=function(t){return t=n.builtin.asnum$(t),t|=this.v,void 0!==t&&0>t&&(t+=4294967296),void 0!==t?new n.builtin.nmber(t,void 0):void 0};n.builtin.nmber.prototype.nb$xor=function(t){return t=n.builtin.asnum$(t),t^=this.v,void 0!==t&&0>t&&(t+=4294967296),void 0!==t?new n.builtin.nmber(t,void 0):void 0};n.builtin.nmber.prototype.nb$lshift=function(t){var i;if(t=n.builtin.asnum$(t),void 0!==t){if(0>t)throw new n.builtin.ValueError("negative shift count");if(i=this.v<<t,i<=this.v)return n.builtin.lng.fromInt$(this.v).nb$lshift(t)}if(void 0!==i)return new n.builtin.nmber(i,this.skType)};n.builtin.nmber.prototype.nb$rshift=function(t){var i;if(t=n.builtin.asnum$(t),void 0!==t){if(0>t)throw new n.builtin.ValueError("negative shift count");i=this.v>>t;0<this.v&&0>i&&(i&=Math.pow(2,32-t)-1)}if(void 0!==i)return new n.builtin.nmber(i,this.skType)};n.builtin.nmber.prototype.nb$inplace_add=n.builtin.nmber.prototype.nb$add;n.builtin.nmber.prototype.nb$inplace_subtract=n.builtin.nmber.prototype.nb$subtract;n.builtin.nmber.prototype.nb$inplace_multiply=n.builtin.nmber.prototype.nb$multiply;n.builtin.nmber.prototype.nb$inplace_divide=n.builtin.nmber.prototype.nb$divide;n.builtin.nmber.prototype.nb$inplace_remainder=n.builtin.nmber.prototype.nb$remainder;n.builtin.nmber.prototype.nb$inplace_floor_divide=n.builtin.nmber.prototype.nb$floor_divide;n.builtin.nmber.prototype.nb$inplace_power=n.builtin.nmber.prototype.nb$power;n.builtin.nmber.prototype.nb$inplace_and=n.builtin.nmber.prototype.nb$and;n.builtin.nmber.prototype.nb$inplace_or=n.builtin.nmber.prototype.nb$or;n.builtin.nmber.prototype.nb$inplace_xor=n.builtin.nmber.prototype.nb$xor;n.builtin.nmber.prototype.nb$inplace_lshift=n.builtin.nmber.prototype.nb$lshift;n.builtin.nmber.prototype.nb$inplace_rshift=n.builtin.nmber.prototype.nb$rshift;n.builtin.nmber.prototype.nb$negative=function(){return new n.builtin.nmber(-this.v,void 0)};n.builtin.nmber.prototype.nb$positive=function(){return this.clone()};n.builtin.nmber.prototype.nb$nonzero=function(){return 0!==this.v};n.builtin.nmber.prototype.nb$isnegative=function(){return 0>this.v};n.builtin.nmber.prototype.nb$ispositive=function(){return 0<=this.v};n.builtin.nmber.prototype.numberCompare=function(t){if(t instanceof n.builtin.bool&&(t=n.builtin.asnum$(t)),t instanceof n.builtin.none&&(t=0),"number"==typeof t)return this.v-t;if(t instanceof n.builtin.nmber)return Infinity==this.v&&Infinity==t.v||-Infinity==this.v&&-Infinity==t.v?0:this.v-t.v;if(t instanceof n.builtin.lng){if(this.skType===n.builtin.nmber.int$||0==this.v%1)return new n.builtin.lng(this.v).longCompare(t);if(t=this.nb$subtract(t),t instanceof n.builtin.nmber)return t.v;if(t instanceof n.builtin.lng)return t.longCompare(n.builtin.biginteger.ZERO)}};n.builtin.nmber.prototype.__eq__=function(t,i){return 0==t.numberCompare(i)&&!(i instanceof n.builtin.none)};n.builtin.nmber.prototype.__ne__=function(t,i){return 0!=t.numberCompare(i)||i instanceof n.builtin.none};n.builtin.nmber.prototype.__lt__=function(n,t){return 0>n.numberCompare(t)};n.builtin.nmber.prototype.__le__=function(n,t){return 0>=n.numberCompare(t)};n.builtin.nmber.prototype.__gt__=function(n,t){return 0<n.numberCompare(t)};n.builtin.nmber.prototype.__ge__=function(n,t){return 0<=n.numberCompare(t)};n.builtin.nmber.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.nmber.prototype.$r=function(){return new n.builtin.str(this.str$(10,!0))};n.builtin.nmber.prototype.tp$str=function(){return new n.builtin.str(this.str$(10,!0))};n.builtin.nmber.prototype.str$=function(t,i){var u,r;if(isNaN(this.v))return"nan";if(void 0===i&&(i=!0),Infinity==this.v)return"inf";if(-Infinity==this.v&&i)return"-inf";if(-Infinity==this.v&&!i)return"inf";if(u=i?this.v:Math.abs(this.v),void 0===t||10===t)if(this.skType==n.builtin.nmber.float$){r=u.toPrecision(12);var f=r.indexOf("."),e=u.toString().slice(0,f),f=u.toString().slice(f);for(e.match(/^-?0$/)&&f.slice(1).match(/^0{4,}/)&&(r=12>r.length?u.toExponential():u.toExponential(11));"0"==r.charAt(r.length-1)&&0>r.indexOf("e");)r=r.substring(0,r.length-1);"."==r.charAt(r.length-1)&&(r+="0");r=r.replace(/\.0+e/,"e","i");r=r.replace(/(e[-+])([1-9])$/,"$10$2");r=r.replace(/0+(e.*)/,"$1")}else r=u.toString();else r=u.toString(t);return this.skType!==n.builtin.nmber.float$?r:(0>r.indexOf(".")&&0>r.indexOf("E")&&0>r.indexOf("e")&&(r+=".0"),r)};t.exportSymbol("Sk.builtin.nmber",n.builtin.nmber);n.builtin.lng=function(t,i){if(i=n.builtin.asnum$(i),!(this instanceof n.builtin.lng))return new n.builtin.lng(t,i);if(void 0===t)this.biginteger=new n.builtin.biginteger(0);else if(t instanceof n.builtin.lng)this.biginteger=t.biginteger.clone();else if(t instanceof n.builtin.biginteger)this.biginteger=t;else{if(t instanceof String)return n.longFromStr(t,i);if(t instanceof n.builtin.str)return n.longFromStr(t.v,i);if(void 0!==t&&!n.builtin.checkString(t)&&!n.builtin.checkNumber(t))if(!0===t)t=1;else if(!1===t)t=0;else throw new n.builtin.TypeError("long() argument must be a string or a number, not '"+n.abstr.typeName(t)+"'");t=n.builtin.asnum$nofloat(t);this.biginteger=new n.builtin.biginteger(t)}return this};n.builtin.lng.prototype.tp$index=function(){return parseInt(this.str$(10,!0),10)};n.builtin.lng.prototype.tp$hash=function(){return new n.builtin.nmber(this.tp$index(),n.builtin.nmber.int$)};n.builtin.lng.prototype.tp$name="long";n.builtin.lng.prototype.ob$type=n.builtin.type.makeIntoTypeObj("long",n.builtin.lng);n.builtin.lng.threshold$=Math.pow(2,53);n.builtin.lng.MAX_INT$=new n.builtin.lng(n.builtin.lng.threshold$);n.builtin.lng.MIN_INT$=new n.builtin.lng(-n.builtin.lng.threshold$);n.builtin.lng.prototype.cantBeInt=function(){return 0<this.longCompare(n.builtin.lng.MAX_INT$)||0>this.longCompare(n.builtin.lng.MIN_INT$)};n.builtin.lng.fromInt$=function(t){return new n.builtin.lng(t)};n.longFromStr=function(t,i){var r=n.str2number(t,i,function(t,i){return 10==i?new n.builtin.biginteger(t):new n.builtin.biginteger(t,i)},function(n){return n.negate()},"long");return new n.builtin.lng(r)};t.exportSymbol("Sk.longFromStr",n.longFromStr);n.builtin.lng.prototype.toInt$=function(){return this.biginteger.intValue()};n.builtin.lng.prototype.clone=function(){return new n.builtin.lng(this)};n.builtin.lng.prototype.nb$add=function(t){if(t instanceof n.builtin.bool&&(t=new n.builtin.lng(n.builtin.asnum$(t))),t instanceof n.builtin.nmber){if(t.skType===n.builtin.nmber.float$)return new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$).nb$add(t);t=new n.builtin.lng(t.v)}return t instanceof n.builtin.lng?new n.builtin.lng(this.biginteger.add(t.biginteger)):t instanceof n.builtin.biginteger?new n.builtin.lng(this.biginteger.add(t)):new n.builtin.lng(this.biginteger.add(new n.builtin.biginteger(t)))};n.builtin.lng.prototype.nb$inplace_add=n.builtin.lng.prototype.nb$add;n.builtin.lng.prototype.nb$subtract=function(t){if(t instanceof n.builtin.bool&&(t=new n.builtin.lng(n.builtin.asnum$(t))),t instanceof n.builtin.nmber){if(t.skType===n.builtin.nmber.float$)return new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$).nb$subtract(t);t=new n.builtin.lng(t.v)}return t instanceof n.builtin.lng?new n.builtin.lng(this.biginteger.subtract(t.biginteger)):t instanceof n.builtin.biginteger?new n.builtin.lng(this.biginteger.subtract(t)):new n.builtin.lng(this.biginteger.subtract(new n.builtin.biginteger(t)))};n.builtin.lng.prototype.nb$inplace_subtract=n.builtin.lng.prototype.nb$subtract;n.builtin.lng.prototype.nb$multiply=function(t){if(t instanceof n.builtin.bool&&(t=new n.builtin.lng(n.builtin.asnum$(t))),t instanceof n.builtin.nmber){if(t.skType===n.builtin.nmber.float$)return new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$).nb$multiply(t);t=new n.builtin.lng(t.v)}return t instanceof n.builtin.lng?new n.builtin.lng(this.biginteger.multiply(t.biginteger)):t instanceof n.builtin.biginteger?new n.builtin.lng(this.biginteger.multiply(t)):new n.builtin.lng(this.biginteger.multiply(new n.builtin.biginteger(t)))};n.builtin.lng.prototype.nb$inplace_multiply=n.builtin.lng.prototype.nb$multiply;n.builtin.lng.prototype.nb$divide=function(t){if(t instanceof n.builtin.bool&&(t=new n.builtin.lng(n.builtin.asnum$(t))),t instanceof n.builtin.nmber){if(t.skType===n.builtin.nmber.float$)return new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$).nb$divide(t);t=new n.builtin.lng(t.v)}t instanceof n.builtin.lng||(t=new n.builtin.lng(t));var i=this.nb$isnegative(),r=t.nb$isnegative();return i&&!r||r&&!i?(t=this.biginteger.divideAndRemainder(t.biginteger),0==t[1].trueCompare(n.builtin.biginteger.ZERO))?new n.builtin.lng(t[0]):(t=t[0].subtract(n.builtin.biginteger.ONE),new n.builtin.lng(t)):new n.builtin.lng(this.biginteger.divide(t.biginteger))};n.builtin.lng.prototype.nb$inplace_divide=n.builtin.lng.prototype.nb$divide;n.builtin.lng.prototype.nb$floor_divide=function(t){return t instanceof n.builtin.bool&&(t=new n.builtin.lng(n.builtin.asnum$(t))),t instanceof n.builtin.nmber&&t.skType===n.builtin.nmber.float$?new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$).nb$floor_divide(t):this.nb$divide(t)};n.builtin.lng.prototype.nb$inplace_floor_divide=n.builtin.lng.prototype.nb$floor_divide;n.builtin.lng.prototype.nb$remainder=function(t){if(t instanceof n.builtin.bool&&(t=new n.builtin.lng(n.builtin.asnum$(t))),0===this.biginteger.trueCompare(n.builtin.biginteger.ZERO))return t instanceof n.builtin.nmber&&t.skType===n.builtin.nmber.float$?new n.builtin.nmber(0,n.builtin.nmber.float$):new n.builtin.lng(0);if(t instanceof n.builtin.nmber){if(t.skType===n.builtin.nmber.float$)return new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$).nb$remainder(t);t=new n.builtin.lng(t.v)}t instanceof n.builtin.lng||(t=new n.builtin.lng(t));var i=new n.builtin.lng(this.biginteger.remainder(t.biginteger));return this.nb$isnegative()?t.nb$ispositive()&&i.nb$nonzero()&&(i=i.nb$add(t).nb$remainder(t)):t.nb$isnegative()&&i.nb$nonzero()&&(i=i.nb$add(t)),i};n.builtin.lng.prototype.nb$inplace_remainder=n.builtin.lng.prototype.nb$remainder;n.builtin.lng.prototype.nb$power=function(t,i){if(void 0!==i)return t=new n.builtin.biginteger(n.builtin.asnum$(t)),i=new n.builtin.biginteger(n.builtin.asnum$(i)),new n.builtin.lng(this.biginteger.modPowInt(t,i));if("number"==typeof t){if(0>t){var r=new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$);return r.nb$power(t)}return new n.builtin.lng(this.biginteger.pow(new n.builtin.biginteger(t)))}if(t instanceof n.builtin.bool)return new n.builtin.lng(this.biginteger.pow(new n.builtin.biginteger(n.builtin.asnum$(t))));if(t instanceof n.builtin.nmber){if(t.skType===n.builtin.nmber.float$||0>t.v)return r=new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$),r.nb$power(t);t=new n.builtin.lng(t.v)}return t instanceof n.builtin.lng?t.nb$isnegative()?(r=new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$),r.nb$power(t)):new n.builtin.lng(this.biginteger.pow(t.biginteger)):t instanceof n.builtin.biginteger?t.isnegative()?(r=new n.builtin.nmber(this.str$(10,!0),n.builtin.nmber.float$),r.nb$power(t)):new n.builtin.lng(this.biginteger.pow(t)):new n.builtin.lng(this.biginteger.pow(new n.builtin.biginteger(t)))};n.builtin.lng.prototype.nb$inplace_power=n.builtin.lng.prototype.nb$power;n.builtin.lng.prototype.nb$lshift=function(t){if(t instanceof n.builtin.lng){if(0>t.biginteger.signum())throw new n.builtin.ValueError("negative shift count");return new n.builtin.lng(this.biginteger.shiftLeft(t.biginteger))}if(t instanceof n.builtin.biginteger){if(0>t.signum())throw new n.builtin.ValueError("negative shift count");return new n.builtin.lng(this.biginteger.shiftLeft(t))}if(0>t)throw new n.builtin.ValueError("negative shift count");return t=n.builtin.asnum$(t),new n.builtin.lng(this.biginteger.shiftLeft(new n.builtin.biginteger(t)))};n.builtin.lng.prototype.nb$inplace_lshift=n.builtin.lng.prototype.nb$lshift;n.builtin.lng.prototype.nb$rshift=function(t){if(t instanceof n.builtin.lng){if(0>t.biginteger.signum())throw new n.builtin.ValueError("negative shift count");return new n.builtin.lng(this.biginteger.shiftRight(t.biginteger))}if(t instanceof n.builtin.biginteger){if(0>t.signum())throw new n.builtin.ValueError("negative shift count");return new n.builtin.lng(this.biginteger.shiftRight(t))}if(0>t)throw new n.builtin.ValueError("negative shift count");return t=n.builtin.asnum$(t),new n.builtin.lng(this.biginteger.shiftRight(new n.builtin.biginteger(t)))};n.builtin.lng.prototype.nb$inplace_rshift=n.builtin.lng.prototype.nb$rshift;n.builtin.lng.prototype.nb$and=function(t){return t instanceof n.builtin.lng?new n.builtin.lng(this.biginteger.and(t.biginteger)):t instanceof n.builtin.biginteger?new n.builtin.lng(this.biginteger.and(t)):(t=n.builtin.asnum$(t),new n.builtin.lng(this.biginteger.and(new n.builtin.biginteger(t))))};n.builtin.lng.prototype.nb$inplace_and=n.builtin.lng.prototype.nb$and;n.builtin.lng.prototype.nb$or=function(t){return t instanceof n.builtin.lng?new n.builtin.lng(this.biginteger.or(t.biginteger)):t instanceof n.builtin.biginteger?new n.builtin.lng(this.biginteger.or(t)):(t=n.builtin.asnum$(t),new n.builtin.lng(this.biginteger.or(new n.builtin.biginteger(t))))};n.builtin.lng.prototype.nb$inplace_or=n.builtin.lng.prototype.nb$or;n.builtin.lng.prototype.nb$xor=function(t){return t instanceof n.builtin.lng?new n.builtin.lng(this.biginteger.xor(t.biginteger)):t instanceof n.builtin.biginteger?new n.builtin.lng(this.biginteger.xor(t)):(t=n.builtin.asnum$(t),new n.builtin.lng(this.biginteger.xor(new n.builtin.biginteger(t))))};n.builtin.lng.prototype.nb$inplace_xor=n.builtin.lng.prototype.nb$xor;n.builtin.lng.prototype.nb$negative=function(){return new n.builtin.lng(this.biginteger.negate())};n.builtin.lng.prototype.nb$positive=function(){return this.clone()};n.builtin.lng.prototype.nb$nonzero=function(){return 0!==this.biginteger.trueCompare(n.builtin.biginteger.ZERO)};n.builtin.lng.prototype.nb$isnegative=function(){return this.biginteger.isnegative()};n.builtin.lng.prototype.nb$ispositive=function(){return!this.biginteger.isnegative()};n.builtin.lng.prototype.longCompare=function(t){return"boolean"==typeof t&&(t=t?1:0),"number"==typeof t&&(t=new n.builtin.lng(t)),t instanceof n.builtin.nmber?t.skType===n.builtin.nmber.int$||0==t.v%1?(t=new n.builtin.lng(t.v),this.longCompare(t)):new n.builtin.nmber(this,n.builtin.nmber.float$).numberCompare(t):t instanceof n.builtin.lng?this.biginteger.subtract(t.biginteger):t instanceof n.builtin.biginteger?this.biginteger.subtract(t):this.biginteger.subtract(new n.builtin.biginteger(t))};n.builtin.lng.prototype.__eq__=function(t,i){return 0==t.longCompare(i)&&!(i instanceof n.builtin.none)};n.builtin.lng.prototype.__ne__=function(t,i){return 0!=t.longCompare(i)||i instanceof n.builtin.none};n.builtin.lng.prototype.__lt__=function(n,t){return 0>n.longCompare(t)};n.builtin.lng.prototype.__le__=function(n,t){return 0>=n.longCompare(t)};n.builtin.lng.prototype.__gt__=function(n,t){return 0<n.longCompare(t)};n.builtin.lng.prototype.__ge__=function(n,t){return 0<=n.longCompare(t)};n.builtin.lng.prototype.$r=function(){return new n.builtin.str(this.str$(10,!0)+"L")};n.builtin.lng.prototype.tp$str=function(){return new n.builtin.str(this.str$(10,!0))};n.builtin.lng.prototype.str$=function(n,t){void 0===t&&(t=!0);var i=t?this.biginteger:this.biginteger.abs();return void 0===n||10===n?i.toString():i.toString(n)};n.str2number=function(t,i,r,u,f){var s=t,c=!1,h,e,o;if(t=t.replace(/^\s+|\s+$/g,""),"-"==t.charAt(0)&&(c=!0,t=t.substring(1)),"+"==t.charAt(0)&&(t=t.substring(1)),void 0===i&&(i=10),(2>i||36<i)&&0!=i)throw new n.builtin.ValueError(f+"() base must be >= 2 and <= 36");if("0x"==t.substring(0,2).toLowerCase()){if(16==i||0==i)t=t.substring(2),i=16;else if(34>i)throw new n.builtin.ValueError("invalid literal for "+f+"() with base "+i+": '"+s+"'");}else if("0b"==t.substring(0,2).toLowerCase()){if(2==i||0==i)t=t.substring(2),i=2;else if(12>i)throw new n.builtin.ValueError("invalid literal for "+f+"() with base "+i+": '"+s+"'");}else if("0o"==t.substring(0,2).toLowerCase()){if(8==i||0==i)t=t.substring(2),i=8;else if(25>i)throw new n.builtin.ValueError("invalid literal for "+f+"() with base "+i+": '"+s+"'");}else if("0"==t.charAt(0)){if("0"==t)return 0;(8==i||0==i)&&(i=8)}if(0==i&&(i=10),0===t.length)throw new n.builtin.ValueError("invalid literal for "+f+"() with base "+i+": '"+s+"'");for(h=0;h<t.length;h++)if(e=t.charCodeAt(h),o=i,48<=e&&57>=e?o=e-48:65<=e&&90>=e?o=e-55:97<=e&&122>=e&&(o=e-87),o>=i)throw new n.builtin.ValueError("invalid literal for "+f+"() with base "+i+": '"+s+"'");return o=r(t,i),c&&(o=u(o)),o};n.builtin.int_=function(t,i){if(void 0!==t&&!n.builtin.checkString(t)&&!n.builtin.checkNumber(t))if(t instanceof n.builtin.bool)t=n.builtin.asnum$(t);else throw new n.builtin.TypeError("int() argument must be a string or a number, not '"+n.abstr.typeName(t)+"'");if(t instanceof n.builtin.str){i=n.builtin.asnum$(i);var r=n.str2number(t.v,i,parseInt,function(n){return-n},"int");return r>n.builtin.lng.threshold$||r<-n.builtin.lng.threshold$?new n.builtin.lng(t,i):new n.builtin.nmber(r,n.builtin.nmber.int$)}if(void 0!==i)throw new n.builtin.TypeError("int() can't convert non-string with explicit base");return t instanceof n.builtin.lng?t.cantBeInt()?new n.builtin.lng(t):new n.builtin.nmber(t.toInt$(),n.builtin.nmber.int$):(t=n.builtin.asnum$(t),new n.builtin.nmber(t|0,n.builtin.nmber.int$))};n.builtin.int_.prototype.tp$name="int";n.builtin.int_.prototype.ob$type=n.builtin.type.makeIntoTypeObj("int",n.builtin.int_);n.builtin.float_=function(t){if(void 0===t)return new n.builtin.nmber(0,n.builtin.nmber.float$);if(t instanceof n.builtin.str){if(t.v.match(/^-inf$/i))t=-Infinity;else if(t.v.match(/^[+]?inf$/i))t=Infinity;else if(t.v.match(/^[-+]?nan$/i))t=NaN;else{if(isNaN(t.v))throw new n.builtin.ValueError("float: Argument: "+t.v+" is not number");t=parseFloat(t.v)}return new n.builtin.nmber(t,n.builtin.nmber.float$)}if("number"==typeof t||t instanceof n.builtin.nmber||t instanceof n.builtin.lng||t instanceof n.builtin.bool)return t=n.builtin.asnum$(t),new n.builtin.nmber(t,n.builtin.nmber.float$);throw new n.builtin.TypeError("float() argument must be a string or a number");};n.builtin.float_.prototype.tp$name="float";n.builtin.float_.prototype.ob$type=n.builtin.type.makeIntoTypeObj("float",n.builtin.float_);n.builtin.slice=function(t,i,r){if(0===n.builtin.asnum$(r))throw new n.builtin.ValueError("slice step cannot be zero");return(this instanceof n.builtin.slice)?(void 0===i&&void 0===r&&(i=t,t=n.builtin.none.none$),void 0===i&&(i=n.builtin.none.none$),void 0===r&&(r=n.builtin.none.none$),this.start=t,this.stop=i,this.step=r,this.__class__=n.builtin.slice,this.$d=new n.builtin.dict([n.builtin.slice$start,this.start,n.builtin.slice$stop,this.stop,n.builtin.slice$step,this.step]),this):new n.builtin.slice(t,i,r)};n.builtin.slice.prototype.tp$name="slice";n.builtin.slice.prototype.ob$type=n.builtin.type.makeIntoTypeObj("slice",n.builtin.slice);n.builtin.slice.prototype.$r=function(){var t=n.builtin.repr(this.start).v,i=n.builtin.repr(this.stop).v,r=n.builtin.repr(this.step).v;return new n.builtin.str("slice("+t+", "+i+", "+r+")")};n.builtin.slice.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.slice.prototype.tp$richcompare=function(t,i){if(!t.__class__||t.__class__!=n.builtin.slice)return"Eq"===i?!1:"NotEq"===i?!0:!1;var r,u;return r=new n.builtin.tuple([this.start,this.stop,this.step]),u=new n.builtin.tuple([t.start,t.stop,t.step]),r.tp$richcompare(u,i)};n.builtin.slice.prototype.indices=function(t){if(!n.builtin.checkInt(this.start)&&!n.builtin.checkNone(this.start)||!n.builtin.checkInt(this.stop)&&!n.builtin.checkNone(this.stop)||!n.builtin.checkInt(this.step)&&!n.builtin.checkNone(this.step))throw new n.builtin.TypeError("slice indices must be integers or None");var i=n.builtin.asnum$(this.start),r=n.builtin.asnum$(this.stop),u=n.builtin.asnum$(this.step);return t=n.builtin.asnum$(t),null===u&&(u=1),0<u?(null===i&&(i=0),null===r&&(r=t),r>t&&(r=t),0>i&&(i=t+i,0>i&&(i=0)),0>r&&(r=t+r)):(null===i&&(i=t-1),i>=t&&(i=t-1),null===r?r=-1:0>r&&(r=t+r,0>r&&(r=-1)),0>i&&(i=t+i)),[i,r,u]};n.builtin.slice.prototype.sssiter$=function(t,i){var f=n.builtin.asnum$(t),u=this.indices("number"==typeof f?f:t.v.length),r;if(0<u[2])for(r=u[0];r<u[1]&&!1!==i(r,f);r+=u[2]);else for(r=u[0];r>u[1]&&!1!==i(r,f);r+=u[2]);};n.builtin.slice$start=new n.builtin.str("start");n.builtin.slice$stop=new n.builtin.str("stop");n.builtin.slice$step=new n.builtin.str("step");n.builtin.set=function(t){if(!(this instanceof n.builtin.set))return new n.builtin.set(t);"undefined"==typeof t&&(t=[]);this.set_reset_();t=new n.builtin.list(t).tp$iter();for(var i=t.tp$iternext();void 0!==i;i=t.tp$iternext())n.builtin.set.prototype.add.func_code(this,i);return this.__class__=n.builtin.set,this.v=this.v,this};n.builtin.set.prototype.ob$type=n.builtin.type.makeIntoTypeObj("set",n.builtin.set);n.builtin.set.prototype.set_iter_=function(){return n.builtin.dict.prototype.keys.func_code(this.v).tp$iter()};n.builtin.set.prototype.set_reset_=function(){this.v=new n.builtin.dict([])};n.builtin.set.prototype.tp$name="set";n.builtin.set.prototype.$r=function(){for(var i=[],r=this.tp$iter(),t=r.tp$iternext();void 0!==t;t=r.tp$iternext())i.push(n.misceval.objectRepr(t).v);return new n.builtin.str("set(["+i.join(", ")+"])")};n.builtin.set.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.set.prototype.tp$hash=n.builtin.object.prototype.HashNotImplemented;n.builtin.set.prototype.tp$richcompare=function(i,r){var f,e,u,o;if(this===i&&n.misceval.opAllowsEquality(r))return!0;if(!i.__class__||i.__class__!=n.builtin.set)return"Eq"===r?!1:"NotEq"===r?!0:!1;if(f=this.sq$length(),e=i.sq$length(),e!==f){if("Eq"===r)return!1;if("NotEq"===r)return!0}u=!1;o=!1;switch(r){case"Lt":case"LtE":case"Eq":case"NotEq":u=n.builtin.set.prototype.issubset.func_code(this,i);break;case"Gt":case"GtE":o=n.builtin.set.prototype.issuperset.func_code(this,i);break;default:t.asserts.fail()}switch(r){case"Lt":return f<e&&u;case"LtE":case"Eq":return u;case"NotEq":return!u;case"Gt":return f>e&&o;case"GtE":return o}};n.builtin.set.prototype.tp$iter=n.builtin.set.prototype.set_iter_;n.builtin.set.prototype.sq$length=function(){return this.v.mp$length()};n.builtin.set.prototype.isdisjoint=new n.builtin.func(function(t,i){for(var u=t.tp$iter(),r=u.tp$iternext();void 0!==r;r=u.tp$iternext())if(n.abstr.sequenceContains(i,r))return n.builtin.bool.false$;return n.builtin.bool.true$});n.builtin.set.prototype.issubset=new n.builtin.func(function(t,i){var u=t.sq$length(),r=i.sq$length();if(u>r)return n.builtin.bool.false$;for(u=t.tp$iter(),r=u.tp$iternext();void 0!==r;r=u.tp$iternext())if(!n.abstr.sequenceContains(i,r))return n.builtin.bool.false$;return n.builtin.bool.true$});n.builtin.set.prototype.issuperset=new n.builtin.func(function(t,i){return n.builtin.set.prototype.issubset.func_code(i,t)});n.builtin.set.prototype.union=new n.builtin.func(function(t){for(var r=new n.builtin.set(t),i=1;i<arguments.length;i++)n.builtin.set.prototype.update.func_code(r,arguments[i]);return r});n.builtin.set.prototype.intersection=new n.builtin.func(function(t){var i=n.builtin.set.prototype.copy.func_code(t);return arguments[0]=i,n.builtin.set.prototype.intersection_update.func_code.apply(null,arguments),i});n.builtin.set.prototype.difference=new n.builtin.func(function(t){var i=n.builtin.set.prototype.copy.func_code(t);return arguments[0]=i,n.builtin.set.prototype.difference_update.func_code.apply(null,arguments),i});n.builtin.set.prototype.symmetric_difference=new n.builtin.func(function(t,i){for(var u=n.builtin.set.prototype.union.func_code(t,i),f=u.tp$iter(),r=f.tp$iternext();void 0!==r;r=f.tp$iternext())n.abstr.sequenceContains(t,r)&&n.abstr.sequenceContains(i,r)&&n.builtin.set.prototype.discard.func_code(u,r);return u});n.builtin.set.prototype.copy=new n.builtin.func(function(t){return new n.builtin.set(t)});n.builtin.set.prototype.update=new n.builtin.func(function(t,i){for(var u=i.tp$iter(),r=u.tp$iternext();void 0!==r;r=u.tp$iternext())n.builtin.set.prototype.add.func_code(t,r);return n.builtin.none.none$});n.builtin.set.prototype.intersection_update=new n.builtin.func(function(t){for(var r,u=t.tp$iter(),i=u.tp$iternext();void 0!==i;i=u.tp$iternext())for(r=1;r<arguments.length;r++)if(!n.abstr.sequenceContains(arguments[r],i)){n.builtin.set.prototype.discard.func_code(t,i);break}return n.builtin.none.none$});n.builtin.set.prototype.difference_update=new n.builtin.func(function(t){for(var r,u=t.tp$iter(),i=u.tp$iternext();void 0!==i;i=u.tp$iternext())for(r=1;r<arguments.length;r++)if(n.abstr.sequenceContains(arguments[r],i)){n.builtin.set.prototype.discard.func_code(t,i);break}return n.builtin.none.none$});n.builtin.set.prototype.symmetric_difference_update=new n.builtin.func(function(t,i){var r=n.builtin.set.prototype.symmetric_difference.func_code(t,i);return t.set_reset_(),n.builtin.set.prototype.update.func_code(t,r),n.builtin.none.none$});n.builtin.set.prototype.add=new n.builtin.func(function(t,i){return t.v.mp$ass_subscript(i,!0),n.builtin.none.none$});n.builtin.set.prototype.discard=new n.builtin.func(function(t,i){return n.builtin.dict.prototype.pop.func_code(t.v,i,n.builtin.none.none$),n.builtin.none.none$});n.builtin.set.prototype.pop=new n.builtin.func(function(t){if(0===t.sq$length())throw new n.builtin.KeyError("pop from an empty set");var i=t.tp$iter().tp$iternext();return n.builtin.set.prototype.discard.func_code(t,i),i});n.builtin.set.prototype.remove=new n.builtin.func(function(t,i){return t.v.mp$del_subscript(i),n.builtin.none.none$});t.exportSymbol("Sk.builtin.set",n.builtin.set);n.builtin.module=function(){};t.exportSymbol("Sk.builtin.module",n.builtin.module);n.builtin.module.prototype.ob$type=n.builtin.type.makeIntoTypeObj("module",n.builtin.module);n.builtin.module.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.module.prototype.tp$setattr=n.builtin.object.prototype.GenericSetAttr;n.builtin.generator=function(n,t,i,r,u){if(n){if(this.func_code=n,this.func_globals=t||null,this.gi$running=!1,this.gi$resumeat=0,this.gi$sentvalue=void 0,this.gi$locals={},0<i.length)for(t=0;t<n.co_varnames.length;++t)this.gi$locals[n.co_varnames[t]]=i[t];if(void 0!==u)for(var f in u)r[f]=u[f];return this.func_closure=r,this}};t.exportSymbol("Sk.builtin.generator",n.builtin.generator);n.builtin.generator.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.generator.prototype.tp$iter=function(){return this};n.builtin.generator.prototype.tp$iternext=function(n){return this.gi$running=!0,void 0===n&&(n=null),this.gi$sentvalue=n,n=[this],this.func_closure&&n.push(this.func_closure),n=this.func_code.apply(this.func_globals,n),this.gi$running=!1,t.asserts.assert(void 0!==n),null!==n?(this.gi$resumeat=n[0],n=n[1]):void 0};n.builtin.generator.prototype.next=new n.builtin.func(function(n){return n.tp$iternext()});n.builtin.generator.prototype.ob$type=n.builtin.type.makeIntoTypeObj("generator",n.builtin.generator);n.builtin.generator.prototype.$r=function(){return new n.builtin.str("<generator object "+this.func_code.co_name.v+">")};n.builtin.generator.prototype.send=new n.builtin.func(function(n,t){return n.tp$iternext(t)});n.builtin.makeGenerator=function(t,i){var u=new n.builtin.generator(null,null,null),r;u.tp$iternext=t;for(r in i)i.hasOwnProperty(r)&&(u[r]=i[r]);return u};t.exportSymbol("Sk.builtin.makeGenerator",n.builtin.makeGenerator);n.builtin.file=function(t,i){if(this.mode=i,this.name=t,this.closed=!1,n.inBrowser){if(i=document.getElementById(t.v),null==i)throw new n.builtin.IOError("[Errno 2] No such file or directory: '"+t.v+"'");this.data$="textarea"==i.nodeName.toLowerCase()?i.value:i.textContent}else this.data$=n.read(t.v);this.lineList=this.data$.split("\n");this.lineList=this.lineList.slice(0,-1);for(var r in this.lineList)this.lineList[r]+="\n";return this.pos$=this.currentLine=0,this.__class__=n.builtin.file,this};n.builtin.file.prototype.ob$type=n.builtin.type.makeIntoTypeObj("file",n.builtin.file);n.builtin.file.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.file.prototype.$r=function(){return new n.builtin.str("<"+(this.closed?"closed":"open")+"file '"+this.name+"', mode '"+this.mode+"'>")};n.builtin.file.prototype.tp$iter=function(){var t={tp$iter:function(){return t},$obj:this,$index:0,$lines:this.lineList,tp$iternext:function(){if(!(t.$index>=t.$lines.length))return new n.builtin.str(t.$lines[t.$index++])}};return t};n.builtin.file.prototype.close=new n.builtin.func(function(n){n.closed=!0});n.builtin.file.prototype.flush=new n.builtin.func(function(){});n.builtin.file.prototype.fileno=new n.builtin.func(function(){return 10});n.builtin.file.prototype.isatty=new n.builtin.func(function(){return!1});n.builtin.file.prototype.read=new n.builtin.func(function(t,i){var r,u;if(t.closed)throw new n.builtin.ValueError("I/O operation on closed file");return r=t.data$.length,void 0===i&&(i=r),u=new n.builtin.str(t.data$.substr(t.pos$,i)),t.pos$+=i,t.pos$>=r&&(t.pos$=r),u});n.builtin.file.prototype.readline=new n.builtin.func(function(t){var i="";return t.currentLine<t.lineList.length&&(i=t.lineList[t.currentLine],t.currentLine++),new n.builtin.str(i)});n.builtin.file.prototype.readlines=new n.builtin.func(function(t){for(var r=[],i=t.currentLine;i<t.lineList.length;i++)r.push(new n.builtin.str(t.lineList[i]));return new n.builtin.list(r)});n.builtin.file.prototype.seek=new n.builtin.func(function(n,t,i){void 0===i&&(i=1);n.pos$=1==i?t:n.data$+t});n.builtin.file.prototype.tell=new n.builtin.func(function(n){return n.pos$});n.builtin.file.prototype.truncate=new n.builtin.func(function(){t.asserts.fail()});n.builtin.file.prototype.write=new n.builtin.func(function(){t.asserts.fail()});t.exportSymbol("Sk.builtin.file",n.builtin.file);n.ffi=n.ffi||{};n.ffi.remapToPy=function(i){if("[object Array]"===Object.prototype.toString.call(i)){for(var r=[],u=0;u<i.length;++u)r.push(n.ffi.remapToPy(i[u]));return new n.builtin.list(r)}if("object"==typeof i){r=[];for(u in i)r.push(n.ffi.remapToPy(u)),r.push(n.ffi.remapToPy(i[u]));return new n.builtin.dict(r)}if("string"==typeof i)return new n.builtin.str(i);if("number"==typeof i)return new n.builtin.nmber(i,void 0);if("boolean"==typeof i)return i;t.asserts.fail("unhandled remap type "+typeof i)};t.exportSymbol("Sk.ffi.remapToPy",n.ffi.remapToPy);n.ffi.remapToJs=function(t){var f;if(t instanceof n.builtin.dict){for(var u={},i=t.tp$iter(),r=i.tp$iternext();void 0!==r;r=i.tp$iternext())f=t.mp$subscript(r),void 0===f&&(f=null),r=n.ffi.remapToJs(r),u[r]=n.ffi.remapToJs(f);return u}if(t instanceof n.builtin.list){for(u=[],i=0;i<t.v.length;++i)u.push(n.ffi.remapToJs(t.v[i]));return u}return t instanceof n.builtin.nmber?n.builtin.asnum$(t):t instanceof n.builtin.lng?n.builtin.asnum$(t):"number"==typeof t||"boolean"==typeof t?t:t.v};t.exportSymbol("Sk.ffi.remapToJs",n.ffi.remapToJs);n.ffi.callback=function(t){return void 0===t?t:function(){return n.misceval.apply(t,void 0,void 0,void 0,Array.prototype.slice.call(arguments,0))}};t.exportSymbol("Sk.ffi.callback",n.ffi.callback);n.ffi.stdwrap=function(n,t){var i=new n;return i.v=t,i};t.exportSymbol("Sk.ffi.stdwrap",n.ffi.stdwrap);n.ffi.basicwrap=function(i){if(i instanceof n.builtin.nmber||i instanceof n.builtin.lng)return n.builtin.asnum$(i);if("number"==typeof i||"boolean"==typeof i)return i;if("string"==typeof i)return new n.builtin.str(i);t.asserts.fail("unexpected type for basicwrap")};t.exportSymbol("Sk.ffi.basicwrap",n.ffi.basicwrap);n.ffi.unwrapo=function(n){if(void 0!==n)return n.v};t.exportSymbol("Sk.ffi.unwrapo",n.ffi.unwrapo);n.ffi.unwrapn=function(n){return null===n?null:n.v};t.exportSymbol("Sk.ffi.unwrapn",n.ffi.unwrapn);n.builtin.enumerate=function(t,i){if(!(this instanceof n.builtin.enumerate))return new n.builtin.enumerate(t,i);if(n.builtin.pyCheckArgs("enumerate",arguments,1,2),!n.builtin.checkIterable(t))throw new n.builtin.TypeError("'"+n.abstr.typeName(t)+"' object is not iterable");if(void 0!==i)if(n.misceval.isIndex(i))i=n.misceval.asIndex(i);else throw new n.builtin.TypeError("'"+n.abstr.typeName(i)+"' object cannot be interpreted as an index");else i=0;var r=t.tp$iter();return this.tp$iter=function(){return this},this.$index=i,this.tp$iternext=function(){var t=r.tp$iternext(),i;if(void 0!==t)return i=n.builtin.assk$(this.$index++,n.builtin.nmber.int$),new n.builtin.tuple([i,t])},this.__class__=n.builtin.enumerate,this};n.builtin.enumerate.prototype.tp$name="enumerate";n.builtin.enumerate.prototype.ob$type=n.builtin.type.makeIntoTypeObj("enumerate",n.builtin.enumerate);n.builtin.enumerate.prototype.tp$getattr=n.builtin.object.prototype.GenericGetAttr;n.builtin.enumerate.prototype.__iter__=new n.builtin.func(function(n){return n.tp$iter()});n.builtin.enumerate.prototype.next=new n.builtin.func(function(n){return n.tp$iternext()});n.Tokenizer=function(t,i,r){this.filename=t;this.callback=r;this.parenlev=this.lnum=0;this.continued=!1;this.namechars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_";this.numchars="0123456789";this.contstr="";this.needcont=!1;this.contline=void 0;this.indents=[0];this.endprog=/.*/;this.strstart=[-1,-1];this.interactive=i;this.doneFunc=function(){for(var t=1;t<this.indents.length;++t)if(this.callback(n.Tokenizer.Tokens.T_DEDENT,"",[this.lnum,0],[this.lnum,0],""))return"done";return this.callback(n.Tokenizer.Tokens.T_ENDMARKER,"",[this.lnum,0],[this.lnum,0],"")?"done":"failed"}};n.Tokenizer.Tokens={T_ENDMARKER:0,T_NAME:1,T_NUMBER:2,T_STRING:3,T_NEWLINE:4,T_INDENT:5,T_DEDENT:6,T_LPAR:7,T_RPAR:8,T_LSQB:9,T_RSQB:10,T_COLON:11,T_COMMA:12,T_SEMI:13,T_PLUS:14,T_MINUS:15,T_STAR:16,T_SLASH:17,T_VBAR:18,T_AMPER:19,T_LESS:20,T_GREATER:21,T_EQUAL:22,T_DOT:23,T_PERCENT:24,T_BACKQUOTE:25,T_LBRACE:26,T_RBRACE:27,T_EQEQUAL:28,T_NOTEQUAL:29,T_LESSEQUAL:30,T_GREATEREQUAL:31,T_TILDE:32,T_CIRCUMFLEX:33,T_LEFTSHIFT:34,T_RIGHTSHIFT:35,T_DOUBLESTAR:36,T_PLUSEQUAL:37,T_MINEQUAL:38,T_STAREQUAL:39,T_SLASHEQUAL:40,T_PERCENTEQUAL:41,T_AMPEREQUAL:42,T_VBAREQUAL:43,T_CIRCUMFLEXEQUAL:44,T_LEFTSHIFTEQUAL:45,T_RIGHTSHIFTEQUAL:46,T_DOUBLESTAREQUAL:47,T_DOUBLESLASH:48,T_DOUBLESLASHEQUAL:49,T_AT:50,T_OP:51,T_COMMENT:52,T_NL:53,T_RARROW:54,T_ERRORTOKEN:55,T_N_TOKENS:56,T_NT_OFFSET:256};var wo=p("0[bB][01]*","0[xX][\\da-fA-F]*[lL]?","0[oO]?[0-7]*[lL]?","[1-9]\\d*[lL]?"),be="[eE][-+]?\\d+",bo=p("\\d+\\.\\d*","\\.\\d+")+po(be),ko="\\d+"+be,ke=p(bo,ko),go=p("\\d+[jJ]",ke+"[jJ]"),ns=p(go,ke,wo),ts="^[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",is='^[^"\\\\]*(?:\\\\.[^"\\\\]*)*"',rs="[^'\\\\]*(?:(?:\\\\.|'(?!''))[^'\\\\]*)*'''",us='[^"\\\\]*(?:(?:\\\\.|"(?!""))[^"\\\\]*)*"""',fs=p("[ubUB]?[rR]?'''",'[ubUB]?[rR]?"""'),cc=p("[uU]?[rR]?'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*'",'[uU]?[rR]?"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*"'),es=p("\\*\\*=?",">>=?","<<=?","<>","!=","//=?","->","[+\\-*/%&|^=<>]=?","~"),os=p("\\r?\\n","[:;.,`@]"),ss=p(es,"[\\][(){}]",os),hs=p("[uUbB]?[rR]?'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*"+p("'","\\\\\\r?\\n"),'[uUbB]?[rR]?"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*'+p('"',"\\\\\\r?\\n")),cs=p("\\\\\\r?\\n","#[^\\r\\n]*",fs),ls="^"+p(cs,ns,ss,hs,"[a-zA-Z_]\\w*"),de={"'''":!0,'"""':!0,"r'''":!0,'r"""':!0,"R'''":!0,'R"""':!0,"u'''":!0,'u"""':!0,"U'''":!0,'U"""':!0,"b'''":!0,'b"""':!0,"B'''":!0,'B"""':!0,"ur'''":!0,'ur"""':!0,"Ur'''":!0,'Ur"""':!0,"uR'''":!0,'uR"""':!0,"UR'''":!0,'UR"""':!0,"br'''":!0,'br"""':!0,"Br'''":!0,'Br"""':!0,"bR'''":!0,'bR"""':!0,"BR'''":!0,'BR"""':!0},ou={"'":!0,'"':!0,"r'":!0,'r"':!0,"R'":!0,'R"':!0,"u'":!0,'u"':!0,"U'":!0,'U"':!0,"b'":!0,'b"':!0,"B'":!0,'B"':!0,"ur'":!0,'ur"':!0,"Ur'":!0,'Ur"':!0,"uR'":!0,'uR"':!0,"UR'":!0,'UR"':!0,"br'":!0,'br"':!0,"Br'":!0,'Br"':!0,"bR'":!0,'bR"':!0,"BR'":!0,'BR"':!0};(function(){for(var n in de);for(n in ou);})();cf=8;n.Tokenizer.prototype.generateTokens=function(t){var s,i,r,u,f,h=RegExp(ls),c,e,o;if(i=RegExp(rs,"g"),f=RegExp(us,"g"),c={"'":RegExp(ts,"g"),'"':RegExp(is,"g"),"'''":i,'"""':f,"r'''":i,'r"""':f,"u'''":i,'u"""':f,"b'''":i,'b"""':f,"ur'''":i,'ur"""':f,"br'''":i,'br"""':f,"R'''":i,'R"""':f,"U'''":i,'U"""':f,"B'''":i,'B"""':f,"uR'''":i,'uR"""':f,"Ur'''":i,'Ur"""':f,"UR'''":i,'UR"""':f,"bR'''":i,'bR"""':f,"Br'''":i,'Br"""':f,"BR'''":i,'BR"""':f,r:null,R:null,u:null,U:null,b:null,B:null},t||(t=""),this.lnum+=1,i=0,f=t.length,0<this.contstr.length){if(!t)throw new n.builtin.TokenError("EOF in multi-line string",this.filename,this.strstart[0],this.strstart[1],this.contline);if(this.endprog.lastIndex=0,s=this.endprog.test(t)){if(i=u=this.endprog.lastIndex,this.callback(n.Tokenizer.Tokens.T_STRING,this.contstr+t.substring(0,u),this.strstart,[this.lnum,u],this.contline+t))return"done";this.contstr="";this.needcont=!1;this.contline=void 0}else{if(this.needcont&&"\\\n"!==t.substring(t.length-2)&&"\\\r\n"!==t.substring(t.length-3)){if(this.callback(n.Tokenizer.Tokens.T_ERRORTOKEN,this.contstr+t,this.strstart,[this.lnum,t.length],this.contline))return"done";this.contstr="";this.contline=void 0}else this.contstr+=t,this.contline+=t;return!1}}else if(0!==this.parenlev||this.continued){if(!t)throw new n.builtin.TokenError("EOF in multi-line statement",this.filename,this.lnum,0,t);this.continued=!1}else{if(!t)return this.doneFunc();for(r=0;i<f;){if(" "===t.charAt(i))r+=1;else if("\t"===t.charAt(i))r=(r/cf+1)*cf;else if("\f"===t.charAt(i))r=0;else break;i+=1}if(i===f)return this.doneFunc();if(-1!=="#\r\n".indexOf(t.charAt(i))){if("#"===t.charAt(i))return h=vs(t.substring(i),"\r\n"),f=i+h.length,this.callback(n.Tokenizer.Tokens.T_COMMENT,h,[this.lnum,i],[this.lnum,i+h.length],t)||this.callback(n.Tokenizer.Tokens.T_NL,t.substring(f),[this.lnum,f],[this.lnum,t.length],t)?"done":!1;if(this.callback(n.Tokenizer.Tokens.T_NL,t.substring(i),[this.lnum,i],[this.lnum,t.length],t))return"done";if(!this.interactive)return!1}if(r>this.indents[this.indents.length-1]&&(this.indents.push(r),this.callback(n.Tokenizer.Tokens.T_INDENT,t.substring(0,i),[this.lnum,0],[this.lnum,i],t)))return"done";for(;r<this.indents[this.indents.length-1];){if(!as(this.indents,r))throw new n.builtin.IndentationError("unindent does not match any outer indentation level",this.filename,this.lnum,i,t);if(this.indents.splice(this.indents.length-1,1),this.callback(n.Tokenizer.Tokens.T_DEDENT,"",[this.lnum,i],[this.lnum,i],t))return"done"}}for(;i<f;){for(r=t.charAt(i);" "===r||"\f"===r||"\t"===r;)i+=1,r=t.charAt(i);if(h.lastIndex=0,e=h.exec(t.substring(i)),e){if(r=i,u=r+e[1].length,e=[this.lnum,r],s=[this.lnum,u],i=u,u=t.substring(r,u),o=t.charAt(r),-1!==this.numchars.indexOf(o)||"."===o&&"."!==u){if(this.callback(n.Tokenizer.Tokens.T_NUMBER,u,e,s,t))return"done"}else if("\r"===o||"\n"===o){if(r=n.Tokenizer.Tokens.T_NEWLINE,0<this.parenlev&&(r=n.Tokenizer.Tokens.T_NL),this.callback(r,u,e,s,t))return"done"}else if("#"===o){if(this.callback(n.Tokenizer.Tokens.T_COMMENT,u,e,s,t))return"done"}else if(de.hasOwnProperty(u))if(this.endprog=c[u],this.endprog.lastIndex=0,s=this.endprog.test(t.substring(i))){if(i=this.endprog.lastIndex+i,u=t.substring(r,i),this.callback(n.Tokenizer.Tokens.T_STRING,u,e,[this.lnum,i],t))return"done"}else{this.strstart=[this.lnum,r];this.contstr=t.substring(r);this.contline=t;break}else if(ou.hasOwnProperty(o)||ou.hasOwnProperty(u.substring(0,2))||ou.hasOwnProperty(u.substring(0,3))){if("\n"===u[u.length-1]){this.strstart=[this.lnum,r];this.endprog=c[o]||c[u[1]]||c[u[2]];this.contstr=t.substring(r);this.needcont=!0;this.contline=t;break}else if(this.callback(n.Tokenizer.Tokens.T_STRING,u,e,s,t))return"done"}else if(-1!==this.namechars.indexOf(o)){if(this.callback(n.Tokenizer.Tokens.T_NAME,u,e,s,t))return"done"}else if("\\"===o){if(this.callback(n.Tokenizer.Tokens.T_NL,u,e,[this.lnum,i],t))return"done";this.continued=!0}else if(-1!=="([{".indexOf(o)?this.parenlev+=1:-1!==")]}".indexOf(o)&&(this.parenlev-=1),this.callback(n.Tokenizer.Tokens.T_OP,u,e,s,t))return"done"}else{if(this.callback(n.Tokenizer.Tokens.T_ERRORTOKEN,t.charAt(i),[this.lnum,i],[this.lnum,i+1],t))return"done";i+=1}}return!1};n.Tokenizer.tokenNames={0:"T_ENDMARKER",1:"T_NAME",2:"T_NUMBER",3:"T_STRING",4:"T_NEWLINE",5:"T_INDENT",6:"T_DEDENT",7:"T_LPAR",8:"T_RPAR",9:"T_LSQB",10:"T_RSQB",11:"T_COLON",12:"T_COMMA",13:"T_SEMI",14:"T_PLUS",15:"T_MINUS",16:"T_STAR",17:"T_SLASH",18:"T_VBAR",19:"T_AMPER",20:"T_LESS",21:"T_GREATER",22:"T_EQUAL",23:"T_DOT",24:"T_PERCENT",25:"T_BACKQUOTE",26:"T_LBRACE",27:"T_RBRACE",28:"T_EQEQUAL",29:"T_NOTEQUAL",30:"T_LESSEQUAL",31:"T_GREATEREQUAL",32:"T_TILDE",33:"T_CIRCUMFLEX",34:"T_LEFTSHIFT",35:"T_RIGHTSHIFT",36:"T_DOUBLESTAR",37:"T_PLUSEQUAL",38:"T_MINEQUAL",39:"T_STAREQUAL",40:"T_SLASHEQUAL",41:"T_PERCENTEQUAL",42:"T_AMPEREQUAL",43:"T_VBAREQUAL",44:"T_CIRCUMFLEXEQUAL",45:"T_LEFTSHIFTEQUAL",46:"T_RIGHTSHIFTEQUAL",47:"T_DOUBLESTAREQUAL",48:"T_DOUBLESLASH",49:"T_DOUBLESLASHEQUAL",50:"T_AT",51:"T_OP",52:"T_COMMENT",53:"T_NL",54:"T_RARROW",55:"T_ERRORTOKEN",56:"T_N_TOKENS",256:"T_NT_OFFSET"};t.exportSymbol("Sk.Tokenizer",n.Tokenizer);t.exportSymbol("Sk.Tokenizer.prototype.generateTokens",n.Tokenizer.prototype.generateTokens);t.exportSymbol("Sk.Tokenizer.tokenNames",n.Tokenizer.tokenNames);n.OpMap={"(":n.Tokenizer.Tokens.T_LPAR,")":n.Tokenizer.Tokens.T_RPAR,"[":n.Tokenizer.Tokens.T_LSQB,"]":n.Tokenizer.Tokens.T_RSQB,":":n.Tokenizer.Tokens.T_COLON,",":n.Tokenizer.Tokens.T_COMMA,";":n.Tokenizer.Tokens.T_SEMI,"+":n.Tokenizer.Tokens.T_PLUS,"-":n.Tokenizer.Tokens.T_MINUS,"*":n.Tokenizer.Tokens.T_STAR,"/":n.Tokenizer.Tokens.T_SLASH,"|":n.Tokenizer.Tokens.T_VBAR,"&":n.Tokenizer.Tokens.T_AMPER,"<":n.Tokenizer.Tokens.T_LESS,">":n.Tokenizer.Tokens.T_GREATER,"=":n.Tokenizer.Tokens.T_EQUAL,".":n.Tokenizer.Tokens.T_DOT,"%":n.Tokenizer.Tokens.T_PERCENT,"`":n.Tokenizer.Tokens.T_BACKQUOTE,"{":n.Tokenizer.Tokens.T_LBRACE,"}":n.Tokenizer.Tokens.T_RBRACE,"@":n.Tokenizer.Tokens.T_AT,"==":n.Tokenizer.Tokens.T_EQEQUAL,"!=":n.Tokenizer.Tokens.T_NOTEQUAL,"<>":n.Tokenizer.Tokens.T_NOTEQUAL,"<=":n.Tokenizer.Tokens.T_LESSEQUAL,">=":n.Tokenizer.Tokens.T_GREATEREQUAL,"~":n.Tokenizer.Tokens.T_TILDE,"^":n.Tokenizer.Tokens.T_CIRCUMFLEX,"<<":n.Tokenizer.Tokens.T_LEFTSHIFT,">>":n.Tokenizer.Tokens.T_RIGHTSHIFT,"**":n.Tokenizer.Tokens.T_DOUBLESTAR,"+=":n.Tokenizer.Tokens.T_PLUSEQUAL,"-=":n.Tokenizer.Tokens.T_MINEQUAL,"*=":n.Tokenizer.Tokens.T_STAREQUAL,"/=":n.Tokenizer.Tokens.T_SLASHEQUAL,"%=":n.Tokenizer.Tokens.T_PERCENTEQUAL,"&=":n.Tokenizer.Tokens.T_AMPEREQUAL,"|=":n.Tokenizer.Tokens.T_VBAREQUAL,"^=":n.Tokenizer.Tokens.T_CIRCUMFLEXEQUAL,"<<=":n.Tokenizer.Tokens.T_LEFTSHIFTEQUAL,">>=":n.Tokenizer.Tokens.T_RIGHTSHIFTEQUAL,"**=":n.Tokenizer.Tokens.T_DOUBLESTAREQUAL,"//":n.Tokenizer.Tokens.T_DOUBLESLASH,"//=":n.Tokenizer.Tokens.T_DOUBLESLASHEQUAL,"->":n.Tokenizer.Tokens.T_RARROW};n.ParseTables={sym:{and_expr:257,and_test:258,arglist:259,argument:260,arith_expr:261,assert_stmt:262,atom:263,augassign:264,break_stmt:265,classdef:266,comp_op:267,comparison:268,compound_stmt:269,continue_stmt:270,decorated:271,decorator:272,decorators:273,del_stmt:274,dictmaker:275,dotted_as_name:276,dotted_as_names:277,dotted_name:278,encoding_decl:279,eval_input:280,except_clause:281,exec_stmt:282,expr:283,expr_stmt:284,exprlist:285,factor:286,file_input:287,flow_stmt:288,for_stmt:289,fpdef:290,fplist:291,funcdef:292,gen_for:293,gen_if:294,gen_iter:295,global_stmt:296,if_stmt:297,import_as_name:298,import_as_names:299,import_from:300,import_name:301,import_stmt:302,lambdef:303,list_for:304,list_if:305,list_iter:306,listmaker:307,not_test:308,old_lambdef:309,old_test:310,or_test:311,parameters:312,pass_stmt:313,power:314,print_stmt:315,raise_stmt:316,return_stmt:317,shift_expr:318,simple_stmt:319,single_input:256,sliceop:320,small_stmt:321,stmt:322,subscript:323,subscriptlist:324,suite:325,term:326,test:327,testlist:328,testlist1:329,testlist_gexp:330,testlist_safe:331,trailer:332,try_stmt:333,varargslist:334,while_stmt:335,with_stmt:336,with_var:337,xor_expr:338,yield_expr:339,yield_stmt:340},number2symbol:{256:"single_input",257:"and_expr",258:"and_test",259:"arglist",260:"argument",261:"arith_expr",262:"assert_stmt",263:"atom",264:"augassign",265:"break_stmt",266:"classdef",267:"comp_op",268:"comparison",269:"compound_stmt",270:"continue_stmt",271:"decorated",272:"decorator",273:"decorators",274:"del_stmt",275:"dictmaker",276:"dotted_as_name",277:"dotted_as_names",278:"dotted_name",279:"encoding_decl",280:"eval_input",281:"except_clause",282:"exec_stmt",283:"expr",284:"expr_stmt",285:"exprlist",286:"factor",287:"file_input",288:"flow_stmt",289:"for_stmt",290:"fpdef",291:"fplist",292:"funcdef",293:"gen_for",294:"gen_if",295:"gen_iter",296:"global_stmt",297:"if_stmt",298:"import_as_name",299:"import_as_names",300:"import_from",301:"import_name",302:"import_stmt",303:"lambdef",304:"list_for",305:"list_if",306:"list_iter",307:"listmaker",308:"not_test",309:"old_lambdef",310:"old_test",311:"or_test",312:"parameters",313:"pass_stmt",314:"power",315:"print_stmt",316:"raise_stmt",317:"return_stmt",318:"shift_expr",319:"simple_stmt",320:"sliceop",321:"small_stmt",322:"stmt",323:"subscript",324:"subscriptlist",325:"suite",326:"term",327:"test",328:"testlist",329:"testlist1",330:"testlist_gexp",331:"testlist_safe",332:"trailer",333:"try_stmt",334:"varargslist",335:"while_stmt",336:"with_stmt",337:"with_var",338:"xor_expr",339:"yield_expr",340:"yield_stmt"},dfas:{256:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1}],257:[[[[37,1]],[[38,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],258:[[[[39,1]],[[40,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],259:[[[[41,1],[42,2],[43,3]],[[44,4]],[[45,5],[0,2]],[[44,6]],[[45,7],[0,4]],[[41,1],[42,2],[43,3],[0,5]],[[0,6]],[[42,4],[43,3]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,41:1,43:1}],260:[[[[44,1]],[[46,2],[47,3],[0,1]],[[0,2]],[[44,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],261:[[[[48,1]],[[24,0],[35,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],262:[[[[19,1]],[[44,2]],[[45,3],[0,2]],[[44,4]],[[0,4]]],{19:1}],263:[[[[17,1],[8,2],[9,5],[28,4],[11,3],[13,6],[20,2]],[[17,1],[0,1]],[[0,2]],[[49,7],[50,2]],[[51,2],[52,8],[53,8]],[[54,9],[55,2]],[[56,10]],[[50,2]],[[51,2]],[[55,2]],[[13,2]]],{8:1,9:1,11:1,13:1,17:1,20:1,28:1}],264:[[[[57,1],[58,1],[59,1],[60,1],[61,1],[62,1],[63,1],[64,1],[65,1],[66,1],[67,1],[68,1]],[[0,1]]],{57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,66:1,67:1,68:1}],265:[[[[31,1]],[[0,1]]],{31:1}],266:[[[[10,1]],[[20,2]],[[69,3],[28,4]],[[70,5]],[[51,6],[71,7]],[[0,5]],[[69,3]],[[51,6]]],{10:1}],267:[[[[72,1],[73,1],[7,2],[74,1],[72,1],[75,1],[76,1],[77,3],[78,1],[79,1]],[[0,1]],[[75,1]],[[7,1],[0,3]]],{7:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1}],268:[[[[80,1]],[[81,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],269:[[[[82,1],[83,1],[84,1],[85,1],[86,1],[87,1],[88,1],[89,1]],[[0,1]]],{4:1,10:1,14:1,16:1,27:1,30:1,33:1,34:1}],270:[[[[32,1]],[[0,1]]],{32:1}],271:[[[[90,1]],[[88,2],[85,2]],[[0,2]]],{33:1}],272:[[[[33,1]],[[91,2]],[[28,4],[2,3]],[[0,3]],[[51,5],[92,6]],[[2,3]],[[51,5]]],{33:1}],273:[[[[93,1]],[[93,1],[0,1]]],{33:1}],274:[[[[21,1]],[[94,2]],[[0,2]]],{21:1}],275:[[[[44,1]],[[69,2]],[[44,3]],[[45,4],[0,3]],[[44,1],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],276:[[[[91,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],{20:1}],277:[[[[96,1]],[[45,0],[0,1]]],{20:1}],278:[[[[20,1]],[[97,0],[0,1]]],{20:1}],279:[[[[20,1]],[[0,1]]],{20:1}],280:[[[[71,1]],[[2,1],[98,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],281:[[[[99,1]],[[44,2],[0,1]],[[95,3],[45,3],[0,2]],[[44,4]],[[0,4]]],{99:1}],282:[[[[15,1]],[[80,2]],[[75,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],{15:1}],283:[[[[100,1]],[[101,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],284:[[[[71,1]],[[102,2],[47,3],[0,1]],[[71,4],[53,4]],[[71,5],[53,5]],[[0,4]],[[47,3],[0,5]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],285:[[[[80,1]],[[45,2],[0,1]],[[80,1],[0,2]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],286:[[[[103,2],[24,1],[6,1],[35,1]],[[104,2]],[[0,2]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],287:[[[[2,0],[98,1],[105,0]],[[0,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,98:1}],288:[[[[106,1],[107,1],[108,1],[109,1],[110,1]],[[0,1]]],{5:1,18:1,25:1,31:1,32:1}],289:[[[[27,1]],[[94,2]],[[75,3]],[[71,4]],[[69,5]],[[70,6]],[[111,7],[0,6]],[[69,8]],[[70,9]],[[0,9]]],{27:1}],290:[[[[28,1],[20,2]],[[112,3]],[[0,2]],[[51,2]]],{20:1,28:1}],291:[[[[113,1]],[[45,2],[0,1]],[[113,1],[0,2]]],{20:1,28:1}],292:[[[[4,1]],[[20,2]],[[114,3]],[[69,4]],[[70,5]],[[0,5]]],{4:1}],293:[[[[27,1]],[[94,2]],[[75,3]],[[115,4]],[[116,5],[0,4]],[[0,5]]],{27:1}],294:[[[[30,1]],[[117,2]],[[116,3],[0,2]],[[0,3]]],{30:1}],295:[[[[46,1],[118,1]],[[0,1]]],{27:1,30:1}],296:[[[[26,1]],[[20,2]],[[45,1],[0,2]]],{26:1}],297:[[[[30,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[119,1],[0,4]],[[69,6]],[[70,7]],[[0,7]]],{30:1}],298:[[[[20,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],{20:1}],299:[[[[120,1]],[[45,2],[0,1]],[[120,1],[0,2]]],{20:1}],300:[[[[29,1]],[[91,2],[97,3]],[[23,4]],[[91,2],[23,4],[97,3]],[[121,5],[41,5],[28,6]],[[0,5]],[[121,7]],[[51,5]]],{29:1}],301:[[[[23,1]],[[122,2]],[[0,2]]],{23:1}],302:[[[[123,1],[124,1]],[[0,1]]],{23:1,29:1}],303:[[[[36,1]],[[69,2],[125,3]],[[44,4]],[[69,2]],[[0,4]]],{36:1}],304:[[[[27,1]],[[94,2]],[[75,3]],[[126,4]],[[127,5],[0,4]],[[0,5]]],{27:1}],305:[[[[30,1]],[[117,2]],[[127,3],[0,2]],[[0,3]]],{30:1}],306:[[[[128,1],[129,1]],[[0,1]]],{27:1,30:1}],307:[[[[44,1]],[[128,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],308:[[[[7,1],[130,2]],[[39,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],309:[[[[36,1]],[[69,2],[125,3]],[[117,4]],[[69,2]],[[0,4]]],{36:1}],310:[[[[131,1],[115,1]],[[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],311:[[[[132,1]],[[133,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],312:[[[[28,1]],[[51,2],[125,3]],[[0,2]],[[51,2]]],{28:1}],313:[[[[22,1]],[[0,1]]],{22:1}],314:[[[[134,1]],[[135,1],[43,2],[0,1]],[[104,3]],[[0,3]]],{8:1,9:1,11:1,13:1,17:1,20:1,28:1}],315:[[[[12,1]],[[44,2],[136,3],[0,1]],[[45,4],[0,2]],[[44,5]],[[44,2],[0,4]],[[45,6],[0,5]],[[44,7]],[[45,8],[0,7]],[[44,7],[0,8]]],{12:1}],316:[[[[5,1]],[[44,2],[0,1]],[[45,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],{5:1}],317:[[[[18,1]],[[71,2],[0,1]],[[0,2]]],{18:1}],318:[[[[137,1]],[[136,0],[138,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],319:[[[[139,1]],[[2,2],[140,3]],[[0,2]],[[139,1],[2,2]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],320:[[[[69,1]],[[44,2],[0,1]],[[0,2]]],{69:1}],321:[[[[141,1],[142,1],[143,1],[144,1],[145,1],[146,1],[147,1],[148,1],[149,1]],[[0,1]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],322:[[[[1,1],[3,1]],[[0,1]]],{4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1}],323:[[[[44,1],[69,2],[97,3]],[[69,2],[0,1]],[[44,4],[150,5],[0,2]],[[97,6]],[[150,5],[0,4]],[[0,5]],[[97,5]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,69:1,97:1}],324:[[[[151,1]],[[45,2],[0,1]],[[151,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1,69:1,97:1}],325:[[[[1,1],[2,2]],[[0,1]],[[152,3]],[[105,4]],[[153,1],[105,4]]],{2:1,5:1,6:1,7:1,8:1,9:1,11:1,12:1,13:1,15:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,28:1,29:1,31:1,32:1,35:1,36:1}],326:[[[[104,1]],[[154,0],[41,0],[155,0],[156,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],327:[[[[115,1],[157,2]],[[30,3],[0,1]],[[0,2]],[[115,4]],[[111,5]],[[44,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],328:[[[[44,1]],[[45,2],[0,1]],[[44,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],329:[[[[44,1]],[[45,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],330:[[[[44,1]],[[46,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],331:[[[[117,1]],[[45,2],[0,1]],[[117,3]],[[45,4],[0,3]],[[117,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1,36:1}],332:[[[[28,1],[97,2],[11,3]],[[51,4],[92,5]],[[20,4]],[[158,6]],[[0,4]],[[51,4]],[[50,4]]],{11:1,28:1,97:1}],333:[[[[14,1]],[[69,2]],[[70,3]],[[159,4],[160,5]],[[69,6]],[[69,7]],[[70,8]],[[70,9]],[[159,4],[111,10],[160,5],[0,8]],[[0,9]],[[69,11]],[[70,12]],[[160,5],[0,12]]],{14:1}],334:[[[[41,1],[113,2],[43,3]],[[20,4]],[[47,5],[45,6],[0,2]],[[20,7]],[[45,8],[0,4]],[[44,9]],[[41,1],[113,2],[43,3],[0,6]],[[0,7]],[[43,3]],[[45,6],[0,9]]],{20:1,28:1,41:1,43:1}],335:[[[[16,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[0,4]],[[69,6]],[[70,7]],[[0,7]]],{16:1}],336:[[[[34,1]],[[44,2]],[[69,3],[161,4]],[[70,5]],[[69,3]],[[0,5]]],{34:1}],337:[[[[95,1]],[[80,2]],[[0,2]]],{95:1}],338:[[[[162,1]],[[163,0],[0,1]]],{6:1,8:1,9:1,11:1,13:1,17:1,20:1,24:1,28:1,35:1}],339:[[[[25,1]],[[71,2],[0,1]],[[0,2]]],{25:1}],340:[[[[53,1]],[[0,1]]],{25:1}]},states:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],[[[37,1]],[[38,0],[0,1]]],[[[39,1]],[[40,0],[0,1]]],[[[41,1],[42,2],[43,3]],[[44,4]],[[45,5],[0,2]],[[44,6]],[[45,7],[0,4]],[[41,1],[42,2],[43,3],[0,5]],[[0,6]],[[42,4],[43,3]]],[[[44,1]],[[46,2],[47,3],[0,1]],[[0,2]],[[44,2]]],[[[48,1]],[[24,0],[35,0],[0,1]]],[[[19,1]],[[44,2]],[[45,3],[0,2]],[[44,4]],[[0,4]]],[[[17,1],[8,2],[9,5],[28,4],[11,3],[13,6],[20,2]],[[17,1],[0,1]],[[0,2]],[[49,7],[50,2]],[[51,2],[52,8],[53,8]],[[54,9],[55,2]],[[56,10]],[[50,2]],[[51,2]],[[55,2]],[[13,2]]],[[[57,1],[58,1],[59,1],[60,1],[61,1],[62,1],[63,1],[64,1],[65,1],[66,1],[67,1],[68,1]],[[0,1]]],[[[31,1]],[[0,1]]],[[[10,1]],[[20,2]],[[69,3],[28,4]],[[70,5]],[[51,6],[71,7]],[[0,5]],[[69,3]],[[51,6]]],[[[72,1],[73,1],[7,2],[74,1],[72,1],[75,1],[76,1],[77,3],[78,1],[79,1]],[[0,1]],[[75,1]],[[7,1],[0,3]]],[[[80,1]],[[81,0],[0,1]]],[[[82,1],[83,1],[84,1],[85,1],[86,1],[87,1],[88,1],[89,1]],[[0,1]]],[[[32,1]],[[0,1]]],[[[90,1]],[[88,2],[85,2]],[[0,2]]],[[[33,1]],[[91,2]],[[28,4],[2,3]],[[0,3]],[[51,5],[92,6]],[[2,3]],[[51,5]]],[[[93,1]],[[93,1],[0,1]]],[[[21,1]],[[94,2]],[[0,2]]],[[[44,1]],[[69,2]],[[44,3]],[[45,4],[0,3]],[[44,1],[0,4]]],[[[91,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],[[[96,1]],[[45,0],[0,1]]],[[[20,1]],[[97,0],[0,1]]],[[[20,1]],[[0,1]]],[[[71,1]],[[2,1],[98,2]],[[0,2]]],[[[99,1]],[[44,2],[0,1]],[[95,3],[45,3],[0,2]],[[44,4]],[[0,4]]],[[[15,1]],[[80,2]],[[75,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],[[[100,1]],[[101,0],[0,1]]],[[[71,1]],[[102,2],[47,3],[0,1]],[[71,4],[53,4]],[[71,5],[53,5]],[[0,4]],[[47,3],[0,5]]],[[[80,1]],[[45,2],[0,1]],[[80,1],[0,2]]],[[[103,2],[24,1],[6,1],[35,1]],[[104,2]],[[0,2]]],[[[2,0],[98,1],[105,0]],[[0,1]]],[[[106,1],[107,1],[108,1],[109,1],[110,1]],[[0,1]]],[[[27,1]],[[94,2]],[[75,3]],[[71,4]],[[69,5]],[[70,6]],[[111,7],[0,6]],[[69,8]],[[70,9]],[[0,9]]],[[[28,1],[20,2]],[[112,3]],[[0,2]],[[51,2]]],[[[113,1]],[[45,2],[0,1]],[[113,1],[0,2]]],[[[4,1]],[[20,2]],[[114,3]],[[69,4]],[[70,5]],[[0,5]]],[[[27,1]],[[94,2]],[[75,3]],[[115,4]],[[116,5],[0,4]],[[0,5]]],[[[30,1]],[[117,2]],[[116,3],[0,2]],[[0,3]]],[[[46,1],[118,1]],[[0,1]]],[[[26,1]],[[20,2]],[[45,1],[0,2]]],[[[30,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[119,1],[0,4]],[[69,6]],[[70,7]],[[0,7]]],[[[20,1]],[[95,2],[0,1]],[[20,3]],[[0,3]]],[[[120,1]],[[45,2],[0,1]],[[120,1],[0,2]]],[[[29,1]],[[91,2],[97,3]],[[23,4]],[[91,2],[23,4],[97,3]],[[121,5],[41,5],[28,6]],[[0,5]],[[121,7]],[[51,5]]],[[[23,1]],[[122,2]],[[0,2]]],[[[123,1],[124,1]],[[0,1]]],[[[36,1]],[[69,2],[125,3]],[[44,4]],[[69,2]],[[0,4]]],[[[27,1]],[[94,2]],[[75,3]],[[126,4]],[[127,5],[0,4]],[[0,5]]],[[[30,1]],[[117,2]],[[127,3],[0,2]],[[0,3]]],[[[128,1],[129,1]],[[0,1]]],[[[44,1]],[[128,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],[[[7,1],[130,2]],[[39,2]],[[0,2]]],[[[36,1]],[[69,2],[125,3]],[[117,4]],[[69,2]],[[0,4]]],[[[131,1],[115,1]],[[0,1]]],[[[132,1]],[[133,0],[0,1]]],[[[28,1]],[[51,2],[125,3]],[[0,2]],[[51,2]]],[[[22,1]],[[0,1]]],[[[134,1]],[[135,1],[43,2],[0,1]],[[104,3]],[[0,3]]],[[[12,1]],[[44,2],[136,3],[0,1]],[[45,4],[0,2]],[[44,5]],[[44,2],[0,4]],[[45,6],[0,5]],[[44,7]],[[45,8],[0,7]],[[44,7],[0,8]]],[[[5,1]],[[44,2],[0,1]],[[45,3],[0,2]],[[44,4]],[[45,5],[0,4]],[[44,6]],[[0,6]]],[[[18,1]],[[71,2],[0,1]],[[0,2]]],[[[137,1]],[[136,0],[138,0],[0,1]]],[[[139,1]],[[2,2],[140,3]],[[0,2]],[[139,1],[2,2]]],[[[69,1]],[[44,2],[0,1]],[[0,2]]],[[[141,1],[142,1],[143,1],[144,1],[145,1],[146,1],[147,1],[148,1],[149,1]],[[0,1]]],[[[1,1],[3,1]],[[0,1]]],[[[44,1],[69,2],[97,3]],[[69,2],[0,1]],[[44,4],[150,5],[0,2]],[[97,6]],[[150,5],[0,4]],[[0,5]],[[97,5]]],[[[151,1]],[[45,2],[0,1]],[[151,1],[0,2]]],[[[1,1],[2,2]],[[0,1]],[[152,3]],[[105,4]],[[153,1],[105,4]]],[[[104,1]],[[154,0],[41,0],[155,0],[156,0],[0,1]]],[[[115,1],[157,2]],[[30,3],[0,1]],[[0,2]],[[115,4]],[[111,5]],[[44,2]]],[[[44,1]],[[45,2],[0,1]],[[44,1],[0,2]]],[[[44,1]],[[45,0],[0,1]]],[[[44,1]],[[46,2],[45,3],[0,1]],[[0,2]],[[44,4],[0,3]],[[45,3],[0,4]]],[[[117,1]],[[45,2],[0,1]],[[117,3]],[[45,4],[0,3]],[[117,3],[0,4]]],[[[28,1],[97,2],[11,3]],[[51,4],[92,5]],[[20,4]],[[158,6]],[[0,4]],[[51,4]],[[50,4]]],[[[14,1]],[[69,2]],[[70,3]],[[159,4],[160,5]],[[69,6]],[[69,7]],[[70,8]],[[70,9]],[[159,4],[111,10],[160,5],[0,8]],[[0,9]],[[69,11]],[[70,12]],[[160,5],[0,12]]],[[[41,1],[113,2],[43,3]],[[20,4]],[[47,5],[45,6],[0,2]],[[20,7]],[[45,8],[0,4]],[[44,9]],[[41,1],[113,2],[43,3],[0,6]],[[0,7]],[[43,3]],[[45,6],[0,9]]],[[[16,1]],[[44,2]],[[69,3]],[[70,4]],[[111,5],[0,4]],[[69,6]],[[70,7]],[[0,7]]],[[[34,1]],[[44,2]],[[69,3],[161,4]],[[70,5]],[[69,3]],[[0,5]]],[[[95,1]],[[80,2]],[[0,2]]],[[[162,1]],[[163,0],[0,1]]],[[[25,1]],[[71,2],[0,1]],[[0,2]]],[[[53,1]],[[0,1]]]],labels:[[0,"EMPTY"],[319,null],[4,null],[269,null],[1,"def"],[1,"raise"],[32,null],[1,"not"],[2,null],[26,null],[1,"class"],[9,null],[1,"print"],[25,null],[1,"try"],[1,"exec"],[1,"while"],[3,null],[1,"return"],[1,"assert"],[1,null],[1,"del"],[1,"pass"],[1,"import"],[15,null],[1,"yield"],[1,"global"],[1,"for"],[7,null],[1,"from"],[1,"if"],[1,"break"],[1,"continue"],[50,null],[1,"with"],[14,null],[1,"lambda"],[318,null],[19,null],[308,null],[1,"and"],[16,null],[260,null],[36,null],[327,null],[12,null],[293,null],[22,null],[326,null],[307,null],[10,null],[8,null],[330,null],[339,null],[275,null],[27,null],[329,null],[46,null],[39,null],[41,null],[47,null],[42,null],[43,null],[37,null],[44,null],[49,null],[40,null],[38,null],[45,null],[11,null],[325,null],[328,null],[29,null],[21,null],[28,null],[1,"in"],[30,null],[1,"is"],[31,null],[20,null],[283,null],[267,null],[333,null],[297,null],[289,null],[266,null],[336,null],[335,null],[292,null],[271,null],[273,null],[278,null],[259,null],[272,null],[285,null],[1,"as"],[276,null],[23,null],[0,null],[1,"except"],[338,null],[18,null],[264,null],[314,null],[286,null],[322,null],[265,null],[270,null],[316,null],[317,null],[340,null],[1,"else"],[291,null],[290,null],[312,null],[311,null],[295,null],[310,null],[294,null],[1,"elif"],[298,null],[299,null],[277,null],[301,null],[300,null],[334,null],[331,null],[306,null],[304,null],[305,null],[268,null],[309,null],[258,null],[1,"or"],[263,null],[332,null],[35,null],[261,null],[34,null],[321,null],[13,null],[288,null],[262,null],[284,null],[313,null],[315,null],[274,null],[282,null],[296,null],[302,null],[320,null],[323,null],[5,null],[6,null],[48,null],[17,null],[24,null],[303,null],[324,null],[281,null],[1,"finally"],[337,null],[257,null],[33,null]],keywords:{and:40,as:95,assert:19,"break":31,"class":10,"continue":32,def:4,del:21,elif:119,"else":111,except:99,exec:15,"finally":160,"for":27,from:29,global:26,"if":30,"import":23,"in":75,is:77,lambda:36,not:7,or:133,pass:22,print:12,raise:5,"return":18,"try":14,"while":16,"with":34,yield:25},tokens:{0:98,1:20,2:8,3:17,4:2,5:152,6:153,7:28,8:51,9:11,10:50,11:69,12:45,13:140,14:35,15:24,16:41,17:155,18:101,19:38,20:79,21:73,22:47,23:97,24:156,25:13,26:9,27:55,28:74,29:72,30:76,31:78,32:6,33:163,34:138,35:136,36:43,37:63,38:67,39:58,40:66,41:59,42:61,43:62,44:64,45:68,46:57,47:60,48:154,49:65,50:33},start:256};ri.prototype.setup=function(n){n=n||this.grammar.start;this.stack=[{dfa:this.grammar.dfas[n],state:0,node:{type:n,value:null,context:null,children:[]}}];this.used_names={}};ri.prototype.addtoken=function(i,r,u){var l=this.classify(i,r,u);n:for(;;){for(var f=this.stack[this.stack.length-1],e=f.dfa[0],s=e[f.state],h=0;h<s.length;++h){var a=s[h][0],c=s[h][1],o=this.grammar.labels[a][0];if(l===a){for(t.asserts.assert(256>o),this.shift(i,r,c,u),i=c;1===e[i].length&&0===e[i][0][0]&&e[i][0][1]===i;){if(this.pop(),0===this.stack.length)return!0;f=this.stack[this.stack.length-1];i=f.state;e=f.dfa[0]}return!1}if(256<=o&&this.grammar.dfas[o][1].hasOwnProperty(l)){this.push(o,this.grammar.dfas[o],c,u);continue n}}if(ys(s,[0,f.state])){if(this.pop(),0===this.stack.length)throw new n.builtin.ParseError("too much input",this.filename);}else throw new n.builtin.ParseError("bad input",this.filename,u[0][0],u);}};ri.prototype.classify=function(t,i,r){if(t===n.Tokenizer.Tokens.T_NAME&&(this.used_names[i]=!0,i=this.grammar.keywords.hasOwnProperty(i)&&this.grammar.keywords[i]))return i;if(i=this.grammar.tokens.hasOwnProperty(t)&&this.grammar.tokens[t],!i)throw new n.builtin.ParseError("bad token",this.filename,r[0][0],r);return i};ri.prototype.shift=function(n,t,i,r){var f=this.stack[this.stack.length-1].dfa,u=this.stack[this.stack.length-1].node;u.children.push({type:n,value:t,lineno:r[0][0],col_offset:r[0][1],children:null});this.stack[this.stack.length-1]={dfa:f,state:i,node:u}};ri.prototype.push=function(n,t,i,r){n={type:n,value:null,lineno:r[0][0],col_offset:r[0][1],children:[]};this.stack[this.stack.length-1]={dfa:this.stack[this.stack.length-1].dfa,state:i,node:this.stack[this.stack.length-1].node};this.stack.push({dfa:t,state:0,node:n})};ri.prototype.pop=function(){var n=this.stack.pop().node;n&&(0!==this.stack.length?this.stack[this.stack.length-1].node.children.push(n):(this.rootnode=n,this.rootnode.used_names=this.used_names))};n.parse=function(n,t){var f=ps(n),r,u,i;for("\n"!==t.substr(t.length-1,1)&&(t+="\n"),r=t.split("\n"),i=0;i<r.length;++i)u=f(r[i]+(i===r.length-1?"":"\n"));return u};n.parseTreeDump=function(t,i){var r,u;if(i=i||"",r=""+i,256<=t.type)for(r+=n.ParseTables.number2symbol[t.type]+"\n",u=0;u<t.children.length;++u)r+=n.parseTreeDump(t.children[u],i+"  ");else r+=n.Tokenizer.tokenNames[t.type]+": "+new n.builtin.str(t.value).$r().v+"\n";return r};t.exportSymbol("Sk.parse",n.parse);t.exportSymbol("Sk.parseTreeDump",n.parseTreeDump);gu.prototype._astname="Module";gu.prototype._fields=["body",function(n){return n.body}];ge.prototype._astname="Interactive";ge.prototype._fields=["body",function(n){return n.body}];no.prototype._astname="Expression";no.prototype._fields=["body",function(n){return n.body}];to.prototype._astname="Suite";to.prototype._fields=["body",function(n){return n.body}];li.prototype._astname="FunctionDef";li.prototype._fields=["name",function(n){return n.name},"args",function(n){return n.args},"body",function(n){return n.body},"decorator_list",function(n){return n.decorator_list}];wt.prototype._astname="ClassDef";wt.prototype._fields=["name",function(n){return n.name},"bases",function(n){return n.bases},"body",function(n){return n.body},"decorator_list",function(n){return n.decorator_list}];ai.prototype._astname="Return";ai.prototype._fields=["value",function(n){return n.value}];sr.prototype._astname="Delete";sr.prototype._fields=["targets",function(n){return n.targets}];hr.prototype._astname="Assign";hr.prototype._fields=["targets",function(n){return n.targets},"value",function(n){return n.value}];vi.prototype._astname="AugAssign";vi.prototype._fields=["target",function(n){return n.target},"op",function(n){return n.op},"value",function(n){return n.value}];yi.prototype._astname="Print";yi.prototype._fields=["dest",function(n){return n.dest},"values",function(n){return n.values},"nl",function(n){return n.nl}];cr.prototype._astname="For";cr.prototype._fields=["target",function(n){return n.target},"iter",function(n){return n.iter},"body",function(n){return n.body},"orelse",function(n){return n.orelse}];pi.prototype._astname="While";pi.prototype._fields=["test",function(n){return n.test},"body",function(n){return n.body},"orelse",function(n){return n.orelse}];ot.prototype._astname="If";ot.prototype._fields=["test",function(n){return n.test},"body",function(n){return n.body},"orelse",function(n){return n.orelse}];nf.prototype._astname="With";nf.prototype._fields=["context_expr",function(n){return n.context_expr},"optional_vars",function(n){return n.optional_vars},"body",function(n){return n.body}];bt.prototype._astname="Raise";bt.prototype._fields=["type",function(n){return n.type},"inst",function(n){return n.inst},"tback",function(n){return n.tback}];lr.prototype._astname="TryExcept";lr.prototype._fields=["body",function(n){return n.body},"handlers",function(n){return n.handlers},"orelse",function(n){return n.orelse}];ar.prototype._astname="TryFinally";ar.prototype._fields=["body",function(n){return n.body},"finalbody",function(n){return n.finalbody}];wi.prototype._astname="Assert";wi.prototype._fields=["test",function(n){return n.test},"msg",function(n){return n.msg}];vr.prototype._astname="Import";vr.prototype._fields=["names",function(n){return n.names}];yr.prototype._astname="ImportFrom";yr.prototype._fields=["module",function(n){return n.module},"names",function(n){return n.names},"level",function(n){return n.level}];tf.prototype._astname="Exec";tf.prototype._fields=["body",function(n){return n.body},"globals",function(n){return n.globals},"locals",function(n){return n.locals}];pr.prototype._astname="Global";pr.prototype._fields=["names",function(n){return n.names}];bi.prototype._astname="Expr";bi.prototype._fields=["value",function(n){return n.value}];wr.prototype._astname="Pass";wr.prototype._fields=[];br.prototype._astname="Break";br.prototype._fields=[];kr.prototype._astname="Continue";kr.prototype._fields=[];kt.prototype._astname="BoolOp";kt.prototype._fields=["op",function(n){return n.op},"values",function(n){return n.values}];dt.prototype._astname="BinOp";dt.prototype._fields=["left",function(n){return n.left},"op",function(n){return n.op},"right",function(n){return n.right}];lt.prototype._astname="UnaryOp";lt.prototype._fields=["op",function(n){return n.op},"operand",function(n){return n.operand}];gt.prototype._astname="Lambda";gt.prototype._fields=["args",function(n){return n.args},"body",function(n){return n.body}];ki.prototype._astname="IfExp";ki.prototype._fields=["test",function(n){return n.test},"body",function(n){return n.body},"orelse",function(n){return n.orelse}];di.prototype._astname="Dict";di.prototype._fields=["keys",function(n){return n.keys},"values",function(n){return n.values}];ui.prototype._astname="ListComp";ui.prototype._fields=["elt",function(n){return n.elt},"generators",function(n){return n.generators}];fi.prototype._astname="GeneratorExp";fi.prototype._fields=["elt",function(n){return n.elt},"generators",function(n){return n.generators}];ei.prototype._astname="Yield";ei.prototype._fields=["value",function(n){return n.value}];gi.prototype._astname="Compare";gi.prototype._fields=["left",function(n){return n.left},"ops",function(n){return n.ops},"comparators",function(n){return n.comparators}];ni.prototype._astname="Call";ni.prototype._fields=["func",function(n){return n.func},"args",function(n){return n.args},"keywords",function(n){return n.keywords},"starargs",function(n){return n.starargs},"kwargs",function(n){return n.kwargs}];oi.prototype._astname="Num";oi.prototype._fields=["n",function(n){return n.n}];si.prototype._astname="Str";si.prototype._fields=["s",function(n){return n.s}];st.prototype._astname="Attribute";st.prototype._fields=["value",function(n){return n.value},"attr",function(n){return n.attr},"ctx",function(n){return n.ctx}];it.prototype._astname="Subscript";it.prototype._fields=["value",function(n){return n.value},"slice",function(n){return n.slice},"ctx",function(n){return n.ctx}];k.prototype._astname="Name";k.prototype._fields=["id",function(n){return n.id},"ctx",function(n){return n.ctx}];hi.prototype._astname="List";hi.prototype._fields=["elts",function(n){return n.elts},"ctx",function(n){return n.ctx}];rt.prototype._astname="Tuple";rt.prototype._fields=["elts",function(n){return n.elts},"ctx",function(n){return n.ctx}];l.prototype._astname="Load";l.prototype._isenum=!0;c.prototype._astname="Store";c.prototype._isenum=!0;nt.prototype._astname="Del";nt.prototype._isenum=!0;pt.prototype._astname="AugLoad";pt.prototype._isenum=!0;tt.prototype._astname="AugStore";tt.prototype._isenum=!0;ct.prototype._astname="Param";ct.prototype._isenum=!0;rf.prototype._astname="Ellipsis";rf.prototype._fields=[];nr.prototype._astname="Slice";nr.prototype._fields=["lower",function(n){return n.lower},"upper",function(n){return n.upper},"step",function(n){return n.step}];dr.prototype._astname="ExtSlice";dr.prototype._fields=["dims",function(n){return n.dims}];ti.prototype._astname="Index";ti.prototype._fields=["value",function(n){return n.value}];su.prototype._astname="And";su.prototype._isenum=!0;lf.prototype._astname="Or";lf.prototype._isenum=!0;hu.prototype._astname="Add";hu.prototype._isenum=!0;cu.prototype._astname="Sub";cu.prototype._isenum=!0;lu.prototype._astname="Mult";lu.prototype._isenum=!0;au.prototype._astname="Div";au.prototype._isenum=!0;vu.prototype._astname="Mod";vu.prototype._isenum=!0;yu.prototype._astname="Pow";yu.prototype._isenum=!0;pu.prototype._astname="LShift";pu.prototype._isenum=!0;wu.prototype._astname="RShift";wu.prototype._isenum=!0;or.prototype._astname="BitOr";or.prototype._isenum=!0;bu.prototype._astname="BitXor";bu.prototype._isenum=!0;ku.prototype._astname="BitAnd";ku.prototype._isenum=!0;du.prototype._astname="FloorDiv";du.prototype._isenum=!0;af.prototype._astname="Invert";af.prototype._isenum=!0;vf.prototype._astname="Not";vf.prototype._isenum=!0;yf.prototype._astname="UAdd";yf.prototype._isenum=!0;pf.prototype._astname="USub";pf.prototype._isenum=!0;wf.prototype._astname="Eq";wf.prototype._isenum=!0;bf.prototype._astname="NotEq";bf.prototype._isenum=!0;kf.prototype._astname="Lt";kf.prototype._isenum=!0;df.prototype._astname="LtE";df.prototype._isenum=!0;gf.prototype._astname="Gt";gf.prototype._isenum=!0;ne.prototype._astname="GtE";ne.prototype._isenum=!0;te.prototype._astname="Is";te.prototype._isenum=!0;ie.prototype._astname="IsNot";ie.prototype._isenum=!0;re.prototype._astname="In";re.prototype._isenum=!0;ue.prototype._astname="NotIn";ue.prototype._isenum=!0;tr.prototype._astname="comprehension";tr.prototype._fields=["target",function(n){return n.target},"iter",function(n){return n.iter},"ifs",function(n){return n.ifs}];gr.prototype._astname="ExceptHandler";gr.prototype._fields=["type",function(n){return n.type},"name",function(n){return n.name},"body",function(n){return n.body}];nu.prototype._astname="arguments";nu.prototype._fields=["args",function(n){return n.args},"vararg",function(n){return n.vararg},"kwarg",function(n){return n.kwarg},"defaults",function(n){return n.defaults}];fe.prototype._astname="keyword";fe.prototype._fields=["arg",function(n){return n.arg},"value",function(n){return n.value}];ir.prototype._astname="alias";ir.prototype._fields=["name",function(n){return n.name},"asname",function(n){return n.asname}];r=n.ParseTables.sym;e=n.Tokenizer.Tokens;b={},function(){b[e.T_VBAR]=or;b[e.T_VBAR]=or;b[e.T_CIRCUMFLEX]=bu;b[e.T_AMPER]=ku;b[e.T_LEFTSHIFT]=pu;b[e.T_RIGHTSHIFT]=wu;b[e.T_PLUS]=hu;b[e.T_MINUS]=cu;b[e.T_STAR]=lu;b[e.T_SLASH]=au;b[e.T_DOUBLESLASH]=du;b[e.T_PERCENT]=vu}();n.astFromParse=function(n,f){var v=new ws("utf-8",f),l=[],o,y=0,s,a,c;switch(n.type){case r.file_input:for(s=0;s<u(n)-1;++s)if(o=i(n,s),n.type!==e.T_NEWLINE)if(h(o,r.stmt),a=at(o),1===a)l[y++]=iu(v,o);else for(o=i(o,0),h(o,r.simple_stmt),c=0;c<a;++c)l[y++]=iu(v,i(o,2*c));return new gu(l);case r.eval_input:t.asserts.fail("todo;");case r.single_input:t.asserts.fail("todo;");default:t.asserts.fail("todo;")}};n.astDump=function(i){var u=function(n){for(var t="",i=0;i<n;++i)t+=" ";return t},r=function(i,f){if(null===i)return f+"None";if(i.prototype&&void 0!==i.prototype._astname&&i.prototype._isenum)return f+i.prototype._astname+"()";if(void 0!==i._astname){for(var o=u(i._astname.length+1),c=[],e=0;e<i._fields.length;e+=2){var s=i._fields[e],h=i._fields[e+1](i),l=u(s.length+1);c.push([s,r(h,f+o+l)])}for(s=[],e=0;e<c.length;++e)h=c[e],s.push(h[0]+"="+h[1].replace(/^\s+/,""));return e=s.join(",\n"+f+o),f+i._astname+"("+e+")"}if(t.isArrayLike(i)){for(o=[],e=0;e<i.length;++e)o.push(r(i[e],f+" "));return e=o.join(",\n"),f+"["+e.replace(/^\s+/,"")+"]"}return e=!0===i?"True":!1===i?"False":i instanceof n.builtin.lng?i.tp$str().v:i instanceof n.builtin.str?i.$r().v:""+i,f+e};return r(i,"")};t.exportSymbol("Sk.astFromParse",n.astFromParse);t.exportSymbol("Sk.astDump",n.astDump);var ff=1,vt=2,ut=4,se=8,sc=512,he=1024,ef=vt|ut|he,ur=11,of=7,ce=1,ru=2,sf=3,uu=4,le=5,ho="module",ft="function",hf="class";g.prototype.get_name=function(){return this.__name};g.prototype.is_referenced=function(){return!!(this.__flags&se)};g.prototype.is_parameter=function(){return!!(this.__flags&ut)};g.prototype.is_global=function(){return this.__scope===sf||this.__scope==ru};g.prototype.is_declared_global=function(){return this.__scope==ru};g.prototype.is_local=function(){return!!(this.__flags&ef)};g.prototype.is_free=function(){return this.__scope==uu};g.prototype.is_imported=function(){return!!(this.__flags&he)};g.prototype.is_assigned=function(){return!!(this.__flags&vt)};g.prototype.is_namespace=function(){return this.__namespaces&&0<this.__namespaces.length};g.prototype.get_namespaces=function(){return this.__namespaces};co=0;w.prototype.get_type=function(){return this.blockType};w.prototype.get_name=function(){return this.name};w.prototype.get_lineno=function(){return this.lineno};w.prototype.is_nested=function(){return this.isNested};w.prototype.has_children=function(){return 0<this.children.length};w.prototype.get_identifiers=function(){return this._identsMatching(function(){return!0})};w.prototype.lookup=function(n){if(this.symbols.hasOwnProperty(n))n=this.symbols[n];else{var t=this.symFlags[n],i=this.__check_children(n);n=this.symbols[n]=new g(n,t,i)}return n};w.prototype.__check_children=function(n){for(var r,i=[],t=0;t<this.children.length;++t)r=this.children[t],r.name===n&&i.push(r);return i};w.prototype._identsMatching=function(n){var t=[];for(var i in this.symFlags)this.symFlags.hasOwnProperty(i)&&n(this.symFlags[i])&&t.push(i);return t.sort(),t};w.prototype.get_parameters=function(){return t.asserts.assert("function"==this.get_type(),"get_parameters only valid for function scopes"),this._funcParams||(this._funcParams=this._identsMatching(function(n){return n&ut})),this._funcParams};w.prototype.get_locals=function(){return t.asserts.assert("function"==this.get_type(),"get_locals only valid for function scopes"),this._funcLocals||(this._funcLocals=this._identsMatching(function(n){return n&ef})),this._funcLocals};w.prototype.get_globals=function(){return t.asserts.assert("function"==this.get_type(),"get_globals only valid for function scopes"),this._funcGlobals||(this._funcGlobals=this._identsMatching(function(n){return n=n>>ur&of,n==sf||n==ru})),this._funcGlobals};w.prototype.get_frees=function(){return t.asserts.assert("function"==this.get_type(),"get_frees only valid for function scopes"),this._funcFrees||(this._funcFrees=this._identsMatching(function(n){return(n>>ur&of)==uu})),this._funcFrees};w.prototype.get_methods=function(){if(t.asserts.assert("class"==this.get_type(),"get_methods only valid for class scopes"),!this._classMethods){for(var n=[],i=0;i<this.children.length;++i)n.push(this.children[i].name);n.sort();this._classMethods=n}return this._classMethods};w.prototype.getScope=function(n){return n=this.symFlags[n],void 0===n?0:n>>ur&of};v.prototype.getStsForAst=function(n){return t.asserts.assert(void 0!==n.scopeId,"ast wasn't added to st?"),n=this.stss[n.scopeId],t.asserts.assert(void 0!==n,"unknown sym tab entry"),n};v.prototype.SEQStmt=function(n){var u,i,r;for(t.asserts.assert(t.isArrayLike(n),"SEQ: nodes isn't array? got %s",n),u=n.length,i=0;i<u;++i)r=n[i],r&&this.visitStmt(r)};v.prototype.SEQExpr=function(n){var u,i,r;for(t.asserts.assert(t.isArrayLike(n),"SEQ: nodes isn't array? got %s",n),u=n.length,i=0;i<u;++i)r=n[i],r&&this.visitExpr(r)};v.prototype.enterBlock=function(n,t,i,r){n=fr(n);var u=null;this.cur&&(u=this.cur,this.stack.push(this.cur));this.cur=new w(this,n,t,i,r);"top"===n&&(this.global=this.cur.symFlags);u&&u.children.push(this.cur)};v.prototype.exitBlock=function(){this.cur=null;0<this.stack.length&&(this.cur=this.stack.pop())};v.prototype.visitParams=function(i,r){for(var u,f=0;f<i.length;++f)if(u=i[f],u.constructor===k)t.asserts.assert(u.ctx===ct||u.ctx===c&&!r),this.addDef(u.id,ut,u.lineno);else throw new n.builtin.SyntaxError("invalid expression in parameter list",this.filename);};v.prototype.visitArguments=function(n,t){n.args&&this.visitParams(n.args,!0);n.vararg&&(this.addDef(n.vararg,ut,t),this.cur.varargs=!0);n.kwarg&&(this.addDef(n.kwarg,ut,t),this.cur.varkeywords=!0)};v.prototype.newTmpname=function(t){this.addDef(new n.builtin.str("_["+ ++this.tmpname+"]"),vt,t)};v.prototype.addDef=function(t,i,r){var f=fu(this.curClass,new n.builtin.str(t)).v,f=fr(f),u=this.cur.symFlags[f];if(void 0!==u){if(i&ut&&u&ut)throw new n.builtin.SyntaxError("duplicate argument '"+t.v+"' in function definition",this.filename,r);u|=i}else u=i;this.cur.symFlags[f]=u;i&ut?this.cur.varnames.push(f):i&ff&&(u=i,t=this.global[f],void 0!==t&&(u|=t),this.global[f]=u)};v.prototype.visitSlice=function(n){switch(n.constructor){case nr:n.lower&&this.visitExpr(n.lower);n.upper&&this.visitExpr(n.upper);n.step&&this.visitExpr(n.step);break;case dr:for(var t=0;t<n.dims.length;++t)this.visitSlice(n.dims[t]);break;case ti:this.visitExpr(n.value)}};v.prototype.visitStmt=function(i){var u,f;t.asserts.assert(void 0!==i,"visitStmt called with undefined");switch(i.constructor){case li:this.addDef(i.name,vt,i.lineno);i.args.defaults&&this.SEQExpr(i.args.defaults);i.decorator_list&&this.SEQExpr(i.decorator_list);this.enterBlock(i.name.v,ft,i,i.lineno);this.visitArguments(i.args,i.lineno);this.SEQStmt(i.body);this.exitBlock();break;case wt:this.addDef(i.name,vt,i.lineno);this.SEQExpr(i.bases);i.decorator_list&&this.SEQExpr(i.decorator_list);this.enterBlock(i.name.v,hf,i,i.lineno);u=this.curClass;this.curClass=i.name;this.SEQStmt(i.body);this.curCalss=u;this.exitBlock();break;case ai:if(i.value&&(this.visitExpr(i.value),this.cur.returnsValue=!0,this.cur.generator))throw new n.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case sr:this.SEQExpr(i.targets);break;case hr:this.SEQExpr(i.targets);this.visitExpr(i.value);break;case vi:this.visitExpr(i.target);this.visitExpr(i.value);break;case yi:i.dest&&this.visitExpr(i.dest);this.SEQExpr(i.values);break;case cr:this.visitExpr(i.target);this.visitExpr(i.iter);this.SEQStmt(i.body);i.orelse&&this.SEQStmt(i.orelse);break;case pi:this.visitExpr(i.test);this.SEQStmt(i.body);i.orelse&&this.SEQStmt(i.orelse);break;case ot:this.visitExpr(i.test);this.SEQStmt(i.body);i.orelse&&this.SEQStmt(i.orelse);break;case bt:i.type&&(this.visitExpr(i.type),i.inst&&(this.visitExpr(i.inst),i.tback&&this.visitExpr(i.tback)));break;case lr:this.SEQStmt(i.body);this.SEQStmt(i.orelse);this.visitExcepthandlers(i.handlers);break;case ar:this.SEQStmt(i.body);this.SEQStmt(i.finalbody);break;case wi:this.visitExpr(i.test);i.msg&&this.visitExpr(i.msg);break;case vr:case yr:this.visitAlias(i.names,i.lineno);break;case tf:this.visitExpr(i.body);i.globals&&(this.visitExpr(i.globals),i.locals&&this.visitExpr(i.locals));break;case pr:for(u=i.names.length,f=0;f<u;++f){var r=fu(this.curClass,i.names[f]).v,r=fr(r),e=this.cur.symFlags[r];if(e&(vt|se)){if(e&vt)throw new n.builtin.SyntaxError("name '"+r+"' is assigned to before global declaration",this.filename,i.lineno);throw new n.builtin.SyntaxError("name '"+r+"' is used prior to global declaration",this.filename,i.lineno);}this.addDef(new n.builtin.str(r),ff,i.lineno)}break;case bi:this.visitExpr(i.value);break;case wr:case br:case kr:break;case nf:this.newTmpname(i.lineno);this.visitExpr(i.context_expr);i.optional_vars&&(this.newTmpname(i.lineno),this.visitExpr(i.optional_vars));this.SEQStmt(i.body);break;default:t.asserts.fail("Unhandled type "+i.constructor.name+" in visitStmt")}};v.prototype.visitExpr=function(i){t.asserts.assert(void 0!==i,"visitExpr called with undefined");switch(i.constructor){case kt:this.SEQExpr(i.values);break;case dt:this.visitExpr(i.left);this.visitExpr(i.right);break;case lt:this.visitExpr(i.operand);break;case gt:this.addDef(new n.builtin.str("lambda"),vt,i.lineno);i.args.defaults&&this.SEQExpr(i.args.defaults);this.enterBlock("lambda",ft,i,i.lineno);this.visitArguments(i.args,i.lineno);this.visitExpr(i.body);this.exitBlock();break;case ki:this.visitExpr(i.test);this.visitExpr(i.body);this.visitExpr(i.orelse);break;case di:this.SEQExpr(i.keys);this.SEQExpr(i.values);break;case ui:this.newTmpname(i.lineno);this.visitExpr(i.elt);this.visitComprehension(i.generators,0);break;case fi:this.visitGenexp(i);break;case ei:if(i.value&&this.visitExpr(i.value),this.cur.generator=!0,this.cur.returnsValue)throw new n.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case gi:this.visitExpr(i.left);this.SEQExpr(i.comparators);break;case ni:this.visitExpr(i.func);this.SEQExpr(i.args);for(var r=0;r<i.keywords.length;++r)this.visitExpr(i.keywords[r].value);i.starargs&&this.visitExpr(i.starargs);i.kwargs&&this.visitExpr(i.kwargs);break;case oi:case si:break;case st:this.visitExpr(i.value);break;case it:this.visitExpr(i.value);this.visitSlice(i.slice);break;case k:this.addDef(i.id,i.ctx===l?se:vt,i.lineno);break;case hi:case rt:this.SEQExpr(i.elts);break;default:t.asserts.fail("Unhandled type "+i.constructor.name+" in visitExpr")}};v.prototype.visitComprehension=function(n,t){for(var r,u=n.length,i=t;i<u;++i)r=n[i],this.visitExpr(r.target),this.visitExpr(r.iter),this.SEQExpr(r.ifs)};v.prototype.visitAlias=function(t,i){for(var u=0;u<t.length;++u){var r=t[u],f=r=null===r.asname?r.name.v:r.asname.v,e=r.indexOf(".");if(-1!==e&&(f=r.substr(0,e)),"*"!==r)this.addDef(new n.builtin.str(f),he,i);else if(this.cur.blockType!==ho)throw new n.builtin.SyntaxError("import * only allowed at module level",this.filename);}};v.prototype.visitGenexp=function(t){var i=t.generators[0];this.visitExpr(i.iter);this.enterBlock("genexpr",ft,t,t.lineno);this.cur.generator=!0;this.addDef(new n.builtin.str(".0"),ut,t.lineno);this.visitExpr(i.target);this.SEQExpr(i.ifs);this.visitComprehension(t.generators,1);this.visitExpr(t.elt);this.exitBlock()};v.prototype.visitExcepthandlers=function(n){for(var i=0,t;t=n[i];++i)t.type&&this.visitExpr(t.type),t.name&&this.visitExpr(t.name),this.SEQStmt(t.body)};v.prototype.analyzeBlock=function(n,t,i,r){var e={},h={},c={},o={},f={},u,s;n.blockType==hf&&(et(c,r),t&&et(o,t));for(u in n.symFlags)this.analyzeName(n,h,u,n.symFlags[u],t,e,i,r);for(n.blockType!==hf&&(n.blockType===ft&&et(o,e),t&&et(o,t),et(c,r)),r={},e=n.children.length,u=0;u<e;++u)s=n.children[u],this.analyzeChildBlock(s,o,f,c,r),(s.hasFree||s.childHasFree)&&(n.childHasFree=!0);et(f,r);n.blockType===ft&&this.analyzeCells(h,f);this.updateSymbols(n.symFlags,h,t,f,n.blockType===hf);et(i,f)};v.prototype.analyzeChildBlock=function(n,t,i,r,u){var f={};et(f,t);t={};et(t,i);i={};et(i,r);this.analyzeBlock(n,f,t,i);et(u,t)};v.prototype.analyzeCells=function(n,t){for(var i in n)n[i]===ce&&void 0!==t[i]&&(n[i]=le,delete t[i])};v.prototype.updateSymbols=function(n,t,i,r,u){var f,e;for(f in n)e=n[f],e=e|t[f]<<ur,n[f]=e;t=uu<<ur;for(f in r)r=n[f],void 0!==r?u&&r&(ef|ff)&&(n[f]=r|sc):void 0!==i[f]&&(n[f]=t)};v.prototype.analyzeName=function(t,i,r,u,f,e,o,s){if(u&ff){if(u&ut)throw new n.builtin.SyntaxError("name '"+r+"' is local and global",this.filename,t.lineno);i[r]=ru;s[r]=null;f&&void 0!==f[r]&&delete f[r]}else u&ef?(i[r]=ce,e[r]=null,delete s[r]):f&&void 0!==f[r]?(i[r]=uu,t.hasFree=!0,o[r]=null):(s&&void 0!==s[r]||!t.isNested||(t.hasFree=!0),i[r]=sf)};v.prototype.analyze=function(){this.analyzeBlock(this.top,null,{},{})};n.symboltable=function(n,t){var i=new v(t),r;for(i.enterBlock("top",ho,n,0),i.top=i.cur,r=0;r<n.body.length;++r)i.visitStmt(n.body[r]);return i.exitBlock(),i.analyze(),i};n.dumpSymtab=function(t){var i=function(n){return n?"True":"False"},r=function(t){for(var r=[],i=0;i<t.length;++i)r.push(new n.builtin.str(t[i]).$r().v);return"["+r.join(", ")+"]"},u=function(n,t){var f,e,l,h,o;void 0===t&&(t="");f=""+(t+"Sym_type: "+n.get_type()+"\n");f+=t+"Sym_name: "+n.get_name()+"\n";f+=t+"Sym_lineno: "+n.get_lineno()+"\n";f+=t+"Sym_nested: "+i(n.is_nested())+"\n";f+=t+"Sym_haschildren: "+i(n.has_children())+"\n";"class"===n.get_type()?f+=t+"Class_methods: "+r(n.get_methods())+"\n":"function"===n.get_type()&&(f+=t+"Func_params: "+r(n.get_parameters())+"\n",f+=t+"Func_locals: "+r(n.get_locals())+"\n",f+=t+"Func_globals: "+r(n.get_globals())+"\n",f+=t+"Func_frees: "+r(n.get_frees())+"\n");f+=t+"-- Identifiers --\n";for(var c=n.get_identifiers(),a=c.length,s=0;s<a;++s){for(e=n.lookup(c[s]),f+=t+"name: "+e.get_name()+"\n",f+=t+"  is_referenced: "+i(e.is_referenced())+"\n",f+=t+"  is_imported: "+i(e.is_imported())+"\n",f+=t+"  is_parameter: "+i(e.is_parameter())+"\n",f+=t+"  is_global: "+i(e.is_global())+"\n",f+=t+"  is_declared_global: "+i(e.is_declared_global())+"\n",f+=t+"  is_local: "+i(e.is_local())+"\n",f+=t+"  is_free: "+i(e.is_free())+"\n",f+=t+"  is_assigned: "+i(e.is_assigned())+"\n",f+=t+"  is_namespace: "+i(e.is_namespace())+"\n",e=e.get_namespaces(),l=e.length,f+=t+"  namespaces: [\n",h=[],o=0;o<l;++o)h.push(u(e[o],t+"    "));f+=h.join("\n");f+=t+"  ]\n"}return f};return u(t.top,"")};t.exportSymbol("Sk.symboltable",n.symboltable);t.exportSymbol("Sk.dumpSymtab",n.dumpSymtab);n.gensymcount=0;lo.prototype.activateScope=function(){var n=this;s=function(){for(var i=n.blocks[n.curblock],t=0;t<arguments.length;++t)i.push(arguments[t])}};f.prototype.getSourceLine=function(n){return t.asserts.assert(this.source),this.source[n-1]};f.prototype.annotateSource=function(n){var t,i;if(this.source){for(t=n.lineno,n=n.col_offset,s("\n//\n// line ",t,":\n// ",this.getSourceLine(t),"\n// "),i=0;i<n;++i)s(" ");s("^\n//\n");s("\nSk.currLineNo = ",t,";\nSk.currColNo = ",n,"\n\n");s("\nSk.currFilename = '",this.filename,"';\n\n")}};f.prototype.gensym=function(t){return t="$"+(t||""),t+n.gensymcount++};f.prototype.niceName=function(n){return this.gensym(n.replace("<","").replace(">","").replace(" ","_"))};ao={abstract:!0,as:!0,boolean:!0,"break":!0,byte:!0,"case":!0,"catch":!0,char:!0,"class":!0,"continue":!0,"const":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,double:!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,final:!0,"finally":!0,float:!0,"for":!0,"function":!0,goto:!0,"if":!0,implements:!0,"import":!0,"in":!0,"instanceof":!0,int:!0,interface:!0,is:!0,long:!0,namespace:!0,"native":!0,"new":!0,"null":!0,package:!0,private:!0,protected:!0,public:!0,"return":!0,short:!0,static:!0,"super":!1,"switch":!0,synchronized:!0,"this":!0,"throw":!0,throws:!0,transient:!0,"true":!0,"try":!0,"typeof":!0,use:!0,"var":!0,"void":!0,volatile:!0,"while":!0,"with":!0};vo={__defineGetter__:!0,__defineSetter__:!0,apply:!0,call:!0,eval:!0,hasOwnProperty:!0,isPrototypeOf:!0,__lookupGetter__:!0,__lookupSetter__:!0,__noSuchMethod__:!0,propertyIsEnumerable:!0,toSource:!0,toLocaleString:!0,toString:!0,unwatch:!0,valueOf:!0,watch:!0,length:!0};f.prototype._gr=function(n){var i=this.gensym(n),t;for(s("var ",i,"="),t=1;t<arguments.length;++t)s(arguments[t]);return s(";"),i};f.prototype._interruptTest=function(){s("if (Sk.execStart === undefined) {Sk.execStart=new Date()}");s("if (Sk.execLimit != null && new Date() - Sk.execStart > Sk.execLimit) {throw new Sk.builtin.TimeLimitError(Sk.timeoutMsg())}")};f.prototype._jumpfalse=function(n,t){var i=this._gr("jfalse","(",n,"===false||!Sk.misceval.isTrue(",n,"))");this._interruptTest();s("if(",i,"){/*test failed */$blk=",t,";continue;}")};f.prototype._jumpundef=function(n,t){this._interruptTest();s("if(",n,"===undefined){$blk=",t,";continue;}")};f.prototype._jumptrue=function(n,t){var i=this._gr("jtrue","(",n,"===true||Sk.misceval.isTrue(",n,"))");this._interruptTest();s("if(",i,"){/*test passed */$blk=",t,";continue;}")};f.prototype._jump=function(n){this._interruptTest();s("$blk=",n,";/* jump */continue;")};f.prototype.ctupleorlist=function(n,i,r){if(t.asserts.assert("tuple"===r||"list"===r),n.ctx===c)for(var u=0;u<n.elts.length;++u)this.vexpr(n.elts[u],"Sk.abstr.objectGetItem("+i+","+u+")");else if(n.ctx===l){for(i=[],u=0;u<n.elts.length;++u)i.push(this._gr("elem",this.vexpr(n.elts[u])));return this._gr("load"+r,"new Sk.builtins['",r,"']([",i,"])")}};f.prototype.cdict=function(n){var r,i,u;for(t.asserts.assert(n.values.length===n.keys.length),r=[],i=0;i<n.values.length;++i)u=this.vexpr(n.values[i]),r.push(this.vexpr(n.keys[i])),r.push(u);return this._gr("loaddict","new Sk.builtins['dict']([",r,"])")};f.prototype.clistcompgen=function(n,t,i,r){var f=this.newBlock("list gen start"),h=this.newBlock("list gen skip"),c=this.newBlock("list gen anchor"),e=t[i],u=this.vexpr(e.iter),u=this._gr("iter","Sk.abstr.iter(",u,")"),o,l;for(this._jump(f),this.setBlock(f),u=this._gr("next","Sk.abstr.iternext(",u,")"),this._jumpundef(u,c),this.vexpr(e.target,u),u=e.ifs.length,o=0;o<u;++o)l=this.vexpr(e.ifs[o]),this._jumpfalse(l,f);return++i<t.length&&this.clistcompgen(n,t,i,r),i>=t.length&&(t=this.vexpr(r),s(n,".v.push(",t,");"),this._jump(h),this.setBlock(h)),this._jump(f),this.setBlock(c),n};f.prototype.clistcomp=function(n){t.asserts.assert(n instanceof ui);var i=this._gr("_compr","new Sk.builtins['list']([])");return this.clistcompgen(i,n.generators,0,n.elt)};f.prototype.cyield=function(n){if(this.u.ste.blockType!==ft)throw new SyntaxError("'yield' outside function");var t="null";return n.value&&(t=this.vexpr(n.value)),n=this.newBlock("after yield"),s("return [/*resume*/",n,",/*ret*/",t,"];"),this.setBlock(n),"$gen.gi$sentvalue"};f.prototype.ccompare=function(n){var f,i;t.asserts.assert(n.ops.length===n.comparators.length);for(var i=this.vexpr(n.left),o=n.ops.length,u=this.newBlock("done"),e=this._gr("compareres","null"),r=0;r<o;++r)f=this.vexpr(n.comparators[r]),i=this._gr("compare","Sk.builtin.bool(Sk.misceval.richCompareBool(",i,",",f,",'",n.ops[r].prototype._astname,"'))"),s(e,"=",i,";"),this._jumpfalse(i,u),i=f;return this._jump(u),this.setBlock(u),e};f.prototype.ccall=function(n){var f=this.vexpr(n.func),r=this.vseqexpr(n.args),t,i,u;if(0<n.keywords.length||n.starargs||n.kwargs){for(i=[],t=0;t<n.keywords.length;++t)i.push("'"+n.keywords[t].arg.v+"'"),i.push(this.vexpr(n.keywords[t].value));return i="["+i.join(",")+"]",u=t="undefined",n.starargs&&(t=this.vexpr(n.starargs)),n.kwargs&&(u=this.vexpr(n.kwargs)),this._gr("call","Sk.misceval.call(",f,",",u,",",t,",",i,0<r.length?",":"",r,")")}return this._gr("call","Sk.misceval.callsim(",f,0<r.length?",":"",r,")")};f.prototype.cslice=function(n){t.asserts.assert(n instanceof nr);var i=n.lower?this.vexpr(n.lower):n.step?"Sk.builtin.none.none$":"new Sk.builtin.nmber(0)",r=n.upper?this.vexpr(n.upper):n.step?"Sk.builtin.none.none$":"new Sk.builtin.nmber(2147483647)";return n=n.step?this.vexpr(n.step):"Sk.builtin.none.none$",this._gr("slice","new Sk.builtins['slice'](",i,",",r,",",n,")")};f.prototype.eslice=function(n){t.asserts.assert(n instanceof Array);for(var r=[],i=0;i<n.length;i++)r.push(this.vslicesub(n[i]));return this._gr("extslice","new Sk.builtins['tuple']([",r,"])")};f.prototype.vslicesub=function(n){var i;switch(n.constructor){case Number:case String:i=n;break;case ti:i=this.vexpr(n.value);break;case nr:i=this.cslice(n);break;case rf:t.asserts.fail("todo compile.js Ellipsis;");break;case dr:i=this.eslice(n.dims);break;default:t.asserts.fail("invalid subscript kind")}return i};f.prototype.vslice=function(n,t,i,r){return n=this.vslicesub(n),this.chandlesubscr(t,i,n,r)};f.prototype.chandlesubscr=function(n,i,r,u){if(n===l||n===pt)return this._gr("lsubscr","Sk.abstr.objectGetItem(",i,",",r,")");n===c||n===tt?s("Sk.abstr.objectSetItem(",i,",",r,",",u,");"):n===nt?s("Sk.abstr.objectDelItem(",i,",",r,");"):t.asserts.fail("handlesubscr fail")};f.prototype.cboolop=function(n){var e,r,o,f,i,u;for(t.asserts.assert(n instanceof kt),e=n.op===su?this._jumpfalse:this._jumptrue,r=this.newBlock("end of boolop"),n=n.values,o=n.length,i=0;i<o;++i)u=this.vexpr(n[i]),0===i&&(f=this._gr("boolopsucc",u)),s(f,"=",u,";"),e.call(this,u,r);return this._jump(r),this.setBlock(r),f};f.prototype.vexpr=function(i,r,u){var e;i.lineno>this.u.lineno&&(this.u.lineno=i.lineno,this.u.linenoSet=!1);switch(i.constructor){case kt:return this.cboolop(i);case dt:return this._gr("binop","Sk.abstr.numberBinOp(",this.vexpr(i.left),",",this.vexpr(i.right),",'",i.op.prototype._astname,"')");case lt:return this._gr("unaryop","Sk.abstr.numberUnaryOp(",this.vexpr(i.operand),",'",i.op.prototype._astname,"')");case gt:return this.clambda(i);case ki:return this.cifexp(i);case di:return this.cdict(i);case ui:return this.clistcomp(i);case fi:return this.cgenexp(i);case ei:return this.cyield(i);case gi:return this.ccompare(i);case ni:return r=this.ccall(i),this.annotateSource(i),r;case oi:if("number"==typeof i.n)return i.n;if(i.n instanceof n.builtin.nmber)return"new Sk.builtin.nmber("+i.n.v+",'"+i.n.skType+"')";if(i.n instanceof n.builtin.lng)return"Sk.longFromStr('"+i.n.tp$str().v+"')";t.asserts.fail("unhandled Num type");case si:return this._gr("str","new Sk.builtins['str'](",i.s.$r().v,")");case st:i.ctx!==tt&&(e=this.vexpr(i.value));var f=i.attr.$r().v,f=f.substring(1,f.length-1),f=fu(this.u.private_,new n.builtin.str(f)).v,f=ae(f),f=fr(f);switch(i.ctx){case pt:case l:return this._gr("lattr","Sk.abstr.gattr(",e,",'",f,"')");case tt:s("if(",r,"!==undefined){");e=this.vexpr(u||null);s("Sk.abstr.sattr(",e,",'",f,"',",r,");");s("}");break;case c:s("Sk.abstr.sattr(",e,",'",f,"',",r,");");break;case nt:t.asserts.fail("todo Del;");break;default:t.asserts.fail("invalid attribute expression")}break;case it:switch(i.ctx){case pt:case l:case c:case nt:return this.vslice(i.slice,i.ctx,this.vexpr(i.value),r);case tt:s("if(",r,"!==undefined){");e=this.vexpr(u||null);this.vslice(i.slice,i.ctx,e,r);s("}");break;default:t.asserts.fail("invalid subscript expression")}break;case k:return this.nameop(i.id,i.ctx,r);case hi:return this.ctupleorlist(i,r,"list");case rt:return this.ctupleorlist(i,r,"tuple");default:t.asserts.fail("unhandled case in vexpr")}};f.prototype.vseqexpr=function(n,i){t.asserts.assert(void 0===i||n.length===i.length);for(var u=[],r=0;r<n.length;++r)u.push(this.vexpr(n[r],void 0===i?void 0:i[r]));return u};f.prototype.caugassign=function(n){var i;t.asserts.assert(n instanceof vi);i=n.target;switch(i.constructor){case st:var r=new st(i.value,i.attr,pt,i.lineno,i.col_offset),f=this.vexpr(r),u=this.vexpr(n.value);return n=this._gr("inplbinopattr","Sk.abstr.numberInplaceBinOp(",f,",",u,",'",n.op.prototype._astname,"')"),r.ctx=tt,this.vexpr(r,n,i.value);case it:return r=this.vslicesub(i.slice),r=new it(i.value,r,pt,i.lineno,i.col_offset),f=this.vexpr(r),u=this.vexpr(n.value),n=this._gr("inplbinopsubscr","Sk.abstr.numberInplaceBinOp(",f,",",u,",'",n.op.prototype._astname,"')"),r.ctx=tt,this.vexpr(r,n,i.value);case k:return r=this.nameop(i.id,l),u=this.vexpr(n.value),n=this._gr("inplbinop","Sk.abstr.numberInplaceBinOp(",r,",",u,",'",n.op.prototype._astname,"')"),this.nameop(i.id,c,n);default:t.asserts.fail("unhandled case in augassign")}};f.prototype.exprConstant=function(t){switch(t.constructor){case oi:return n.misceval.isTrue(t.n);case si:return n.misceval.isTrue(t.s);default:return-1}};f.prototype.newBlock=function(n){var t=this.u.blocknum++;return this.u.blocks[t]=[],this.u.blocks[t]._name=n||"<unnamed>",t};f.prototype.setBlock=function(n){t.asserts.assert(0<=n&&n<this.u.blocknum);this.u.curblock=n};f.prototype.pushBreakBlock=function(n){t.asserts.assert(0<=n&&n<this.u.blocknum);this.u.breakBlocks.push(n)};f.prototype.popBreakBlock=function(){this.u.breakBlocks.pop()};f.prototype.pushContinueBlock=function(n){t.asserts.assert(0<=n&&n<this.u.blocknum);this.u.continueBlocks.push(n)};f.prototype.popContinueBlock=function(){this.u.continueBlocks.pop()};f.prototype.pushExceptBlock=function(n){t.asserts.assert(0<=n&&n<this.u.blocknum);this.u.exceptBlocks.push(n)};f.prototype.popExceptBlock=function(){this.u.exceptBlocks.pop()};f.prototype.pushFinallyBlock=function(n){t.asserts.assert(0<=n&&n<this.u.blocknum);this.u.finallyBlocks.push(n)};f.prototype.popFinallyBlock=function(){this.u.finallyBlocks.pop()};f.prototype.setupExcept=function(n){s("$exc.push(",n,");")};f.prototype.endExcept=function(){s("$exc.pop();")};f.prototype.outputLocals=function(n){for(var r,u,i={},t=0;n.argnames&&t<n.argnames.length;++t)i[n.argnames[t]]=!0;for(n.localnames.sort(),r=[],t=0;t<n.localnames.length;++t)u=n.localnames[t],void 0===i[u]&&(r.push(u),i[u]=!0);return 0<r.length?"var "+r.join(",")+"; /* locals */":""};f.prototype.outputAllUnits=function(){for(var n="",r=0;r<this.allUnits.length;++r){for(var t=this.allUnits[r],n=n+t.prefixCode,n=n+this.outputLocals(t),n=n+t.varDeclsCode,n=n+t.switchCode,u=t.blocks,i=0;i<u.length;++i)n+="case "+i+": /* --- "+u[i]._name+" --- */",n+=u[i].join(""),n+="throw new Sk.builtin.SystemError('internal error: unterminated block');";n+=t.suffixCode}return n};f.prototype.cif=function(n){var i;if(t.asserts.assert(n instanceof ot),i=this.exprConstant(n.test),0===i)n.orelse&&this.vseqstmt(n.orelse);else if(1===i)this.vseqstmt(n.body);else{var r=this.newBlock("end of if"),i=this.newBlock("next branch of if"),u=this.vexpr(n.test);this._jumpfalse(u,i);this.vseqstmt(n.body);this._jump(r);this.setBlock(i);n.orelse&&this.vseqstmt(n.orelse);this._jump(r)}this.setBlock(r)};f.prototype.cwhile=function(n){var t;if(0===this.exprConstant(n.test))n.orelse&&this.vseqstmt(n.orelse);else{t=this.newBlock("while test");this._jump(t);this.setBlock(t);var i=this.newBlock("after while"),r=0<n.orelse.length?this.newBlock("while orelse"):null,u=this.newBlock("while body");this._jumpfalse(this.vexpr(n.test),r?r:i);this._jump(u);this.pushBreakBlock(i);this.pushContinueBlock(t);this.setBlock(u);this.vseqstmt(n.body);this._jump(t);this.popContinueBlock();this.popBreakBlock();0<n.orelse.length&&(this.setBlock(r),this.vseqstmt(n.orelse),this._jump(i));this.setBlock(i)}};f.prototype.cfor=function(n){var i=this.newBlock("for start"),f=this.newBlock("for cleanup"),u=this.newBlock("for end"),t,r;this.pushBreakBlock(u);this.pushContinueBlock(i);t=this.vexpr(n.iter);this.u.ste.generator?(r="$loc."+this.gensym("iter"),s(r,"=Sk.abstr.iter(",t,");")):r=this._gr("iter","Sk.abstr.iter(",t,")");this._jump(i);this.setBlock(i);t=this._gr("next","Sk.abstr.iternext(",r,")");this._jumpundef(t,f);this.vexpr(n.target,t);this.vseqstmt(n.body);this._jump(i);this.setBlock(f);this.popContinueBlock();this.popBreakBlock();this.vseqstmt(n.orelse);this._jump(u);this.setBlock(u)};f.prototype.craise=function(n){if(n&&n.type&&n.type.id&&"StopIteration"===n.type.id.v)s("return undefined;");else{var t="";n.inst?(t=this.vexpr(n.inst),s("throw ",this.vexpr(n.type),"(",t,");")):n.type?n.type.func?s("throw ",this.vexpr(n.type),";"):s("throw ",this.vexpr(n.type),"('');"):s("throw $err;")}};f.prototype.ctryexcept=function(n){for(var i,r=n.handlers.length,u=[],t=0;t<r;++t)u.push(this.newBlock("except_"+t+"_"));var e=this.newBlock("unhandled"),o=this.newBlock("orelse"),f=this.newBlock("end");for(this.setupExcept(u[0]),this.vseqstmt(n.body),this.endExcept(),this._jump(o),t=0;t<r;++t){if(this.setBlock(u[t]),i=n.handlers[t],!i.type&&t<r-1)throw new SyntaxError("default 'except:' must be last");if(i.type){var h=this.vexpr(i.type),c=t==r-1?e:u[t+1],h=this._gr("instance","$err instanceof ",h);this._jumpfalse(h,c)}i.name&&this.vexpr(i.name,"$err");this.vseqstmt(i.body);this._jump(f)}this.setBlock(e);s("throw $err;");this.setBlock(o);this.vseqstmt(n.orelse);this._jump(f);this.setBlock(f)};f.prototype.ctryfinally=function(n){s("/*todo; tryfinally*/");this.ctryexcept(n.body[0])};f.prototype.cassert=function(n){var i=this.vexpr(n.test),t=this.newBlock("end");this._jumptrue(i,t);s("throw new Sk.builtin.AssertionError(",n.msg?this.vexpr(n.msg):"",");");this.setBlock(t)};f.prototype.cimportas=function(n,t,i){var r,u;if(n=n.v,r=n.indexOf("."),-1!==r)for(n=n.substr(r+1);-1!==r;)r=n.indexOf("."),u=-1!==r?n.substr(0,r):n,i=this._gr("lattr","Sk.abstr.gattr(",i,",'",u,"')"),n=n.substr(r+1);return this.nameop(t,c,i)};f.prototype.cimport=function(t){for(var u,i,f,e=t.names.length,r=0;r<e;++r)i=t.names[r],u=this._gr("module","Sk.builtin.__import__(",i.name.$r().v,",$gbl,$loc,[])"),i.asname?this.cimportas(i.name,i.asname,u):(i=i.name,f=i.v.indexOf("."),-1!==f&&(i=new n.builtin.str(i.v.substr(0,f))),this.nameop(i,c,u))};f.prototype.cfromimport=function(n){for(var r,o,e,f=n.names.length,u=[],i=0;i<f;++i)u[i]=n.names[i].name.$r().v;for(u=this._gr("module","Sk.builtin.__import__(",n.module.$r().v,",$gbl,$loc,[",u,"])"),i=0;i<f;++i){if(r=n.names[i],0===i&&"*"===r.name.v){t.asserts.assert(1===f);s("Sk.importStar(",u,",$loc, $gbl);");break}o=this._gr("item","Sk.abstr.gattr(",u,",",r.name.$r().v,")");e=r.name;r.asname&&(e=r.asname);this.nameop(e,c,o)}};f.prototype.buildcodeobj=function(n,t,i,r,u){var o=[],l=null,e=null,c,f,y,p;i&&this.vseqexpr(i);r&&r.defaults&&(o=this.vseqexpr(r.defaults));r&&r.vararg&&(l=r.vararg);r&&r.kwarg&&(e=r.kwarg);n=this.enterScope(t,n,n.lineno);i=this.u.ste.generator;var v=this.u.ste.hasFree,h=this.u.ste.childHasFree,a=this.newBlock("codeobj entry");if(this.u.prefixCode="var "+n+"=(function "+this.niceName(t.v)+"$(",c=[],i){if(e)throw new SyntaxError(t.v+"(): keyword arguments in generators not supported");if(l)throw new SyntaxError(t.v+"(): variable number of arguments in generators not supported");c.push("$gen")}else for(e&&c.push("$kwa"),f=0;r&&f<r.args.length;++f)c.push(this.nameop(r.args[f].id,ct));for(v&&c.push("$free"),this.u.prefixCode+=c.join(","),this.u.prefixCode+="){",i&&(this.u.prefixCode+="\n// generator\n"),v&&(this.u.prefixCode+="\n// has free\n"),h&&(this.u.prefixCode+="\n// has cell\n"),f="{}",i&&(a="$gen.gi$resumeat",f="$gen.gi$locals"),y="",h&&(y=",$cell={}"),this.u.varDeclsCode+="var $blk="+a+",$exc=[],$loc="+f+y+",$gbl=this,$err=undefined;",f=0;r&&f<r.args.length;++f)h=r.args[f].id,this.isCell(h)&&(this.u.varDeclsCode+="$cell."+h.v+"="+h.v+";");if(i||(this.u.varDeclsCode+='Sk.builtin.pyCheckArgs("'+t.v+'", arguments, '+(r?r.args.length-o.length:0)+", "+(l?Infinity:r?r.args.length:0)+", "+(e?!0:!1)+", "+v+");"),0<o.length)for(h=r.args.length-o.length,f=0;f<o.length;++f)a=this.nameop(r.args[f+h].id,ct),this.u.varDeclsCode+="if("+a+"===undefined)"+a+"="+n+".$defaults["+f+"];";if(l&&(this.u.varDeclsCode+=l.v+"=new Sk.builtins['tuple'](Array.prototype.slice.call(arguments,"+c.length+")); /*vararg*/"),e&&(this.u.varDeclsCode+=e.v+"=new Sk.builtins['dict']($kwa);"),this.u.switchCode="while(true){try{ switch($blk){",this.u.suffixCode="} }catch(err){if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} }});",u.call(this,n),r&&0<r.args.length){for(u=[],f=0;f<r.args.length;++f)u.push(r.args[f].id.v);p=u.join("', '");this.u.argnames=u}return this.exitScope(),0<o.length&&s(n,".$defaults=[",o.join(","),"];"),p&&s(n,".co_varnames=['",p,"'];"),e&&s(n,".co_kwargs=1;"),e="",v&&(e=",$cell",this.u.ste.hasFree&&(e+=",$free")),i?r&&0<r.args.length?this._gr("gener","new Sk.builtins['function']((function(){var $origargs=Array.prototype.slice.call(arguments);Sk.builtin.pyCheckArgs(\"",t.v,'",arguments,',r.args.length-o.length,",",r.args.length,");return new Sk.builtins['generator'](",n,",$gbl,$origargs",e,");}))"):this._gr("gener","new Sk.builtins['function']((function(){Sk.builtin.pyCheckArgs(\"",t.v,"\",arguments,0,0);return new Sk.builtins['generator'](",n,",$gbl,[]",e,");}))"):this._gr("funcobj","new Sk.builtins['function'](",n,",$gbl",e,")")};f.prototype.cfunction=function(n){t.asserts.assert(n instanceof li);var i=this.buildcodeobj(n,n.name,n.decorator_list,n.args,function(){this.vseqstmt(n.body);s("return Sk.builtin.none.none$;")});this.nameop(n.name,c,i)};f.prototype.clambda=function(i){return t.asserts.assert(i instanceof gt),this.buildcodeobj(i,new n.builtin.str("<lambda>"),null,i.args,function(n){n=this.vexpr(i.body);s("return ",n,";")})};f.prototype.cifexp=function(n){var r=this.newBlock("next of ifexp"),t=this.newBlock("end of ifexp"),i=this._gr("res","null"),u=this.vexpr(n.test);return this._jumpfalse(u,r),s(i,"=",this.vexpr(n.body),";"),this._jump(t),this.setBlock(r),s(i,"=",this.vexpr(n.orelse),";"),this._jump(t),this.setBlock(t),i};f.prototype.cgenexpgen=function(n,t,i){var e=this.newBlock("start for "+t),h=this.newBlock("skip for "+t),o,f,r,u,c;for(this.newBlock("if cleanup for "+t),o=this.newBlock("end for "+t),f=n[t],0===t?r="$loc.$iter0":(u=this.vexpr(f.iter),r="$loc."+this.gensym("iter"),s(r,"=","Sk.abstr.iter(",u,");")),this._jump(e),this.setBlock(e),r=this._gr("next","Sk.abstr.iternext(",r,")"),this._jumpundef(r,o),this.vexpr(f.target,r),r=f.ifs.length,u=0;u<r;++u)c=this.vexpr(f.ifs[u]),this._jumpfalse(c,e);++t<n.length&&this.cgenexpgen(n,t,i);t>=n.length&&(n=this.vexpr(i),s("return [",h,"/*resume*/,",n,"/*ret*/];"),this.setBlock(h));this._jump(e);this.setBlock(o);1===t&&s("return Sk.builtin.none.none$;")};f.prototype.cgenexp=function(t){var i=this.buildcodeobj(t,new n.builtin.str("<genexpr>"),null,null,function(){this.cgenexpgen(t.generators,0,t.elt)}),i=this._gr("gener","Sk.misceval.callsim(",i,");");return s(i,".gi$locals.$iter0=Sk.abstr.iter(",this.vexpr(t.generators[0].iter),");"),i};f.prototype.cclass=function(n){t.asserts.assert(n instanceof wt);var i=this.vseqexpr(n.bases),r=this.enterScope(n.name,n,n.lineno),u=this.newBlock("class entry");this.u.prefixCode="var "+r+"=(function $"+n.name.v+"$class_outer($globals,$locals,$rest){var $gbl=$globals,$loc=$locals;";this.u.switchCode+="return(function "+n.name.v+"(){";this.u.switchCode+="var $blk="+u+",$exc=[];while(true){switch($blk){";this.u.suffixCode="}break;}}).apply(null,$rest);});";this.u.private_=n.name;this.cbody(n.body);s("break;");this.exitScope();i=this._gr("built","Sk.misceval.buildClass($gbl,",r,",",n.name.$r().v,",[",i,"])");this.nameop(n.name,c,i)};f.prototype.ccontinue=function(){if(0===this.u.continueBlocks.length)throw new SyntaxError("'continue' outside loop");this._jump(this.u.continueBlocks[this.u.continueBlocks.length-1])};f.prototype.vstmt=function(n){this.u.lineno=n.lineno;this.u.linenoSet=!1;this.annotateSource(n);switch(n.constructor){case li:this.cfunction(n);break;case wt:this.cclass(n);break;case ai:if(this.u.ste.blockType!==ft)throw new SyntaxError("'return' outside function");n.value?s("return ",this.vexpr(n.value),";"):s("return Sk.builtin.none.none$;");break;case sr:this.vseqexpr(n.targets);break;case hr:for(var r=n.targets.length,u=this.vexpr(n.value),i=0;i<r;++i)this.vexpr(n.targets[i],u);break;case vi:return this.caugassign(n);case yi:this.cprint(n);break;case cr:return this.cfor(n);case pi:return this.cwhile(n);case ot:return this.cif(n);case bt:return this.craise(n);case lr:return this.ctryexcept(n);case ar:return this.ctryfinally(n);case wi:return this.cassert(n);case vr:return this.cimport(n);case yr:return this.cfromimport(n);case pr:break;case bi:this.vexpr(n.value);break;case wr:break;case br:if(0===this.u.breakBlocks.length)throw new SyntaxError("'break' outside loop");this._jump(this.u.breakBlocks[this.u.breakBlocks.length-1]);break;case kr:this.ccontinue(n);break;default:t.asserts.fail("unhandled case in vstmt")}};f.prototype.vseqstmt=function(n){for(var t=0;t<n.length;++t)this.vstmt(n[t])};var ve=0,ye=1,pe=2,we=3;f.prototype.isCell=function(n){return n=fu(this.u.private_,n).v,this.u.ste.getScope(n)===le?!0:!1};f.prototype.nameop=function(i,r,u){if((r===c||r===tt||r===nt)&&"__debug__"===i.v)throw new n.builtin.SyntaxError("can not assign to __debug__");if((r===c||r===tt||r===nt)&&"None"===i.v)throw new n.builtin.SyntaxError("can not assign to None");if("None"===i.v)return"Sk.builtin.none.none$";if("True"===i.v)return"Sk.builtin.bool.true$";if("False"===i.v)return"Sk.builtin.bool.false$";var f=fu(this.u.private_,i).v,f=fr(f),e=we,h=this.u.ste.getScope(f),o=null;switch(h){case uu:o="$free";e=pe;break;case le:o="$cell";e=pe;break;case ce:this.u.ste.blockType!==ft||this.u.ste.generator||(e=ve);break;case sf:this.u.ste.blockType===ft&&(e=ye);break;case ru:e=ye}f=ae(f);t.asserts.assert(h||"_"===i.v.charAt(1));i=f;this.u.ste.generator||this.u.ste.blockType!==ft?f="$loc."+f:e!==ve&&e!==we||this.u.localnames.push(f);switch(e){case ve:switch(r){case l:case ct:return s("if (",f," === undefined) { throw new Error('local variable \\'",f,"\\' referenced before assignment'); }\n"),f;case c:s(f,"=",u,";");break;case nt:s("delete ",f,";");break;default:t.asserts.fail("unhandled")}break;case we:switch(r){case l:return r=this.gensym("loadname"),s("var ",r,"=",f,"!==undefined?",f,":Sk.misceval.loadname('",i,"',$gbl);"),r;case c:s(f,"=",u,";");break;case nt:s("delete ",f,";");break;case ct:return f;default:t.asserts.fail("unhandled")}break;case ye:switch(r){case l:return this._gr("loadgbl","Sk.misceval.loadname('",i,"',$gbl)");case c:s("$gbl.",i,"=",u,";");break;case nt:s("delete $gbl.",i);break;default:t.asserts.fail("unhandled case in name op_global")}break;case pe:switch(r){case l:return o+"."+i;case c:s(o,".",i,"=",u,";");break;case ct:return i;default:t.asserts.fail("unhandled case in name op_deref")}break;default:t.asserts.fail("unhandled case")}};f.prototype.enterScope=function(n,t,i){var r=new lo;return r.ste=this.st.getStsForAst(t),r.name=n,r.firstlineno=i,this.u&&this.u.private_&&(r.private_=this.u.private_),this.stack.push(this.u),this.allUnits.push(r),n=this.gensym("scope"),r.scopename=n,this.u=r,this.u.activateScope(),this.nestlevel++,n};f.prototype.exitScope=function(){var t=this.u;if(this.nestlevel--,(this.u=0<=this.stack.length-1?this.stack.pop():null)&&this.u.activateScope(),"<module>"!==t.name.v){var n=t.name.$r().v,n=n.substring(1,n.length-1),n=ae(n),n=fr(n);s(t.scopename,".co_name=new Sk.builtins['str']('",n,"');")}};f.prototype.cbody=function(n){for(var t=0;t<n.length;++t)this.vstmt(n[t])};f.prototype.cprint=function(n){t.asserts.assert(n instanceof yi);n.dest&&this.vexpr(n.dest);for(var r=n.values.length,i=0;i<r;++i)s("Sk.misceval.print_(","new Sk.builtins['str'](",this.vexpr(n.values[i]),").v);");n.nl&&s("Sk.misceval.print_(",'"\\n");')};f.prototype.cmod=function(i){var r=this.enterScope(new n.builtin.str("<module>"),i,0),u=this.newBlock("module entry");this.u.prefixCode="var "+r+"=(function($modname){";this.u.varDeclsCode="var $gbl = {};if (Sk.retainGlobals) {    if (Sk.globals) { $gbl = Sk.globals; Sk.globals = $gbl }    else { Sk.globals = $gbl; }} else { Sk.globals = $gbl; }var $blk="+u+",$exc=[],$loc=$gbl,$err=undefined;$gbl.__name__=$modname;";this.u.switchCode="try { while(true){try{ switch($blk){";this.u.suffixCode="} }catch(err){if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} } }catch(err){ if (err instanceof Sk.builtin.SystemExit && !Sk.throwSystemExit) { Sk.misceval.print_(err.toString() + '\\n'); return $loc; } else { throw err; } } });";switch(i.constructor){case gu:this.cbody(i.body);s("return $loc;");break;default:t.asserts.fail("todo; unhandled case in compilerMod")}return this.exitScope(),this.result.push(this.outputAllUnits()),r};n.compile=function(t,i,r){r=n.parse(i,t);r=n.astFromParse(r,i);var u=n.symboltable(r,i);return t=new f(i,u,0,t),i=t.cmod(r),t=t.result.join(""),{funcname:i,code:t}};t.exportSymbol("Sk.compile",n.compile);n.resetCompiler=function(){n.gensymcount=0};t.exportSymbol("Sk.resetCompiler",n.resetCompiler);n.sysmodules=new n.builtin.dict([]);n.realsyspath=void 0;n.importSearchPathForName=function(t,i,r){for(var o,e=n.realsyspath.tp$iter(),u=e.tp$iternext();void 0!==u;u=e.tp$iternext())for(var f=t.replace(/\./g,"/"),u=[u.v+"/"+f+i,u.v+"/"+f+"/__init__"+i],f=0;f<u.length;++f){o=u[f];try{return n.read(o),o}catch(s){}}if(!r)throw new n.builtin.ImportError("No module named "+t);};n.doOneTimeInitialization=function(){n.builtin.type.basesStr_=new n.builtin.str("__bases__");n.builtin.type.mroStr_=new n.builtin.str("__mro__");n.builtin.object.$d=new n.builtin.dict([]);n.builtin.object.$d.mp$ass_subscript(n.builtin.type.basesStr_,new n.builtin.tuple([]));n.builtin.object.$d.mp$ass_subscript(n.builtin.type.mroStr_,new n.builtin.tuple([n.builtin.object]))};n.importSetUpPath=function(){if(!n.realsyspath){for(var i=[new n.builtin.str("src/builtin"),new n.builtin.str("src/lib"),new n.builtin.str(".")],t=0;t<n.syspath.length;++t)i.push(new n.builtin.str(n.syspath[t]));n.realsyspath=new n.builtin.list(i);n.doOneTimeInitialization()}};yt&&(yo=function(n){return n});n.importModuleInternal_=function(i,r,u,f){var s,e,h,o,c,l;n.importSetUpPath();void 0===u&&(u=i);s=null;e=u.split(".");try{return o=n.sysmodules.mp$subscript(u),1<e.length?n.sysmodules.mp$subscript(e[0]):o}catch(a){}if(1<e.length&&(h=e.slice(0,e.length-1).join("."),s=n.importModuleInternal_(h,r)),o=new n.builtin.module,n.sysmodules.mp$ass_subscript(i,o),f?i=n.compile(f,i+".py","exec"):(f=n.importSearchPathForName(i,".js",!0))?i={funcname:"$builtinmodule",code:n.read(f)}:(i=n.importSearchPathForName(i,".py"),i=n.compile(n.read(i),i,"exec")),f=o.$js=i.code,null!=n.dateSet&&n.dateSet||(f="Sk.execStart = new Date();\n"+i.code,n.dateSet=!0),r){for(r=yo(i.code).split("\n"),f=1;f<=r.length;++f){for(c="",l=(""+f).length;5>l;++l)c+=" ";r[f-1]="/* "+c+f+" */ "+r[f-1]}f=r.join("\n");n.debugout(f)}return f+="\n"+i.funcname+"("+("new Sk.builtin.str('"+u+"')")+");",r=t.global.eval(f),r.__name__||(r.__name__=new n.builtin.str(u)),o.$d=r,s?(n.sysmodules.mp$subscript(h).tp$setattr(e[e.length-1],o),s):o};n.importModule=function(t,i){return n.importModuleInternal_(t,i)};n.importMain=function(t,i){return n.dateSet=!1,n.filesLoaded=!1,n.sysmodules=new n.builtin.dict([]),n.realsyspath=void 0,n.resetCompiler(),n.importModuleInternal_(t,i,"__main__")};n.importMainWithBody=function(t,i,r){return n.dateSet=!1,n.filesLoaded=!1,n.sysmodules=new n.builtin.dict([]),n.realsyspath=void 0,n.resetCompiler(),n.importModuleInternal_(t,i,"__main__",r)};n.builtin.__import__=function(i,r,u,f){return(r=n.globals,u=n.importModuleInternal_(i),r!==n.globals&&(n.globals=r),!f||0===f.length)?u:(u=n.sysmodules.mp$subscript(i),t.asserts.assert(u),u)};n.importStar=function(n,t,i){var u=i.__name__,r=Object.getOwnPropertyNames(n.$d);for(var f in r)t[r[f]]=n.$d[r[f]];i.__name__!==u&&(i.__name__=u)};t.exportSymbol("Sk.importMain",n.importMain);t.exportSymbol("Sk.importMainWithBody",n.importMainWithBody);t.exportSymbol("Sk.builtin.__import__",n.builtin.__import__);t.exportSymbol("Sk.importStar",n.importStar);n.builtin.timSort=function(t,i){this.list=new n.builtin.list(t.v);this.MIN_GALLOP=7;this.listlength=i?i:t.sq$length()};n.builtin.timSort.prototype.lt=function(t,i){return n.misceval.richCompareBool(t,i,"Lt")};n.builtin.timSort.prototype.le=function(n,t){return!this.lt(t,n)};n.builtin.timSort.prototype.setitem=function(n,t){this.list.v[n]=t};n.builtin.timSort.prototype.binary_sort=function(n,i){for(var r,f=n.base+i;f<n.base+n.len;f++){for(var u=n.base,e=f,o=n.getitem(e);u<e;)r=u+(e-u>>1),this.lt(o,n.getitem(r))?e=r:u=r+1;for(t.asserts.assert(u===e),r=f;r>u;r--)n.setitem(r,n.getitem(r-1));n.setitem(u,o)}};n.builtin.timSort.prototype.count_run=function(t){var u,r,i;if(1>=t.len)r=t.len,u=!1;else if(r=2,this.lt(t.getitem(t.base+1),t.getitem(t.base)))for(u=!0,i=t.base+2;i<t.base+t.len;i++)if(this.lt(t.getitem(i),t.getitem(i-1)))r++;else break;else for(u=!1,i=t.base+2;i<t.base+t.len&&!this.lt(t.getitem(i),t.getitem(i-1));i++)r++;return{run:new n.builtin.listSlice(t.list,t.base,r),descending:u}};n.builtin.timSort.prototype.sort=function(){var r=new n.builtin.listSlice(this.list,0,this.listlength),u,i,f;if(!(2>r.len)){for(this.merge_init(),u=this.merge_compute_minrun(r.len);0<r.len;)i=this.count_run(r),i.descending&&i.run.reverse(),i.run.len<u&&(f=i.run.len,i.run.len=u<r.len?u:r.len,this.binary_sort(i.run,f)),r.advance(i.run.len),this.pending.push(i.run),this.merge_collapse();t.asserts.assert(r.base==this.listlength);this.merge_force_collapse();t.asserts.assert(1==this.pending.length);t.asserts.assert(0==this.pending[0].base);t.asserts.assert(this.pending[0].len==this.listlength)}};n.builtin.timSort.prototype.gallop=function(n,i,r,u){var h;t.asserts.assert(0<=r&&r<i.len);h=this;u=u?function(n,t){return h.le(n,t)}:function(n,t){return h.lt(n,t)};var s=i.base+r,e=0,f=1,o;if(u(i.getitem(s),n)){for(o=i.len-r;f<o;)if(u(i.getitem(s+f),n)){e=f;try{f=(f<<1)+1}catch(c){f=o}}else break;f>o&&(f=o);e+=r;f+=r}else{for(o=r+1;f<o&&!u(i.getitem(s-f),n);){e=f;try{f=(f<<1)+1}catch(l){f=o}}f>o&&(f=o);s=r-e;e=r-f;f=s}for(t.asserts.assert(-1<=e<f<=i.len),e+=1;e<f;)r=e+(f-e>>1),u(i.getitem(i.base+r),n)?e=r+1:f=r;return t.asserts.assert(e==f),f};n.builtin.timSort.prototype.merge_init=function(){this.min_gallop=this.MIN_GALLOP;this.pending=[]};n.builtin.timSort.prototype.merge_lo=function(n,i){var f,r,e,o,u;t.asserts.assert(0<n.len&&0<i.len&&n.base+n.len==i.base);f=this.min_gallop;r=n.base;n=n.copyitems();try{if(this.setitem(r,i.popleft()),r++,1!=n.len&&0!=i.len)for(;;){for(o=e=0;;)if(this.lt(i.getitem(i.base),n.getitem(n.base))){if(this.setitem(r,i.popleft()),r++,0==i.len)return;if(o++,e=0,o>=f)break}else{if(this.setitem(r,n.popleft()),r++,1==n.len)return;if(e++,o=0,e>=f)break}for(f+=1;;){for(this.min_gallop=f-=1<f,e=this.gallop(i.getitem(i.base),n,0,!0),u=n.base;u<n.base+e;u++)this.setitem(r,n.getitem(u)),r++;if(n.advance(e),1>=n.len)return;if(this.setitem(r,i.popleft()),r++,0==i.len)return;for(o=this.gallop(n.getitem(n.base),i,0,!1),u=i.base;u<i.base+o;u++)this.setitem(r,i.getitem(u)),r++;if(i.advance(o),0==i.len)return;if(this.setitem(r,n.popleft()),r++,1==n.len)return;if(e<this.MIN_GALLOP&&o<this.MIN_GALLOP)break;f++;this.min_gallop=f}}}finally{for(t.asserts.assert(0<=n.len&&0<=i.len),u=i.base;u<i.base+i.len;u++)this.setitem(r,i.getitem(u)),r++;for(u=n.base;u<n.base+n.len;u++)this.setitem(r,n.getitem(u)),r++}};n.builtin.timSort.prototype.merge_hi=function(n,i){var f,r,e,o,h,c,s,u;t.asserts.assert(0<n.len&&0<i.len&&n.base+n.len==i.base);f=this.min_gallop;r=i.base+i.len;i=i.copyitems();try{if(r--,this.setitem(r,n.popright()),0!=n.len&&1!=i.len)for(;;){for(o=e=0;;)if(h=n.getitem(n.base+n.len-1),c=i.getitem(i.base+i.len-1),this.lt(c,h)){if(r--,this.setitem(r,h),n.len--,0==n.len)return;if(e++,o=0,e>=f)break}else{if(r--,this.setitem(r,c),i.len--,1==i.len)return;if(o++,e=0,o>=f)break}for(f+=1;;){for(this.min_gallop=f-=1<f,c=i.getitem(i.base+i.len-1),s=this.gallop(c,n,n.len-1,!0),e=n.len-s,u=n.base+n.len-1;u>n.base+s-1;u--)r--,this.setitem(r,n.getitem(u));if(n.len-=e,0==n.len)return;if(r--,this.setitem(r,i.popright()),1==i.len)return;for(h=n.getitem(n.base+n.len-1),s=this.gallop(h,i,i.len-1,!1),o=i.len-s,u=i.base+i.len-1;u>i.base+s-1;u--)r--,this.setitem(r,i.getitem(u));if(i.len-=o,1>=i.len)return;if(r--,this.setitem(r,n.popright()),0==n.len)return;if(e<this.MIN_GALLOP&&o<this.MIN_GALLOP)break;f++;this.min_gallop=f}}}finally{for(t.asserts.assert(0<=n.len&&0<=i.len),u=n.base+n.len-1;u>n.base-1;u--)r--,this.setitem(r,n.getitem(u));for(u=i.base+i.len-1;u>i.base-1;u--)r--,this.setitem(r,i.getitem(u))}};n.builtin.timSort.prototype.merge_at=function(i){0>i&&(i=this.pending.length+i);var r=this.pending[i],u=this.pending[i+1];t.asserts.assert(0<r.len&&0<u.len);t.asserts.assert(r.base+r.len==u.base);this.pending[i]=new n.builtin.listSlice(this.list,r.base,r.len+u.len);this.pending.splice(i+1,1);i=this.gallop(u.getitem(u.base),r,0,!0);r.advance(i);0!=r.len&&(u.len=this.gallop(r.getitem(r.base+r.len-1),u,u.len-1,!1),0!=u.len&&(r.len<=u.len?this.merge_lo(r,u):this.merge_hi(r,u)))};n.builtin.timSort.prototype.merge_collapse=function(){for(var n=this.pending;1<n.length;)if(3<=n.length&&n[n.length-3].len<=n[n.length-2].len+n[n.length-1].len)n[n.length-3].len<n[n.length-1].len?this.merge_at(-3):this.merge_at(-2);else if(n[n.length-2].len<=n[n.length-1].len)this.merge_at(-2);else break};n.builtin.timSort.prototype.merge_force_collapse=function(){for(var n=this.pending;1<n.length;)3<=n.length&&n[n.length-3].len<n[n.length-1].len?this.merge_at(-3):this.merge_at(-2)};n.builtin.timSort.prototype.merge_compute_minrun=function(n){for(var t=0;64<=n;)t|=n&1,n>>=1;return n+t};n.builtin.listSlice=function(n,t,i){this.list=n;this.base=t;this.len=i};n.builtin.listSlice.prototype.copyitems=function(){var i=this.base,r=this.base+this.len;return t.asserts.assert(0<=i<=r),new n.builtin.listSlice(new n.builtin.list(this.list.v.slice(i,r)),0,this.len)};n.builtin.listSlice.prototype.advance=function(n){this.base+=n;this.len-=n;t.asserts.assert(this.base<=this.list.sq$length())};n.builtin.listSlice.prototype.getitem=function(n){return this.list.v[n]};n.builtin.listSlice.prototype.setitem=function(n,t){this.list.v[n]=t};n.builtin.listSlice.prototype.popleft=function(){var n=this.list.v[this.base];return this.base++,this.len--,n};n.builtin.listSlice.prototype.popright=function(){return this.len--,this.list.v[this.base+this.len]};n.builtin.listSlice.prototype.reverse=function(){for(var r,t=this.list,n=this.base,i=n+this.len-1;n<i;)r=t.v[n],t.v[n]=t.v[i],t.v[i]=r,n++,i--};t.exportSymbol("Sk.builtin.listSlice",n.builtin.listSlice);t.exportSymbol("Sk.builtin.timSort",n.builtin.timSort);n.builtins={range:n.builtin.range,round:n.builtin.round,len:n.builtin.len,min:n.builtin.min,max:n.builtin.max,sum:n.builtin.sum,zip:n.builtin.zip,abs:n.builtin.abs,fabs:n.builtin.abs,ord:n.builtin.ord,chr:n.builtin.chr,hex:n.builtin.hex,oct:n.builtin.oct,bin:n.builtin.bin,dir:n.builtin.dir,repr:n.builtin.repr,open:n.builtin.open,isinstance:n.builtin.isinstance,hash:n.builtin.hash,getattr:n.builtin.getattr,float_$rw$:n.builtin.float_,int_$rw$:n.builtin.int_,hasattr:n.builtin.hasattr,map:n.builtin.map,filter:n.builtin.filter,reduce:n.builtin.reduce,sorted:n.builtin.sorted,bool:n.builtin.bool,any:n.builtin.any,all:n.builtin.all,enumerate:n.builtin.enumerate,AttributeError:n.builtin.AttributeError,ValueError:n.builtin.ValueError,Exception:n.builtin.Exception,ZeroDivisionError:n.builtin.ZeroDivisionError,AssertionError:n.builtin.AssertionError,ImportError:n.builtin.ImportError,IndentationError:n.builtin.IndentationError,IndexError:n.builtin.IndexError,KeyError:n.builtin.KeyError,TypeError:n.builtin.TypeError,NameError:n.builtin.NameError,IOError:n.builtin.IOError,NotImplementedError:n.builtin.NotImplementedError,SystemExit:n.builtin.SystemExit,OverflowError:n.builtin.OverflowError,OperationError:n.builtin.OperationError,dict:n.builtin.dict,file:n.builtin.file,"function":n.builtin.func,generator:n.builtin.generator,list:n.builtin.list,long_$rw$:n.builtin.lng,method:n.builtin.method,object:n.builtin.object,slice:n.builtin.slice,str:n.builtin.str,set:n.builtin.set,tuple:n.builtin.tuple,type:n.builtin.type,input:n.builtin.input,raw_input:n.builtin.raw_input,jseval:n.builtin.jseval,jsmillis:n.builtin.jsmillis,quit:n.builtin.quit,exit:n.builtin.quit,bytearray:n.builtin.bytearray,callable:n.builtin.callable,complex:n.builtin.complex,delattr:n.builtin.delattr,divmod:n.builtin.divmod,eval_$rn$:n.builtin.eval_,execfile:n.builtin.execfile,format:n.builtin.format,frozenset:n.builtin.frozenset,globals:n.builtin.globals,help:n.builtin.help,issubclass:n.builtin.issubclass,iter:n.builtin.iter,locals:n.builtin.locals,memoryview:n.builtin.memoryview,next:n.builtin.next_,pow:n.builtin.pow,property:n.builtin.property,reload:n.builtin.reload,reversed:n.builtin.reversed,"super":n.builtin.superbi,unichr:n.builtin.unichr,vars:n.builtin.vars,xrange:n.builtin.xrange,apply_$rn$:n.builtin.apply_,buffer:n.builtin.buffer,coerce:n.builtin.coerce,intern:n.builtin.intern};t.exportSymbol("Sk.builtins",n.builtins)})();Sk.builtinFiles={files:{"src/lib/pythonds/trees/binheap.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\n# this heap takes key value pairs, we will assume that the keys are integers\nclass BinHeap:\n    def __init__(self):\n        self.heapList = [0]\n        self.currentSize = 0\n\n\n    def buildHeap(self,alist):\n        i = len(alist) // 2\n        self.currentSize = len(alist)\n        self.heapList = [0] + alist[:]\n        print(len(self.heapList), i)\n        while (i > 0):\n            print(self.heapList, i)\n            self.percDown(i)\n            i = i - 1\n        print(self.heapList,i)\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapList[i] > self.heapList[mc]:\n                tmp = self.heapList[i]\n                self.heapList[i] = self.heapList[mc]\n                self.heapList[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i * 2 + 1 > self.currentSize:\n            return i * 2\n        else:\n            if self.heapList[i * 2] < self.heapList[i * 2 + 1]:\n                return i * 2\n            else:\n                return i * 2 + 1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapList[i] < self.heapList[i//2]:\n               tmp = self.heapList[i // 2]\n               self.heapList[i // 2] = self.heapList[i]\n               self.heapList[i] = tmp\n            i = i // 2\n \n    def insert(self,k):\n        self.heapList.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapList[1]\n        self.heapList[1] = self.heapList[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapList.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if currentSize == 0:\n            return True\n        else:\n            return False\n","src/lib/pythonds/basic/stack.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#stack.py\n\nclass Stack:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def push(self, item):\n        self.items.append(item)\n\n    def pop(self):\n        return self.items.pop()\n\n    def peek(self):\n        return self.items[len(self.items)-1]\n\n    def size(self):\n        return len(self.items)\n\n","src/lib/pythonds/trees/bst.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nclass BinarySearchTree:\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n                  in\n                  del <==> \n    '''\n\n    def __init__(self):\n        self.root = None\n        self.size = 0\n    \n    def put(self,key,val):\n        if self.root:\n            self._put(key,val,self.root)\n        else:\n            self.root = TreeNode(key,val)\n        self.size = self.size + 1\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n            \n    def __setitem__(self,k,v):\n        self.put(k,v)\n\n    def get(self,key):\n        if self.root:\n            res = self._get(key,self.root)\n            if res:\n                return res.payload\n            else:\n                return None\n        else:\n            return None\n        \n    def _get(self,key,currentNode):\n        if not currentNode:\n            return None\n        elif currentNode.key == key:\n            return currentNode\n        elif key < currentNode.key:\n            return self._get(key,currentNode.leftChild)\n        else:\n            return self._get(key,currentNode.rightChild)\n            \n        \n    def __getitem__(self,key):\n        res = self.get(key)\n        if res:\n            return res\n        else:\n            raise KeyError('Error, key not in tree')\n            \n\n    def __contains__(self,key):\n        if self._get(key,self.root):\n            return True\n        else:\n            return False\n        \n    def length(self):\n        return self.size\n\n    def __len__(self):\n        return self.size\n\n    def __iter__(self):\n        return self.root.__iter__()\n    \n    def delete(self,key):\n        if self.size > 1:\n            nodeToRemove = self._get(key,self.root)\n            if nodeToRemove:\n                self.remove(nodeToRemove)\n                self.size = self.size-1\n            else:\n                raise KeyError('Error, key not in tree')\n        elif self.size == 1 and self.root.key == key:\n            self.root = None\n            self.size = self.size - 1\n        else:\n            raise KeyError('Error, key not in tree')\n\n    def __delitem__(self,key):\n        self.delete(key)\n    \n    def remove(self,currentNode):\n        if currentNode.isLeaf(): #leaf\n            if currentNode == currentNode.parent.leftChild:\n                currentNode.parent.leftChild = None\n            else:\n                currentNode.parent.rightChild = None\n        elif currentNode.hasBothChildren(): #interior\n            succ = currentNode.findSuccessor()\n            succ.spliceOut()\n            currentNode.key = succ.key\n            currentNode.payload = succ.payload\n        else: # this node has one child\n            if currentNode.hasLeftChild():\n                if currentNode.isLeftChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.leftChild\n                elif currentNode.isRightChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.leftChild\n                else:\n                    currentNode.replaceNodeData(currentNode.leftChild.key,\n                                       currentNode.leftChild.payload,\n                                       currentNode.leftChild.leftChild,\n                                       currentNode.leftChild.rightChild)\n            else:\n                if currentNode.isLeftChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.rightChild\n                elif currentNode.isRightChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.rightChild\n                else:\n                    currentNode.replaceNodeData(currentNode.rightChild.key,\n                                       currentNode.rightChild.payload,\n                                       currentNode.rightChild.leftChild,\n                                       currentNode.rightChild.rightChild)\n\n    def inorder(self):\n        self._inorder(self.root)\n\n    def _inorder(self,tree):\n        if tree != None:\n            self._inorder(tree.leftChild)\n            print(tree.key)\n            self._inorder(tree.rightChild)\n\n    def postorder(self):\n        self._postorder(self.root)\n\n    def _postorder(self, tree):\n        if tree:\n            self._postorder(tree.rightChild)\n            self._postorder(tree.leftChild)\n            print(tree.key)            \n\n    def preorder(self):\n        self._preorder(self,self.root)\n\n    def _preorder(self,tree):\n        if tree:\n            print(tree.key)            \n            self._preorder(tree.leftChild)\n            self._preorder(tree.rightChild)\n\n                \nclass TreeNode:\n    def __init__(self,key,val,left=None,right=None,parent=None):\n        self.key = key\n        self.payload = val\n        self.leftChild = left\n        self.rightChild = right\n        self.parent = parent\n        self.balanceFactor = 0\n        \n    def hasLeftChild(self):\n        return self.leftChild\n\n    def hasRightChild(self):\n        return self.rightChild\n    \n    def isLeftChild(self):\n        return self.parent and self.parent.leftChild == self\n\n    def isRightChild(self):\n        return self.parent and self.parent.rightChild == self\n\n    def isRoot(self):\n        return not self.parent\n\n    def isLeaf(self):\n        return not (self.rightChild or self.leftChild)\n\n    def hasAnyChildren(self):\n        return self.rightChild or self.leftChild\n\n    def hasBothChildren(self):\n        return self.rightChild and self.leftChild\n    \n    def replaceNodeData(self,key,value,lc,rc):\n        self.key = key\n        self.payload = value\n        self.leftChild = lc\n        self.rightChild = rc\n        if self.hasLeftChild():\n            self.leftChild.parent = self\n        if self.hasRightChild():\n            self.rightChild.parent = self\n        \n    def findSuccessor(self):\n        succ = None\n        if self.hasRightChild():\n            succ = self.rightChild.findMin()\n        else:\n            if self.parent:\n                if self.isLeftChild():\n                    succ = self.parent\n                else:\n                    self.parent.rightChild = None\n                    succ = self.parent.findSuccessor()\n                    self.parent.rightChild = self\n        return succ\n\n\n    def spliceOut(self):\n        if self.isLeaf():\n            if self.isLeftChild():\n                self.parent.leftChild = None\n            else:\n                self.parent.rightChild = None\n        elif self.hasAnyChildren():\n            if self.hasLeftChild():\n                if self.isLeftChild():\n                    self.parent.leftChild = self.leftChild\n                else:\n                    self.parent.rightChild = self.leftChild\n                self.leftChild.parent = self.parent\n            else:\n                if self.isLeftChild():\n                    self.parent.leftChild = self.rightChild\n                else:\n                    self.parent.rightChild = self.rightChild\n                self.rightChild.parent = self.parent\n\n    def findMin(self):\n        current = self\n        while current.hasLeftChild():\n            current = current.leftChild\n        return current\n\n    def __iter__(self):\n        \"\"\"The standard inorder traversal of a binary tree.\"\"\"\n        if self:\n            if self.hasLeftChild():\n                for elem in self.leftChild:\n                    yield elem\n            yield self.key\n            if self.hasRightChild():\n                for elem in self.rightChild:\n                    yield elem\n\n            \n","src/lib/time/__init__.js":"\n/*\n\tBarebones implementation of the Python time package.\n\n\tFor now, only the time() function is implemented.\n*/\n \nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    mod.time = new Sk.builtin.func(function() {\n\t  return Sk.builtin.assk$(new Date().getTime() / 1000, undefined);\n    });\n\n    return mod;\n}\n","src/lib/operator/__init__.js":"/*\n *  __author__: Isaac Dontje Lindell (i@isaacdontjelindell.com)\n *\n *  Implementation of the Python operator module.\n */\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.lt = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Lt')); });\n    mod.__lt__ = mod.lt;\n\n    mod.le = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'LtE')); });\n    mod.__le__ = mod.le;\n\n    mod.eq = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Eq')); });\n    mod.__eq__ = mod.eq;\n\n    mod.ne = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'NotEq')); });\n    mod.__ne__ = mod.ne;\n\n    mod.ge = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'GtE')); });\n    mod.__ge__ = mod.ge;\n\n    mod.gt = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Gt')); });\n    mod.__gt__ = mod.gt;\n\n    mod.not_ = new Sk.builtin.func(function (obj) { throw new Sk.builtin.NotImplementedError(\"operator.not_() is not yet implemented in Skulpt\"); });\n\n    mod.truth = new Sk.builtin.func(function(obj) { return Sk.builtin.bool(obj); });\n\n    mod.is_ = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'Is')); });\n\n    mod.is_not = new Sk.builtin.func(function(a, b) { return Sk.builtin.bool(Sk.misceval.richCompareBool(a, b, 'IsNot')); });\n\n    mod.abs = new Sk.builtin.func(function(obj) { return Sk.misceval.callsim(Sk.builtin.abs, obj); });\n    mod.__abs__ = mod.abs;\n\n    // The documentation says that operator.add() is defined for a and b numbers, but\n    // CPython (2.6) allows a and b to be other types (e.g. str)\n    mod.add = new Sk.builtin.func(function (a, b) { return Sk.abstr.objectAdd(a, b); });\n    mod.__add__ = mod.add;\n\n    mod.and_ = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$and'].call(a, b); });\n    mod.__and__ = mod.and_;\n\n    mod.div = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$divide'].call(a, b); });\n    mod.__div__ = mod.div;\n\n    mod.floordiv = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$floor_divide'].call(a, b); });\n    mod.__floordiv__ = mod.floordiv;\n\n    // Doesn't look like anything has the __index__ magic function anyway\n    mod.index = new Sk.builtin.func(function (a) { throw new Sk.builtin.NotImplementedError(\"operator.index() is not yet implemented in Skulpt\"); });\n    mod.__index__ = mod.index;\n\n    // Note: Sk.abstr.numberUnaryOp(obj, 'Invert') looks for the function nb$invert() on obj.\n    // However, it doesn't look like that function has been implemented for any existing object types.\n    // I've gone ahead and created this function for completeness' sake, but expect any use of it to\n    // result in an error.\n    mod.inv = new Sk.builtin.func(function (obj) { return Sk.abstr.numberUnaryOp(obj, 'Invert'); });\n    mod.__inv__ = mod.inv;\n    mod.invert = mod.inv;\n    mod.__invert__ = mod.inv;\n\n    mod.lshift = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$lshift'].call(a, b); });\n    mod.__lshift__ = mod.lshift;\n\n    mod.mod = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$remainder'].call(a, b); });\n    mod.__mod__ = mod.mod;\n\n    mod.mul = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$multiply'].call(a, b); });\n    mod.__mul__ = mod.mul;\n\n    mod.neg = new Sk.builtin.func(function (obj) { return Sk.abstr.objectNegative(obj); });\n    mod.__neg__ = mod.neg;\n\n    mod.or_ = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$or'].call(a, b); });\n    mod.__or__ = mod.or_;\n\n    mod.pos = new Sk.builtin.func(function (obj) { return Sk.abstr.objectPositive(obj); });\n    mod.__pos__ = mod.pos;\n\n    mod.pow = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$power'].call(a, b); });\n    mod.__pow__ = mod.pow;\n\n    mod.rshift = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$rshift'].call(a, b); });\n    mod.__rshift__ = mod.rshift;\n\n    mod.sub = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$subtract'].call(a, b); });\n    mod.__sub__ = mod.sub;\n\n    mod.truediv = mod.div;\n    mod.__truediv__ = mod.div;\n\n    mod.xor = new Sk.builtin.func(function (a, b) { return Sk.builtin.nmber.prototype['nb$xor'].call(a, b); });\n    mod.__xor__ = mod.xor;\n\n    mod.concat = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceConcat(a, b); });\n    mod.__concat__ = mod.concat;\n\n    mod.contains = new Sk.builtin.func(function (a, b) { return Sk.builtin.bool(Sk.abstr.sequenceContains(a, b)); });\n    mod.__contains__ = mod.contains;\n\n    mod.countOf = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceGetCountOf(a, b); });\n\n    mod.delitem = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceDelItem(a, b); });\n    mod.__delitem__ = mod.delitem;\n\n    mod.getitem = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceGetItem(a, b); });\n    mod.__getitem__ = mod.getitem;\n\n    mod.indexOf = new Sk.builtin.func(function (a, b) { return Sk.abstr.sequenceGetIndexOf(a, b); });\n\n    mod.setitem = new Sk.builtin.func(function (a, b, c) { return Sk.abstr.sequenceSetItem(a, b, c); });\n    mod.__setitem__ = mod.setitem;\n\n    return mod;\n};\n","src/lib/image/__init__.js":'var ImageMod; // the single identifier needed in the global scope\n\nif (! ImageMod) {\n    ImageMod = { };\n    ImageMod.canvasLib = [];\n}\n\n//  todo create an empty image by reading image data from a blank canvas of the appropriate size\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    var image = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,imageId) {\n            self.image = document.getElementById(imageId.v);\n            if (self.image == null) {\n                throw "There is no image on this page named: " + imageId.v;\n            }\n            self.width = self.image.width;\n            self.height = self.image.height;\n            self.canvas = document.createElement("canvas");\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.ctx = self.canvas.getContext("2d");\n            self.ctx.drawImage(self.image,0,0)\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n        $loc.getPixel = new Sk.builtin.func(function(self,x,y) {\n\t\t\tx = Sk.builtin.asnum$(x);\n\t\t\ty = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            var red = self.imagedata.data[index]\n            var green = self.imagedata.data[index+1]\n            var blue = self.imagedata.data[index+2]\n            return Sk.misceval.callsim(mod.Pixel,red,green,blue);\n        });\n\n        $loc.setPixel = new Sk.builtin.func(function(self, x, y, pix) {\n\t\t\tx = Sk.builtin.asnum$(x);\n\t\t\ty = Sk.builtin.asnum$(y);\n            var index = (y*4)*self.width+(x*4);\n            self.imagedata.data[index] = Sk.misceval.callsim(pix.getRed,pix);\n            self.imagedata.data[index+1] = Sk.misceval.callsim(pix.getGreen,pix);\n            self.imagedata.data[index+2] = Sk.misceval.callsim(pix.getBlue,pix);\n            self.imagedata.data[index+3] = 255;\n        });\n\n        $loc.getHeight = new Sk.builtin.func(function(self) {\n            return self.image.height;\n        });\n\n        $loc.getWidth = new Sk.builtin.func(function(self,titlestring) {\n            return self.image.width;\n        });\n\n        $loc.draw = new Sk.builtin.func(function(self,win,ulx,uly) {\n\t\t\twin = Sk.builtin.asnum$(win);\n\t\t\tulx = Sk.builtin.asnum$(ulx);\n\t\t\tuly = Sk.builtin.asnum$(uly);\n            var can = Sk.misceval.callsim(win.getWin,win);\n            var ctx = can.getContext("2d");\n            //ctx.putImageData(self.imagedata,0,0,0,0,self.imagedata.width,self.imagedata.height);\n            if (! ulx) {\n                ulx = 0;\n                uly = 0;\n            }\n            ctx.putImageData(self.imagedata,ulx,uly);\n        });\n\n        // toList\n\n    }\n\n    mod.Image = Sk.misceval.buildClass(mod, image, \'Image\', []);\n\n    var eImage = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            self.width = Sk.builtin.asnum$(width);\n            self.height = Sk.builtin.asnum$(height);\n            self.canvas = document.createElement("canvas");\n            self.ctx = self.canvas.getContext(\'2d\');\n            self.canvas.height = self.height;\n            self.canvas.width = self.width;\n            self.imagedata = self.ctx.getImageData(0,0,self.width,self.height);\n        });\n\n    }\n\n    mod.EmptyImage = Sk.misceval.buildClass(mod, eImage, \'EmptyImage\', [mod.Image]);\n\n    // create a ListImage object\n\n    \n    var pixel = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,r,g,b) {\n            self.red = Sk.builtin.asnum$(r);\n            self.green = Sk.builtin.asnum$(g);\n            self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.getRed = new Sk.builtin.func(function(self) {\n           return self.red;\n        });\n\n        $loc.getGreen = new Sk.builtin.func(function(self) {\n           return self.green;\n        });\n\n        $loc.getBlue = new Sk.builtin.func(function(self) {\n           return self.blue;\n        });\n\n        $loc.setRed = new Sk.builtin.func(function(self,r) {\n           self.red = Sk.builtin.asnum$(r);\n        });\n\n        $loc.setGreen = new Sk.builtin.func(function(self,g) {\n           self.green = Sk.builtin.asnum$(g);\n        });\n\n        $loc.setBlue = new Sk.builtin.func(function(self,b) {\n           self.blue = Sk.builtin.asnum$(b);\n        });\n\n        $loc.__getitem__ = new Sk.builtin.func(function(self,k) {\n\t\t   k = Sk.builtin.asnum$(k);\n           if(k == 0) {\n               return self.red;\n           } else if (k == 1) {\n               return self.green;\n           } else if (k == 2) {\n               return self.blue;\n           }\n        });\n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            return "[" + self.red + "," + self.green + "," + self.blue + "]"\n        });\n        \n        //getColorTuple\n        $loc.getColorTuple = new Sk.builtin.func(function(self,x,y) {\n\n        });\n\n        //setRange -- change from 0..255 to 0.0 .. 1.0\n        $loc.setRange = new Sk.builtin.func(function(self,mx) {\n            self.max = Sk.builtin.asnum$(mx);\n        });\n\n    }\n    mod.Pixel = Sk.misceval.buildClass(mod, pixel, \'Pixel\', []);\n\n\n\n    var screen = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,width,height) {\n            var currentCanvas = ImageMod.canvasLib[Sk.canvas];\n            if (currentCanvas === undefined) {\n                self.theScreen = document.getElementById(Sk.canvas);\n                if (width !== undefined) {\n                    self.theScreen.height = height;\n                    self.theScreen.width = width;\n                }\n\n                ImageMod.canvasLib[Sk.canvas] = self.theScreen;\n            } else {\n                self.theScreen = currentCanvas;\n                self.theScreen.height = self.theScreen.height;\n            }\n            self.theScreen.style.display = "block";\n        });\n\n        $loc.getWin = new Sk.builtin.func(function(self) {\n           return self.theScreen;\n        });\n\n        // exitonclick\n        $loc.exitonclick = new Sk.builtin.func(function(self) {\n            var canvas_id = self.theScreen.id;\n            self.theScreen.onclick = function() {\n                document.getElementById(canvas_id).style.display = \'none\';\n                document.getElementById(canvas_id).onclick = null;\n                delete ImageMod.canvasLib[canvas_id];\n            }\n\n        });\n        //getMouse\n    }\n\n    mod.ImageWin = Sk.misceval.buildClass(mod, screen, \'ImageWin\', []);\n\n    return mod\n}\n',"src/lib/pythonds/basic/__init__.py":'\n#__all__ = ["stack"]\n\n\n#from .stack import Stack\n#from .queue import Queue\n\n\n\n',"src/lib/unittest/__init__.py":"__author__ = 'bmiller'\n'''\nThis is the start of something that behaves like\nthe unittest module from cpython.\n\n'''\n\n\nclass TestCase:\n    def __init__(self):\n        self.numPassed = 0\n        self.numFailed = 0\n\n        self.tlist = []\n        testNames = {}\n        for name in dir(self):\n            if name[:4] == 'test' and name not in testNames:\n                self.tlist.append(getattr(self,name))\n                testNames[name]=True\n\n    def setup(self):\n        pass\n\n    def tearDown(self):\n        pass\n\n    def main(self):\n\n        for func in self.tlist:\n            try:\n                self.setup()\n                func()\n                self.tearDown()\n            except:\n                self.appendResult('Error',None,None,None)\n                self.numFailed += 1\n        self.showSummary()\n\n    def assertEqual(self, actual, expected, feedback=\"\"):\n        res = actual==expected\n        self.appendResult(res,str(actual)+' to be equal to ',expected, feedback)\n\n    def assertNotEqual(actual, expected, feedback=\"\"):\n        res = actual != expected\n        self.appendResult(res,str(actual)+' to not equal ',expected,feedback)\n\n    def assertTrue(self,x, feedback=\"\"):\n        res = x\n        self.appendResult(res,str(x)+' to be ',True,feedback)\n\n    def assertFalse(self,x, feedback=\"\"):\n        res = not x\n        self.appendResult(res,str(x)+' to be ',False,feedback)\n\n    def assertIs(self,a,b, feedback=\"\"):\n        res = a is b\n        self.appendResult(res,str(a)+' to be the same object as ',b,feedback)\n\n    def assertIsNot(self,a,b, feedback=\"\"):\n        res = a is not b\n        self.appendResult(res,str(a)+' to not be the same object as ',b,feedback)\n\n    def assertIsNone(self,x, feedback=\"\"):\n        res = x is None\n        self.appendResult(res,x,None,feedback)\n\n    def assertIsNotNone(self,x, feedback=\"\"):\n        res = x is not None\n        self.appendResult(res,str(x)+' to not be ',None,feedback)\n\n    def assertIn(self,a,b, feedback=\"\"):\n        res = a in b\n        self.appendResult(res,str(a)+' to be in ',b,feedback)\n\n    def assertNotIn(self,a,b, feedback=\"\"):\n        res = a not in b\n        self.appendResult(res,str(a)+' to not be in ',b,feedback)\n\n    def assertIsInstance(self,a,b, feedback=\"\"):\n        res = isinstance(a,b)\n        self.appendResult(res,str(a)+' to be an instance of ',b,feedback)\n\n    def assertNotIsInstance(self,a,b, feedback=\"\"):\n        res = not isinstance(a,b)\n        self.appendResult(res,str(a)+' to not be an instance of ',b,feedback)\n\n    def assertAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) == 0\n        self.appendResult(res,str(a)+' to equal ',b,feedback)\n\n    def assertNotAlmostEqual(self,a,b, feedback=\"\"):\n        res = round(a-b,7) != 0\n        self.appendResult(res,str(a)+' to not equal ',b,feedback)\n\n    def assertGreater(self,a,b, feedback=\"\"):\n        res = a > b\n        self.appendResult(res,str(a)+' to be greater than ',b,feedback)\n\n    def assertGreaterEqual(self,a,b, feedback=\"\"):\n        res = a >= b\n        self.appendResult(res,str(a)+' to be greater than or equal to ',b,feedback)\n\n    def assertLess(self,a,b, feedback=\"\"):\n        res = a < b\n        self.appendResult(res,str(a)+' to be less than ',b,feedback)\n\n    def assertLessEqual(self,a,b, feedback=\"\"):\n        res = a <= b\n        self.appendResult(res,str(a)+' to be less than or equal to ',b,feedback)\n\n    def appendResult(self,res,actual,expected,feedback):\n        if res == 'Error':\n            msg = 'Error'\n        elif res:\n            msg = 'Pass'\n            self.numPassed += 1\n        else:\n            msg = 'Fail: expected %s  %s ' % (str(actual),str(expected)) + feedback\n            self.numFailed += 1\n\n    def showSummary(self):\n        pct = self.numPassed / (self.numPassed+self.numFailed) * 100\n        print \"ran %d tests, passed %d \\n\" % (self.numPassed+self.numFailed, self.numPassed)\n\n\n\ndef main():\n    glob = globals()  # globals() still needs work\n    for name in glob:\n        if issubclass(glob[name],TestCase):\n            glob[name]().main()  \n\n","src/lib/test/__init__.py":"__author__ = 'bmiller'\n\ndef testEqual(actual, expected):\n    if type(expected) == type(1):\n        if actual == expected:\n            print('Pass')\n            return True\n    elif type(expected) == type(1.11):\n        if abs(actual-expected) < 0.00001:\n            print('Pass')\n            return True\n    else:\n        if actual == expected:\n            print('Pass')\n            return True\n    print('Test Failed: expected ' + str(expected) + ' but got ' + str(actual))\n    return False\n\ndef testNotEqual(actual, expected):\n    pass\n\n","src/lib/string/__init__.js":"/*\n *  __author__: Isaac Dontje Lindell (i@isaacdontjelindell.com)\n *\n *  Implementation of the Python string module.\n */\n\n\nvar $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.ascii_lowercase = Sk.builtin.str('abcdefghijklmnopqrstuvwxyz');\n    mod.ascii_uppercase = Sk.builtin.str('ABCDEFGHIJKLMNOPQRSTUVWXYZ');\n    mod.ascii_letters = Sk.builtin.str(mod.ascii_lowercase.v + mod.ascii_uppercase.v);\n\n    mod.lowercase = Sk.builtin.str('abcdefghijklmnopqrstuvwxyz');\n    mod.uppercase = Sk.builtin.str('ABCDEFGHIJKLMNOPQRSTUVWXYZ');\n    mod.letters = Sk.builtin.str(mod.lowercase.v + mod.uppercase.v);\n\n    mod.digits = Sk.builtin.str('0123456789', Sk.builtin.str);\n    mod.hexdigits = Sk.builtin.str('0123456789abcdefABCDEF');\n    mod.octdigits = Sk.builtin.str('01234567');\n\n    mod.punctuation = Sk.builtin.str('!\"#$%&\\'()*+,-./:;<=>?@[\\\\]^_`{|}~');\n    mod.whitespace = Sk.builtin.str('\\t\\n\\x0b\\x0c\\r ');\n\n    /* Note: The docs for string.printable say that it's the concatenation of string.digits,\n     * string.letters, string.punctuation, and string.whitespace. The CPython interpreter\n     * outputs the whitespace characters in one order when string.whitespace is used, and a\n     * slightly different order when string.printable is used. I've elected to follow the\n     * behavior of CPython here rather than the spec. */\n    mod.printable = Sk.builtin.str(mod.digits.v + mod.letters.v + mod.punctuation.v + \" \\t\\n\\r\\x0b\\x0c\");\n\n\n    mod.split = new Sk.builtin.func(function(s, sep, maxsplit) {\n        return Sk.misceval.callsim(Sk.builtin.str.prototype['split'], s, sep, maxsplit);\n    });\n\n    /* Return a copy of word with only its first character capitalized. */\n    mod.capitalize = new Sk.builtin.func(function(word) {\n        return Sk.misceval.callsim(Sk.builtin.str.prototype['capitalize'], word);\n    });\n\n    /* Concatenate a list or tuple of words with intervening occurrences\n     * of sep. The default value for sep is a single space character. */\n    mod.join = new Sk.builtin.func(function(words, sep) {\n        if (sep === undefined) {\n            sep = Sk.builtin.str(' ');\n        }\n        return Sk.misceval.callsim(Sk.builtin.str.prototype['join'], sep, words);\n    });\n\n\n    /* Split the argument into words using split(), capitalize each word\n     * using capitalize(), and join the capitalized words using join().\n     * Note that this replaces runs of whitespace characters by a single\n     * space, and removes leading and trailing whitespace. */\n    mod.capwords = new Sk.builtin.func(function(s, sep) {\n        Sk.builtin.pyCheckArgs('capwords', arguments, 1, 2);\n        if (!Sk.builtin.checkString(s)) {\n            throw new Sk.builtin.TypeError(\"s must be a string\");\n        }\n        if (sep === undefined) {\n            sep = Sk.builtin.str(' ');\n        }\n        if(!Sk.builtin.checkString(sep)) {\n            throw new Sk.builtin.TypeError(\"sep must be a string\");\n        }\n\n        var words = Sk.misceval.callsim(mod.split, s, sep);\n        var capWords = [];\n        for (var i=0; i<words.v.length; i++) {\n            var word = Sk.builtin.list.prototype['list_subscript_'].call(words, i);\n            var cap = Sk.misceval.callsim(mod.capitalize, word);\n            capWords.push(cap);\n        }\n\n        return Sk.misceval.callsim(mod.join, Sk.builtin.list(capWords), sep);\n    });\n\n\n    return mod;\n};","src/builtin/sys.js":"var $builtinmodule = function(name)\n{\n    var sys = {};\n\n    var args = [];\n    var argv = Sk.getSysArgv();\n    for (var i = 0; i < argv.length; ++i)\n        args.push(new Sk.builtin.str(argv[i]));\n    sys.argv = new Sk.builtins['list'](args);\n\n    sys.copyright = Sk.builtin['str'](\"Copyright 2009-2010 Scott Graham.\\nAll Rights Reserved.\\n\");\n\n    sys.modules = Sk.sysmodules;\n\n    sys.path = Sk.realsyspath;\n\n    sys.getExecutionLimit = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(Sk.execLimit, Sk.builtin.nmber.int$);\n    });\n\n    sys.setExecutionLimit = new Sk.builtin.func(function(t) {\n        if (t !==  undefined) {\n            Sk.execLimit = Sk.builtin.asnum$(t);\n        }\n    });\n\n    sys.resetTimeout = new Sk.builtin.func(function() {\n        Sk.execStart = new Date();\n    });\n\n    sys.debug = new Sk.builtin.func(function() {\n        debugger;\n    });\n\n    return sys;\n};\n","src/lib/pythonds/trees/balance.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nfrom .bst import BinarySearchTree, TreeNode\n\nclass AVLTree(BinarySearchTree):\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  has_key(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n    '''\n\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.leftChild)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.rightChild)                \n\n    def updateBalance(self,node):\n        if node.balanceFactor > 1 or node.balanceFactor < -1:\n            self.rebalance(node)\n            return\n        if node.parent != None:\n            if node.isLeftChild():\n                node.parent.balanceFactor += 1\n            elif node.isRightChild():\n                node.parent.balanceFactor -= 1\n\n            if node.parent.balanceFactor != 0:\n                self.updateBalance(node.parent)\n\n    def rebalance(self,node):\n        if node.balanceFactor < 0:\n            if node.rightChild.balanceFactor > 0:\n                # Do an LR Rotation\n                self.rotateRight(node.rightChild)\n                self.rotateLeft(node)\n            else:\n                # single left\n                self.rotateLeft(node)\n        elif node.balanceFactor > 0:\n            if node.leftChild.balanceFactor < 0:\n                # Do an RL Rotation\n                self.rotateLeft(node.leftChild)\n                self.rotateRight(node)\n            else:\n                # single right\n                self.rotateRight(node)\n\n    def rotateLeft(self,rotRoot):\n        newRoot = rotRoot.rightChild\n        rotRoot.rightChild = newRoot.leftChild\n        if newRoot.leftChild != None:\n            newRoot.leftChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isLeftChild():\n                rotRoot.parent.leftChild = newRoot\n            else:\n                rotRoot.parent.rightChild = newRoot\n        newRoot.leftChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor + 1 - min(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor + 1 + max(rotRoot.balanceFactor, 0)\n\n\n    def rotateRight(self,rotRoot):\n        newRoot = rotRoot.leftChild\n        rotRoot.leftChild = newRoot.rightChild\n        if newRoot.rightChild != None:\n            newRoot.rightChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isRightChild():\n                rotRoot.parent.rightChild = newRoot\n            else:\n                rotRoot.parent.leftChild = newRoot\n        newRoot.rightChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor - 1 - max(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor - 1 + min(rotRoot.balanceFactor, 0)\n        \n","src/lib/urllib/request/__init__.js":'var $builtinmodule = function(name)\n{\n  var request = {};\n\n\n  //~ Classes .................................................................\n\n  // Response class\n  //\n  // Response objects are returned by the request, get, post, etc.\n  // methods, allowing the user to access the response text, status\n  // code, and other information.\n\n  // ------------------------------------------------------------\n  var response = function($gbl, $loc) {\n\n    // ------------------------------------------------------------\n    $loc.__init__ = new Sk.builtin.func(function(self, xhr) {\n      self.data$ = xhr.responseText;\n      self.lineList = self.data$.split("\\n");\n      self.lineList = self.lineList.slice(0,-1);\n      for(var i =0 ; i < self.lineList.length; i++) {\n        self.lineList[i] = self.lineList[i]+\'\\n\';\n      }\n      self.currentLine = 0;\n      self.pos$ = 0;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__str__ = new Sk.builtin.func(function(self) {\n      return Sk.ffi.remapToPy(\'<Response>\');\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.__iter__ = new Sk.builtin.func(function(self) {\n      var allLines = self.lineList;\n\n      return Sk.builtin.makeGenerator(function() {\n          if (this.$index >= this.$lines.length) return undefined;\n          return new Sk.builtin.str(this.$lines[this.$index++]);\n        }, {\n          $obj: self,\n          $index: 0,\n          $lines: allLines\n        });\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.read = new Sk.builtin.func(function(self, size) {\n      if (self.closed) throw new Sk.builtin.ValueError("I/O operation on closed file");\n      var len = self.data$.length;\n      if (size === undefined) size = len;\n      var ret = new Sk.builtin.str(self.data$.substr(self.pos$, size));\n      self.pos$ += size;\n      if (self.pos$ >= len) self.pos$ = len;\n      return ret;\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readline = new Sk.builtin.func(function(self, size) {\n      var line = "";\n      if (self.currentLine < self.lineList.length) {\n        line = self.lineList[self.currentLine];\n        self.currentLine++;\n      }\n      return new Sk.builtin.str(line);\n    });\n\n\n    // ------------------------------------------------------------\n    $loc.readlines = new Sk.builtin.func(function(self, sizehint) {\n      var arr = [];\n      for(var i = self.currentLine; i < self.lineList.length; i++) {\n        arr.push(new Sk.builtin.str(self.lineList[i]));\n      }\n      return new Sk.builtin.list(arr);\n    });\n\n  };\n\n  request.Response =\n    Sk.misceval.buildClass(request, response, \'Response\', []);\n\n\n  //~ Module functions ........................................................\n\n  // ------------------------------------------------------------\n  /**\n   * Constructs and sends a Request. Returns Response object.\n   *\n   * http://docs.python-requests.org/en/latest/api/#requests.request\n   *\n   * For now, this implementation doesn\'t actually construct a Request\n   * object; it just makes the request through jQuery.ajax and then\n   * constructs a Response.\n   */\n  request.urlopen = new Sk.builtin.func(function(url, data, timeout) {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open("GET",url.v,false);\n    xmlhttp.send(null);\n\n    return Sk.misceval.callsim(request.Response,xmlhttp)\n  });\n\n\n  return request;\n};\n',"src/lib/pythonds/basic/queue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#queue.py\n\nclass Queue:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def enqueue(self, item):\n        self.items.insert(0,item)\n\n    def dequeue(self):\n        return self.items.pop()\n\n    def size(self):\n        return len(self.items)\n","src/lib/pythonds/graphs/adjGraph.py":'#\n#  adjGraph\n#\n#  Created by Brad Miller on 2005-02-24.\n#  Copyright (c) 2005 Brad Miller, David Ranum, Luther College. All rights reserved.\n#\n\nimport sys\nimport os\nimport unittest\n\nclass Graph:\n    def __init__(self):\n        self.vertices = {}\n        self.numVertices = 0\n        \n    def addVertex(self,key):\n        self.numVertices = self.numVertices + 1\n        newVertex = Vertex(key)\n        self.vertices[key] = newVertex\n        return newVertex\n    \n    def getVertex(self,n):\n        if n in self.vertices:\n            return self.vertices[n]\n        else:\n            return None\n\n    def __contains__(self,n):\n        return n in self.vertices\n    \n    def addEdge(self,f,t,cost=0):\n            if f not in self.vertices:\n                nv = self.addVertex(f)\n            if t not in self.vertices:\n                nv = self.addVertex(t)\n            self.vertices[f].addNeighbor(self.vertices[t],cost)\n    \n    def getVertices(self):\n        return list(self.vertices.keys())\n        \n    def __iter__(self):\n        return iter(self.vertices.values())\n                \nclass Vertex:\n    def __init__(self,num):\n        self.id = num\n        self.connectedTo = {}\n        self.color = \'white\'\n        self.dist = sys.maxsize\n        self.pred = None\n        self.disc = 0\n        self.fin = 0\n\n    # def __lt__(self,o):\n    #     return self.id < o.id\n    \n    def addNeighbor(self,nbr,weight=0):\n        self.connectedTo[nbr] = weight\n        \n    def setColor(self,color):\n        self.color = color\n        \n    def setDistance(self,d):\n        self.dist = d\n\n    def setPred(self,p):\n        self.pred = p\n\n    def setDiscovery(self,dtime):\n        self.disc = dtime\n        \n    def setFinish(self,ftime):\n        self.fin = ftime\n        \n    def getFinish(self):\n        return self.fin\n        \n    def getDiscovery(self):\n        return self.disc\n        \n    def getPred(self):\n        return self.pred\n        \n    def getDistance(self):\n        return self.dist\n        \n    def getColor(self):\n        return self.color\n    \n    def getConnections(self):\n        return self.connectedTo.keys()\n        \n    def getWeight(self,nbr):\n        return self.connectedTo[nbr]\n                \n    def __str__(self):\n        return str(self.id) + ":color " + self.color + ":disc " + str(self.disc) + ":fin " + str(self.fin) + ":dist " + str(self.dist) + ":pred \\n\\t[" + str(self.pred)+ "]\\n"\n    \n    def getId(self):\n        return self.id\n\nclass adjGraphTests(unittest.TestCase):\n    def setUp(self):\n        self.tGraph = Graph()\n        \n    def testMakeGraph(self):\n        gFile = open("test.dat")\n        for line in gFile:\n            fVertex, tVertex = line.split(\'|\')\n            fVertex = int(fVertex)\n            tVertex = int(tVertex)\n            self.tGraph.addEdge(fVertex,tVertex)\n        for i in self.tGraph:\n            adj = i.getAdj()\n            for k in adj:\n                print(i, k)\n\n        \nif __name__ == \'__main__\':\n    unittest.main()\n              \n',"src/lib/turtle/__init__.js":"//\n//\n// Turtle Graphics Module for Skulpt\n//\n// Brad Miller\n//\n//\n//\nvar TurtleGraphics;\n// the single identifier needed in the global scope\nif (!TurtleGraphics) {\n    TurtleGraphics = {\n        doneDelegates: [],\n        fadeOnExit: true,\n\t\tdefaults: {\n\t\t\tcanvasID: 'mycanvas',\n\t\t\tdegrees: true,\n\t\t\tanimate: true\n\t\t}\n    };\n}\n(function () {\n    'use strict';\n    // Define private constants\n    var Degree2Rad = Math.PI / 180,\n        // conversion factor for degrees to radians\n        Rad2Degree = 180 / Math.PI,\n        render,\n        allDone,\n        segmentLine,\n        clear_canvas;\n\n    // Create a 3d Vector class for manipulating turtle heading, and position.\n    function Vector(x, y, z) {\n        var i;\n        if ((typeof x).toLowerCase() === 'number') {\n            Array.prototype.push.call(this, x);\n            Array.prototype.push.call(this, y);\n            Array.prototype.push.call(this, z);\n        } else {\n            for (i = 0; i < x.length; i = i + 1) {\n                Array.prototype.push.call(this, x[i]);\n            }\n        }\n    }\n    // Create a vector object given a direction as an angle.\n    Vector.angle2vec = function (phi) {\n        var res = new Vector([0, 0, 0]);\n        phi = phi * Degree2Rad;\n        res[0] = Math.cos(phi);\n        res[1] = Math.sin(phi);\n        return res.normalize();\n    };\n    // This trick allows you to access a Vector object like an array\n    // myVec[0] == x\n    // myVec[1] == y\n    // myVec[2] == z\n    // we really only need the z for the convenience of rotating\n    Vector.prototype.addItem = function (item) {\n        Array.prototype.push.call(this, item);\n    };\n    Vector.prototype.linear = function (a, b, v) {\n        if (this.length !== 3 || v.length !== 3) {\n            return;\n        }\n        return new Vector([a * this[0] + b * v[0],\n                           a * this[1] + b * v[1],\n                           a * this[2] + b * v[2]]);\n\n        \n    };\n    Vector.prototype.cross = function (v) {\n        if (this.length !== 3 || v.length !== 3) {\n            return;\n        }\n \n        return new Vector([this[1] * v[2] - this[2] * v[1],\n                    this[2] * v[0] - this[0] * v[2],\n                    this[0] * v[1] - this[1] * v[0]]);\n    };\n    Vector.prototype.rotate = function (angle) {\n        // Rotate this counter clockwise by angle.\n        var perp = new Vector(-this[1], this[0], 0),\n            c,\n            s;\n        angle = angle * Degree2Rad;\n        c = Math.cos(angle);\n        s = Math.sin(angle);\n        return new Vector(this[0] * c + perp[0] * s, this[1] * c + perp[1] * s, 0);\n    };\n    Vector.prototype.rotateNormal = function (v, alpha) {\n        // Return rotation of this in direction of v about w over alpha\n        // Requires: v, w are vectors; alpha is angle in radians\n        //   this, v, w are orthonormal\n        return this.linear(Math.cos(alpha), Math.sin(alpha), v);\n    };\n    Vector.prototype.normalize = function () {\n        var n = this.len(),\n            res = this.div(n);\n        return res;\n    };\n    Vector.prototype.toAngle = function () {\n        // workaround for values getting set to +/i xxx e -16 fooling the +/- checks below\n        if (Math.abs(this[1]) < 0.00001) {\n            this[1] = 0;\n        }\n        if (Math.abs(this[0]) < 0.00001) {\n            this[0] = 0;\n        }\n        var rads = Math.atan(Math.abs(this[1]) / Math.abs(this[0])),\n            deg = rads * Rad2Degree;\n        if (this[0] < 0 && this[1] > 0) {\n            deg = 180 - deg;\n        } else if (this[0] < 0 && this[1] <= 0) {\n            deg = 180 + deg;\n        } else if (this[0] >= 0 && this[1] < 0) {\n            deg = 360 - deg;\n        }\n        return deg;\n    };\n    // divide all vector components by the same value\n    Vector.prototype.div = function (n) {\n        var res = [];\n        res[0] = this[0] / n;\n        res[1] = this[1] / n;\n        res[2] = this[2] / n;\n        return new Vector(res);\n    };\n    // subtract one vector from another\n    Vector.prototype.sub = function (v) {\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] - v[0];\n        res[1] = this[1] - v[1];\n        res[2] = this[2] - v[2];\n        return res;\n    };\n    Vector.prototype.add = function (v) {\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] + v[0];\n        res[1] = this[1] + v[1];\n        res[2] = this[2] + v[2];\n        return res;\n    };\n    Vector.prototype.smul = function (k) {\n        // scalar multiplication\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] * k;\n        res[1] = this[1] * k;\n        res[2] = this[2] * k;\n        return res;\n    };\n    Vector.prototype.scale = function (xs, ys) {\n        var res = new Vector(0, 0, 0);\n        res[0] = this[0] * ys;\n        res[1] = this[1] * xs;\n        res[2] = 1;\n        return res;\n    };\n    Vector.prototype.len = function () {\n        return Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    };\n\n    allDone = function () {\n        var done = true, tix, theT;\n        for (tix = 0; tix < TurtleGraphics.turtleList.length; tix = tix + 1) {\n            theT = TurtleGraphics.turtleList[tix];\n            done = done && theT.aCount >= theT.drawingEvents.length;\n        }\n        return done;\n    };\n    //\n    //  This is the function that provides the animation\n    //\n    render = function () {\n        var context = document.getElementById(TurtleGraphics.defaults.canvasID).getContext('2d'),\n            canvasLib = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID],\n            incr = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID].getCounter(),\n            t,\n            tix,\n            i,\n\t\t\tcurrentPos,\n            currentHead,\n            filling,\n            oper,\n            ts,\n            tmpColor,\n            size,\n            speed;\n\n\t\tcontext.moveTo(0, 0);\n\t\tcontext.lineCap = 'round';\n\t\tcontext.lineJoin = 'round';\n        context.clearRect(canvasLib.llx, canvasLib.lly, canvasLib.urx - canvasLib.llx, canvasLib.ury - canvasLib.lly); //canvas.style.setProperty(\"background-color\",TurtleGraphics.turtleCanvas.bgcolor.v);\n        TurtleGraphics.renderClock += incr;\n        for (tix = 0; tix < TurtleGraphics.turtleList.length; tix = tix + 1) {\n            currentPos = new Vector(0, 0, 0);\n            currentHead = new Vector(1, 0, 0);\n            context.fillStyle = 'black';\n            context.strokeStyle = 'black';\n            t = TurtleGraphics.turtleList[tix];\n\t\t\tcurrentHead = t.heading;\n            context.lastCanvas = t.turtleCanvas;\n            if (t.aCount >= t.drawingEvents.length) {\n                t.aCount = t.drawingEvents.length - 1;\n            }\n\n\t\t\tcontext.lineWidth = t.get_pen_width();\n\t\t\t\n            filling = false;\n            if (isNaN(t.turtleCanvas.delay)) {\n                t.turtleCanvas.delay = 0;\n            }\n            //console.log(tix + \" : \" + t.clearPoint + \" to \" + t.aCount)\n            for (i = t.clearPoint; (i <= t.aCount || t.turtleCanvas.delay === 0) && i < t.drawingEvents.length; i = i + 1) {\n                if (i > t.aCount) {\n                    //If se jump past aCount, jump it ahead\n                    t.aCount = i;\n                }\n                oper = t.drawingEvents[i];\n                ts = oper[oper.length - 1];\n                //console.log(i + \"/\" + ts + oper [0] + \"{\" + oper [1] + \"}\" + t.turtleCanvas.delay)\n                if (ts <= TurtleGraphics.renderClock || t.turtleCanvas.delay === 0) {\n                    if (ts > TurtleGraphics.renderClock) {\n                        //If we go past the render clock, jump it ahead\n                        TurtleGraphics.renderClock = ts;\n                    }\n                    //console.log(\"<==\")\n                    switch (oper[0]) {\n                    case 'LT': //line To\n                        if (!filling) {\n                            context.beginPath();\n                            context.moveTo(oper[1], oper[2]);\n                        }\n                        context.lineTo(oper[3], oper[4]);\n                        context.strokeStyle = oper[5];\n                        context.stroke();\n                        currentPos = new Vector(oper[3], oper[4], 0);\n                        if (!filling) {\n                            context.closePath();\n                        }\n                        break;\n                    case 'MT': //move to\n                        context.moveTo(oper[3], oper[4]);\n                        currentPos = new Vector(oper[3], oper[4], 0);\n                        break;\n                    case 'BF': //begin fill\n                        context.beginPath();\n                        context.moveTo(oper[1], oper[2]);\n                        filling = true;\n                        break;\n                    case 'EF': //end fill\n                        context.fillStyle = oper[3];\n                        context.stroke();\n                        context.fill();\n                        context.closePath();\n                        filling = false;\n                        break;\n                    case 'FC': // fill color\n\t\t\t\t\t\tcontext.fillStyle = oper[1];\n                        break;\n                    case 'TC': // turtle color\n                        context.strokeStyle = oper[1];\n                        break;\n                    case 'PW': // Pen width\n                        context.lineWidth = oper[1];\n                        break;\n                    case 'DT': // Dot\n                        tmpColor = context.fillStyle;\n                        context.fillStyle = oper[2];\n                        size = oper[1];\n                        context.fillRect(oper[3] - size / 2, oper[4] - size / 2, size, size);\n                        context.fillStyle = tmpColor;\n                        break;\n                    case 'CI': // Circle\n                        if (!filling) {\n                            context.beginPath();\n                        }\n                        context.arc(oper[1], oper[2], oper[3], oper[4], oper[5], oper[6]);\n                        currentPos = new Vector(oper[1] + Math.cos(oper[5]) * oper[3], oper[2] + Math.sin(oper[5]) * oper[3], 0);\n                        context.stroke();\n                        if (!filling) {\n                            context.closePath();\n                        }\n                        break;\n                    case 'WT':\n                        // write\n                        if (context.font) {\n                            context.font = oper[2];\n                        }\n                        context.scale(1, -1);\n                        context.fillText(oper[1], oper[3], -oper[4]);\n                        context.scale(1, -1);\n                        break;\n                    case 'ST':\n                        // stamp\n                        t.drawturtle(oper[3], new Vector(oper[1], oper[2], 0));\n                        break;\n                    case 'HT': // hide turtle\n                        t.visible = false;\n                        break;\n                    case 'SH': // show turtle\n                        t.visible = true;\n                        break;\n                    case 'TT': // turn\n                        currentHead = oper[1];\n                        break;\n                    case 'CL': // clear\n                        clear_canvas(t.canvasID);\n                        t.clearPoint = i; // Different from reset that calls clear because it leaves the turtles where they are\n                        break;\n                    case 'DL':  // delay\n                        t.turtleCanvas.delay = oper[1];\n                        break;\n                    case 'SC': // speed change\n                        speed = oper[1];\n                        \n                        if (speed < 0) {\n                            t.turtleCanvas.delay = 0;\n                        } else {\n                            if (speed > 10) {\n                                speed = 10;\n                            }\n                            t.turtleCanvas.delay = (10 - speed % 11 + 1) * t.turtleCanvas.timeFactor; //10\n                        }\n\n                        //t.turtleCanvas.intervalId = clearInterval(t.turtleCanvas.intervalId);\n                        //t.turtleCanvas.intervalId = setInterval(render, t.turtleCanvas.delay)\n                        if (oper[2]) {\n                            t.turtleCanvas.setSegmentLength(oper[2]);\n                        }\n                        break;\n                    case 'NO':\n                        break;\n                    } //else {\n                        //console.log('unknown op: ' + oper[0]);\n                    //} // end of oper[0] test\n                } // end of if ts < render clock\n            }\n            // end of for\n            // console.log(TurtleGraphics.renderClock + \" / \" + t.aCount)\n            // console.log(\"------------------------------\")\n            t.aCount += incr;\n            if (t.visible) {\n                // draw the turtle\n                t.drawturtle(currentHead.toAngle(), currentPos); // just use currentHead\n            }\n        }\n        //if (t.aCount >= t.drawingEvents.length) {\n        if (TurtleGraphics.renderClock > TurtleGraphics.eventCount) {\n            // && allDone() ){\n            //  t.turtleCanvas.doneAnimating(t);\n            //  console.log(\"done animating\")\n            if (context.lastCanvas) {\n                context.lastCanvas.doneAnimating(t);\n            }\n        } else {\n            //t.turtleCanvas.intervalId = setTimeout(render, t.turtleCanvas.delay)\n            if (context.lastCanvas) {\n                context.lastCanvas.intervalId = setTimeout(render, context.lastCanvas.delay);\n            }\n        }\n    };\n    //  \n    //  Drawing Functions\n    //\n    // break a line into segments\n    // sp:  Vector of starting position\n    // ep:  Vector of ending position\n    // sl:  int length of segments\n    segmentLine = function (sp, ep, sL, pen) {\n        var head = ep.sub(sp).normalize(),\n            numSegs = Math.floor(ep.sub(sp).len() / sL),\n            res = [],\n            oldp = sp,\n            newp,\n            op = '',\n            i;\n        if (pen) {\n            op = 'LT';\n        } else {\n            op = 'MT';\n        }\n        for (i = 0; i < numSegs; i = i + 1) {\n            newp = oldp.linear(1, sL, head);\n            res.push([\n                op,\n                oldp[0],\n                oldp[1],\n                newp[0],\n                newp[1]\n            ]);\n            oldp = newp;\n        }\n        if (!(oldp[0] === ep[0] && oldp[1] === ep[1])) {\n            res.push([\n                op,\n                oldp[0],\n                oldp[1],\n                ep[0],\n                ep[1]\n            ]);\n        }\n        return res;\n    };\n\n    clear_canvas = function (canId) {\n        var ctx = document.getElementById(canId).getContext('2d');\n        //if (arguments.length >= 2) {\n        //    fillStyle = arguments[1];\n        //    fillRect(0, 0, canvas.width, canvas.height);\n        //}\n        ctx.clearRect(-ctx.canvas.width / 2, -ctx.canvas.height / 2, ctx.canvas.width, ctx.canvas.height);\n    };\n    //\n    // Define TurtleCanvas\n    // \n    function TurtleCanvas(options) {\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n        this.canvas = document.getElementById(this.canvasID);\n        this.context = this.canvas.getContext('2d');\n        this.canvas.style.display = 'block';\n        this.canvas.style.opacity = 1;\n        //$(this.canvas).fadeIn();\n        this.lineScale = 1;\n        this.xptscale = 1;\n        this.yptscale = 1;\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.setup(this.canvas.width, this.canvas.height);\n        TurtleGraphics.canvasInit = true;\n        this.tlist = [];\n        this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n        this.segmentLength = 10;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n        TurtleGraphics.canvasLib[this.canvasID] = this;\n    }\n    TurtleCanvas.prototype.setup = function (width, height) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n        this.lineScale = 1;\n        this.xptscale = 1;\n        this.yptscale = 1;\n        this.llx = -this.canvas.width / 2;\n        this.lly = -this.canvas.height / 2;\n        this.urx = this.canvas.width / 2;\n        this.ury = this.canvas.height / 2;\n        this.renderCounter = 1;\n        this.clearPoint = 0;\n        this.timeFactor = 5;\n        if (TurtleGraphics.defaults.animate) {\n            this.delay = 5 * this.timeFactor;\n        } else {\n            this.delay = 0;\n        }\n        if (TurtleGraphics.canvasInit === false) {\n            this.context.save();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2);\n            // move 0,0 to center.\n            this.context.scale(1, -1);\n            // scaling like this flips the y axis the right way.\n            TurtleGraphics.canvasInit = true;\n            TurtleGraphics.eventCount = 0;\n            TurtleGraphics.renderClock = 0;\n            TurtleGraphics.renderTime = 0; // RNL\n        } else {\n            this.context.restore();\n            this.context.translate(this.canvas.width / 2, this.canvas.height / 2);\n            // move 0,0 to center.\n            this.context.scale(1, -1);\n            // scaling like this flips the y axis the right way.\n            this.context.clearRect(-this.canvas.width / 2, -this.canvas.height / 2, this.canvas.width, this.canvas.height);\n        }\n    };\n    TurtleCanvas.prototype.addToCanvas = function (t) {\n        this.tlist.push(t);\n    };\n    TurtleCanvas.prototype.onCanvas = function (t) {\n        return this.tlist.indexOf(t) >= 0;\n    };\n    TurtleCanvas.prototype.isAnimating = function () {\n        return this.tlist.length > 0;\n    };\n    TurtleCanvas.prototype.startAnimating = function (t) {\n        if (!this.isAnimating()) {\n            this.intervalId = setTimeout(render, this.delay); //setInterval(render, this.delay);\n        }\n        if (!this.onCanvas(t)) {\n            //Added by RNL in case startAnimating is called after it's already been added\n            this.addToCanvas(t);\n        }\n\t\ttry {\n\t\t\tSk.isTurtleProgram = true;\n\t\t} catch (ReferenceEror) {\n\t\t}\n    };\n    TurtleCanvas.prototype.doneAnimating = function () {\n        var i;\n        this.tlist.splice(0, this.tlist.length);\n        clearTimeout(this.intervalId);\n        if (TurtleGraphics.doneDelegates) {\n            for (i = 0; i < TurtleGraphics.doneDelegates.length; i = i + 1) {\n                TurtleGraphics.doneDelegates[i]();\n            }\n        }\n    };\n    TurtleCanvas.prototype.cancelAnimation = function () {\n        var t;\n        if (this.intervalId) {\n            clearTimeout(this.intervalId);\n        }\n        for (t = 0; t < this.tlist.length; t = t + 1) {\n            this.tlist[t].aCount = this.tlist[t].drawingEvents.length - 1;\n        }\n        render();\n    };\n    TurtleCanvas.prototype.setSpeedDelay = function (s) {\n        // RNL\n        var df = 10 - s % 11 + 1;\n        this.delay = df * this.timeFactor; //RNL was 10;\n    };\n    TurtleCanvas.prototype.setDelay = function (d) {\n        this.delay = d;\n    };\n    TurtleCanvas.prototype.getDelay = function () {\n        //RNL\n        return this.delay;\n    };\n    TurtleCanvas.prototype.setCounter = function (s) {\n        if (!s || s <= 0) {\n            //Don't let this be less than 1\n            s = 1;\n        }\n        this.renderCounter = s;\n    };\n    TurtleCanvas.prototype.getCounter = function () {\n        return this.renderCounter;\n    };\n    TurtleCanvas.prototype.setworldcoordinates = function (llx, lly, urx, ury) {\n        this.context.restore();\n        this.context.scale(this.canvas.width / (urx - llx), -this.canvas.height / (ury - lly));\n        if (lly === 0) {\n            this.context.translate(-llx, lly - (ury - lly));\n        } else if (lly > 0) {\n            this.context.translate(-llx, -lly * 2);\n        } else {\n            this.context.translate(-llx, -ury);\n        }\n        var xlinescale = (urx - llx) / this.canvas.width,\n            ylinescale = (ury - lly) / this.canvas.height;\n        this.xptscale = xlinescale;\n        this.yptscale = ylinescale;\n        this.lineScale = Math.min(xlinescale, ylinescale);\n        this.context.save();\n        this.llx = llx;\n        this.lly = lly;\n        this.urx = urx;\n        this.ury = ury;\n    };\n    TurtleCanvas.prototype.window_width = function () {\n        return this.canvas.width;\n    };\n    TurtleCanvas.prototype.window_height = function () {\n        return this.canvas.height;\n    };\n    TurtleCanvas.prototype.bgcolor = function (c) {\n        this.background_color = c;\n        this.canvas.style.setProperty('background-color', c.v); //$(this.canvas).css(\"background-color\",c.v);\n    };\n    TurtleCanvas.prototype.setSegmentLength = function (s) {\n        this.segmentLength = s;\n    };\n    TurtleCanvas.prototype.getSegmentLength = function () {\n        return this.segmentLength;\n    };\n    // todo: if animating, this should be deferred until the proper time\n    TurtleCanvas.prototype.exitonclick = function () {\n        var canvas_id = this.canvasID,\n            theCanvas = this,\n            eventHandler = function () {\n                if (!theCanvas.isAnimating()) {\n                    if (TurtleGraphics.fadeOnExit) {\n                        //Let's this be configurable\n                        document.getElementById(canvas_id).style.display = 'none'; //$(\"#\"+canvas_id).hide();\n                    }\n                    document.getElementById(canvas_id).removeEventListener('click', eventHandler);\n                    //$(\"#\"+canvas_id).unbind('click');\n                    TurtleGraphics.canvasInit = false;\n                    delete TurtleGraphics.canvasLib[canvas_id];\n                }\n            };\n        this.canvas.addEventListener('click', eventHandler, false);\n    };\n    TurtleCanvas.prototype.turtles = function () {\n        return TurtleGraphics.turtleList;\n    };\n    TurtleCanvas.prototype.tracer = function (t, d) {\n        var i;\n        //New version NOT attached to a turtle (as per real turtle)\n        this.setCounter(t);\n        if (t === 0) {\n            for (i = 0; i < this.turtleList; i = i + 1) {\n                this.turtleList[i].animate = false;\n            }\n            this.cancelAnimation();\n        }\n        if (d !== undefined) {\n            this.setDelay(d);\n        }\n    };\n    // Constructor for Turtle objects\n    function Turtle(opt) {\n        this.initialize(opt);\n        TurtleGraphics.turtleList.push(this);\n    }\n    Turtle.prototype.go_home = function () {\n        // Put turtle in initial state\n        // turtle is headed to the right\n        // with location 0,0,0 in the middle of the canvas.\n        // x grows to the right\n        // y grows towards the top of the canvas\n        this.position = this.home;\n        this.context.moveTo(this.home[0], this.home[1]);\n        this.heading = new Vector([1, 0, 0]);\n        // to the right; in turtle space x+ direction\n        this.normal = new Vector([0, 0, -1]); // in z- direction\n    };\n    Turtle.prototype.initialize = function (opt) {\n        function turtleShapePoints() {\n            var pl = [\n                    [ 0, 16 ],\n                    [ -2, 14 ],\n                    [ -1, 10 ],\n                    [ -4, 7 ],\n                    [ -7, 9 ],\n                    [ -9, 8 ],\n                    [ -6, 5 ],\n                    [ -7, 1 ],\n                    [ -5, -3 ],\n                    [ -8, -6 ],\n                    [ -6, -8 ],\n                    [ -4, -5 ],\n                    [ 0, -7 ],\n                    [ 4, -5 ],\n                    [ 6, -8 ],\n                    [ 8, -6 ],\n                    [ 5, -3 ],\n                    [ 7, 1 ],\n                    [ 6, 5 ],\n                    [ 9, 8 ],\n                    [ 7, 9 ],\n                    [ 4, 7 ],\n                    [ 1, 10 ],\n                    [ 2, 14 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function defaultShapePoints() {\n            var pl = [\n                    [ -10, 0 ],\n                    [ 10, 0 ],\n                    [ 0, 10 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function circleShapePoints() {\n            var pl = [\n                    [ 10, 0 ],\n                    [ 9.51, 3.09 ],\n                    [ 8.09, 5.88 ],\n                    [ 5.88, 8.09 ],\n                    [ 3.09, 9.51 ],\n                    [ 0, 10 ],\n                    [ -3.09, 9.51 ],\n                    [ -5.88, 8.09 ],\n                    [ -8.09, 5.88 ],\n                    [ -9.51, 3.09 ],\n                    [ -10, 0 ],\n                    [ -9.51, -3.09 ],\n                    [ -8.09, -5.88 ],\n                    [ -5.88, -8.09 ],\n                    [ -3.09, -9.51 ],\n                    [ -0, -10 ],\n                    [ 3.09, -9.51 ],\n                    [ 5.88, -8.09 ],\n                    [ 8.09, -5.88 ],\n                    [ 9.51, -3.09 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function triangleShapePoints() {\n            var pl = [\n                    [ 10, -5.77 ],\n                    [ 0, 11.55 ],\n                    [ -10, -5.77 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function squareShapePoints() {\n            var pl = [\n                    [ 10, -10 ],\n                    [ 10, 10 ],\n                    [ -10, 10 ],\n                    [ -10, -10 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n\n        function classicShapePoints() {\n            var pl = [\n                    [ 0, 0 ],\n                    [ -5, -9 ],\n                    [ 0, -7 ],\n                    [ 5, -9 ]\n                ],\n                res = [],\n                p;\n            for (p = 0; p < pl.length; p = p + 1) {\n                res.push(new Vector(pl[p]));\n            }\n            return res;\n        }\n        \n        // Initialize the turtle.\n        var options = {}, ctx = null;\n        if (opt) {\n            options = opt;\n        }\n        this.canvasID = TurtleGraphics.defaults.canvasID;\n        if (options.canvasID) {\n            this.canvasID = options.canvasID;\n        }\n        this.context = document.getElementById(this.canvasID).getContext('2d');\n        this.animate = TurtleGraphics.defaults.animate;\n        ctx = this.context;\n        if (TurtleGraphics.canvasInit === false) {\n            // This is a workaround until I understand skulpt re-running better\n            // the downside is that this limits us to a single turtle...\n            ctx.save();\n            ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\n            // move 0,0 to center.\n            ctx.scale(1, -1);\n            // scaling like this flips the y axis the right way.\n            if (!TurtleGraphics.canvasLib[this.canvasID]) {\n                TurtleGraphics.canvasLib[this.canvasID] = new TurtleCanvas(options);\n            }\n            TurtleGraphics.canvasInit = true;\n        } else {\n            clear_canvas(this.canvasID);\n        }\n        this.turtleCanvas = TurtleGraphics.canvasLib[this.canvasID];\n        this.home = new Vector([0, 0, 0]);\n        this.visible = true;\n        this.shapeStore = {};\n        this.shapeStore.turtle = turtleShapePoints();\n        this.shapeStore.arrow = defaultShapePoints();\n        this.shapeStore.circle = circleShapePoints();\n        this.shapeStore.square = squareShapePoints();\n        this.shapeStore.triangle = triangleShapePoints();\n        this.shapeStore.blank = [new Vector(0, 0)];\n        this.shapeStore.classic = classicShapePoints();\n        this.currentShape = 'classic';\n        this.drawingEvents = [];\n        this.filling = false;\n        this.pen = true;\n        this.penStyle = 'black';\n        this.penWidth = 2;\n        this.fillStyle = 'black';\n        this.position = [];\n        this.heading = [];\n        this.normal = [];\n        this.go_home();\n        this.aCount = 0;\n        this.clearPoint = 0; // RNL for clear/clearScreen\n    };\n    Turtle.prototype.clean = function (color) {\n        // Clean the canvas\n        // Optional second argument is color\n        if (arguments.length >= 1) {\n            clear_canvas(this.canvasID, color);\n        } else {\n            clear_canvas(this.canvasID);\n        }\n        this.initialize();\n    };\n    Turtle.prototype.addDrawingEvent = function (eventList) {\n        TurtleGraphics.eventCount += 1;\n        eventList.push(TurtleGraphics.eventCount);\n        this.drawingEvents.push(eventList);\n    };\n    Turtle.prototype.draw_line = function (newposition) {\n        var ctx = this.context,\n            r,\n            s;\n        if (!this.animate) {\n            if (!this.filling) {\n                ctx.beginPath();\n                ctx.moveTo(this.position[0], this.position[1]);\n            }\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n            ctx.lineWidth = this.get_pen_width();\n            ctx.strokeStyle = this.penStyle;\n            ctx.lineTo(newposition[0], newposition[1]);\n\t\t\t//ctx.moveTo(newposition[0], newposition[1]);\n\t\t\tthis.position = newposition;\n            ctx.stroke();\n            if (!this.filling) {\n                ctx.closePath();\n            }\n        } else {\n            r = segmentLine(this.position, newposition, this.turtleCanvas.getSegmentLength(), this.pen);\n            for (s = 0; s < r.length; s = s + 1) {\n                r[s].push(this.penStyle);\n                this.addDrawingEvent(r[s]);\n            }\n            if (!this.turtleCanvas.isAnimating()) {\n                this.turtleCanvas.startAnimating(this);\n            } else {\n                if (!this.turtleCanvas.onCanvas(this)) {\n                    this.turtleCanvas.addToCanvas(this);\n                }\n            }\n        }\n    };\n    Turtle.prototype.forward = function (d) {\n        var newposition = this.position.linear(1, d, this.heading);\n        this.goto(newposition);\n    };\n    Turtle.prototype.backward = function (d) {\n        this.forward(-d);\n    };\n    //This is an internal function that sets the position without doing any drawing\n    Turtle.prototype.teleport_to = function (nx, ny) {\n        var newposition;\n        if (nx instanceof Vector) {\n            newposition = nx;\n        } else {\n            newposition = new Vector([nx, ny, 0]);\n        }\n        this.context.moveTo(newposition[0], newposition[1]);\n        this.position = newposition;\n    };\n    Turtle.prototype.goto = function (nx, ny) {\n        var newposition, r, s;\n        if (nx instanceof Vector) {\n            newposition = nx;\n        } else {\n            newposition = new Vector([nx, ny, 0]);\n        }\n\t\tif (this.pen) {\n            this.draw_line(newposition);\n        } else {\n            if (!this.animate) {\n                this.context.moveTo(newposition[0], newposition[1]);\n            } else {\n                r = segmentLine(this.position, newposition, this.turtleCanvas.getSegmentLength(), this.pen);\n                for (s = 0; s < r.length; s = s + 1) {\n                    this.addDrawingEvent(r[s]);\n                }\n                if (!this.turtleCanvas.isAnimating()) {\n                    this.turtleCanvas.startAnimating(this);\n                } else {\n                    if (!this.turtleCanvas.onCanvas(this)) {\n                        this.turtleCanvas.addToCanvas(this);\n                    }\n                }\n            }\n        }\n        this.position = newposition;\n    };\n    Turtle.prototype.delay = function (d) {\n        // RNL\n        if (d !== null) {\n            if (d < 0) {\n                d = -d;\n            }\n            if (!this.animate) {\n                this.turtleCanvas.setDelay(d);\n            } else {\n                this.turtleCanvas.setDelay(d);\n                this.addDrawingEvent([ 'DL', d ]);\n                this.addDrawingEvent(['NO']);\n            }\n        }\n        return this.turtleCanvas.getDelay();\n    };\n    Turtle.prototype.speed = function (s, t) {\n        if (s > 0 && !this.animate) {\n            this.animate = true;\n            this.turtleCanvas.setSpeedDelay(s);\n        } else if (s === 0 && !this.animate) {\n            this.turtleCanvas.setSpeedDelay(s);\n        } else {\n            //          this.animate = false;\n            //          this.turtleCanvas.cancelAnimation();\n            this.addDrawingEvent([ 'SC', s, t ]);\n            this.addDrawingEvent(['NO']);\n        }\n        if (t) {\n            this.turtleCanvas.setSegmentLength(t); // set the number of units to divide a segment into\n        } else {\n            this.turtleCanvas.setSegmentLength(10);\n        }\n    };\n    Turtle.prototype.tracer = function (t, d) {\n        this.turtleCanvas.setCounter(t);\n        if (t === 0) {\n            this.animate = false;\n            this.turtleCanvas.cancelAnimation();\n        }\n        if (d !== undefined) {\n            this.turtleCanvas.setDelay(d);\n        }\n    };\n    Turtle.prototype.getRenderCounter = function () {\n        return this.turtleCanvas.getCounter();\n    };\n    Turtle.prototype.turn = function (phi) {\n        var alpha = phi * Degree2Rad,\n            left = this.normal.cross(this.heading),\n            newheading = this.heading.rotateNormal(left, alpha);\n        this.heading = newheading;\n        if (this.animate) {\n            this.addDrawingEvent([ 'TT', this.heading ]);\n        }\n    };\n    Turtle.prototype.right = Turtle.prototype.turn;\n    Turtle.prototype.left = function (phi) {\n        this.turn(-phi);\n    };\n    Turtle.prototype.get_heading = function () {\n        if (TurtleGraphics.defaults.degrees) {\n            return this.heading.toAngle();\n        }\n        return this.heading;\n    };\n    Turtle.prototype.get_position = function () {\n        return this.position;\n    };\n    Turtle.prototype.getx = function () {\n        return this.position[0];\n    };\n    Turtle.prototype.gety = function () {\n        return this.position[1];\n    };\n    Turtle.prototype.set_heading = function (newhead) {\n        if ((typeof newhead).toLowerCase() === 'number') {\n            this.heading = Vector.angle2vec(newhead);\n        } else {\n            this.heading = newhead;\n        }\n    };\n    Turtle.prototype.towards = function (to, y) {\n        // set heading vector to point towards another point.\n        if ((typeof to).toLowerCase() === 'number') {\n            to = new Vector(to, y, 0);\n        } else if (!(to instanceof Vector)) {\n            to = new Vector(to);\n        }\n        var res = to.sub(this.position);\n        res = res.normalize();\n        if (TurtleGraphics.defaults.degrees) {\n            return res.toAngle();\n        }\n        return res;\n    };\n    Turtle.prototype.distance = function (to, y) {\n        if ((typeof to).toLowerCase() === 'number') {\n            to = new Vector(to, y, 0);\n        }\n        return this.position.sub(new Vector(to)).len();\n    };\n    Turtle.prototype.dot = function (psize, pcolor) {\n        var size = 2,\n            ctx = this.context,\n            curPenStyle = this.penStyle,\n\t\t\tcurFillStyle = this.fillStyle;\n\n        if (arguments.length >= 1) {\n            size = psize;\n        }\n        size = size * this.turtleCanvas.lineScale;\n\n        if (!this.animate) {\n\t\t\tif (pcolor) {\n\t\t\t\tctx.fillStyle = pcolor;\n\t\t\t\tctx.strokeStyle = pcolor;\n\t\t\t}\n            ctx.fillRect(this.position[0] - size / 2, this.position[1] - size / 2, size, size);\n\t\t\tif (pcolor) {\n\t\t\t\tctx.fillStyle = curFillStyle;\n\t\t\t\tctx.strokeStyle = curPenStyle;\n\t\t\t}\n        } else {\n            this.addDrawingEvent([\n                'DT',\n                size,\n                pcolor || ctx.strokeStyle,\n                this.position[0],\n                this.position[1]\n            ]);\n        }\n    };\n    Turtle.prototype.circle = function (radius, extent) {\n        var arcLen, segLen, extentPart, extentLeft;\n        if (extent === undefined) {\n            extent = 360;\n        }\n        if (this.animate) {\n            arcLen = Math.abs(radius * Math.PI * 2 * extent / 360);\n            segLen = this.turtleCanvas.getSegmentLength();\n            if (arcLen <= segLen) {\n                this.arc(radius, extent);\n            } else {\n                //Break the arc into segments for animation\n                extentPart = segLen / arcLen * extent;\n                extentLeft = extent;\n                while (Math.abs(extentLeft) > Math.abs(extentPart)) {\n                    this.arc(radius, extentPart);\n                    extentLeft = extentLeft - extentPart;\n                }\n                if (Math.abs(extentLeft) > 0.01) {\n                    this.arc(radius, extentLeft);\n                }\n            }\n            if (!this.turtleCanvas.isAnimating()) {\n                this.turtleCanvas.startAnimating(this);\n            } else {\n                if (!this.turtleCanvas.onCanvas(this)) {\n                    this.turtleCanvas.addToCanvas(this);\n                }\n            }\n        } else {\n            this.arc(radius, extent);\n        }\n    };\n    Turtle.prototype.arc = function (radius, extent) {\n        //Figure out where the turtle is and which way it's facing\n        var turtleHeading = this.get_heading(),\n            tx = this.position[0],\n            ty = this.position[1],\n            //Figure out the circle center\n            cx = tx + radius * Math.cos((turtleHeading + 90) * Degree2Rad),\n            cy = ty + radius * Math.sin((turtleHeading + 90) * Degree2Rad),\n            //Canvas arc angles go CLOCKWISE, not COUNTERCLOCKWISE like Turtle\n            //Figure out our arc angles\n            startAngleDeg,\n            endAngleDeg,\n            startAngle,\n            endAngle,\n            turtleArc,\n            newTurtleHeading,\n            nx,\n            ny;\n\n        if (radius >= 0) {\n            startAngleDeg = turtleHeading - 90;\n        } else {\n            startAngleDeg = turtleHeading + 90;\n        }\n\n        if (extent) {\n            if (radius >= 0) {\n                endAngleDeg = startAngleDeg + extent;\n            } else {\n                endAngleDeg = startAngleDeg - extent;\n            }\n        } else {\n            if (radius >= 0) {\n                endAngleDeg = startAngleDeg + 360;\n            } else {\n                endAngleDeg = startAngleDeg - 360;\n            }\n        }\n        //Canvas angles are opposite\n        startAngleDeg = 360 - startAngleDeg;\n        endAngleDeg = 360 - endAngleDeg;\n        //Becuase the y axis has been flipped in HTML5 Canvas with a tanslation, we need to adjust the angles\n        startAngleDeg = -startAngleDeg;\n        endAngleDeg = -endAngleDeg;\n        //Convert to radians\n        startAngle = startAngleDeg * Degree2Rad;\n        endAngle = endAngleDeg * Degree2Rad;\n        //Do the drawing\n        if (!this.animate) {\n            if (!this.filling) {\n                this.context.beginPath();\n            }\n            this.context.arc(cx, cy, Math.abs(radius), startAngle, endAngle, radius * extent <= 0);\n            this.context.stroke();\n            if (!this.filling) {\n                this.context.closePath();\n            }\n        } else {\n            this.addDrawingEvent([\n                'CI',\n                cx,\n                cy,\n                Math.abs(radius),\n                startAngle,\n                endAngle,\n                radius * extent <= 0\n            ]);\n        }\n        //Move the turtle only if we have to\n        if (extent && extent % 360 !== 0) {\n            if (radius >= 0) {\n                turtleArc = extent;\n            } else {\n                turtleArc = -extent;\n            }\n            newTurtleHeading = (turtleHeading + turtleArc) % 360;\n            if (newTurtleHeading < 0) {\n                newTurtleHeading = newTurtleHeading + 360;\n            }\n            nx = cx + radius * Math.cos((newTurtleHeading - 90) * Degree2Rad);\n            ny = cy + radius * Math.sin((newTurtleHeading - 90) * Degree2Rad);\n            //y coord is inverted in turtle\n            //Move it internally\n            this.set_heading(newTurtleHeading);\n            this.teleport_to(nx, ny);\n            //If we're animating the turtle, move it on the screen\n            if (this.animate) {\n                this.addDrawingEvent([\n                    'TT',\n                    this.heading\n                ]);\n            }\n        }\n    };\n    Turtle.prototype.write = function (theText, /*move, align, */font) {\n        if (!this.animate) {\n            if (font) {\n                this.context.font = font.v;\n            }\n            this.context.scale(1, -1);\n            this.context.fillText(theText, this.position[0], -this.position[1]);\n            this.context.scale(1, -1);\n        } else {\n            var fontspec;\n            if (font) {\n                fontspec = font.v;\n            }\n            this.addDrawingEvent([\n                'WT',\n                theText,\n                fontspec,\n                this.position[0],\n                this.position[1]\n            ]);\n        }\n    };\n    Turtle.prototype.setworldcoordinates = function (llx, lly, urx, ury) {\n        this.turtleCanvas.setworldcoordinates(llx, lly, urx, ury);\n    };\n    //\n    // Pen and Style functions\n    //\n    Turtle.prototype.pen_down = function () {\n        this.pen = true;\n    };\n    Turtle.prototype.down = Turtle.prototype.pen_down;\n    Turtle.prototype.pen_up = function () {\n        this.pen = false;\n    };\n    Turtle.prototype.up = Turtle.prototype.pen_up;\n    Turtle.prototype.get_pen = function () {\n        return this.pen;\n    };\n    Turtle.prototype.set_pen_width = function (w) {\n        if (this.animate) {\n            this.addDrawingEvent([\n                'PW',\n                w * this.turtleCanvas.lineScale\n            ]);\n        } else {\n            this.penWidth = w;\n        }\n    };\n    Turtle.prototype.get_pen_width = function () {\n        return this.penWidth * this.turtleCanvas.lineScale;\n    };\n    Turtle.prototype.set_pen_color = function (c, g, b) {\n        if (typeof c === 'string') {\n            this.penStyle = c;\n        } else {\n            var rs, gs, bs, c0, c1, c2;\n            if (Array.isArray(c)) {\n                c0 = c[0];\n                c1 = c[1];\n                c2 = c[2];\n            } else {\n                c0 = c;\n                c1 = g;\n                c2 = b;\n            }\n            rs = Math.abs(c0).toString(16);\n            gs = Math.abs(c1).toString(16);\n            bs = Math.abs(c2).toString(16);\n            while (rs.length < 2) {\n                rs = '0' + rs;\n            }\n            while (gs.length < 2) {\n                gs = '0' + gs;\n            }\n            while (bs.length < 2) {\n                bs = '0' + bs;\n            }\n            c = '#' + rs + gs + bs;\n            this.penStyle = c;\n        }\n        this.context.strokeStyle = c;\n        if (this.animate) {\n            this.addDrawingEvent([\n                'TC',\n                c\n            ]);\n        }\n    };\n    Turtle.prototype.set_fill_color = function (c, g, b) {\n        if (typeof c === 'string') {\n            this.fillStyle = c;\n        } else {\n            var rs, gs, bs, c0, c1, c2;\n            if (Array.isArray(c)) {\n                c0 = c[0];\n                c1 = c[1];\n                c2 = c[2];\n            } else {\n                c0 = c;\n                c1 = g;\n                c2 = b;\n            }\n            rs = Math.abs(c0).toString(16);\n            gs = Math.abs(c1).toString(16);\n            bs = Math.abs(c2).toString(16);\n            while (rs.length < 2) {\n                rs = '0' + rs;\n            }\n            while (gs.length < 2) {\n                gs = '0' + gs;\n            }\n            while (bs.length < 2) {\n                bs = '0' + bs;\n            }\n            c = '#' + rs + gs + bs;\n            this.fillStyle = c;\n        }\n        this.context.fillStyle = c;\n        if (this.animate) {\n            this.addDrawingEvent([\n                'FC',\n                c\n            ]);\n        }\n    };\n    Turtle.prototype.begin_fill = function () {\n        if (!this.animate) {\n            this.filling = true;\n            this.context.beginPath();\n            this.context.moveTo(this.position[0], this.position[1]);\n        } else {\n            this.addDrawingEvent([\n                'BF',\n                this.position[0],\n                this.position[1]\n            ]);\n        }\n    };\n    Turtle.prototype.end_fill = function () {\n        if (!this.animate) {\n            this.context.stroke();\n            this.context.fill();\n            this.context.closePath();\n            this.filling = false;\n        } else {\n            this.addDrawingEvent([\n                'EF',\n                this.position[0],\n                this.position[1],\n                this.fillStyle\n            ]);\n        }\n    };\n    Turtle.prototype.showturtle = function () {\n        if (this.animate) {\n            this.addDrawingEvent(['SH']);\n        }\n        this.visible = true;\n    };\n    Turtle.prototype.hideturtle = function () {\n        if (this.animate) {\n            this.addDrawingEvent(['HT']);\n        }\n        this.visible = false;\n    };\n    Turtle.prototype.isvisible = function () {\n        return this.visible;\n    };\n    // \n    // Appearance\n    //\n    Turtle.prototype.shape = function (s) {\n        if (this.shapeStore[s]) {\n            this.currentShape = s;\n        }\n    };\n    Turtle.prototype.drawturtle = function (pHeading, pos) {\n        var rtPoints = [],\n            plist = this.shapeStore[this.currentShape],\n            head,\n            p,\n            i;\n\n        if (pHeading !== undefined) {\n            head = pHeading - 90;\n        } else {\n            head = this.heading.toAngle() - 90;\n        }\n\n        if (!pos) {\n            pos = this.position;\n        }\n        \n        for (p = 0; p < plist.length; p = p + 1) {\n            rtPoints.push(plist[p]\n                          .scale(this.turtleCanvas.xptscale, this.turtleCanvas.yptscale)\n                          .rotate(head)\n                          .add(pos));\n        }\n        this.context.beginPath();\n        this.context.moveTo(rtPoints[0][0], rtPoints[0][1]);\n        for (i = 1; i < rtPoints.length; i = i + 1) {\n            this.context.lineTo(rtPoints[i][0], rtPoints[i][1]);\n        }\n        this.context.closePath();\n        this.context.stroke();\n        if (this.fillStyle) {\n            this.context.fill();\n        }\n    };\n    Turtle.prototype.stamp = function () {\n        // either call drawTurtle or just add a DT with current position and heading to the drawingEvents list.\n        if (this.animate) {\n            this.addDrawingEvent([\n                'ST',\n                this.position[0],\n                this.position[1],\n                this.heading.toAngle()\n            ]);\n        } else {\n            this.drawturtle();\n        }\n    };\n    Turtle.prototype.clear = function () {\n        if (this.animate) {\n            this.addDrawingEvent(['CL']);\n        } else {\n\t\t\tclear_canvas(this.canvasID);\n\t\t\tthis.penStyle = 'black';\n\t\t\tthis.penWidth = 2;\n\t\t\tthis.fillStyle = 'black';\n        }\n    };\n    TurtleGraphics.turtleList = [];\n    TurtleGraphics.Turtle = Turtle;\n    TurtleGraphics.TurtleCanvas = TurtleCanvas;\n    TurtleGraphics.canvasLib = {};\n    TurtleGraphics.clear_canvas = clear_canvas;\n    TurtleGraphics.Vector = Vector;\n    TurtleGraphics.canvasInit = false;\n    TurtleGraphics.eventCount = 0;\n    TurtleGraphics.renderClock = 0;\n    TurtleGraphics.renderTime = 0; // RNL\n}());\n//\n// Wrapper around the Turtle Module starts here.\n//\nvar $builtinmodule = function (name) {\n    'use strict';\n    var mod = {},\n\t\tinitializeTurtlegraphics = function() {\n\t\t\tif (!TurtleGraphics) { TurtleGraphics = {}; }\n\t\t\tif (!TurtleGraphics.defaults) { \n\t\t\t\tTurtleGraphics.defaults = { \n\t\t\t\t\tanimate: true,\n\t\t\t\t\tcanvasID: Sk.canvas,\n\t\t\t\t\tdegrees: true\n\t\t\t\t}\n\t\t\t} else if (Sk.canvas) {\n\t\t\t\tTurtleGraphics.defaults.canvasID = Sk.canvas;\n\t\t\t}\n\t\t\tif (!TurtleGraphics.doneDelegates) { TurtleGraphics.doneDelegates = []; }\n\t\t},\n\t\tremoveDisabled = function () {\n\t\t\tif (Sk.runButton) {\n\t\t\t\tSk.runButton.removeAttribute('disabled');\n\t\t\t}\n\t\t},\n        checkArgs = function (expected, actual, func) {\n            if (actual !== expected) {\n                throw new Sk.builtin.TypeError(func + ' takes exactly ' + expected + ' positional argument (' + actual + ' given)');\n            }\n        },\n        turtle = function ($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function (self) {\n\t\t\t\tinitializeTurtlegraphics();\n\t\t\t\tif (TurtleGraphics.doneDelegates.indexOf(removeDisabled) === -1){\n\t\t\t\t\tTurtleGraphics.doneDelegates.push(removeDisabled);\n\t\t\t\t}\n                self.theTurtle = new TurtleGraphics.Turtle();\n            });\n            //\n            // Turtle Motion\n            //\n            //\n            // Move and Draw\n            //\n            $loc.forward = new Sk.builtin.func(function (self, dist) {\n                dist = Sk.builtin.asnum$(dist);\n                checkArgs(2, arguments.length, 'forward()');\n                self.theTurtle.forward(dist);\n            });\n            $loc.fd = $loc.forward;\n            $loc.backward = new Sk.builtin.func(function (self, dist) {\n                dist = Sk.builtin.asnum$(dist);\n                checkArgs(2, arguments.length, 'backward()');\n                self.theTurtle.forward(-dist);\n            });\n            $loc.back = $loc.backward;\n            $loc.bk = $loc.backward;\n            $loc.right = new Sk.builtin.func(function (self, angle) {\n                angle = Sk.builtin.asnum$(angle);\n                checkArgs(2, arguments.length, 'right()');\n                self.theTurtle.turn(angle);\n            });\n            $loc.rt = $loc.right;\n            $loc.left = new Sk.builtin.func(function (self, angle) {\n                angle = Sk.builtin.asnum$(angle);\n                checkArgs(2, arguments.length, 'left()');\n                self.theTurtle.turn(-angle);\n            });\n            $loc.lt = $loc.left;\n            $loc.goto_$rw$ = new Sk.builtin.func(function (self, nx, ny) {\n                nx = Sk.builtin.asnum$(nx);\n                ny = Sk.builtin.asnum$(ny);\n                checkArgs(3, arguments.length, 'goto()');\n                self.theTurtle.goto(nx, ny);\n            });\n            $loc.setposition = new Sk.builtin.func(function (self, nx, ny) {\n                nx = Sk.builtin.asnum$(nx);\n                ny = Sk.builtin.asnum$(ny);\n                checkArgs(3, arguments.length, 'setposition()');\n                self.theTurtle.up();\n                self.theTurtle.goto(nx, ny);\n                self.theTurtle.down();\n            });\n            $loc.setpos = $loc.setposition;\n            $loc.setx = new Sk.builtin.func(function (self, nx) {\n                nx = Sk.builtin.asnum$(nx);\n                checkArgs(2, arguments.length, 'setx()');\n                self.theTurtle.goto(nx, self.theTurtle.GetY());\n            });\n            $loc.sety = new Sk.builtin.func(function (self, ny) {\n                ny = Sk.builtin.asnum$(ny);\n                checkArgs(2, arguments.length, 'sety()');\n                self.theTurtle.goto(self.theTurtle.GetX(), ny);\n            });\n            $loc.setheading = new Sk.builtin.func(function (self, newhead) {\n                newhead = Sk.builtin.asnum$(newhead);\n                checkArgs(2, arguments.length, 'setheading()');\n                return self.theTurtle.set_heading(newhead);\n            });\n            $loc.seth = $loc.setheading;\n            $loc.home = new Sk.builtin.func(function (self) {\n                self.theTurtle.go_home();\n            });\n            $loc.dot = new Sk.builtin.func(function (self, size, color) {\n                size = Sk.builtin.asnum$(size);\n                size = size || 1;\n                if (color) {\n                    color = color.v || self.theTurtle.penStyle;\n                }\n                self.theTurtle.dot(size, color);\n            });\n            $loc.circle = new Sk.builtin.func(function (self, radius, extent) {\n                radius = Sk.builtin.asnum$(radius);\n                extent = Sk.builtin.asnum$(extent);\n                self.theTurtle.circle(radius, extent);\n            });\n            $loc.delay = new Sk.builtin.func(function (self, d) {\n                d = Sk.builtin.asnum$(d);\n                return self.theTurtle.delay(d);\n            });\n            $loc.speed = new Sk.builtin.func(function (self, s, t) {\n                s = Sk.builtin.asnum$(s);\n                t = Sk.builtin.asnum$(t);\n                self.theTurtle.speed(s, t);\n            });\n            $loc.tracer = new Sk.builtin.func(function (self, t, d) {\n                t = Sk.builtin.asnum$(t);\n                d = Sk.builtin.asnum$(d);\n                self.theTurtle.tracer(t, d);\n            });\n            $loc.update = new Sk.builtin.func(function (self) {});\n            // todo:  stamp, clearstamp, clearstamps, undo, speed\n            //\n            // Tell Turtle's state\n            //\n            $loc.heading = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'heading()');\n                return Sk.builtin.assk$(self.theTurtle.get_heading(), Sk.builtin.nmber.float$);\n            });\n            $loc.position = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'position()');\n                var res = self.theTurtle.get_position(),\n                    x = new Sk.builtin.tuple([\n                        Sk.builtin.assk$(res[0], Sk.builtin.nmber.float$),\n                        Sk.builtin.assk$(res[1], Sk.builtin.nmber.float$)\n                    ]);\n                return x;\n            });\n            $loc.pos = $loc.position;\n            $loc.xcor = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'xcor()');\n                var res = self.theTurtle.getx();\n                return Sk.builtin.assk$(res, Sk.builtin.nmber.float$);\n            });\n            $loc.ycor = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'ycor()');\n                var res = self.theTurtle.gety();\n                return Sk.builtin.assk$(res, Sk.builtin.nmber.float$);\n            });\n            $loc.towards = new Sk.builtin.func(function (self, tx, ty) {\n                tx = Sk.builtin.asnum$(tx);\n                ty = Sk.builtin.asnum$(ty);\n                if ((typeof tx).toLowerCase() === 'number') {\n                    tx = [ tx, ty, 0 ];\n                } else {\n                    tx = [\n                        Sk.builtin.asnum$(tx.theTurtle.getx()),\n                        Sk.builtin.asnum$(tx.theTurtle.gety()),\n                        Sk.builtin.asnum$(0)\n                    ];\n                }\n                return Sk.builtin.assk$(self.theTurtle.towards(tx), Sk.builtin.nmber.float$);\n            });\n            // tx can be either a number or a vector position.\n            // tx can not be a turtle at this time as multiple turtles have not been implemented yet.\n            $loc.distance = new Sk.builtin.func(function (self, tx, ty) {\n                tx = Sk.builtin.asnum$(tx);\n                ty = Sk.builtin.asnum$(ty);\n                if ((typeof tx).toLowerCase() === 'number') {\n                    tx = [\n                        tx,\n                        ty,\n                        0\n                    ];\n                } else {\n                    tx = [\n                        tx.theTurtle.getx(),\n                        tx.theTurtle.gety(),\n                        0\n                    ];\n                }\n                return Sk.builtin.assk$(self.theTurtle.distance(tx), Sk.builtin.nmber.float$);\n            });\n            //\n            // Setting and Measurement\n            //\n            // todo:  degrees and radians...\n            //\n            // Pen Control\n            //\n            //\n            // Drawing State\n            //\n            $loc.up = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'up()');\n                self.theTurtle.pen_up();\n            });\n            $loc.penup = $loc.up;\n            $loc.pu = $loc.up;\n            $loc.down = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'down()');\n                self.theTurtle.pen_down();\n            });\n            $loc.pendown = $loc.down;\n            $loc.pd = $loc.down;\n            $loc.width = new Sk.builtin.func(function (self, w) {\n                w = Sk.builtin.asnum$(w);\n                checkArgs(2, arguments.length, 'width()');\n                self.theTurtle.set_pen_width(w);\n            });\n            $loc.pensize = $loc.width;\n            $loc.isdown = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'isdown()');\n                return self.theTurtle.get_pen();\n            });\n            // todo:  pen  -- return a dictionary full of pen stuff\n            //\n            // Color Control\n            //\n            $loc.fillcolor = new Sk.builtin.func(function (self, color, green, blue) {\n                if (color) {\n                    if (blue) {\n                        color = Sk.builtin.asnum$(color);\n                        green = Sk.builtin.asnum$(green);\n                        blue = Sk.builtin.asnum$(blue);\n                        self.theTurtle.set_fill_color(color, green, blue);\n                    } else {\n                        color = color.v || self.theTurtle.context.fillStyle;\n                        self.theTurtle.set_fill_color(color);\n                    }\n                } else {\n                    return self.theTurtle.fillStyle;\n                }\n            });\n            $loc.pencolor = new Sk.builtin.func(function (self, color, green, blue) {\n                if (color) {\n                    if (blue) {\n                        color = Sk.builtin.asnum$(color);\n                        green = Sk.builtin.asnum$(green);\n                        blue = Sk.builtin.asnum$(blue);\n                        self.theTurtle.set_pen_color(color, green, blue);\n                    } else {\n                        color = color.v || self.theTurtle.context.fillStyle;\n                        self.theTurtle.set_pen_color(color);\n                    }\n                } else {\n                    return self.theTurtle.penStyle;\n                }\n            });\n            $loc.color = new Sk.builtin.func(function (self, color, green, blue) {\n                if (color) {\n                    if (blue) {\n                        color = Sk.builtin.asnum$(color);\n                        green = Sk.builtin.asnum$(green);\n                        blue = Sk.builtin.asnum$(blue);\n                        self.theTurtle.set_pen_color(color, green, blue);\n                        self.theTurtle.set_fill_color(color, green, blue);\n                    } else {\n                        color = color.v || self.theTurtle.context.fillStyle;\n                        self.theTurtle.set_pen_color(color);\n                        self.theTurtle.set_fill_color(color);\n                    }\n                } else {\n                    return [\n                        self.theTurtle.penStyle,\n                        self.theTurtle.fillStyle\n                    ];\n                }\n            });\n            //\n            //  Filling\n            //\n            $loc.begin_fill = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'begin_fill()');\n                self.theTurtle.begin_fill();\n            });\n            $loc.end_fill = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'end_fill()');\n                self.theTurtle.end_fill();\n            });\n            $loc.fill = new Sk.builtin.func(function (self, fillt) {\n                if (fillt === undefined) {\n                    return self.theTurtle.filling;\n                }\n                if (fillt) {\n                    self.theTurtle.begin_fill();\n                } else {\n                    self.theTurtle.end_fill();\n                }\n            });\n            //\n            // More drawing control\n            //\n            $loc.reset = new Sk.builtin.func(function (self) {\n                self.theTurtle.clean();\n            });\n            $loc.showturtle = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'showturtle()');\n                self.theTurtle.showturtle();\n            });\n            $loc.st = $loc.showturtle;\n            $loc.hideturtle = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'hideturtle()');\n                self.theTurtle.hideturtle();\n            });\n            $loc.ht = $loc.hideturtle;\n            $loc.isvisible = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'isvisible()');\n                self.theTurtle.isvisible();\n            });\n            $loc.stamp = new Sk.builtin.func(function (self) {\n                checkArgs(1, arguments.length, 'stamp()');\n                self.theTurtle.stamp();\n            });\n            $loc.shape = new Sk.builtin.func(function (self, s) {\n                checkArgs(2, arguments.length, 'shape()');\n                self.theTurtle.shape(s.v);\n            });\n            //todo the move, align, and font parameters should be kwargs...\n            $loc.write = new Sk.builtin.func(function (self, mystr, move, align, font) {\n                self.theTurtle.write(mystr.v, /*move, align, */font);\n            });\n            //todo clean  -- again multiple turtles\n            $loc.setworldcoordinates = new Sk.builtin.func(function (self, llx, lly, urx, ury) {\n                llx = Sk.builtin.asnum$(llx);\n                lly = Sk.builtin.asnum$(lly);\n                urx = Sk.builtin.asnum$(urx);\n                ury = Sk.builtin.asnum$(ury);\n                self.theTurtle.setworldcoordinates(llx, lly, urx, ury);\n            });\n            //Added by RNL\n            $loc.clear = new Sk.builtin.func(function (self) {\n                self.theTurtle.clear();\n            });\n        },\n        screen = function ($gbl, $loc) {\n            $loc.__init__ = new Sk.builtin.func(function (self) {\n\t\t\t\tinitializeTurtlegraphics();\n                var currentCanvas = TurtleGraphics.canvasLib[TurtleGraphics.defaults.canvasID];\n                if (currentCanvas === undefined) {\n                    self.theScreen = new TurtleGraphics.TurtleCanvas(TurtleGraphics.defaults);\n                } else {\n                    self.theScreen = currentCanvas;\n                }\n            });\n            $loc.bgcolor = new Sk.builtin.func(function (self, c) {\n                self.theScreen.bgcolor(c);\n            });\n            $loc.setworldcoordinates = new Sk.builtin.func(function (self, llx, lly, urx, ury) {\n                llx = Sk.builtin.asnum$(llx);\n                lly = Sk.builtin.asnum$(lly);\n                urx = Sk.builtin.asnum$(urx);\n                ury = Sk.builtin.asnum$(ury);\n                self.theScreen.setworldcoordinates(llx, lly, urx, ury);\n            });\n            $loc.exitonclick = new Sk.builtin.func(function (self) {\n                self.theScreen.exitonclick();\n            });\n            $loc.title = new Sk.builtin.func(function (self, titlestring) {});\n            $loc.window_width = new Sk.builtin.func(function (self) {\n                return Sk.builtin.assk$(self.theScreen.window_width(), Sk.builtin.nmber.int$);\n            });\n            $loc.window_height = new Sk.builtin.func(function (self) {\n                return Sk.builtin.assk$(self.theScreen.window_height(), Sk.builtin.nmber.int$);\n            });\n            $loc.turtles = new Sk.builtin.func(function (self) {\n                return self.theScreen.turtles();\n            });\n            $loc.colormode = new Sk.builtin.func(function (self) {});\n            //        $loc.clear = new Sk.builtin.func(function(self) {\n            //\n            //        });\n            var myfunc = function (self, width, height, startx, starty) {\n                width = Sk.builtin.asnum$(width);\n                height = Sk.builtin.asnum$(height);\n                self.theScreen.setup(width, height);\n            };\n            // this should allow for named parameters\n            myfunc.co_varnames = [\n                'self',\n                'width',\n                'height',\n                'startx',\n                'starty'\n            ];\n            myfunc.$defaults = [\n                null,\n                500,\n                500,\n                0,\n                0\n            ];\n            $loc.setup = new Sk.builtin.func(myfunc);\n        };\n    // First we create an object, this will end up being the class\n    // class\n    Sk.tg = TurtleGraphics;\n    mod.Turtle = Sk.misceval.buildClass(mod, turtle, 'Turtle', []);\n    mod.Screen = Sk.misceval.buildClass(mod, screen, 'Screen', []);\n    mod.tracer = new Sk.builtin.func(function (t, d) {\n        var i;\n        t = Sk.builtin.asnum$(t);\n        d = Sk.builtin.asnum$(d);\n        for (i = 0; i < Sk.tg.canvasLib.length; i = i + 1) {\n            Sk.tg.canvasLib[i].tracer(t, d);\n        }\n    });\n    mod.update = new Sk.builtin.func(function (self) {});\n    return mod;\n};","src/lib/webgl/math.js":"var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // todo; should probably put this in a math package\n    mod.Mat44 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                        self.stack = [];\n                    });\n\n                $loc.push = new Sk.builtin.func(function(self)\n                    {\n                        self.stack.push(self.elements.slice(0));\n                    });\n\n                $loc.pop = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = self.stack.pop();\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0, 0.0,\n                                         0.0, 0.0, 1.0, 0.0,\n                                         0.0, 0.0, 0.0, 1.0];\n                    });\n\n                $loc.transform3 = new Sk.builtin.func(function(self, v)\n                    {\n                        var e = self.elements;\n                        return Sk.misceval.callsim(mod.Vec3,\n                            e[0] * v.x + e[4] * v.y + e[8] * v.z,\n                            e[1] * v.x + e[5] * v.y + e[9] * v.z,\n                            e[2] * v.x + e[6] * v.y + e[10] * v.z);\n                    });\n\n                $loc.scale = new Sk.builtin.func(function(self, sx, sy, sz)\n                        {\n                            self.elements[0*4+0] *= sx;\n                            self.elements[0*4+1] *= sx;\n                            self.elements[0*4+2] *= sx;\n                            self.elements[0*4+3] *= sx;\n\n                            self.elements[1*4+0] *= sy;\n                            self.elements[1*4+1] *= sy;\n                            self.elements[1*4+2] *= sy;\n                            self.elements[1*4+3] *= sy;\n\n                            self.elements[2*4+0] *= sz;\n                            self.elements[2*4+1] *= sz;\n                            self.elements[2*4+2] *= sz;\n                            self.elements[2*4+3] *= sz;\n\n                            return self;\n                        });\n\n                $loc.translate = new Sk.builtin.func(function(self, tx, ty, tz)\n                        {\n                            self.elements[3*4+0] += self.elements[0*4+0] * tx + self.elements[1*4+0] * ty + self.elements[2*4+0] * tz;\n                            self.elements[3*4+1] += self.elements[0*4+1] * tx + self.elements[1*4+1] * ty + self.elements[2*4+1] * tz;\n                            self.elements[3*4+2] += self.elements[0*4+2] * tx + self.elements[1*4+2] * ty + self.elements[2*4+2] * tz;\n                            self.elements[3*4+3] += self.elements[0*4+3] * tx + self.elements[1*4+3] * ty + self.elements[2*4+3] * tz;\n                            return self;\n                        });\n\n                $loc.rotate = new Sk.builtin.func(function(self, angle, x, y, z)\n                        {\n                            var mag = Math.sqrt(x*x + y*y + z*z);\n                            var sinAngle = Math.sin(angle * Math.PI / 180.0);\n                            var cosAngle = Math.cos(angle * Math.PI / 180.0);\n\n                            if (mag > 0)\n                            {\n                                var xx, yy, zz, xy, yz, zx, xs, ys, zs;\n                                var oneMinusCos;\n                                var rotMat;\n\n                                x /= mag;\n                                y /= mag;\n                                z /= mag;\n\n                                xx = x * x;\n                                yy = y * y;\n                                zz = z * z;\n                                xy = x * y;\n                                yz = y * z;\n                                zx = z * x;\n                                xs = x * sinAngle;\n                                ys = y * sinAngle;\n                                zs = z * sinAngle;\n                                oneMinusCos = 1.0 - cosAngle;\n\n                                rotMat = Sk.misceval.callsim(mod.Mat44);\n\n                                rotMat.elements[0*4+0] = (oneMinusCos * xx) + cosAngle;\n                                rotMat.elements[0*4+1] = (oneMinusCos * xy) - zs;\n                                rotMat.elements[0*4+2] = (oneMinusCos * zx) + ys;\n                                rotMat.elements[0*4+3] = 0.0;\n\n                                rotMat.elements[1*4+0] = (oneMinusCos * xy) + zs;\n                                rotMat.elements[1*4+1] = (oneMinusCos * yy) + cosAngle;\n                                rotMat.elements[1*4+2] = (oneMinusCos * yz) - xs;\n                                rotMat.elements[1*4+3] = 0.0;\n\n                                rotMat.elements[2*4+0] = (oneMinusCos * zx) - ys;\n                                rotMat.elements[2*4+1] = (oneMinusCos * yz) + xs;\n                                rotMat.elements[2*4+2] = (oneMinusCos * zz) + cosAngle;\n                                rotMat.elements[2*4+3] = 0.0;\n\n                                rotMat.elements[3*4+0] = 0.0;\n                                rotMat.elements[3*4+1] = 0.0;\n                                rotMat.elements[3*4+2] = 0.0;\n                                rotMat.elements[3*4+3] = 1.0;\n\n                                rotMat = rotMat.multiply(self);\n                                self.elements = rotMat.elements;\n                            }\n                            return self;\n                        });\n\n                $loc.multiply = new Sk.builtin.func(function(self, right)\n                        {\n                            var tmp = Sk.misceval.callsim(mod.Mat44);\n\n                            for (var i = 0; i < 4; i++)\n                            {\n                                tmp.elements[i*4+0] =\n                                (self.elements[i*4+0] * right.elements[0*4+0]) +\n                                (self.elements[i*4+1] * right.elements[1*4+0]) +\n                                (self.elements[i*4+2] * right.elements[2*4+0]) +\n                                (self.elements[i*4+3] * right.elements[3*4+0]) ;\n\n                                tmp.elements[i*4+1] =\n                                (self.elements[i*4+0] * right.elements[0*4+1]) +\n                                (self.elements[i*4+1] * right.elements[1*4+1]) +\n                                (self.elements[i*4+2] * right.elements[2*4+1]) +\n                                (self.elements[i*4+3] * right.elements[3*4+1]) ;\n\n                                tmp.elements[i*4+2] =\n                                (self.elements[i*4+0] * right.elements[0*4+2]) +\n                                (self.elements[i*4+1] * right.elements[1*4+2]) +\n                                (self.elements[i*4+2] * right.elements[2*4+2]) +\n                                (self.elements[i*4+3] * right.elements[3*4+2]) ;\n\n                                tmp.elements[i*4+3] =\n                                (self.elements[i*4+0] * right.elements[0*4+3]) +\n                                (self.elements[i*4+1] * right.elements[1*4+3]) +\n                                (self.elements[i*4+2] * right.elements[2*4+3]) +\n                                (self.elements[i*4+3] * right.elements[3*4+3]) ;\n                            }\n\n                            self.elements = tmp.elements;\n                            return self;\n                        });\n\n                /* Following gluLookAt implementation is adapted from\n                 * the Mesa 3D Graphics library. http://www.mesa3d.org\n                 */\n                // todo; rewrite this with proper vec/mat ops\n                $loc.lookAt = new Sk.builtin.func(function(self, eyeX, eyeY, eyeZ,\n                                                                 centerX, centerY, centerZ,\n                                                                 upX, upY, upZ)\n                        {\n                            /* Z vector */\n                            var z = [\n                                eyeX - centerX,\n                                eyeY - centerY,\n                                eyeZ - centerZ\n                            ];\n                            var mag = Math.sqrt(z[0] * z[0] + z[1] * z[1] + z[2] * z[2]);\n                            if (mag)\n                            {\n                                z[0] /= mag;\n                                z[1] /= mag;\n                                z[2] /= mag;\n                            }\n\n                            /* Y vector */\n                            var y = [ upX, upY, upZ ];\n\n                            /* X vector = Y cross Z */\n                            var x = [];\n                            x[0] = y[1] * z[2] - y[2] * z[1];\n                            x[1] = -y[0] * z[2] + y[2] * z[0];\n                            x[2] = y[0] * z[1] - y[1] * z[0];\n\n                            /* Recompute Y = Z cross X */\n                            y[0] = z[1] * x[2] - z[2] * x[1];\n                            y[1] = -z[0] * x[2] + z[2] * x[0];\n                            y[2] = z[0] * x[1] - z[1] * x[0];\n\n                            /* mpichler, 19950515 */\n                            /* cross product gives area of parallelogram, which is < 1.0 for\n                            * non-perpendicular unit-length vectors; so normalize x, y here\n                            */\n\n                            mag = Math.sqrt(x[0] * x[0] + x[1] * x[1] + x[2] * x[2]);\n                            if (mag) {\n                                x[0] /= mag;\n                                x[1] /= mag;\n                                x[2] /= mag;\n                            }\n\n                            mag = Math.sqrt(y[0] * y[0] + y[1] * y[1] + y[2] * y[2]);\n                            if (mag) {\n                                y[0] /= mag;\n                                y[1] /= mag;\n                                y[2] /= mag;\n                            }\n\n                            var lookAt = Sk.misceval.callsim(mod.Mat44);\n                            lookAt.elements[0 * 4 + 0] = x[0];\n                            lookAt.elements[1 * 4 + 0] = x[1];\n                            lookAt.elements[2 * 4 + 0] = x[2];\n                            lookAt.elements[3 * 4 + 0] = 0.;\n                            lookAt.elements[0 * 4 + 1] = y[0];\n                            lookAt.elements[1 * 4 + 1] = y[1];\n                            lookAt.elements[2 * 4 + 1] = y[2];\n                            lookAt.elements[3 * 4 + 1] = 0.;\n                            lookAt.elements[0 * 4 + 2] = z[0];\n                            lookAt.elements[1 * 4 + 2] = z[1];\n                            lookAt.elements[2 * 4 + 2] = z[2];\n                            lookAt.elements[3 * 4 + 2] = 0.;\n                            lookAt.elements[0 * 4 + 3] = 0.;\n                            lookAt.elements[1 * 4 + 3] = 0.;\n                            lookAt.elements[2 * 4 + 3] = 0.;\n                            lookAt.elements[3 * 4 + 3] = 1.;\n\n                            // log(lookAt.elements);\n\n                            lookAt = lookAt.multiply(self);\n                            self.elements = lookAt.elements;\n                            self.translate(-eyeX, -eyeY, -eyeZ);\n\n                            // log(this.elements);\n\n                            return self;\n                        });\n            },\n            'Mat44', []);\n\n    // todo; should probably put this in a math package\n    mod.Mat33 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self)\n                    {\n                        Sk.misceval.callsim($loc.loadIdentity, self);\n                    });\n\n                $loc.loadIdentity = new Sk.builtin.func(function(self)\n                    {\n                        self.elements = [1.0, 0.0, 0.0,\n                                         0.0, 1.0, 0.0,\n                                         0.0, 0.0, 1.0];\n                    });\n            },\n            'Mat33', []);\n\n    mod.Vec3 = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, x, y, z)\n                    {\n                        self.x = x;\n                        self.y = y;\n                        self.z = z;\n                    });\n                $loc.__sub__ = new Sk.builtin.func(function(self, other)\n                    {\n                        return Sk.misceval.callsim(mod.Vec3, self.x - other.x, self.y - other.y, self.z - other.z);\n                    });\n            },\n            'Vec3', []);\n    \n    mod.cross = new Sk.builtin.func(function(v1, v2)\n            {\n                goog.asserts.assert(v1 instanceof mod.Vec3 && v2 instanceof mod.Vec3);\n                return Sk.misceval.callsim(mod.Vec3,\n                    v1.y * v2.z - v1.z * v2.y,\n                    v1.z * v2.x - v1.x * v2.z,\n                    v1.x * v2.y - v1.y * v2.x);\n            });\n\n    return mod;\n};\n","src/lib/pythonds/graphs/__init__.py":"\n\nfrom .adjGraph import Graph\nfrom .adjGraph import Vertex\nfrom .priorityQueue import PriorityQueue\n","src/lib/pythonds/graphs/priorityQueue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \nimport unittest\n\n# this implementation of binary heap takes key value pairs,\n# we will assume that the keys are all comparable\n\nclass PriorityQueue:\n    def __init__(self):\n        self.heapArray = [(0,0)]\n        self.currentSize = 0\n\n    def buildHeap(self,alist):\n        self.currentSize = len(alist)\n        self.heapArray = [(0,0)]\n        for i in alist:\n            self.heapArray.append(i)\n        i = len(alist) // 2            \n        while (i > 0):\n            self.percDown(i)\n            i = i - 1\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapArray[i][0] > self.heapArray[mc][0]:\n                tmp = self.heapArray[i]\n                self.heapArray[i] = self.heapArray[mc]\n                self.heapArray[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i*2 > self.currentSize:\n            return -1\n        else:\n            if i*2 + 1 > self.currentSize:\n                return i*2\n            else:\n                if self.heapArray[i*2][0] < self.heapArray[i*2+1][0]:\n                    return i*2\n                else:\n                    return i*2+1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapArray[i][0] < self.heapArray[i//2][0]:\n               tmp = self.heapArray[i//2]\n               self.heapArray[i//2] = self.heapArray[i]\n               self.heapArray[i] = tmp\n            i = i//2\n \n    def add(self,k):\n        self.heapArray.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapArray[1][1]\n        self.heapArray[1] = self.heapArray[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapArray.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if self.currentSize == 0:\n            return True\n        else:\n            return False\n\n    def decreaseKey(self,val,amt):\n        # this is a little wierd, but we need to find the heap thing to decrease by\n        # looking at its value\n        done = False\n        i = 1\n        myKey = 0\n        while not done and i <= self.currentSize:\n            if self.heapArray[i][1] == val:\n                done = True\n                myKey = i\n            else:\n                i = i + 1\n        if myKey > 0:\n            self.heapArray[myKey] = (amt,self.heapArray[myKey][1])\n            self.percUp(myKey)\n            \n    def __contains__(self,vtx):\n        for pair in self.heapArray:\n            if pair[1] == vtx:\n                return True\n        return False\n        \nclass TestBinHeap(unittest.TestCase):\n    def setUp(self):\n        self.theHeap = PriorityQueue()\n        self.theHeap.add((2,'x'))\n        self.theHeap.add((3,'y'))\n        self.theHeap.add((5,'z'))\n        self.theHeap.add((6,'a'))\n        self.theHeap.add((4,'d'))\n\n\n    def testInsert(self):\n        assert self.theHeap.currentSize == 5\n\n    def testDelmin(self):\n        assert self.theHeap.delMin() == 'x'\n        assert self.theHeap.delMin() == 'y'\n    \n    def testDecKey(self):\n        self.theHeap.decreaseKey('d',1)\n        assert self.theHeap.delMin() == 'd'\n        \nif __name__ == '__main__':\n    unittest.main()\n","src/lib/pythonds/__init__.py":"","src/lib/pythonds/basic/deque.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#deque.py\n\n\nclass Deque:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def addFront(self, item):\n        self.items.append(item)\n\n    def addRear(self, item):\n        self.items.insert(0,item)\n\n    def removeFront(self):\n        return self.items.pop()\n\n    def removeRear(self):\n        return self.items.pop(0)\n\n    def size(self):\n        return len(self.items)\n","src/lib/processing/__init__.js":"var $builtinmodule = function(name)\n{\n    var mod = {};\n    var imList = [];\n    var looping = true;\n\n    // We need this to store a reference to the actual processing object which is not created\n    // until the run function is called.  Even then the processing object is passed by the\n    // processing-js sytem as a parameter to the sketchProc function.  Why not set it to None here\n    //\n\n    // See:  http://processingjs.org/reference/\n\n    mod.processing = null\n    mod.p = null\n\n    mod.CENTER = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.RADIUS = Sk.builtin.assk$(2, Sk.builtin.nmber.int$);\n    mod.CORNERS = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.CORNER = Sk.builtin.assk$(0, Sk.builtin.nmber.int$);\n    mod.RGB = Sk.builtin.assk$(1, Sk.builtin.nmber.int$);\n    mod.HSB = Sk.builtin.assk$(3, Sk.builtin.nmber.int$);\n    mod.CMYK = Sk.builtin.assk$(5, Sk.builtin.nmber.int$);\n    mod.MITER = new Sk.builtin.str('miter');\n    mod.BEVEL = new Sk.builtin.str('bevel');\n    mod.ROUND = new Sk.builtin.str('round');\n    mod.SQUARE = new Sk.builtin.str('butt');\n    mod.PROJECT = new Sk.builtin.str('square');\n\n// 2D - Primitives\n    mod.line = new Sk.builtin.func(function(x1, y1, x2, y2) {\n        mod.processing.line(x1.v, y1.v, x2.v, y2.v);\n    });\n    \n    mod.ellipse = new Sk.builtin.func(function(x,y,r1,r2) {\n        mod.processing.ellipse(x.v,y.v,r1.v,r2.v)\n        \n    });\n\n    mod.text = new Sk.builtin.func(function(theText, x, y) {\n        mod.processing.text(theText.v, x.v, y.v);\n    });\n\n    mod.point = new Sk.builtin.func(function(x1,y1) {\n        mod.processing.point(x1.v,y1.v)\n    });\n        \n    mod.arc = new Sk.builtin.func(function(x, y, width, height, start, stop) {\n        mod.processing.arc(x.v, y.v, width.v, height.v, start.v, stop.v)\n    });\n\n    mod.quad = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3, x4, y4) {\n        mod.processing.quad(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v, x4.v, y4.v)\n    });\n            \n    mod.rect = new Sk.builtin.func(function(x, y, width, height, radius) {\n        if (typeof(radius) == 'undefined') {\n            var rad = 0\n        } else {\n            var rad = radius.v\n        }\n        mod.processing.rect(x.v, y.v, width.v, height.v, rad)\n    });\n    \n    mod.triangle = new Sk.builtin.func(function(x1, y1, x2, y2, x3, y3) {\n            mod.processing.triangle(x1.v, y1.v, x2.v, y2.v, x3.v, y3.v)\n        });\n            \n\n    // 3D Primitives\n\n    // todo:  box, sphere, sphereDetail\n\n    // Color\n    mod.background = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.background(r.v,g,b)\n        \n    });\n\n    mod.fill = new Sk.builtin.func(function(r,g,b) {\n        // r will be either:\n        //      a number in which case the fill will be grayscale\n        //      a color object\n        // g, and b may be undefined.  If they hold values it will\n        // be assumed that we have an r,g,b color tuple\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n    \n        mod.processing.fill(r.v,g,b)\n        \n    });\n\n\n    mod.stroke = new Sk.builtin.func(function(r,g,b) {\n\n        if (typeof(g) !== 'undefined')\n            g = g.v\n        if (typeof(b) !== 'undefined')\n            b = b.v\n\n        mod.processing.stroke(r.v,g,b)\n        \n    });\n\n    mod.noStroke = new Sk.builtin.func(function() {\n        mod.processing.noStroke()\n    });\n    \n\n    mod.colorMode = new Sk.builtin.func(function(model, maxV) {\n        if (typeof(maxV) === 'undefined')\n            maxV = 255\n        else\n            maxV = maxV.v\n        mod.processing.colorMode(model.v, maxV)\n    });\n\n    mod.noFill = new Sk.builtin.func(function() {\n            mod.processing.noFill()\n        });\n            \n\n    // Environment\n\n    mod.loop = new Sk.builtin.func(function() {\n            if (mod.processing === null) {\n                throw new Sk.builtin.Exception(\"Loop should be called in setup\")\n            }\n            looping = true;\n            mod.processing.loop()\n        });\n            \n    mod.noLoop = new Sk.builtin.func(function() {\n        if (mod.processing === null) {\n            throw new Sk.builtin.Exception(\"noLoop should be called in setup\")\n        }\n        looping = false;\n        mod.processing.noLoop()\n    });\n    \n    mod.frameRate = new Sk.builtin.func(function(fr) {\n        mod.processing.frameRate(fr.v)\n        \n    });\n\n    mod.size = new Sk.builtin.func(function(h,w) {\n        mod.processing.size(h.v,w.v)\n        \n    });\n\n    mod.exitp = new Sk.builtin.func(function(h,w) {\n        mod.processing.exit()\n    });\n\n\n    mod.mouseX = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseX, Sk.builtin.nmber.int$);\n        \n    });\n\n    mod.mouseY = new Sk.builtin.func(function() {\n        return Sk.builtin.assk$(mod.processing.mouseY, Sk.builtin.nmber.int$);\n        \n    });\n\n    // Attributes\n    mod.rectMode = new Sk.builtin.func(function(mode) {\n        mod.processing.rectMode(mode.v)\n    });\n\n    mod.strokeWeight = new Sk.builtin.func(function(wt) {\n        mod.processing.strokeWeight(wt.v)\n        \n    });\n\n    mod.smooth = new Sk.builtin.func(function() {\n        mod.processing.smooth()\n    });\n\n    mod.noSmooth = new Sk.builtin.func(function() {\n        mod.processing.noSmooth()\n        });\n            \n    mod.ellipseMode = new Sk.builtin.func(function(mode) {\n        mod.processing.ellipseMode(mode.v)\n        });\n\n    mod.strokeCap = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeCap(mode.v)\n        });\n\n    mod.strokeJoin = new Sk.builtin.func(function(mode) {\n        mod.processing.strokeJoin(mode.v)\n    });\n    \n\n\n    // Transforms\n\n    mod.rotate = new Sk.builtin.func(function(rads) {\n        // rotation in radians\n        mod.processing.rotate(rads.v)\n        \n    });\n\n    mod.scale = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.scale(sx.v, sy, sz)\n    });\n\n    mod.translate = new Sk.builtin.func(function(sx, sy, sz) {\n        if (typeof(sy) == 'undefined') {\n            sy = 1.0\n        } else \n            sy = sy.v\n        if (typeof(sz) == 'undefined') {\n            sz = 1.0\n        } else\n            sz = sz.v\n        mod.processing.translate(sx.v, sy, sz)\n    });\n\n    // todo:  applyMatrix, popMatrix, printMatrix??, pushMatrix, resetMatrix, rotate{X,Y,Z}\n    \n\n    //  //////////////////////////////////////////////////////////////////////\n    //  Run\n    // \n    //  Create the processing context and setup of calls to setup, draw etc.\n    //\n    //\n    //  //////////////////////////////////////////////////////////////////////    \n    mod.run = new Sk.builtin.func(function() {\n        function sketchProc(processing) {\n            mod.processing = processing\n\n            // processing.setup = function() {\n            //     if Sk.globals['setup']\n            //         Sk.misceval.callsim(Sk.globals['setup'])\n            // }\n\n            \n            processing.draw = function() {\n                // if there are pending image loads then just use the natural looping calls to \n                // retry until all the images are loaded.  If noLoop was called in setup then make\n                // sure to revert to that after all the images in hand.\n                var wait = false\n                for (var i in imList) {\n                    if (imList[i].width == 0) {\n                        wait = true\n                    }\n                }\n                if (wait == true) {\n                    if (looping == true) \n                        return\n                    else {\n                        processing.loop()\n                        return\n                    }\n\n                } else {\n                    if (looping == false)\n                        processing.noLoop()\n                }\n\n                mod.frameCount = processing.frameCount  \n                if (Sk.globals['draw'])\n                    Sk.misceval.callsim(Sk.globals['draw'])\n            }\n            \n            var callBacks = ['setup', 'mouseMoved','mouseClicked', 'mouseDragged', 'mouseMoved', 'mouseOut',\n             'mouseOver', 'mousePressed', 'mouseReleased', 'keyPressed', 'keyReleased', 'keyTyped'\n             ];\n\n             for(var cb in callBacks) {\n                if (Sk.globals[callBacks[cb]]) {\n                    console.log('defining ' + callBacks[cb])                    \n                    processing[callBacks[cb]] = new Function(\"Sk.misceval.callsim(Sk.globals['\"+callBacks[cb]+\"']);\")\n                }\n            }\n        }\n        \n        var canvas = document.getElementById(Sk.canvas)\n        $(canvas).show()\n        mod.p = new Processing(canvas, sketchProc)\n\n        \n    });\n\n    var mouseClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'x') \n                return mod.processing.mouseX;\n            else if (key == 'y') \n                return mod.processing.mouseY;\n            else if (key == 'px')\n                return mod.processing.pmouseX;\n            else if (key == 'py')\n                return mod.processing.pmouseY;\n            else if (key == 'pressed')\n                return mod.processing.mousePressed;\n            else if (key == 'button')\n                return mod.processing.mouseButton\n        });\n\n\n    }\n\n\n    mod.Mouse = Sk.misceval.buildClass(mod, mouseClass, 'Mouse', []);\n\n    mod.mouse = Sk.misceval.callsim(mod.Mouse)\n\n    var keyboardClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'key') {\n                console.log(mod.processing.key)\n                return new Sk.builtin.str(mod.processing.key.toString())\n            }\n            else if (key == 'keyCode') \n                return mod.processing.keyCode\n            else if (key == 'keyPressed')\n                return new Sk.builtin.str(mod.processing.keyPressed) // todo bool\n        });\n\n\n    }\n\n    mod.Keyboard = Sk.misceval.buildClass(mod,keyboardClass,'Keyboard', [])\n\n    mod.keyboard = Sk.misceval.callsim(mod.Keyboard)\n\n\n\n    var environmentClass = function($gbl, $loc) {\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'frameCount') \n                return mod.processing.frameCount\n            else if (key == 'frameRate') \n                return mod.processing.frameRate\n            else if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'online')\n                return mod.processing.online\n            else if (key == 'focused')\n                return mod.processing.focused\n        });\n\n\n    }\n\n    mod.Environment = Sk.misceval.buildClass(mod,environmentClass,'Environment', [])\n\n    mod.environment = Sk.misceval.callsim(mod.Environment)\n\n    var screenClass = function($gbl, $loc) {\n\n        $loc.__init__ = new Sk.builtin.func(function(self) {\n            self.pixels = null;\n        });\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'height')\n                return mod.processing.height\n            else if (key == 'width')\n                return mod.processing.width\n            else if (key == 'pixels')\n                if (self.pixels == null) {\n                    self.pixels = new Sk.builtin.list(mod.processing.pixels.toArray())\n                }\n                return self.pixels\n        });\n\n    }\n\n    mod.Screen = Sk.misceval.buildClass(mod,screenClass,'Screen', [])\n\n    mod.screen = Sk.misceval.callsim(mod.Screen)\n\n    mod.loadPixels = new Sk.builtin.func(function() {\n        mod.processing.loadPixels()\n        console.log(mod.processing.pixels)\n    });\n    \n\n    var colorClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self, val1, val2, val3, alpha) {\n            if (typeof(val2) !== 'undefined')\n                val2 = val2.v\n            if (typeof(val3) !== 'undefined')\n                val3 = val3.v\n            if (typeof(alpha) !== 'undefined')\n                alpha = alpha.v\n            self.v = mod.processing.color(val1.v, val2, val3, alpha)\n        })\n    \n    }\n\n    mod.color = Sk.misceval.buildClass(mod,colorClass,'color', [])\n\n    mod.red = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.red(clr.v), Sk.builtin.nmber.int$);\n    });\n    \n    mod.green = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.green(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    mod.blue = new Sk.builtin.func(function(clr) {\n        return Sk.builtin.assk$(mod.processing.blue(clr.v), Sk.builtin.nmber.int$);\n    });\n\n    // Image class and functions\n    //\n    var imageClass = function($gbl, $loc) {\n        /* images are loaded async.. so its best to preload them */\n        $loc.__init__ = new Sk.builtin.func(function(self,im) {\n            self.v = im\n            self.width = Sk.builtin.assk$(im.width, Sk.builtin.nmber.int$);\n            self.height = Sk.builtin.assk$(im.height, Sk.builtin.nmber.int$);\n        })\n\n        $loc.__getattr__ = new Sk.builtin.func(function(self,key) {\n            if (key == 'width') return self.v.width;\n            if (key == 'height') return self.v.height;\n        });\n    \n    }\n\n    mod.PImage = Sk.misceval.buildClass(mod,imageClass,'PImage', [])\n\n    mod.loadImage = new Sk.builtin.func(function(imfile) {\n        var i = mod.processing.loadImage(imfile.v);\n        imList.push(i);\n        return Sk.misceval.callsim(mod.PImage,i);\n    });\n    \n\n    mod.image = new Sk.builtin.func(function(im,x,y) {\n        if (im.v.width > 0)\n            mod.processing.image(im.v,x.v,y.v,im.v.width,im.v.height)\n    });\n\n    mod.get = new Sk.builtin.func(function(x,y) {\n        var clr = mod.processing.get(x.v,y.v)\n        return Sk.misceval.callsim(mod.color,\n            Sk.builtin.assk$(mod.processing.red(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.green(clr), Sk.builtin.nmber.int$),\n            Sk.builtin.assk$(mod.processing.blue(clr), Sk.builtin.nmber.int$));\n    });\n\n    mod.set = new Sk.builtin.func(function(x, y, color) {\n        mod.processing.set(x.v, y.v, color.v)\n    });\n    \n// todo  -- add a color class for creating color objects.\n\n\n    return mod;\n}\n","src/lib/webgl/models.js":"// most of this file is from/based on 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var Buffer = function(array, opt_target) {\n        var target = opt_target || gl.ARRAY_BUFFER;\n        var buf = gl.createBuffer();\n        this.target = target;\n        this.buf = buf;\n        this.set(array);\n        this.numComponents_ = array.numComponents;\n        this.numElements_ = array.numElements;\n        this.totalComponents_ = this.numComponents_ * this.numElements_;\n        if (array.buffer instanceof Float32Array) {\n            this.type_ = gl.FLOAT;\n        } else if (array.buffer instanceof Uint8Array) {\n            this.type_ = gl.UNSIGNED_BYTE;\n        } else if (array.buffer instanceof Int8Array) {\n            this.type_ = gl._BYTE;\n        } else if (array.buffer instanceof Uint16Array) {\n            this.type_ = gl.UNSIGNED_SHORT;\n        } else if (array.buffer instanceof Int16Array) {\n            this.type_ = gl.SHORT;\n        } else {\n            throw(\"unhandled type:\" + (typeof array.buffer));\n        }\n    };\n\n    Buffer.prototype.set = function(array) {\n        gl.bindBuffer(this.target, this.buf);\n        gl.bufferData(this.target, array.buffer, gl.STATIC_DRAW);\n    }\n\n    Buffer.prototype.type = function() {\n        return this.type_;\n    };\n\n    Buffer.prototype.numComponents = function() {\n        return this.numComponents_;\n    };\n\n    Buffer.prototype.numElements = function() {\n        return this.numElements_;\n    };\n\n    Buffer.prototype.totalComponents = function() {\n        return this.totalComponents_;\n    };\n\n    Buffer.prototype.buffer = function() {\n        return this.buf;\n    };\n\n    Buffer.prototype.stride = function() {\n        return 0;\n    };\n\n    Buffer.prototype.offset = function() {\n        return 0;\n    };\n\n\n\n    mod.Model = Sk.misceval.buildClass(mod, function($gbl, $loc)\n            {\n                $loc.__init__ = new Sk.builtin.func(function(self, shader, arrays, textures)\n                    {\n                        self.buffers = {};\n                        var setBuffer = function(name, array)\n                        {\n                            var target = (name == 'indices') ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;\n                            b = self.buffers[name];\n                            if (!b)\n                                b = new Buffer(array, target);\n                            else\n                                b.set(array);\n                            self.buffers[name] = b;\n                        };\n                        for (name in arrays)\n                            setBuffer(name, arrays[name]);\n\n                        var textureUnits = {};\n                        var unit = 0;\n                        for (var texture in textures)\n                        {\n                            textureUnits[texture] = unit++;\n                        }\n\n                        self.mode = gl.TRIANGLES;\n                        self.textures = textures.v;\n                        self.textureUnits = textureUnits;\n                        self.shader = shader;\n                    });\n\n                /**\n                * Sets up the shared parts of drawing this model. Uses the\n                * program, binds the buffers, sets the textures.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.drawPrep = new Sk.builtin.func(function(self, uniforms)\n                    {\n                        var shader = self.shader;\n                        var buffers = self.buffers;\n                        var textures = self.textures;\n\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n\n                        Sk.misceval.callsim(shader.use, shader);\n\n                        for (var buffer in buffers) {\n                            var b = buffers[buffer];\n                            if (buffer == 'indices') {\n                                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, b.buffer());\n                            } else {\n                                var attrib = shader.attrib[buffer];\n                                if (attrib) {\n                                    attrib(b);\n                                }\n                            }\n                        }\n\n                        for (var texture in textures) {\n                            var unit = self.textureUnits[texture];\n                            shader.setUniform$impl(shader, textuer, unit);\n                            textures[texture].bindToUnit(unit);\n                        }\n\n                        for (var uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n                    });\n\n                /**\n                * Draws this model.\n                *\n                * After calling tdl.models.Model.drawPrep you can call this\n                * function multiple times to draw this model.\n                *\n                * @param {!Object.<string, *>} uniforms An object of names to\n                *     values to set on this models uniforms.\n                */\n                $loc.draw = new Sk.builtin.func(function(self, uniforms, opt_textures)\n                    {\n                        var shader = self.shader;\n                        uniforms = Sk.ffi.remapToJs(uniforms);\n                        for (uniform in uniforms) {\n                            shader.setUniform$impl(shader, uniform, uniforms[uniform]);\n                        }\n\n                        if (opt_textures) {\n                            for (var texture in opt_textures) {\n                                var unit = self.textureUnits[texture];\n                                shader.setUniform$impl(shader, texture, unit);\n                                opt_textures[texture].bindToUnit(unit);\n                            }\n                        }\n\n                        var buffers = self.buffers;\n                        gl.drawElements(self.mode, buffers.indices.totalComponents(), gl.UNSIGNED_SHORT, 0);\n                    });\n            },\n            'Model', []);\n\n    return mod;\n};\n","src/lib/pythonds/trees/__init__.py":"\n# from .binaryTree import BinaryTree\n# from .balance import AVLTree\n# from .bst import BinarySearchTree\n# from .binheap import BinHeap\n\n\n","src/lib/pythonds/trees/binaryTree.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\nclass BinaryTree:\n    \"\"\"\n    A recursive implementation of Binary Tree\n    Using links and Nodes approach.\n    \"\"\"    \n    def __init__(self,rootObj):\n        self.key = rootObj\n        self.leftChild = None\n        self.rightChild = None\n\n    def insertLeft(self,newNode):\n        if self.leftChild == None:\n            self.leftChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.left = self.leftChild\n            self.leftChild = t\n    \n    def insertRight(self,newNode):\n        if self.rightChild == None:\n            self.rightChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.right = self.rightChild\n            self.rightChild = t\n\n    def isLeaf(self):\n        return ((not self.leftChild) and (not self.rightChild))\n\n    def getRightChild(self):\n        return self.rightChild\n\n    def getLeftChild(self):\n        return self.leftChild\n\n    def setRootVal(self,obj):\n        self.key = obj\n\n    def getRootVal(self,):\n        return self.key\n\n    def inorder(self):\n        if self.leftChild:\n            self.leftChild.inorder()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.inorder()\n\n    def postorder(self):\n        if self.leftChild:\n            self.leftChild.postorder()\n        if self.rightChild:\n            self.rightChild.postorder()\n        print(self.key)\n\n\n    def preorder(self):\n        print(self.key)\n        if self.leftChild:\n            self.leftChild.preorder()\n        if self.rightChild:\n            self.rightChild.preorder()\n\n    def printexp(self):\n        if self.leftChild:\n            print('(')\n            self.leftChild.printexp()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.printexp()\n            print(')')\n\n    def postordereval(self):\n        opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n        res1 = None\n        res2 = None\n        if self.leftChild:\n            res1 = self.leftChild.postordereval()  #// \\label{peleft}\n        if self.rightChild:\n            res2 = self.rightChild.postordereval() #// \\label{peright}\n        if res1 and res2:\n            return opers[self.key](res1,res2) #// \\label{peeval}\n        else:\n            return self.key\n\ndef inorder(tree):\n    if tree != None:\n        inorder(tree.getLeftChild())\n        print(tree.getRootVal())\n        inorder(tree.getRightChild())\n\ndef printexp(tree):\n    if tree.leftChild:\n        print('(')\n        printexp(tree.getLeftChild())\n    print(tree.getRootVal())\n    if tree.rightChild:\n        printexp(tree.getRightChild())\n        print(')') \n\ndef printexp(tree):\n    sVal = \"\"\n    if tree:\n        sVal = '(' + printexp(tree.getLeftChild())\n        sVal = sVal + str(tree.getRootVal())\n        sVal = sVal + printexp(tree.getRightChild()) + ')'\n    return sVal\n\ndef postordereval(tree):\n    opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n    res1 = None\n    res2 = None\n    if tree:\n        res1 = postordereval(tree.getLeftChild())  #// \\label{peleft}\n        res2 = postordereval(tree.getRightChild()) #// \\label{peright}\n        if res1 and res2:\n            return opers[tree.getRootVal()](res1,res2) #// \\label{peeval}\n        else:\n            return tree.getRootVal()\n\ndef height(tree):\n    if tree == None:\n        return -1\n    else:\n        return 1 + max(height(tree.leftChild),height(tree.rightChild))\n\n# t = BinaryTree(7)\n# t.insertLeft(3)\n# t.insertRight(9)\n# inorder(t)\n# import operator\n# x = BinaryTree('*')\n# x.insertLeft('+')\n# l = x.getLeftChild()\n# l.insertLeft(4)\n# l.insertRight(5)\n# x.insertRight(7)\n# print(printexp(x))\n# print(postordereval(x))\n# print(height(x))\n","src/builtin/this.py":'s = """Gur Mra bs Clguba, ol Gvz Crgref\n\nOrnhgvshy vf orggre guna htyl.\nRkcyvpvg vf orggre guna vzcyvpvg.\nFvzcyr vf orggre guna pbzcyrk.\nPbzcyrk vf orggre guna pbzcyvpngrq.\nSyng vf orggre guna arfgrq.\nFcnefr vf orggre guna qrafr.\nErnqnovyvgl pbhagf.\nFcrpvny pnfrf nera\'g fcrpvny rabhtu gb oernx gur ehyrf.\nNygubhtu cenpgvpnyvgl orngf chevgl.\nReebef fubhyq arire cnff fvyragyl.\nHayrff rkcyvpvgyl fvyraprq.\nVa gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff.\nGurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg.\nNygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh\'er Qhgpu.\nAbj vf orggre guna arire.\nNygubhtu arire vf bsgra orggre guna *evtug* abj.\nVs gur vzcyrzragngvba vf uneq gb rkcynva, vg\'f n onq vqrn.\nVs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn.\nAnzrfcnprf ner bar ubaxvat terng vqrn -- yrg\'f qb zber bs gubfr!"""\n\nd = {}\nfor c in (65, 97):\n    for i in range(26):\n        d[chr(i+c)] = chr((i+13) % 26 + c)\n\nprint "".join([d.get(c, c) for c in s])\n',"src/lib/webgl/primitives.js":"// most of this file is from 'tdl'\n\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n\n\n    /**\n     * AttribBuffer manages a TypedArray as an array of vectors.\n     *\n     * @param {number} numComponents Number of components per\n     *     vector.\n     * @param {number|!Array.<number>} numElements Number of vectors or the data.\n     * @param {string} opt_type The type of the TypedArray to\n     *     create. Default = 'Float32Array'.\n     * @param {!Array.<number>} opt_data The data for the array.\n     */\n    var AttribBuffer = function(\n            numComponents, numElements, opt_type) {\n        opt_type = opt_type || 'Float32Array';\n        var type = window[opt_type];\n        if (numElements.length) {\n            this.buffer = new type(numElements);\n            numElements = this.buffer.length / numComponents;\n            this.cursor = numElements;\n        } else {\n            this.buffer = new type(numComponents * numElements);\n            this.cursor = 0;\n        }\n        this.numComponents = numComponents;\n        this.numElements = numElements;\n        this.type = opt_type;\n    };\n\n    AttribBuffer.prototype.stride = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.offset = function() {\n        return 0;\n    };\n\n    AttribBuffer.prototype.getElement = function(index) {\n        var offset = index * this.numComponents;\n        var value = [];\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            value.push(this.buffer[offset + ii]);\n        }\n        return value;\n    };\n\n    AttribBuffer.prototype.setElement = function(index, value) {\n        var offset = index * this.numComponents;\n        for (var ii = 0; ii < this.numComponents; ++ii) {\n            this.buffer[offset + ii] = value[ii];\n        }\n    };\n\n    AttribBuffer.prototype.clone = function() {\n        var copy = new AttribBuffer(\n                this.numComponents, this.numElements, this.type);\n        copy.pushArray(this);\n        return copy;\n    }\n\n    AttribBuffer.prototype.push = function(value) {\n        this.setElement(this.cursor++, value);\n    };\n\n    AttribBuffer.prototype.pushArray = function(array) {\n        //  this.buffer.set(array, this.cursor * this.numComponents);\n        //  this.cursor += array.numElements;\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            this.push(array.getElement(ii));\n        }\n    };\n\n    AttribBuffer.prototype.pushArrayWithOffset =\n    function(array, offset) {\n        for (var ii = 0; ii < array.numElements; ++ii) {\n            var elem = array.getElement(ii);\n            for (var jj = 0; jj < offset.length; ++jj) {\n                elem[jj] += offset[jj];\n            }\n            this.push(elem);\n        }\n    };\n\n    /**\n    * Computes the extents\n    * @param {!AttribBuffer} positions The positions\n    * @return {!{min: !tdl.math.Vector3, max:!tdl.math.Vector3}}\n    *     The min and max extents.\n    */\n    AttribBuffer.prototype.computeExtents = function() {\n        var numElements = this.numElements;\n        var numComponents = this.numComponents;\n        var minExtent = this.getElement(0);\n        var maxExtent = this.getElement(0);\n        for (var ii = 1; ii < numElements; ++ii) {\n            var element = this.getElement(ii);\n            for (var jj = 0; jj < numComponents; ++jj) {\n                minExtent[jj] = Math.min(minExtent[jj], element[jj]);\n                maxExtent[jj] = Math.max(maxExtent[jj], element[jj]);\n            }\n        }\n        return {min: minExtent, max: maxExtent};\n    };\n\n\n    /**\n     * Creates the vertices and indices for a cube. The\n     * cube will be created around the origin. (-size / 2, size / 2)\n     *\n     * @param {number} size Width, height and depth of the cube.\n     * @return {!Object.<string, !tdl.primitives.AttribBuffer>} The\n     *         created plane vertices.\n     */\n    mod.createCube = new Sk.builtin.func(function(size)\n            {\n                var CUBE_FACE_INDICES_ = [\n                    [3, 7, 5, 1],\n                    [0, 4, 6, 2],\n                    [6, 7, 3, 2],\n                    [0, 1, 5, 4],\n                    [5, 7, 6, 4],\n                    [2, 3, 1, 0]\n                ];\n\n                var k = size / 2;\n\n                var cornerVertices = [\n                        [-k, -k, -k],\n                        [+k, -k, -k],\n                        [-k, +k, -k],\n                        [+k, +k, -k],\n                        [-k, -k, +k],\n                        [+k, -k, +k],\n                        [-k, +k, +k],\n                        [+k, +k, +k]\n                    ];\n\n                var faceNormals = [\n                        [+1, +0, +0],\n                        [-1, +0, +0],\n                        [+0, +1, +0],\n                        [+0, -1, +0],\n                        [+0, +0, +1],\n                        [+0, +0, -1]\n                    ];\n\n                var uvCoords = [\n                        [0, 0],\n                        [1, 0],\n                        [1, 1],\n                        [0, 1]\n                    ];\n\n                var numVertices = 6 * 4;\n                var positions = new AttribBuffer(3, numVertices);\n                var normals = new AttribBuffer(3, numVertices);\n                var texCoords = new AttribBuffer(2, numVertices);\n                var indices = new AttribBuffer(3, 6 * 2, 'Uint16Array');\n\n                for (var f = 0; f < 6; ++f) {\n                    var faceIndices = CUBE_FACE_INDICES_[f];\n                    for (var v = 0; v < 4; ++v) {\n                        var position = cornerVertices[faceIndices[v]];\n                        var normal = faceNormals[f];\n                        var uv = uvCoords[v];\n\n                        // Each face needs all four vertices because the normals and texture\n                        // coordinates are not all the same.\n                        positions.push(position);\n                        normals.push(normal);\n                        texCoords.push(uv);\n\n                    }\n                    // Two triangles make a square face.\n                    var offset = 4 * f;\n                    indices.push([offset + 0, offset + 1, offset + 2]);\n                    indices.push([offset + 0, offset + 2, offset + 3]);\n                }\n\n                return {\n                        position: positions,\n                        normal: normals,\n                        texCoord: texCoords,\n                        indices: indices\n                };\n            });\n\n    return mod;\n};\n","src/lib/document/__init__.js":"var $builtinmodule = function(name) {\n    var mod = {};\n\n    mod.getElementById = new Sk.builtin.func(function(id) {\n        var result = document.getElementById(id.v);\n        if (result) {\n            return Sk.misceval.callsim(mod.Element,result);\n        }\n        return Sk.builtin.none.none$;\n    });\n\n    mod.createElement = new Sk.builtin.func(function(eName) {\n            var r = document.createElement(eName.v);\n            if (r) {\n                return Sk.misceval.callsim(mod.Element,r);\n            }\n        });\n\n\n    mod.getElementsByTagName = new Sk.builtin.func(function(tag) {\n        var r = document.getElementsByTagName(tag.v)\n        var reslist = [];\n        for (var i = r.length - 1; i >= 0; i--) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]))\n        }\n        return new Sk.builtin.list(reslist)\n    });\n\n    mod.getElementsByClassName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByClassName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n    \n    mod.getElementsByName = new Sk.builtin.func(function(cname) {\n        var r = document.getElementsByName(cname.v);\n        var reslist = [];\n        for (var i = 0; i < r.length; i++) {\n            reslist.push(Sk.misceval.callsim(mod.Element,r[i]));\n        };\n        return new Sk.builtin.list(reslist);\n    });\n        \n    mod.currentDiv = new Sk.builtin.func(function() {\n        if (Sk.divid !== undefined) {\n            return new Sk.builtin.str(Sk.divid)\n        }\n        else {\n            throw new Sk.builtin.AttributeError(\"There is no value set for divid\");\n        }\n    })\n    var elementClass = function($gbl, $loc) {\n        /*\n            Notes:  self['$d'] is the dictionary used by the GenericGetAttr mechanism for an object.\n                    for various reasons  if you create a class in Javascript and have self.xxxx instance\n                    variables, you cannot say instance.xxx and get the value of the instance variable unless \n                    it is stored in the self['$d'] object.  This seems like a duplication of storage to me\n                    but that is how it works right now  (5/2013)\n\n                    Writing your own __getattr__ is also an option but this gets very tricky when an attr is \n                    a method...\n        */\n        $loc.__init__ = new Sk.builtin.func(function(self,elem) {\n            self.v = elem\n            self.innerHTML = elem.innerHTML\n            self.innerText = elem.innerText\n            if (elem.value !== undefined) {\n                self.value = elem.value\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('value'), new Sk.builtin.str(self.value))                \n            }\n\n            if (elem.checked !== undefined) {\n                self.checked = elem.checked\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('checked'), new Sk.builtin.str(self.checked))                \n            }\n\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), new Sk.builtin.str(self.innerHTML))\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), new Sk.builtin.str(self.innerText))            \n\n        })\n\n        $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n        $loc.__setattr__ = new Sk.builtin.func(function(self,key,value) {\n            if (key === 'innerHTML') {\n                self.innerHTML = value\n                self.v.innerHTML = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerHTML'), value)                \n            }\n            if (key === 'innerText') {\n                self.innerText = value\n                self.v.innerText = value.v\n                Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str('innerText'), value)            \n            }\n        });\n\n\n        $loc.appendChild = new Sk.builtin.func(function(self,ch) {\n            self.v.appendChild(ch.v);\n        });\n\n        $loc.removeChild = new Sk.builtin.func(function(self,node) {\n            self.v.removeChild(node.v)\n        })\n\n        // getCSS\n                    \n        $loc.getCSS = new Sk.builtin.func(function(self,key) {\n            return new Sk.builtin.str(self.v.style[key.v]);\n        });\n    \n\n        $loc.setCSS = new Sk.builtin.func(function(self,attr,value) {\n            self.v.style[attr.v] = value.v\n\n        })\n\n        $loc.getAttribute = new Sk.builtin.func(function(self,key) {\n            var res = self.v.getAttribute(key.v)\n            if (res) {\n                return new Sk.builtin.str(res)\n            } else {\n                return Sk.builtin.none.none$;\n            }\n        });\n\n        $loc.setAttribute = new Sk.builtin.func(function(self,attr,value) {\n                self.v.setAttribute(attr.v,value.v)\n        });\n            \n        $loc.getProperty = new Sk.builtin.func(function(self,key) {\n            var res = self.v[key.v]\n            if (res) {\n                return new Sk.builtin.str(res)\n            } else {\n                return Sk.builtin.none.none$;\n            }\n        });\n\n        $loc.__str__ = new Sk.builtin.func(function(self) {\n            console.log(self.v.tagName);\n            return new Sk.builtin.str(self.v.tagName)\n        })\n\n        $loc.__repr__ = new Sk.builtin.func(function(self) {\n            return new Sk.builtin.str('[DOM Element]')\n        })\n\n    \n    };\n\n    mod.Element = Sk.misceval.buildClass(mod,elementClass,'Element', []);\n\n    return mod;\n\n}   ","src/lib/webgl/matrix4.js":"// more from 'tdl'\nvar $builtinmodule = function(name)\n{\n    var mod = {};\n\n    var temp0v3_ = new Float32Array(3);\n    var temp1v3_ = new Float32Array(3);\n    var temp2v3_ = new Float32Array(3);\n\n    var temp0v4_ = new Float32Array(4);\n    var temp1v4_ = new Float32Array(4);\n    var temp2v4_ = new Float32Array(4);\n\n    var temp0m4_ = new Float32Array(16);\n    var temp1m4_ = new Float32Array(16);\n    var temp2m4_ = new Float32Array(16);\n\n    var normalize = function(dst, a) {\n        var n = 0.0;\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            n += a[i] * a[i];\n        n = Math.sqrt(n);\n        if (n > 0.00001) {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = a[i] / n;\n        } else {\n            for (var i = 0; i < aLength; ++i)\n                dst[i] = 0;\n        }\n        return dst;\n    };\n\n    var cross = function(dst, a, b) {\n        dst[0] = a[1] * b[2] - a[2] * b[1];\n        dst[1] = a[2] * b[0] - a[0] * b[2];\n        dst[2] = a[0] * b[1] - a[1] * b[0];\n        return dst;\n    };\n\n    var subVector = function(dst, a, b) {\n        var aLength = a.length;\n        for (var i = 0; i < aLength; ++i)\n            dst[i] = a[i] - b[i];\n        return dst;\n    };\n\n    var dot = function(a, b) {\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n    };\n\n    mod.lookAt = new Sk.builtin.func(function(view, eye, target, up)\n            {\n                var t0 = temp0v3_;\n                var t1 = temp1v3_;\n                var t2 = temp2v3_;\n\n                var vz = normalize(t0, subVector(t0, eye.v, target.v));\n                var vx = normalize(t1, cross(t1, up.v, vz));\n                var vy = cross(t2, vz, vx);\n\n                var dst = view.v;\n                dst[ 0] = vx[0];\n                dst[ 1] = vy[0];\n                dst[ 2] = vz[0];\n                dst[ 3] = 0;\n                dst[ 4] = vx[1];\n                dst[ 5] = vy[1];\n                dst[ 6] = vz[1];\n                dst[ 7] = 0;\n                dst[ 8] = vx[2];\n                dst[ 9] = vy[2];\n                dst[10] = vz[2];\n                dst[11] = 0;\n                dst[12] = -dot(vx, eye.v);\n                dst[13] = -dot(vy, eye.v);\n                dst[14] = -dot(vz, eye.v);\n                dst[15] = 1;\n\n                return view;\n            });\n\n    mod.perspective = new Sk.builtin.func(function(proj, angle, aspect, near, far)\n            {\n                var f = Math.tan(Math.PI * 0.5 - 0.5 * (angle * Math.PI / 180));\n                var rangeInv = 1.0 / (near - far);\n\n                var dst = proj.v;\n\n                dst[0]  = f / aspect;\n                dst[1]  = 0;\n                dst[2]  = 0;\n                dst[3]  = 0;\n\n                dst[4]  = 0;\n                dst[5]  = f;\n                dst[6]  = 0;\n                dst[7]  = 0;\n\n                dst[8]  = 0;\n                dst[9]  = 0;\n                dst[10] = (near + far) * rangeInv;\n                dst[11] = -1;\n\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = near * far * rangeInv * 2;\n                dst[15] = 0;\n\n                return proj;\n            });\n\n    // builds, not appending\n    mod.rotationY = new Sk.builtin.func(function(target, angle)\n            {\n                var dst = target.v;\n                var c = Math.cos(angle * Math.PI / 180);\n                var s = Math.sin(angle * Math.PI / 180);\n\n                dst[ 0] = c;\n                dst[ 1] = 0;\n                dst[ 2] = -s;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = s;\n                dst[ 9] = 0;\n                dst[10] = c;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n\n                return target;\n            });\n\n    mod.identity = new Sk.builtin.func(function(target)\n            {\n                var dst = target.v;\n                dst[ 0] = 1;\n                dst[ 1] = 0;\n                dst[ 2] = 0;\n                dst[ 3] = 0;\n                dst[ 4] = 0;\n                dst[ 5] = 1;\n                dst[ 6] = 0;\n                dst[ 7] = 0;\n                dst[ 8] = 0;\n                dst[ 9] = 0;\n                dst[10] = 1;\n                dst[11] = 0;\n                dst[12] = 0;\n                dst[13] = 0;\n                dst[14] = 0;\n                dst[15] = 1;\n                return target;\n            });\n\n    // row major\n    mod.mul = new Sk.builtin.func(function(target, x, y)\n            {\n                var dst = target.v;\n                var a = x.v;\n                var b = y.v;\n                var a00 = a[0];\n                var a01 = a[1];\n                var a02 = a[2];\n                var a03 = a[3];\n                var a10 = a[ 4 + 0];\n                var a11 = a[ 4 + 1];\n                var a12 = a[ 4 + 2];\n                var a13 = a[ 4 + 3];\n                var a20 = a[ 8 + 0];\n                var a21 = a[ 8 + 1];\n                var a22 = a[ 8 + 2];\n                var a23 = a[ 8 + 3];\n                var a30 = a[12 + 0];\n                var a31 = a[12 + 1];\n                var a32 = a[12 + 2];\n                var a33 = a[12 + 3];\n                var b00 = b[0];\n                var b01 = b[1];\n                var b02 = b[2];\n                var b03 = b[3];\n                var b10 = b[ 4 + 0];\n                var b11 = b[ 4 + 1];\n                var b12 = b[ 4 + 2];\n                var b13 = b[ 4 + 3];\n                var b20 = b[ 8 + 0];\n                var b21 = b[ 8 + 1];\n                var b22 = b[ 8 + 2];\n                var b23 = b[ 8 + 3];\n                var b30 = b[12 + 0];\n                var b31 = b[12 + 1];\n                var b32 = b[12 + 2];\n                var b33 = b[12 + 3];\n                dst[ 0] = a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;\n                dst[ 1] = a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;\n                dst[ 2] = a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;\n                dst[ 3] = a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;\n                dst[ 4] = a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30;\n                dst[ 5] = a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31;\n                dst[ 6] = a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32;\n                dst[ 7] = a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33;\n                dst[ 8] = a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30;\n                dst[ 9] = a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31;\n                dst[10] = a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32;\n                dst[11] = a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33;\n                dst[12] = a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30;\n                dst[13] = a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31;\n                dst[14] = a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32;\n                dst[15] = a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33;\n                return target;\n            });\n\n    mod.invert = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                var m00 = m[0 * 4 + 0];\n                var m01 = m[0 * 4 + 1];\n                var m02 = m[0 * 4 + 2];\n                var m03 = m[0 * 4 + 3];\n                var m10 = m[1 * 4 + 0];\n                var m11 = m[1 * 4 + 1];\n                var m12 = m[1 * 4 + 2];\n                var m13 = m[1 * 4 + 3];\n                var m20 = m[2 * 4 + 0];\n                var m21 = m[2 * 4 + 1];\n                var m22 = m[2 * 4 + 2];\n                var m23 = m[2 * 4 + 3];\n                var m30 = m[3 * 4 + 0];\n                var m31 = m[3 * 4 + 1];\n                var m32 = m[3 * 4 + 2];\n                var m33 = m[3 * 4 + 3];\n                var tmp_0  = m22 * m33;\n                var tmp_1  = m32 * m23;\n                var tmp_2  = m12 * m33;\n                var tmp_3  = m32 * m13;\n                var tmp_4  = m12 * m23;\n                var tmp_5  = m22 * m13;\n                var tmp_6  = m02 * m33;\n                var tmp_7  = m32 * m03;\n                var tmp_8  = m02 * m23;\n                var tmp_9  = m22 * m03;\n                var tmp_10 = m02 * m13;\n                var tmp_11 = m12 * m03;\n                var tmp_12 = m20 * m31;\n                var tmp_13 = m30 * m21;\n                var tmp_14 = m10 * m31;\n                var tmp_15 = m30 * m11;\n                var tmp_16 = m10 * m21;\n                var tmp_17 = m20 * m11;\n                var tmp_18 = m00 * m31;\n                var tmp_19 = m30 * m01;\n                var tmp_20 = m00 * m21;\n                var tmp_21 = m20 * m01;\n                var tmp_22 = m00 * m11;\n                var tmp_23 = m10 * m01;\n\n                var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\n                    (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\n                var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\n                    (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\n                var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\n                    (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\n                var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\n                    (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\n\n                var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n\n                dst[ 0] = d * t0;\n                dst[ 1] = d * t1;\n                dst[ 2] = d * t2;\n                dst[ 3] = d * t3;\n                dst[ 4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\n                        (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\n                dst[ 5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\n                        (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\n                dst[ 6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\n                        (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\n                dst[ 7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\n                        (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\n                dst[ 8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\n                        (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\n                dst[ 9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\n                        (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\n                dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\n                        (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\n                dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\n                        (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\n                dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\n                        (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\n                dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\n                        (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\n                dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\n                        (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\n                dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\n                        (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\n                return target;\n            });\n\n    mod.transpose = new Sk.builtin.func(function(target, mat)\n            {\n                var dst = target.v;\n                var m = mat.v;\n                for (var j = 0; j < 4; ++j) {\n                    for (var i = 0; i < 4; ++i)\n                    dst[j * 4 + i] = m[i * 4 + j];\n                }\n                return dst;\n            });\n\n    return mod;\n};\n","src/lib/re/__init__.js":'var $builtinmodule = function(name)\n{\n    var mod = {};\n\n    // Constants (mostly unsupported)\n    mod.I = 2;\n    mod.IGNORECASE = 2;\n    // mod.L = 4;\n    // mod.LOCALE = 4;\n    mod.M = 8;\n    mod.MULTILINE = 8;\n    // mod.S = 16;\n    // mod.DOTALL = 16;\n    // mod.U = 32;\n    // mod.UNICODE = 32;\n    // mod.X = 64;\n    // mod.VERBOSE = 64;\n\n    var validGroups = ["(?:", "(?=", "(?!"];\n\n    var convert = function(pattern) {\n        var newpattern;\n        var match;\n        var i;\n\n        // Look for disallowed constructs\n        match = pattern.match(/\\(\\?./g);\n        if (match) {\n            for (i=0; i<match.length; i++) {\n                if (validGroups.indexOf(match[i]) == -1) {\n                    throw new Sk.builtin.ValueError("Disallowed group in pattern: \'"\n                                                    + match[i] + "\'");\n                };\n            };\n        };\n\n        newpattern = pattern.replace(\'/\\\\/g\', \'\\\\\\\\\');\n        newpattern = pattern.replace(/([^\\\\]){,(?![^\\[]*\\])/g, \'$1{0,\');\n\n        return newpattern;\n    };\n\n    var getFlags = function(flags) {\n        var jsflags = "g";\n        if ((flags & mod.IGNORECASE) == mod.IGNORECASE) {\n            jsflags += "i";\n        };\n        if ((flags & mod.MULTILINE) == mod.MULTILINE) {\n            jsflags += "m";\n        }; \n        return jsflags;\n    };\n\n    mod.split = Sk.nativejs.func(function split(pattern, string, maxsplit, flags) {\n        Sk.builtin.pyCheckArgs("split", arguments, 2, 4);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n        if (maxsplit === undefined) {\n            maxsplit = 0;\n        };\n        if (!Sk.builtin.checkNumber(maxsplit)) {\n            throw new Sk.builtin.TypeError("maxsplit must be a number");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n\n\tmaxsplit = Sk.builtin.asnum$(maxsplit);\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print("Pat: " + pat);\n        //print("Str: " + str);\n\n        var captured = !(pat.match(/^\\(.*\\)$/) === null);\n        //print("Captured: ", captured);\n\n        var jsflags = getFlags(flags);\n        //print("Flags: ", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n        var result = [];\n        var match;\n        var index = 0;\n        var splits = 0;\n        while ((match = regex.exec(str)) != null) {\n            //print("Matched \'" + match[0] + "\' at position " + match.index + \n            //      "; next search at " + regex.lastIndex);\n            if (match.index === regex.lastIndex) {\n                // empty match\n                break;\n            };\n            result.push(new Sk.builtin.str(str.substring(index, match.index)));\n            if (captured) {\n                // Add matching pattern, too\n                result.push(new Sk.builtin.str(match[0]));\n            };\n            index = regex.lastIndex;\n            splits += 1;\n            if (maxsplit && (splits >= maxsplit)) {\n                break;\n            };\n        };\n        result.push(new Sk.builtin.str(str.substring(index)));\n\n        return new Sk.builtin.list(result);\n    });\n\n    mod.findall = Sk.nativejs.func(function findall(pattern, string, flags) {\n        Sk.builtin.pyCheckArgs("findall", arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n        if (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n\n        var pat = Sk.ffi.unwrapo(pattern);\n        var str = Sk.ffi.unwrapo(string);\n        \n        // Convert pat from Python to Javascript regex syntax\n        pat = convert(pat);\n        //print("Pat: " + pat);\n        //print("Str: " + str);\n\n        var jsflags = getFlags(flags);\n        //print("Flags: ", jsflags);\n\n        var regex = new RegExp(pat, jsflags);\n\n        if (pat.match(/\\$/)) {\n\t    var newline_at_end = new RegExp(/\\n$/);\n\t    if (str.match(newline_at_end)) {\n\t        str = str.slice(0,-1);\n\t    }\n        }\n\n        var result = [];\n        var match;\n        while ((match = regex.exec(str)) != null) {\n            //print("Matched \'" + match[0] + "\' at position " + match.index + \n            //      "; next search at " + regex.lastIndex);\n            // print("match: " + JSON.stringify(match));\n            if (match.length < 2) {\n                result.push(new Sk.builtin.str(match[0]));\n            } else if (match.length == 2) {\n                result.push(new Sk.builtin.str(match[1]));\n            } else {\n                var groups = [];\n                for (var i=1; i<match.length; i++) {\n                    groups.push(new Sk.builtin.str(match[i]));  \n                };\n                result.push(new Sk.builtin.tuple(groups));\n            };\n            if (match.index === regex.lastIndex) {\n                regex.lastIndex += 1;\n            };\n        };\n\n        return new Sk.builtin.list(result);\n    });\n\n\n    var matchobj = function($gbl, $loc) {\n        $loc.__init__ = new Sk.builtin.func(function(self,thematch, pattern, string) {\n            self.thematch = thematch;\n\t    self.re = pattern;\n\t    self.string = string;\n        });\n\n\t$loc.groups = new Sk.builtin.func(function(self) {\n\t    return new Sk.builtin.tuple(self.thematch.v.slice(1))\n\t});\n\n\t$loc.group = new Sk.builtin.func(function(self,grpnum) {\n\t    if (grpnum === undefined) {\n                grpnum = 0;\n            }\n            else {\n                grpnum = Sk.builtin.asnum$(grpnum);\n            }\n\t    if(grpnum >= self.thematch.v.length) {\n\t\tthrow new Sk.builtin.IndexError("Index out of range: " + grpnum);\n\t\t}\n\t    return self.thematch.v[grpnum]\n\t});\n\n    }\n\n    mod.MatchObject = Sk.misceval.buildClass(mod, matchobj, \'MatchObject\', []);\n\n    // Internal function to return a Python list of strings \n    // From a JS regular expression string\n    mod._findre = function(res, string) {\n\tres = res.replace(/([^\\\\]){,(?![^\\[]*\\])/g, \'$1{0,\');\n        var re = eval(res);\n\tvar patt = new RegExp(\'\\n$\');\n\tif (string.v.match(patt))\n\t    var matches = string.v.slice(0,-1).match(re);\n\telse\n            var matches = string.v.match(re);\n        retval = new Sk.builtin.list();\n        if ( matches == null ) return retval;\n        for (var i = 0; i < matches.length; ++i) {\n            var sitem = new Sk.builtin.str(matches[i]);\n            retval.v.push(sitem);\n        }\n        return retval;\n    }\n\n    mod.search = new Sk.builtin.func(function(pattern, string, flags) {\n\tSk.builtin.pyCheckArgs(\'search\', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n\tif (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n        var res = "/"+pattern.v.replace(/\\//g,"\\\\/")+"/";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    mod.match = new Sk.builtin.func(function(pattern, string, flags) {\n\tSk.builtin.pyCheckArgs(\'match\', arguments, 2, 3);\n        if (!Sk.builtin.checkString(pattern)) {\n            throw new Sk.builtin.TypeError("pattern must be a string");\n        };\n        if (!Sk.builtin.checkString(string)) {\n            throw new Sk.builtin.TypeError("string must be a string");\n        };\n\tif (flags === undefined) {\n            flags = 0;\n        };\n        if (!Sk.builtin.checkNumber(flags)) {\n            throw new Sk.builtin.TypeError("flags must be a number");\n        };\n        var res = "/^"+pattern.v.replace(/\\//g,"\\\\/")+"/";\n        lst = mod._findre(res,string);\n        if ( lst.v.length < 1 ) return Sk.builtin.none.none$;\n        var mob = Sk.misceval.callsim(mod.MatchObject, lst, pattern, string);\n        return mob;\n    });\n\n    return mod;\n}\n',"src/lib/unittest/gui.py":"import document\nfrom unittest import TestCase\n\nclass TestCaseGui(TestCase):\n\tdef __init__(self):\n\t\tTestCase.__init__(self)\n\n\t\tself.divid = document.currentDiv()\n\t\tself.mydiv = document.getElementById(self.divid)\n\t\tres = document.getElementById(self.divid+'_unit_results')\n\t\tif res:\n\t\t\tself.resdiv = res\n\t\t\tres.innerHTML = ''\n\t\telse:\n\t\t\tself.resdiv = document.createElement('div')\n\t\t\tself.resdiv.setAttribute('id',self.divid+'_unit_results')\n\t\t\tself.resdiv.setAttribute('class','unittest-results')\n\t\tself.mydiv.appendChild(self.resdiv)\n\n\n\tdef main(self):\n\t\tl = document.createElement('ul')\n\t\tself.resdiv.appendChild(l)\n\t\tself.resList = l\n\n\t\tfor func in self.tlist:\n\t\t\ttry:\n\t\t\t\tself.setup()\n\t\t\t\tfunc()\n\t\t\t\tself.tearDown()\n\t\t\texcept:\n\t\t\t\tself.appendResult('Error')\n\t\t\t\tself.numFailed += 1\n\t\tself.showSummary()\n\n\tdef appendResult(self,res,actual,expected,feedback):\n\t\tif res == 'Error':\n\t\t\tmsg = 'Error'\n\t\telif res:\n\t\t\tmsg = 'Pass'\n\t\t\tself.numPassed += 1\n\t\telse:\n\t\t\tmsg = 'Fail: expected %s  %s ' % (str(actual),str(expected)) + feedback\n\t\t\tself.numFailed += 1\n\n\t\tpTag = document.createElement('li')\n\t\tpTag.innerHTML = msg\n\t\tself.resList.appendChild(pTag)\n\n\n\n\tdef showSummary(self):\n\t\tpct = self.numPassed / (self.numPassed+self.numFailed) * 100\n\t\tpTag = document.createElement('p')\n\t\tpTag.innerHTML = \"You passed: \" + str(pct) + \"% of the tests\"\n\t\tself.resdiv.appendChild(pTag)\n\t\tif pct < 90:\n\t\t\tself.resdiv.setCSS('background-color','#de8e96')\n\t\telse:\n\t\t\tself.resdiv.setCSS('background-color','#83d382')\n","src/lib/urllib/__init__.js":"var $builtinmodule = function(name)\n{\n  var urllib = {};\n\n  return urllib;\n};\n","src/lib/random/__init__.js":'\n/*\n  I\'ve wrapped Makoto Matsumoto and Takuji Nishimura\'s code in a namespace\n  so it\'s better encapsulated. Now you can have multiple random number generators\n  and they won\'t stomp all over eachother\'s state.\n  \n  If you want to use this as a substitute for Math.random(), use the random()\n  method like so:\n  \n  var m = new MersenneTwister();\n  var randomNumber = m.random();\n  \n  You can also call the other genrand_{foo}() methods on the instance.\n\n  If you want to use a specific seed in order to get a repeatable random\n  sequence, pass an integer into the constructor:\n\n  var m = new MersenneTwister(123);\n\n  and that will always produce the same random sequence.\n\n  Sean McCullough (banksean@gmail.com)\n*/\n\n/* \n   A C-program for MT19937, with initialization improved 2002/1/26.\n   Coded by Takuji Nishimura and Makoto Matsumoto.\n \n   Before using, initialize the state by using init_genrand(seed)  \n   or init_by_array(init_key, key_length).\n \n   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,\n   All rights reserved.                          \n \n   Redistribution and use in source and binary forms, with or without\n   modification, are permitted provided that the following conditions\n   are met:\n \n     1. Redistributions of source code must retain the above copyright\n        notice, this list of conditions and the following disclaimer.\n \n     2. Redistributions in binary form must reproduce the above copyright\n        notice, this list of conditions and the following disclaimer in the\n        documentation and/or other materials provided with the distribution.\n \n     3. The names of its contributors may not be used to endorse or promote \n        products derived from this software without specific prior written \n        permission.\n \n   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n \n \n   Any feedback is very welcome.\n   http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html\n   email: m-mat @ math.sci.hiroshima-u.ac.jp (remove space)\n*/\n\nvar MersenneTwister = function(seed) {\n  if (seed == undefined) {\n    seed = new Date().getTime();\n  } \n  /* Period parameters */  \n  this.N = 624;\n  this.M = 397;\n  this.MATRIX_A = 0x9908b0df;   /* constant vector a */\n  this.UPPER_MASK = 0x80000000; /* most significant w-r bits */\n  this.LOWER_MASK = 0x7fffffff; /* least significant r bits */\n \n  this.mt = new Array(this.N); /* the array for the state vector */\n  this.mti=this.N+1; /* mti==N+1 means mt[N] is not initialized */\n\n  this.init_genrand(seed);\n}  \n \n/* initializes mt[N] with a seed */\nMersenneTwister.prototype.init_genrand = function(s) {\n  this.mt[0] = s >>> 0;\n  for (this.mti=1; this.mti<this.N; this.mti++) {\n      var s = this.mt[this.mti-1] ^ (this.mt[this.mti-1] >>> 30);\n   this.mt[this.mti] = (((((s & 0xffff0000) >>> 16) * 1812433253) << 16) + (s & 0x0000ffff) * 1812433253)\n  + this.mti;\n      /* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */\n      /* In the previous versions, MSBs of the seed affect   */\n      /* only MSBs of the array mt[].                        */\n      /* 2002/01/09 modified by Makoto Matsumoto             */\n      this.mt[this.mti] >>>= 0;\n      /* for >32 bit machines */\n  }\n}\n \n/* initialize by an array with array-length */\n/* init_key is the array for initializing keys */\n/* key_length is its length */\n/* slight change for C++, 2004/2/26 */\nMersenneTwister.prototype.init_by_array = function(init_key, key_length) {\n  var i, j, k;\n  this.init_genrand(19650218);\n  i=1; j=0;\n  k = (this.N>key_length ? this.N : key_length);\n  for (; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30)\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1664525) << 16) + ((s & 0x0000ffff) * 1664525)))\n      + init_key[j] + j; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++; j++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n    if (j>=key_length) j=0;\n  }\n  for (k=this.N-1; k; k--) {\n    var s = this.mt[i-1] ^ (this.mt[i-1] >>> 30);\n    this.mt[i] = (this.mt[i] ^ (((((s & 0xffff0000) >>> 16) * 1566083941) << 16) + (s & 0x0000ffff) * 1566083941))\n      - i; /* non linear */\n    this.mt[i] >>>= 0; /* for WORDSIZE > 32 machines */\n    i++;\n    if (i>=this.N) { this.mt[0] = this.mt[this.N-1]; i=1; }\n  }\n\n  this.mt[0] = 0x80000000; /* MSB is 1; assuring non-zero initial array */ \n}\n \n/* generates a random number on [0,0xffffffff]-interval */\nMersenneTwister.prototype.genrand_int32 = function() {\n  var y;\n  var mag01 = new Array(0x0, this.MATRIX_A);\n  /* mag01[x] = x * MATRIX_A  for x=0,1 */\n\n  if (this.mti >= this.N) { /* generate N words at one time */\n    var kk;\n\n    if (this.mti == this.N+1)   /* if init_genrand() has not been called, */\n      this.init_genrand(5489); /* a default initial seed is used */\n\n    for (kk=0;kk<this.N-this.M;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+this.M] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    for (;kk<this.N-1;kk++) {\n      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\n      this.mt[kk] = this.mt[kk+(this.M-this.N)] ^ (y >>> 1) ^ mag01[y & 0x1];\n    }\n    y = (this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK);\n    this.mt[this.N-1] = this.mt[this.M-1] ^ (y >>> 1) ^ mag01[y & 0x1];\n\n    this.mti = 0;\n  }\n\n  y = this.mt[this.mti++];\n\n  /* Tempering */\n  y ^= (y >>> 11);\n  y ^= (y << 7) & 0x9d2c5680;\n  y ^= (y << 15) & 0xefc60000;\n  y ^= (y >>> 18);\n\n  return y >>> 0;\n}\n \n/* generates a random number on [0,0x7fffffff]-interval */\nMersenneTwister.prototype.genrand_int31 = function() {\n  return (this.genrand_int32()>>>1);\n}\n \n/* generates a random number on [0,1]-real-interval */\nMersenneTwister.prototype.genrand_real1 = function() {\n  return this.genrand_int32()*(1.0/4294967295.0); \n  /* divided by 2^32-1 */ \n}\n\n/* generates a random number on [0,1)-real-interval */\nMersenneTwister.prototype.random = function() {\n  return this.genrand_int32()*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on (0,1)-real-interval */\nMersenneTwister.prototype.genrand_real3 = function() {\n  return (this.genrand_int32() + 0.5)*(1.0/4294967296.0); \n  /* divided by 2^32 */\n}\n \n/* generates a random number on [0,1) with 53-bit resolution*/\nMersenneTwister.prototype.genrand_res53 = function() { \n  var a=this.genrand_int32()>>>5, b=this.genrand_int32()>>>6; \n  return(a*67108864.0+b)*(1.0/9007199254740992.0); \n} \n\n/* These real versions are due to Isaku Wada, 2002/01/09 added */\n\n\n\nvar $builtinmodule = function(name)\n{\n\n    var mod = {};\n\n    var myGenerator = new MersenneTwister();\n\n    mod.seed = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("seed", arguments, 0, 1);\n\tx = Sk.builtin.asnum$(x);\n\n        if (arguments.length > 0)\n            myGenerator = new MersenneTwister(x);\n        else\n            myGenerator = new MersenneTwister();\n\n\treturn Sk.builtin.none.none$;\n    });\n\n    mod.random = new Sk.builtin.func(function() {\n        Sk.builtin.pyCheckArgs("random", arguments, 0, 0);\n\n\treturn new Sk.builtin.nmber(myGenerator.genrand_res53(), Sk.builtin.nmber.float$);\n    });\n\n    var toInt = function(num) {\n        return num | 0;\n    };\n\n    var randrange = function(start, stop, step) {\n        // Ported from CPython 2.7\n        var width, n, ret;\n\n        if (!Sk.builtin.checkInt(start)) {\n            throw new Sk.builtin.ValueError("non-integer first argument for randrange()");\n        };\n\n        if (stop === undefined) {\n            // Random in [0, start)\n            ret = toInt(myGenerator.genrand_res53() * start);\n\t    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (!Sk.builtin.checkInt(stop)) {\n            throw new Sk.builtin.ValueError("non-integer stop for randrange()");\n        };\n\n        if (step === undefined) {\n            step = 1;\n        };\n\n        width = stop - start;\n\n        if ((step == 1) && (width > 0)) {\n            // Random in [start, stop), must use toInt on product for correct results with negative ranges\n            ret = start + toInt(myGenerator.genrand_res53() * width);\n\t    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n        };\n\n        if (step == 1) {\n            throw new Sk.builtin.ValueError("empty range for randrange() (" + start + ", " + stop + ", " + width + ")");\n        };\n\n        if (!Sk.builtin.checkInt(step)) {\n            throw new Sk.builtin.ValueError("non-integer step for randrange()");\n        };\n\n        if (step > 0) {\n            n = toInt((width + step - 1) / step);\n        } else if (step < 0) {\n            n = toInt((width + step + 1) / step);\n        } else {\n            throw new Sk.builtin.ValueError("zero step for randrange()");\n        };\n\n        if (n <= 0) {\n            throw new Sk.builtin.ValueError("empty range for randrange()");\n        };\n\n        // Random in range(start, stop, step)\n        ret = start + (step * toInt(myGenerator.genrand_res53() * n));\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.int$);\n    };\n\n    mod.randint = new Sk.builtin.func(function(a, b) {\n        Sk.builtin.pyCheckArgs("randint", arguments, 2, 2);\n\n\ta = Sk.builtin.asnum$(a);\n\tb = Sk.builtin.asnum$(b);\n        return randrange(a, b+1);\n    });\n\n    mod.randrange = new Sk.builtin.func(function(start, stop, step) {\n        Sk.builtin.pyCheckArgs("randrange", arguments, 1, 3);\n\n\tstart = Sk.builtin.asnum$(start);\n\tstop = Sk.builtin.asnum$(stop);\n\tstep = Sk.builtin.asnum$(step);\n        return randrange(start, stop, step);\n    });\n\n    mod.choice = new Sk.builtin.func(function(seq) {\n        Sk.builtin.pyCheckArgs("choice", arguments, 1, 1);\n        Sk.builtin.pyCheckType("seq", "sequence", Sk.builtin.checkSequence(seq));\n\n        if (seq.sq$length !== undefined) {\n            var r = toInt(myGenerator.genrand_res53() * seq.sq$length());\n            return seq.mp$subscript(r);\n        } else {\n            throw new Sk.builtin.TypeError("object has no length");\n        }\n    });\n\n    mod.shuffle = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("shuffle", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "sequence", Sk.builtin.checkSequence(x));\n\n        if (x.sq$length !== undefined) {\n            if (x.mp$ass_subscript !== undefined) {\n                for (var i = x.sq$length() - 1; i > 0; i -= 1) {\n                    var r = toInt(myGenerator.genrand_res53() * (i + 1));\n                    var tmp = x.mp$subscript(r);\n                    x.mp$ass_subscript(r, x.mp$subscript(i));\n                    x.mp$ass_subscript(i, tmp);\n                };\n            } else {\n                throw new Sk.builtin.TypeError("object is immutable");\n            };\n        } else {\n            throw new Sk.builtin.TypeError("object has no length");\n        };        \n\n\treturn Sk.builtin.none.none$;\n    });\n\n    return mod;\n}\n',"src/lib/webgl/__init__.js":"var $builtinmodule = function(name)\n{\n  var mod = {};\n\n  var makeFailHTML = function(msg) {\n    return '' +\n      '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\n      '<td align=\"center\">' +\n      '<div style=\"display: table-cell; vertical-align: middle;\">' +\n      '<div style=\"\">' + msg + '<\/div>' +\n      '<\/div>' +\n      '<\/td><\/tr><\/table>';\n  };\n\n  var GET_A_WEBGL_BROWSER = '' +\n    'This page requires a browser that supports WebGL.<br/>' +\n    '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.<\/a>';\n\n  var NEED_HARDWARE = '' +\n    \"It doesn't appear your computer can support WebGL.<br/>\" +\n    '<a href=\"http://get.webgl.org\">Click here for more information.<\/a>';\n  \n  var create3DContext = function(canvas) {\n    var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n    var gl = null;\n    for (var ii = 0; ii < names.length; ++ii) {\n      try {\n        gl = canvas.getContext(names[ii]);\n      }\n      catch(e) {\n      }\n      if (gl) {\n          break;\n      }\n    }\n    if (gl) {\n      // Disallow selection by default. This keeps the cursor from changing to an\n      // I-beam when the user clicks and drags. It's easier on the eyes.\n      function returnFalse() {\n        return false;\n      }\n\n      canvas.onselectstart = returnFalse;\n      canvas.onmousedown = returnFalse;\n    }\n    return gl;\n  };\n\n  var setupWebGL = function(canvasContainerId, opt_canvas) {\n    var container = document.getElementById(canvasContainerId);\n    var context;\n    if (!opt_canvas) {\n      opt_canvas = container.getElementsByTagName(\"canvas\")[0];\n    }\n    if (!opt_canvas) {\n        // this browser doesn't support the canvas tag at all. Not even 2d.\n      container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      return;\n    }\n\n    var gl = create3DContext(opt_canvas);\n    if (!gl) {\n      // TODO(gman): fix to official way to detect that it's the user's machine, not the browser.\n      var browserStrings = navigator.userAgent.match(/(\\w+\\/.*? )/g);\n      var browsers = {};\n      try {\n        for (var b = 0; b < browserStrings.length; ++b) {\n          var parts = browserStrings[b].match(/(\\w+)/g);\n          var bb = [];\n          for (var ii = 1; ii < parts.length; ++ii) {\n            bb.push(parseInt(parts[ii]));\n          }\n          browsers[parts[0]] = bb;\n        }\n      }\n      catch (e) {\n      }\n      if (browsers.Chrome &&\n           (browsers.Chrome[0] > 7 ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] > 0) ||\n                 (browsers.Chrome[0] == 7 && browsers.Chrome[1] == 0 && browsers.Chrome[2] >= 521))) {\n        container.innerHTML = makeFailHTML(NEED_HARDWARE);\n      }\n      else {\n        container.innerHTML = makeFailHTML(GET_A_WEBGL_BROWSER);\n      }\n    }\n    return gl;\n  };\n\n  /**\n   * The Context encapsulates the underlying WebGL native JavaScript API.\n   */\n  mod.Context = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(\n      function(self, canvasid) {\n        var canvas = document.getElementById(canvasid.v);\n        var gl = setupWebGL(canvasid.v, canvas)\n        if (!gl) {\n          throw new Error(\"Your browser does not appear to support WebGL.\");\n        }\n\n        self.gl = gl;\n\n        // Copy symbolic constants and functions from native WebGL, encapsulating where necessary.       \n        for (var k in gl.__proto__) {\n          if (typeof gl.__proto__[k] === 'number') {\n            Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), gl.__proto__[k]);\n          }\n          else if (typeof gl.__proto__[k] === \"function\") {\n            switch(k) {\n              case 'bufferData': {\n              }\n              break;\n              case 'clearColor': {\n              }\n              break;\n              case 'drawArrays': {\n              }\n              break;\n              case 'getAttribLocation': {\n              }\n              break;\n              case 'getUniformLocation': {\n              }\n              break;\n              case 'shaderSource': {\n              }\n              break;\n              case 'uniformMatrix4fv': {\n              }\n              break;\n              case 'vertexAttribPointer': {\n              }\n              break;\n              case 'viewport': {\n              }\n              break;\n              default: {\n                (function(key) {\n                  Sk.abstr.objectSetItem(self['$d'], new Sk.builtin.str(k), new Sk.builtin.func(function() {\n                    var f = gl.__proto__[key];\n                    return f.apply(gl, arguments);\n                  }));\n                 }(k));\n              }\n            }\n          }\n        }\n\n        gl.clearColor(100.0/255.0, 149.0/255.0, 237.0/255.0, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n    );\n\n    $loc.tp$getattr = Sk.builtin.object.prototype.GenericGetAttr;\n\n    $loc.bufferData = new Sk.builtin.func(\n      function(self, target, data, usage) {\n        self.gl.bufferData(target, data.v, usage);\n      }\n    );\n\n    $loc.clearColor = new Sk.builtin.func(\n      function(self, red, green, blue, alpha) {\n        self.gl.clearColor(Sk.builtin.asnum$(red), Sk.builtin.asnum$(green), Sk.builtin.asnum$(blue), Sk.builtin.asnum$(alpha));\n      }\n    );\n\n    $loc.getAttribLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getAttribLocation(program, name.v);\n      }\n    );\n\n    $loc.getUniformLocation = new Sk.builtin.func(\n      function(self, program, name) {\n        return self.gl.getUniformLocation(program, name.v);\n      }\n    );\n\n    $loc.shaderSource = new Sk.builtin.func(\n      function(self, shader, src) {\n        self.gl.shaderSource(shader, src.v);\n      }\n    );\n\n    $loc.drawArrays = new Sk.builtin.func(\n      function(self, mode, first, count) {\n        self.gl.drawArrays(Sk.builtin.asnum$(mode), Sk.builtin.asnum$(first), Sk.builtin.asnum$(count));\n      }\n    );\n\n    $loc.vertexAttribPointer = new Sk.builtin.func(\n      function(self, index, size, type, normalized, stride, dunno) {\n        self.gl.vertexAttribPointer(index, Sk.builtin.asnum$(size), Sk.builtin.asnum$(type), normalized, Sk.builtin.asnum$(stride), Sk.builtin.asnum$(dunno));\n      }\n    );\n\n    $loc.viewport = new Sk.builtin.func(\n      function(self, x, y, width, height) {\n        self.gl.viewport(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y), Sk.builtin.asnum$(width), Sk.builtin.asnum$(height));\n      }\n    );\n\n    $loc.uniformMatrix4fv = new Sk.builtin.func(\n      function(self, location, transpose, values) {\n//        console.log(\"location  \" + (typeof location));\n//        console.log(\"transpose \" + (typeof transpose));\n//        console.log(\"values.v  \" + (typeof values.v));\n        self.gl.uniformMatrix4fv(Sk.builtin.asnum$(location), transpose, values.v);\n      }\n    );\n\n    $loc.setDrawFunc = new Sk.builtin.func(function(self, func) {\n      var startTime = (new Date()).getTime();\n      var intervalId = setInterval(\n        function() {\n          Sk.misceval.callsim(func, self, (new Date()).getTime() - startTime);\n        }, 1000.0 / 60.0); // 60 fps\n    });\n\n  }, 'Context', []);\n\n  mod.Float32Array = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      if (typeof data === \"number\") {\n        self.v = new Float32Array(data);\n      }\n      else {\n        self.v = new Float32Array(Sk.ffi.remapToJs(data));\n      }\n    });\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Float32Array', []);\n\n  /**\n   * A 4x4 (mutable) matrix suitable for OpenGL.\n   *\n   * Mutability is chosen for performance.\n   * The inderlying implementation is Float32Array.\n   * The indexing of the elements is\n   * 0 4  8 12\n   * 1 5  9 13\n   * 2 6 10 14\n   * 3 7 11 15\n   */\n  mod.Matrix4x4 = Sk.misceval.buildClass(mod, function($gbl, $loc) {\n    $loc.__init__ = new Sk.builtin.func(function(self, data) {\n      self.v = new Float32Array(Sk.ffi.remapToJs(data));\n    });\n\n    $loc.identity = new Sk.builtin.func(\n      function(self) {\n\n        var m = self.v;\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = 0;\n        m[15] = 1;\n      }\n    );\n\n    $loc.perspective = new Sk.builtin.func(\n      function(self, fov, aspect, near, far) {\n        \n        var t = Math.tan(Math.PI * 0.5 - 0.5 * (Sk.builtin.asnum$(fov) * Math.PI / 180));\n        var a = Sk.builtin.asnum$(aspect)\n        var n = Sk.builtin.asnum$(near)\n        var f = Sk.builtin.asnum$(far)\n        var k = 1.0 / (n - f);\n\n        var m = self.v;\n\n        m[0]  = t / a;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = t;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = (n + f) * k;\n        m[11] = -1;\n\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = n * f * k * 2;\n        m[15] = 0;\n      }\n    );\n\n    $loc.translate = new Sk.builtin.func(\n      function(self, translation) {\n\n        var m = self.v;\n        var t = Sk.ffi.remapToJs(translation);\n\n        m[0]  = 1;\n        m[1]  = 0;\n        m[2]  = 0;\n        m[3]  = 0;\n\n        m[4]  = 0;\n        m[5]  = 1;\n        m[6]  = 0;\n        m[7]  = 0;\n\n        m[8]  = 0;\n        m[9]  = 0;\n        m[10] = 1;\n        m[11] = 0;\n\n        m[12] = t[0];\n        m[13] = t[1];\n        m[14] = t[2];\n        m[15] = 1;\n      }\n    );\n\n    $loc.__repr__ = new Sk.builtin.func(function(self) {\n      var copy = [];\n      for (var i = 0; i < self.v.length; ++i) {\n        copy.push(self.v[i]);\n      }\n      return new Sk.builtin.str(\"[\" + copy.join(', ') + \"]\");\n     });\n  }, 'Matrix4x4', []);\n\n  return mod;\n};","src/lib/math/__init__.js":'var $builtinmodule = function(name)\n{\n    var mod = {};\n    mod.pi = Sk.builtin.assk$(Math.PI, Sk.builtin.nmber.float$);\n    mod.e =  Sk.builtin.assk$(Math.E, Sk.builtin.nmber.float$);\n\n//\tRNL\tadded\n    mod.fabs = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("fabs", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(Math.abs(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("asin", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(Math.asin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.acos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("acos", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(Math.acos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("atan", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(Math.atan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.atan2 = new Sk.builtin.func(function(y, x) {\n        Sk.builtin.pyCheckArgs("atan2", arguments, 2, 2);\n        Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(Math.atan2(Sk.builtin.asnum$(y), Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sin = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("sin", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(Math.sin(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.cos = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("cos", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(Math.cos(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.tan = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("tan", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\treturn new Sk.builtin.nmber(Math.tan(Sk.builtin.asnum$(rad)), Sk.builtin.nmber.float$);\n    });\n\n    mod.asinh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs("asinh", arguments, 1, 1);\n\tSk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar L = x + Math.sqrt(x*x+1);\n\n\treturn new Sk.builtin.nmber(Math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.acosh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs("acosh", arguments, 1, 1);\n\tSk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar L = x + Math.sqrt(x*x-1);\n\n\treturn new Sk.builtin.nmber(Math.log(L), Sk.builtin.nmber.float$);\n    });\n\n    mod.atanh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs("atanh", arguments, 1, 1);\n\tSk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar L = (1+x)/(1-x);\n\n\treturn new Sk.builtin.nmber(Math.log(L)/2, Sk.builtin.nmber.float$);\n    });\n\n    mod.sinh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs("sinh", arguments, 1, 1);\n\tSk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar e = Math.E;\n\tvar p = Math.pow(e, x);\n\tvar n = 1/p;\n\tvar result = (p-n)/2;\n\n\treturn new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.cosh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs("cosh", arguments, 1, 1);\n\tSk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar e = Math.E;\n\tvar p = Math.pow(e, x);\n\tvar n = 1/p;\n\tvar result = (p+n)/2;\n\n\treturn new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.tanh = new Sk.builtin.func(function(x) {\n\tSk.builtin.pyCheckArgs("tanh", arguments, 1, 1);\n\tSk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\tx = Sk.builtin.asnum$(x);\n\n\tvar e = Math.E;\n\tvar p = Math.pow(e, x);\n\tvar n = 1/p;\n\tvar result = ((p-n)/2)/((p+n)/2);\n\n\treturn new Sk.builtin.nmber(result, Sk.builtin.nmber.float$);\n    });\n\n    mod.ceil = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("ceil", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(Math.ceil(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.floor = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("floor", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(Math.floor(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.sqrt = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("sqrt", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(Math.sqrt(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.trunc = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("trunc", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        return new Sk.builtin.nmber(Sk.builtin.asnum$(x)|0, Sk.builtin.nmber.int$);\n    });\n\n    mod.log = new Sk.builtin.func(function(x, base) {\n        Sk.builtin.pyCheckArgs("log", arguments, 1, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        if (base === undefined) {\n\t    return new Sk.builtin.nmber(Math.log(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n        } else {\n            Sk.builtin.pyCheckType("base", "number", Sk.builtin.checkNumber(base));\n            var ret = Math.log(Sk.builtin.asnum$(x)) / Math.log(Sk.builtin.asnum$(base));\n\t    return new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n        }\n    });\n\n    mod.log10 = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("log10", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n        var ret = Math.log(Sk.builtin.asnum$(x)) / Math.log(10);\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.exp = new Sk.builtin.func(function(x) {\n        Sk.builtin.pyCheckArgs("exp", arguments, 1, 1);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\treturn new Sk.builtin.nmber(Math.exp(Sk.builtin.asnum$(x)), Sk.builtin.nmber.float$);\n    });\n\n    mod.pow = new Sk.builtin.func(function(x,y) {\n        Sk.builtin.pyCheckArgs("pow", arguments, 2, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n        Sk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n\n\treturn new Sk.builtin.nmber(Math.pow(Sk.builtin.asnum$(x), Sk.builtin.asnum$(y)), Sk.builtin.nmber.float$);\n    });\n\n    mod.radians = new Sk.builtin.func(function(deg) {\n        Sk.builtin.pyCheckArgs("radians", arguments, 1, 1);\n        Sk.builtin.pyCheckType("deg", "number", Sk.builtin.checkNumber(deg));\n\n\tvar ret = Math.PI / 180.0 * Sk.builtin.asnum$(deg);\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.degrees = new Sk.builtin.func(function(rad) {\n        Sk.builtin.pyCheckArgs("degrees", arguments, 1, 1);\n        Sk.builtin.pyCheckType("rad", "number", Sk.builtin.checkNumber(rad));\n\n\tvar ret = 180.0 / Math.PI * Sk.builtin.asnum$(rad);\n\treturn new Sk.builtin.nmber(ret, Sk.builtin.nmber.float$);\n    });\n\n    mod.hypot = new Sk.builtin.func(function(x, y) {\n\tSk.builtin.pyCheckArgs("hypot", arguments, 2, 2);\n        Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\tSk.builtin.pyCheckType("y", "number", Sk.builtin.checkNumber(y));\n\n\t\tx = Sk.builtin.asnum$(x);\n\t\ty = Sk.builtin.asnum$(y);\n\treturn new Sk.builtin.nmber(Math.sqrt((x*x)+(y*y)), Sk.builtin.nmber.float$);\n    });\n\n\tmod.factorial = new Sk.builtin.func(function(x) {\n\t    Sk.builtin.pyCheckArgs("factorial", arguments, 1, 1);\n            Sk.builtin.pyCheckType("x", "number", Sk.builtin.checkNumber(x));\n\n\t\tx = Math.floor(Sk.builtin.asnum$(x));\n\t\tvar r = 1;\n\t\tfor (var i = 2; i <= x; i++)\n\t\t\tr *= i;\n\t\treturn new Sk.builtin.nmber(r, Sk.builtin.nmber.int$);\n\t});\n\n    return mod;\n}'}},function(n,t,i,r){function y(t,i){return t in n?n[t]:typeof n[i]=="function"?n[i]:function(n){if(n instanceof Array)return n;if(typeof n=="number"){var t=[];return t.length=n,t}}}function g(n){var t,u;if(typeof n=="string"){for(t=0,u=0;u<n.length;++u)t=t*31+n.charCodeAt(u)&4294967295;return t}return typeof n!="object"?n&4294967295:n.hashCode instanceof Function?n.hashCode():(n.$id===r&&(n.$id=i.floor(i.random()*65536)-32768<<16|i.floor(i.random()*65536)),n.$id)}function l(n,t){return n===null||t===null?n===null&&t===null:typeof n=="string"?n===t:typeof n!="object"?n===t:n.equals instanceof Function?n.equals(t):n===t}function rt(){}function ct(n,t,i){var u,f,e,r;if(!n.hasOwnProperty(t)||typeof n[t]!="function"){n[t]=i;return}if(u=n[t],"$overloads"in u){u.$defaultOverload=i;return}("$overloads"in i||u.length!==i.length)&&("$overloads"in i?(f=i.$overloads.slice(0),f[u.length]=u,e=i.$defaultOverload):(f=[],f[i.length]=i,f[u.length]=u,e=u),r=function(){var n=r.$overloads[arguments.length]||("$methodArgsIndex"in r&&arguments.length>r.$methodArgsIndex?r.$overloads[r.$methodArgsIndex]:null)||r.$defaultOverload;return n.apply(this,arguments)},r.$overloads=f,"$methodArgsIndex"in i&&(r.$methodArgsIndex=i.$methodArgsIndex),r.$defaultOverload=e,r.name=t,n[t]=r)}function tt(n,t){function u(i){o.defineProperty(n,i,{get:function(){return t[i]},set:function(n){t[i]=n},enumerable:!0})}var r=[];for(var i in t)typeof t[i]=="function"?ct(n,i,t[i]):i.charAt(0)==="$"||i in n||r.push(i);while(r.length>0)u(r.shift());n.$super=t}function lt(n){return typeof n!="string"?!1:["byte","int","char","color","float","long","double"].indexOf(n)!==-1}function yt(n){var o=250,l=n.size/o,f=t.createElement("canvas"),a,r,h,u,d,g,c;f.width=2*o;f.height=2*o;f.style.opacity=0;a=n.getCSSDefinition(o+"px","normal");r=f.getContext("2d");r.font=a;h="dbflkhyjqpg";f.width=r.measureText(h).width;r.font=a;u=t.createElement("div");u.style.position="absolute";u.style.opacity=0;u.style.fontFamily='"'+n.name+'"';u.style.fontSize=o+"px";u.innerHTML=h+"<br/>"+h;t.body.appendChild(u);var v=f.width,y=f.height,p=y/2;r.fillStyle="white";r.fillRect(0,0,v,y);r.fillStyle="black";r.fillText(h,0,p);for(var w=r.getImageData(0,0,v,y).data,e=0,b=v*4,k=w.length;++e<k&&w[e]===255;)s();for(d=i.round(e/b),e=k-1;--e>0&&w[e]===255;)s();return g=i.round(e/b),n.ascent=l*(p-d),n.descent=l*(g-p),t.defaultView.getComputedStyle&&(c=t.defaultView.getComputedStyle(u,null).getPropertyValue("height"),c=l*c.replace("px",""),c>=n.size*2&&(n.leading=i.round(c/2))),t.body.removeChild(u),n.caching?r:void 0}function e(n,t){var i,u,f;if(n===r&&(n=""),this.name=n,t===r&&(t=0),this.size=t,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*t,i=n.indexOf(" Italic Bold"),i!==-1&&(n=n.substring(0,i)),this.style="normal",u=n.indexOf(" Italic"),u!==-1&&(n=n.substring(0,u),this.style="italic"),this.weight="normal",f=n.indexOf(" Bold"),f!==-1&&(n=n.substring(0,f),this.weight="bold"),this.family="sans-serif",n!==r)switch(n){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=n;break;default:this.family='"'+n+'", sans-serif'}this.context2d=yt(this);this.css=this.getCSSDefinition();this.context2d&&(this.context2d.font=this.css)}function pt(){for(var e=["abs","acos","alpha","ambient","ambientLight","append","applyMatrix","arc","arrayCopy","asin","atan","atan2","background","beginCamera","beginDraw","beginShape","bezier","bezierDetail","bezierPoint","bezierTangent","bezierVertex","binary","blend","blendColor","blit_resize","blue","box","breakShape","brightness","camera","ceil","Character","color","colorMode","concat","constrain","copy","cos","createFont","createGraphics","createImage","cursor","curve","curveDetail","curvePoint","curveTangent","curveTightness","curveVertex","day","degrees","directionalLight","disableContextMenu","dist","draw","ellipse","ellipseMode","emissive","enableContextMenu","endCamera","endDraw","endShape","exit","exp","expand","externals","fill","filter","floor","focused","frameCount","frameRate","frustum","get","glyphLook","glyphTable","green","height","hex","hint","hour","hue","image","imageMode","intersect","join","key","keyCode","keyPressed","keyReleased","keyTyped","lerp","lerpColor","lightFalloff","lights","lightSpecular","line","link","loadBytes","loadFont","loadGlyphs","loadImage","loadPixels","loadShape","loadXML","loadStrings","log","loop","mag","map","match","matchAll","max","millis","min","minute","mix","modelX","modelY","modelZ","modes","month","mouseButton","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","mouseScroll","mouseScrolled","mouseX","mouseY","name","nf","nfc","nfp","nfs","noCursor","noFill","noise","noiseDetail","noiseSeed","noLights","noLoop","norm","normal","noSmooth","noStroke","noTint","ortho","param","parseBoolean","parseByte","parseChar","parseFloat","parseInt","peg","perspective","PImage","pixels","PMatrix2D","PMatrix3D","PMatrixStack","pmouseX","pmouseY","point","pointLight","popMatrix","popStyle","pow","print","printCamera","println","printMatrix","printProjection","PShape","PShapeSVG","pushMatrix","pushStyle","quad","radians","random","Random","randomSeed","rect","rectMode","red","redraw","requestImage","resetMatrix","reverse","rotate","rotateX","rotateY","rotateZ","round","saturation","save","saveFrame","saveStrings","scale","screenX","screenY","screenZ","second","set","setup","shape","shapeMode","shared","shearX","shearY","shininess","shorten","sin","size","smooth","sort","specular","sphere","sphereDetail","splice","split","splitTokens","spotLight","sq","sqrt","status","str","stroke","strokeCap","strokeJoin","strokeWeight","subset","tan","text","textAlign","textAscent","textDescent","textFont","textLeading","textMode","textSize","texture","textureMode","textWidth","tint","toImageData","touchCancel","touchEnd","touchMove","touchStart","translate","transform","triangle","trim","unbinary","unhex","updatePixels","use3DContext","vertex","width","XMLElement","XML","year","__contains","__equals","__equalsIgnoreCase","__frameRate","__hashCode","__int_cast","__instanceof","__keyPressed","__mousePressed","__printStackTrace","__replace","__replaceAll","__replaceFirst","__toCharArray","__split","__codePointAt","__startsWith","__endsWith","__matches"],r={},i,f,n=0,t=e.length;n<t;++n)r[e[n]]=null;for(i in u.lib)if(u.lib.hasOwnProperty(i)&&u.lib[i].exports)for(f=u.lib[i].exports,n=0,t=f.length;n<t;++n)r[f[n]]=null;return r}function wt(n){function vr(n){for(var t,o,s,r=[],u=n.split(/([\{\[\(\)\]\}])/),i=u[0],e=[],f=1;f<u.length;f+=2)t=u[f],t==="["||t==="{"||t==="("?(e.push(i),i=t):(t==="]"||t==="}"||t===")")&&(o=t==="}"?"A":t===")"?"B":"C",s=r.length,r.push(i+t),i=e.pop()+'"'+o+(s+1)+'"'),i+=u[f+1];return r.unshift(i),r}function yr(n,t){return n.replace(/'(\d+)'/g,function(n,i){var r=t[i];return r.charAt(0)==="/"?r:/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(r)?"(new $p.Character("+r+"))":r})}function c(n){var t=/^\s*/.exec(n),i,r;return t[0].length===n.length?i={left:t[0],middle:"",right:""}:(r=/\s*$/.exec(n),i={left:t[0],middle:n.substring(t[0].length,r.index),right:r[0]}),i.untrim=function(n){return this.left+n+this.right},i}function e(n){return n.replace(/^\s+/,"").replace(/\s+$/,"")}function y(n,t){for(var i=0,r=t.length;i<r;++i)n[t[i]]=null;return n}function pr(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function l(n){return n.substring(2,n.length-1)}function u(n,i){var r=t.length;return t.push(n),'"'+i+r+'"'}function lt(){return"class"+ ++br}function at(n,t,i){n.classId=t;n.scopeId=i;f[t]=n}function wt(n){var t=n;return t=t.replace(k,function(n){return u(n,"E")}),t=t.replace(d,function(n){return u(n,"D")}),t.replace(li,function(n){return u(n,"H")})}function ai(n,t){return n.replace(dr,function(n,i,r){return r!==t?n:u(n,"G")})}function bt(n){this.name=n}function ut(n,t){this.params=n;this.methodArgsParam=t}function g(n){var u=e(n.substring(1,n.length-1)),f=[],o=null,i,t,r;if(u!=="")for(i=u.split(","),t=0;t<i.length;++t){if(r=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(i[t]),t===i.length-1&&i[t].indexOf("...")>=0){o=new bt(r[1]);break}f.push(new bt(r[1]))}return new ut(f,o)}function gr(n){function f(n,i,f,e){var s=t[e],o;return r=!0,o=c(s.substring(1,s.length-1)),"__"+f+(o.middle===""?u("("+i.replace(/\.\s*$/,"")+")","B"):u("("+i.replace(/\.\s*$/,"")+","+o.middle+")","B"))}function e(n,t,i){return r=!0,"__instanceof"+u("("+t+", "+i+")","B")}var i=n,r;i=i.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(n,t,i){return i});i=i.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(n){return u(n,"F")});i=i.replace(li,function(n){return u(n,"H")});i=i.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(n,i,r){var f=r.replace(/"C(\d+)"/g,function(n,i){return t[i]}).replace(/\[\s*\]/g,"[null]").replace(/\s*\]\s*\[\s*/g,", "),e="{"+f.substring(1,f.length-1)+"}",o="('"+i+"', "+u(e,"A")+")";return"$p.createJavaArray"+u(o,"B")});i=i.replace(/(\.\s*length)\s*"B\d+"/g,"$1");i=i.replace(/#([0-9A-Fa-f]{6})\b/g,function(n,t){return"0xFF"+t});i=i.replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(n,i,r){var u=t[i],f;return/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(u)?/^\(\s*int\s*\)$/.test(u)?"(int)"+r:(f=u.split(/"C(\d+)"/g),f.length>1&&!/^\[\s*\]$/.test(t[f[1]]))?n:""+r:n});i=i.replace(/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g,function(n,t){var i=c(t);return i.untrim("__int_cast("+i.middle+")")});i=i.replace(/\bsuper(\s*"B\d+")/g,"$$superCstr$1").replace(/\bsuper(\s*\.)/g,"$$super$1");i=i.replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(n,t,i){return t===i?n:i===""?"0"+t:t});i=i.replace(/\b(\.?\d+\.?)[fF]\b/g,"$1");i=i.replace(/([^\s])%([^=\s])/g,"$1 % $2");i=i.replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,"__$1");i=i.replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(n,t){return"parse"+t.substring(0,1).toUpperCase()+t.substring(1)+'"B'});i=i.replace(/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(n,i,r,f,e,o){if(r){var s=t[f];return e?"pixels.setPixel"+u("("+s.substring(1,s.length-1)+","+o+")","B"):"pixels.getPixel"+u("("+s.substring(1,s.length-1)+")","B")}return i?"pixels.getLength"+u("()","B"):e?"pixels.set"+u("("+o+")","B"):"pixels.toArray"+u("()","B")});do r=!1,i=i.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g,f);while(r);do r=!1,i=i.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,e);while(r);return i.replace(/\bthis(\s*"B\d+")/g,"$$constr$1")}function vi(n,t){this.baseInterfaceName=n;this.body=t;t.owner=this}function nu(n){var i=new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/).exec(n),e=h,r=lt(),u,f;return h=r,u=i[1]+"$"+r,f=new vi(u,rt(t[i[2]],u,"","implements "+i[1])),at(f,r,e),h=e,f}function kt(n,t,i){this.name=n;this.params=t;this.body=i}function dt(n){var i=new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/).exec(n);return new kt(i[1]!=="function"?i[1]:null,g(t[i[2]]),a(t[i[3]]))}function yi(n){this.members=n}function tu(n){for(var r,t=n.split(","),i=0;i<t.length;++i)r=t[i].indexOf(":"),t[i]=r<0?{value:s(t[i])}:{label:e(t[i].substring(0,r)),value:s(e(t[i].substring(r+1)))};return new yi(t)}function ft(n){if(n.charAt(0)==="("||n.charAt(0)==="[")return n.charAt(0)+ft(n.substring(1,n.length-1))+n.charAt(n.length-1);if(n.charAt(0)==="{")return/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(n)?"{"+u(n.substring(1,n.length-1),"I")+"}":"["+ft(n.substring(1,n.length-1))+"]";var r=c(n),i=gr(r.middle);return i=i.replace(/"[ABC](\d+)"/g,function(n,i){return ft(t[i])}),r.untrim(i)}function iu(n){return n.replace(/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g,function(n,t,u,f,e,o){if(t)return n;var s={name:u,member:e,callSign:!!o};return i(s)+(f===r?"":f)})}function pi(n,t){this.expr=n;this.transforms=t}function wi(n,t,i){this.name=n;this.value=t;this.isDefault=i}function bi(n,t){var i=n.indexOf("="),r,u,f;return i<0?(r=n,u=t,f=!0):(r=n.substring(0,i),u=s(n.substring(i+1)),f=!1),new wi(e(r.replace(/(\s*"C\d+")+/g,"")),u,f)}function ki(n){return n==="int"||n==="float"?"0":n==="boolean"?"false":n==="color"?"0x00000000":"null"}function nt(n,t){this.definitions=n;this.varType=t}function di(n){this.expression=n}function tt(n){var t;if(kr.test(n)){var r=ci.exec(n),i=n.substring(r[0].length).split(","),u=ki(r[2]);for(t=0;t<i.length;++t)i[t]=bi(i[t],u);return new nt(i,r[2])}return new di(s(n))}function gi(n,t,i){this.initStatement=n;this.condition=t;this.step=i}function nr(n,t){this.initStatement=n;this.container=t}function et(n,t){this.initStatement=n;this.container=t}function ru(n){var t;return/\bin\b/.test(n)?(t=n.substring(1,n.length-1).split(/\bin\b/g),new nr(tt(e(t[0])),s(t[1]))):n.indexOf(":")>=0&&n.indexOf(";")<0?(t=n.substring(1,n.length-1).split(":"),new et(tt(e(t[0])),s(t[1]))):(t=n.substring(1,n.length-1).split(";"),new gi(tt(e(t[0])),s(t[1]),s(t[2])))}function gt(n){n.sort(function(n,t){return t.weight-n.weight})}function ni(n,t,i){this.name=n;this.body=t;this.isStatic=i;t.owner=this}function ti(n,t,i){this.name=n;this.body=t;this.isStatic=i;t.owner=this}function tr(n){var i=k.exec(n);k.lastIndex=0;var u=i[1].indexOf("static")>=0,f=t[l(i[6])],r,e=h,o=lt();return h=o,r=i[2]==="interface"?new ni(i[3],vt(f,i[3],i[4]),u):new ti(i[3],rt(f,i[3],i[4],i[5]),u),at(r,o,e),h=e,r}function ir(n,t,i,r){this.name=n;this.params=t;this.body=i;this.isStatic=r}function rr(n){var i=d.exec(n),r,u;return d.lastIndex=0,r=i[1].indexOf("static")>=0,u=i[6]!==";"?t[l(i[6])]:"{}",new ir(i[3],g(t[l(i[4])]),a(u),r)}function ii(n,t,i){this.definitions=n;this.fieldType=t;this.isStatic=i}function ur(n){for(var t=ci.exec(n),u=t[1].indexOf("static")>=0,i=n.substring(t[0].length).split(/,\s*/g),f=ki(t[2]),r=0;r<i.length;++r)i[r]=bi(i[r],f);return new ii(i,t[2],u)}function fr(n,t){this.params=n;this.body=t}function uu(n){var i=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(n),r=g(t[i[1]]);return new fr(r,a(t[i[2]]))}function ri(n,t,i,r,u,f){var e,o;for(this.name=n,this.interfacesNames=t,this.methodsNames=i,this.fields=r,this.innerClasses=u,this.misc=f,e=0,o=r.length;e<o;++e)r[e].owner=this}function ui(n,t,i,r,u,f,e,o,s){var h,c;for(this.name=n,this.baseClassName=t,this.interfacesNames=i,this.functions=r,this.methods=u,this.fields=f,this.cstrs=e,this.innerClasses=o,this.misc=s,h=0,c=f.length;h<c;++h)f[h].owner=this}function ot(n,t){this.name=n;this.body=t;t.owner=this}function st(n,t){this.name=n;this.body=t;t.owner=this}function fu(n){var i=k.exec(n),r;k.lastIndex=0;var u=t[l(i[6])],f=h,e=lt();return h=e,r=i[2]==="interface"?new ot(i[3],vt(u,i[3],i[4])):new st(i[3],rt(u,i[3],i[4],i[5])),at(r,e,f),h=f,r}function fi(n,t,i){this.name=n;this.params=t;this.body=i}function eu(n){var i=d.exec(n),r=d.lastIndex=0;return new fi(i[3],g(t[l(i[4])]),a(t[l(i[6])]))}function ou(n){var t=n;return t.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,"$1")}function ei(n,t){this.argument=n;this.misc=t}function er(n,t){this.argument=n;this.misc=t}function oi(n,t,i){this.name=n;this.argument=t;this.misc=i}function or(n){this.expr=n}function sr(n){this.label=n}function hr(n){for(var t,i=[],r=0,u=n.length;r<u;++r)t=n[r],t instanceof nt?i=i.concat(t.getNames()):t instanceof ei&&t.argument.initStatement instanceof nt?i=i.concat(t.argument.initStatement.getNames()):(t instanceof ni||t instanceof ti||t instanceof ot||t instanceof st||t instanceof fi||t instanceof kt)&&i.push(t.name);return y({},i)}function cr(n){this.statements=n}function lr(n){this.statements=n}function su(){function y(n,t){for(var u=t.split("."),f=n.scope,i,e,o;f;){if(f.hasOwnProperty(u[0])){i=f[u[0]];break}f=f.scope}for(i===r&&(i=v[u[0]]),e=1,o=u.length;e<o&&i;++e)i=i.inScope[u[e]];return i}var v={},t,n,c,l,e,a,i,o,s,h,p,u;for(t in f)f.hasOwnProperty(t)&&(n=f[t],c=n.scopeId,l=n.name,c?(e=f[c],n.scope=e,e.inScope===r&&(e.inScope={}),e.inScope[l]=n):v[l]=n);for(t in f)if(f.hasOwnProperty(t)&&(n=f[t],a=n.body.baseClassName,a&&(i=y(n,a),i&&(n.base=i,i.derived||(i.derived=[]),i.derived.push(n))),o=n.body.interfacesNames,s=[],o&&o.length>0)){for(h=0,p=o.length;h<p;++h)(u=y(n,o[h]),s.push(u),u)&&(u.derived||(u.derived=[]),u.derived.push(n));s.length>0&&(n.interfaces=s)}}function hu(){function s(n,t){var i=e[n],r;return i?(r=i.indexOf(t),r<0)?!1:(i.splice(r,1),i.length>0)?!1:(delete e[n],!0):!1}var r=[],e={},t,o,n,u,i,h;for(t in f)if(f.hasOwnProperty(t))if(n=f[t],n.inScope||n.derived){if(u=[],n.inScope)for(o in n.inScope)n.inScope.hasOwnProperty(o)&&u.push(n.inScope[o]);n.derived&&(u=u.concat(n.derived));e[t]=u}else r.push(t),n.weight=0;while(r.length>0)if(t=r.shift(),n=f[t],n.scopeId&&s(n.scopeId,n)&&(r.push(n.scopeId),f[n.scopeId].weight=n.weight+1),n.base&&s(n.base.classId,n)&&(r.push(n.base.classId),n.base.weight=n.weight+1),n.interfaces)for(i=0,h=n.interfaces.length;i<h;++i)n.interfaces[i]&&s(n.interfaces[i].classId,n)&&(r.push(n.interfaces[i].classId),n.interfaces[i].weight=n.weight+1)}var ar=pt(),wr=n.replace(/\r\n?|\n\r/g,"\n"),w=[],b=wr.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(n,t,i,r,u,f,e,o){var s;return t||i?(s=w.length,w.push(n),"'"+s+"'"):r?(s=w.length,w.push(f),u+"'"+s+"'"):o!==""?" ":"\n"}),ct,it,si,ht,v;b=b.replace(/__x([0-9A-F]{4})/g,function(n,t){return"__x005F_x"+t});b=b.replace(/\$/g,"__x0024");it=b;si=function(n,t,i,r){return!!t||!!r?n:(ct=!0,"")};do ct=!1,it=it.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,si);while(ct);var t=vr(it),i,f={},h,br=0;var rt,vt,a,yt,hi,s,k=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g,d=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g,kr=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/,dr=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g,ci=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/,li=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;return bt.prototype.toString=function(){return this.name},ut.prototype.getNames=function(){for(var t=[],n=0,i=this.params.length;n<i;++n)t.push(this.params[n].name);return t},ut.prototype.prependMethodArgs=function(n){return this.methodArgsParam?"{\nvar "+this.methodArgsParam.name+" = Array.prototype.slice.call(arguments, "+this.params.length+");\n"+n.substring(1):n},ut.prototype.toString=function(){var n,t,i;if(this.params.length===0)return"()";for(n="(",t=0,i=this.params.length;t<i;++t)n+=this.params[t]+", ";return n.substring(0,n.length-2)+")"},vi.prototype.toString=function(){return"new ("+this.body+")"},kt.prototype.toString=function(){var t=i,u=y({"this":null},this.params.getNames()),n,r;return i=function(n){return u.hasOwnProperty(n.name)?n.name:t(n)},n="function",this.name&&(n+=" "+this.name),r=this.params.prependMethodArgs(this.body.toString()),n+=this.params+" "+r,i=t,n},yi.prototype.toString=function(){var r=i,t,n,u;for(i=function(n){return n.name==="this"?"this":r(n)},t="",n=0,u=this.members.length;n<u;++n)this.members[n].label&&(t+=this.members[n].label+": "),t+=this.members[n].value.toString()+", ";return i=r,t.substring(0,t.length-2)},pi.prototype.toString=function(){var n=this.transforms,t=iu(this.expr);return t.replace(/"!(\d+)"/g,function(t,i){return n[i].toString()})},s=function(n){var i=[],r=ft(n);return r=r.replace(/"H(\d+)"/g,function(n,r){return i.push(dt(t[r])),'"!'+(i.length-1)+'"'}),r=r.replace(/"F(\d+)"/g,function(n,r){return i.push(nu(t[r])),'"!'+(i.length-1)+'"'}),r=r.replace(/"I(\d+)"/g,function(n,r){return i.push(tu(t[r])),'"!'+(i.length-1)+'"'}),new pi(r,i)},wi.prototype.toString=function(){return this.name+" = "+this.value},nt.prototype.getNames=function(){for(var t=[],n=0,i=this.definitions.length;n<i;++n)t.push(this.definitions[n].name);return t},nt.prototype.toString=function(){return"var "+this.definitions.join(",")},di.prototype.toString=function(){return this.expression.toString()},gi.prototype.toString=function(){return"("+this.initStatement+"; "+this.condition+"; "+this.step+")"},nr.prototype.toString=function(){var n=this.initStatement.toString();return n.indexOf("=")>=0&&(n=n.substring(0,n.indexOf("="))),"("+n+" in "+this.container+")"},et.iteratorId=0,et.prototype.toString=function(){var i=this.initStatement.toString(),n="$it"+et.iteratorId++,t=i.replace(/^\s*var\s*/,"").split("=")[0],r="var "+n+" = new $p.ObjectIterator("+this.container+"), "+t+" = void(0)",u=n+".hasNext() && (("+t+" = "+n+".next()) || true)";return"("+r+"; "+u+";)"},ni.prototype.toString=function(){return""+this.body},ti.prototype.toString=function(){return""+this.body},ir.prototype.toString=function(){var u=y({},this.params.getNames()),n=i,t,r;return i=function(t){return u.hasOwnProperty(t.name)?t.name:n(t)},t=this.params.prependMethodArgs(this.body.toString()),r="function "+this.methodId+this.params+" "+t+"\n",i=n,r},ii.prototype.getNames=function(){for(var t=[],n=0,i=this.definitions.length;n<i;++n)t.push(this.definitions[n].name);return t},ii.prototype.toString=function(){var r=i({name:"[this]"}),f,u,n,e;if(this.isStatic){for(f=this.owner.name,u=[],n=0,e=this.definitions.length;n<e;++n){var o=this.definitions[n],s=o.name,t=f+"."+s,h="if("+t+" === void(0)) {\n "+t+" = "+o.value+"; }\n$p.defineProperty("+r+", '"+s+"', { get: function(){return "+t+";}, set: function(val){"+t+" = val;} });\n";u.push(h)}return u.join("")}return r+"."+this.definitions.join("; "+r+".")},fr.prototype.toString=function(){var u=y({},this.params.getNames()),t=i,r,n;return i=function(n){return u.hasOwnProperty(n.name)?n.name:t(n)},r="function $constr_"+this.params.params.length+this.params.toString(),n=this.params.prependMethodArgs(this.body.toString()),/\$(superCstr|constr)\b/.test(n)||(n="{\n$superCstr();\n"+n.substring(1)),i=t,r+n+"\n"},ri.prototype.getMembers=function(n,t,i){var r,f,u,s,e,h,o;for(this.owner.base&&this.owner.base.body.getMembers(n,t,i),r=0,u=this.fields.length;r<u;++r)for(e=this.fields[r].getNames(),f=0,s=e.length;f<s;++f)n[e[f]]=this.fields[r];for(r=0,u=this.methodsNames.length;r<u;++r)h=this.methodsNames[r],t[h]=!0;for(r=0,u=this.innerClasses.length;r<u;++r)o=this.innerClasses[r],i[o.name]=o},ri.prototype.toString=function(){function c(n){for(var t=0;n;)++t,n=n.scope;return t}var l=c(this.owner),t=this.name,u="",f="",n,r,o,s,e,h;if(this.getMembers({},{},{}),this.owner.interfaces){for(o=[],n=0,r=this.interfacesNames.length;n<r;++n)this.owner.interfaces[n]&&(s=i({name:this.interfacesNames[n]}),o.push(s),u+="$p.extendInterfaceMembers("+t+", "+s+");\n");f+=t+".$interfaces = ["+o.join(", ")+"];\n"}for(f+=t+".$isInterface = true;\n",f+=t+".$methods = ['"+this.methodsNames.join("', '")+"'];\n",gt(this.innerClasses),n=0,r=this.innerClasses.length;n<r;++n)e=this.innerClasses[n],e.isStatic&&(u+=t+"."+e.name+" = "+e+";\n");for(n=0,r=this.fields.length;n<r;++n)h=this.fields[n],h.isStatic&&(u+=t+"."+h.definitions.join(";\n"+t+".")+";\n");return"(function() {\nfunction "+t+"() { throw 'Unable to create the interface'; }\n"+u+f+"return "+t+";\n})()"},vt=function(n,i,u){var e=n.substring(1,n.length-1),o,s,h,a,f,l,v,y,p;for(e=wt(e),e=ai(e,i),o=[],s=[],e=e.replace(/"([DE])(\d+)"/g,function(n,t,i){return t==="D"?o.push(i):t==="E"&&s.push(i),""}),h=e.split(/;(?:\s*;)*/g),u!==r&&(a=u.replace(/^\s*extends\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),f=0,l=o.length;f<l;++f)v=rr(t[o[f]]),o[f]=v.name;for(f=0,l=h.length-1;f<l;++f)y=c(h[f]),h[f]=ur(y.middle);for(p=h.pop(),f=0,l=s.length;f<l;++f)s[f]=tr(t[s[f]]);return new ri(i,a,o,h,s,{tail:p})},ui.prototype.getMembers=function(n,t,i){var r,f,u,h,e,o,s;for(this.owner.base&&this.owner.base.body.getMembers(n,t,i),r=0,u=this.fields.length;r<u;++r)for(e=this.fields[r].getNames(),f=0,h=e.length;f<h;++f)n[e[f]]=this.fields[r];for(r=0,u=this.methods.length;r<u;++r)o=this.methods[r],t[o.name]=o;for(r=0,u=this.innerClasses.length;r<u;++r)s=this.innerClasses[r],i[s.name]=s},ui.prototype.toString=function(){function ht(n){for(var t=0;n;)++t,n=n.scope;return t}var ct=ht(this.owner),r="$this_"+ct,u=this.name,t="var "+r+" = this;\n",h="",b="",k={},d={},et={},l,y,n,o,p,ot,g,nt,s,c,tt,it,rt,w,ft,st;if(this.getMembers(k,d,et),l=i,i=function(n){var t=n.name;return t==="this"?n.callSign||!n.member?r+".$self":r:k.hasOwnProperty(t)?k[t].isStatic?u+"."+t:r+"."+t:et.hasOwnProperty(t)?r+"."+t:d.hasOwnProperty(t)?d[t].isStatic?u+"."+t:r+".$self."+t:l(n)},this.baseClassName?(y=l({name:this.baseClassName}),t+="var $super = { $upcast: "+r+" };\n",t+="function $superCstr(){"+y+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n",b+=u+".$base = "+y+";\n"):t+="function $superCstr(){$p.extendClassChain("+r+")}\n",this.owner.base&&(h+="$p.extendStaticMembers("+u+", "+y+");\n"),this.owner.interfaces){for(g=[],n=0,o=this.interfacesNames.length;n<o;++n)this.owner.interfaces[n]&&(nt=l({name:this.interfacesNames[n]}),g.push(nt),h+="$p.extendInterfaceMembers("+u+", "+nt+");\n");b+=u+".$interfaces = ["+g.join(", ")+"];\n"}for(this.functions.length>0&&(t+=this.functions.join("\n")+"\n"),gt(this.innerClasses),n=0,o=this.innerClasses.length;n<o;++n)s=this.innerClasses[n],s.isStatic?(h+=u+"."+s.name+" = "+s+";\n",t+=r+"."+s.name+" = "+u+"."+s.name+";\n"):t+=r+"."+s.name+" = "+s+";\n";for(n=0,o=this.fields.length;n<o;++n)if(c=this.fields[n],c.isStatic)for(h+=u+"."+c.definitions.join(";\n"+u+".")+";\n",p=0,ot=c.definitions.length;p<ot;++p)tt=c.definitions[p].name,it=u+"."+tt,t+="$p.defineProperty("+r+", '"+tt+"', {get: function(){return "+it+"}, set: function(val){"+it+" = val}});\n";else t+=r+"."+c.definitions.join(";\n"+r+".")+";\n";for(rt={},n=0,o=this.methods.length;n<o;++n){var f=this.methods[n],a=rt[f.name],v=f.name+"$"+f.params.params.length,ut=!!f.params.methodArgsParam;a?(++a,v+="_"+a):a=1;f.methodId=v;rt[f.name]=a;f.isStatic?(h+=f,h+="$p.addMethod("+u+", '"+f.name+"', "+v+", "+ut+");\n",t+="$p.addMethod("+r+", '"+f.name+"', "+v+", "+ut+");\n"):(t+=f,t+="$p.addMethod("+r+", '"+f.name+"', "+v+", "+ut+");\n")}for(t+=e(this.misc.tail),this.cstrs.length>0&&(t+=this.cstrs.join("\n")+"\n"),t+="function $constr() {\n",w=[],n=0,o=this.cstrs.length;n<o;++n)ft=this.cstrs[n].params.params.length,st=!!this.cstrs[n].params.methodArgsParam,w.push("if(arguments.length "+(st?">=":"===")+" "+ft+") { $constr_"+ft+".apply("+r+", arguments); }");return w.length>0&&(t+=w.join(" else ")+" else "),t+="$superCstr();\n}\n",t+="$constr.apply(null, arguments);\n",i=l,"(function() {\nfunction "+u+"() {\n"+t+"}\n"+h+b+"return "+u+";\n})()"},rt=function(n,i,u,f){var o=n.substring(1,n.length-1),s,y,p,e,w,b;o=wt(o);o=ai(o,i);var h=[],l=[],a=[],v=[];for(o=o.replace(/"([DEGH])(\d+)"/g,function(n,t,i){return t==="D"?h.push(i):t==="E"?l.push(i):t==="H"?v.push(i):a.push(i),""}),s=o.replace(/^(?:\s*;)+/,"").split(/;(?:\s*;)*/g),u!==r&&(y=u.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,"$1")),f!==r&&(p=f.replace(/^\s*implements\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),e=0;e<v.length;++e)v[e]=dt(t[v[e]]);for(e=0;e<h.length;++e)h[e]=rr(t[h[e]]);for(e=0;e<s.length-1;++e)w=c(s[e]),s[e]=ur(w.middle);for(b=s.pop(),e=0;e<a.length;++e)a[e]=uu(t[a[e]]);for(e=0;e<l.length;++e)l[e]=tr(t[l[e]]);return new ui(i,y,p,v,h,s,a,l,{tail:b})},ot.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"},st.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"},fi.prototype.toString=function(){var u=y({},this.params.getNames()),n=i,t,r;return i=function(t){return u.hasOwnProperty(t.name)?t.name:n(t)},t=this.params.prependMethodArgs(this.body.toString()),r="function "+this.name+this.params+" "+t+"\n$p."+this.name+" = "+this.name+";",i=n,r},ei.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},er.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},oi.prototype.toString=function(){var n=this.misc.prefix;return this.argument!==r&&(n+=this.argument.toString()),n},or.prototype.toString=function(){return"case "+this.expr+":"},sr.prototype.toString=function(){return this.label},yt=function(n,i,u){var l=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g),f=[],h,o,v,d,w,b,y,k,p;for(n=ou(n),h=0;(o=l.exec(n))!==null;){if(o[1]!==r)d=n.lastIndexOf('"B',l.lastIndex),w=n.substring(h,d),o[1]==="for"?f.push(new ei(ru(t[o[2]]),{prefix:w})):o[1]==="catch"?f.push(new er(g(t[o[2]]),{prefix:w})):f.push(new oi(o[1],s(t[o[2]]),{prefix:w}));else if(o[3]!==r)f.push(new oi(o[3],r,{prefix:n.substring(h,l.lastIndex)}));else if(o[4]!==r){if(v=n.substring(h,l.lastIndex-o[4].length),e(v).length!==0)continue;f.push(v);b=o[4].charAt(1);y=o[5];b==="D"?f.push(i(t[y])):b==="E"?f.push(u(t[y])):b==="H"?f.push(dt(t[y])):f.push(a(t[y]))}else if(o[6]!==r)f.push(new or(s(e(o[7]))));else if(o[8]!==r){if(v=n.substring(h,l.lastIndex-o[8].length),e(v).length!==0)continue;f.push(new sr(n.substring(h,l.lastIndex)))}else k=c(n.substring(h,l.lastIndex-1)),f.push(k.left),f.push(tt(k.middle)),f.push(k.right+";");h=l.lastIndex}return p=c(n.substring(h)),f.push(p.left),p.middle!==""&&(f.push(tt(p.middle)),f.push(";"+p.right)),f},cr.prototype.toString=function(){var n=hr(this.statements),t=i,r;return pr(n)||(i=function(i){return n.hasOwnProperty(i.name)?i.name:t(i)}),r="{\n"+this.statements.join("")+"\n}",i=t,r},a=function(n){var t=c(n.substring(1,n.length-1));return new cr(yt(t.middle))},lr.prototype.toString=function(){for(var f,e,t=[],u=[],n,r=0,s=this.statements.length;r<s;++r)n=this.statements[r],n instanceof st||n instanceof ot?t.push(n):u.push(n);return gt(t),f=hr(this.statements),i=function(n){var t=n.name;return f.hasOwnProperty(t)?t:ar.hasOwnProperty(t)||p.hasOwnProperty(t)||o.hasOwnProperty(t)?"$p."+t:t},e="// this code was autogenerated from PJS\n(function($p) {\n"+t.join("")+"\n"+u.join("")+"\n})",i=null,e},hi=function(){var n=wt(t[0]);return n=n.replace(/\bimport\s+[^;]+;/g,""),new lr(yt(n,eu,fu))},ht=hi(),su(ht),hu(ht),v=ht.toString(),v=v.replace(/\s*\n(?:[\t ]*\n)+/g,"\n\n"),v=v.replace(/__x([0-9A-F]{4})/g,function(n,t){return String.fromCharCode(parseInt(t,16))}),yr(v,w)}function bt(n,t){var l=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(n),s,w,f,h,b,k,c,d,v,y;if(l&&l.length===2){var a=[],p=l.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(n,t){return a.push(t),"{"+(a.length-1)+"}"}}()).replace("\n","").replace("\r","").split(";"),o=function(n){return n.replace(/^\s*["']?/,"").replace(/["']?\s*$/,"")};for(s=0,w=p.length;s<w;s++)if(f=p[s].split("="),f&&f.length===2){var i=o(f[0]),r=o(f[1]),u=[];if(i==="preload")for(u=r.split(","),h=0,b=u.length;h<b;h++)k=o(u[h]),t.imageCache.add(k);else if(i==="font")for(u=r.split(","),c=0,d=u.length;c<d;c++)v=o(u[c]),y=/^\{(\d*?)\}$/.exec(v),e.preloading.add(y?JSON.parse("{"+a[y[1]]+"}"):v);else i==="pauseOnBlur"?t.options.pauseOnBlur=r==="true":i==="globalKeyEvents"?t.options.globalKeyEvents=r==="true":i.substring(0,6)==="param-"?t.params[i.substring(6)]=r:t.options[i]=r}}return n}var s=function(){},ft=function(){return"console"in n?function(t){n.console.log("Processing.js: "+t)}:s}(),k=function(n){var t=new XMLHttpRequest;if(t.open("GET",n,!1),t.overrideMimeType&&t.overrideMimeType("text/plain"),t.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),t.send(null),t.status!==200&&t.status!==0)throw"XMLHttpRequest failed, status code "+t.status;return t.responseText},d="document"in this&&!("fake"in this.document),o,a,u,ut,b,v;if(t.head=t.head||t.getElementsByTagName("head")[0],t.documentMode>=9&&!t.doctype)throw"The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>";var f=y("Float32Array","WebGLFloatArray"),et=y("Int32Array","WebGLIntArray"),ot=y("Uint16Array","WebGLUnsignedShortArray"),it=y("Uint8Array","WebGLUnsignedByteArray"),p={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:.0001,MAX_FLOAT:34028235e31,MIN_FLOAT:-34028235e31,MAX_INT:2147483647,MIN_INT:-2147483648,PI:i.PI,TWO_PI:2*i.PI,HALF_PI:i.PI/2,THIRD_PI:i.PI/3,QUARTER_PI:i.PI/4,DEG_TO_RAD:i.PI/180,RAD_TO_DEG:180/i.PI,WHITESPACE:" \t\n\r\f ",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};var nt=function(n){if(n.iterator instanceof Function)return n.iterator();if(n instanceof Array){var t=-1;this.hasNext=function(){return++t<n.length};this.next=function(){return n[t]}}else throw"Unable to iterate: "+n;},st=function(){function t(n){var t=0;this.hasNext=function(){return t<n.length};this.next=function(){return n[t++]};this.remove=function(){n.splice(t,1)}}function n(i){var r;i instanceof n?r=i.toArray():(r=[],typeof i=="number"&&(r.length=i>0?i:0));this.get=function(n){return r[n]};this.contains=function(n){return this.indexOf(n)>-1};this.indexOf=function(n){for(var t=0,i=r.length;t<i;++t)if(l(n,r[t]))return t;return-1};this.lastIndexOf=function(n){for(var t=r.length-1;t>=0;--t)if(l(n,r[t]))return t;return-1};this.add=function(){if(arguments.length===1)r.push(arguments[0]);else if(arguments.length===2){var n=arguments[0];if(typeof n=="number")if(n>=0&&n<=r.length)r.splice(n,0,arguments[1]);else throw n+" is not a valid index";else throw typeof n+" is not a number";}else throw"Please use the proper number of parameters.";};this.addAll=function(n,t){var i;if(typeof n=="number"){if(n<0||n>r.length)throw"Index out of bounds for addAll: "+n+" greater or equal than "+r.length;for(i=new nt(t);i.hasNext();)r.splice(n++,0,i.next())}else for(i=new nt(n);i.hasNext();)r.push(i.next())};this.set=function(){if(arguments.length===2){var n=arguments[0];if(typeof n=="number")if(n>=0&&n<r.length)r.splice(n,1,arguments[1]);else throw n+" is not a valid index.";else throw typeof n+" is not a number";}else throw"Please use the proper number of parameters.";};this.size=function(){return r.length};this.clear=function(){r.length=0};this.remove=function(n){return typeof n=="number"?r.splice(n,1)[0]:(n=this.indexOf(n),n>-1)?(r.splice(n,1),!0):!1};this.removeAll=function(t){var i,f,u,r=new n;for(r.addAll(this),this.clear(),i=0,f=0;i<r.size();i++)u=r.get(i),t.contains(u)||this.add(f++,u);return this.size()<r.size()?!0:!1};this.isEmpty=function(){return!r.length};this.clone=function(){return new n(this)};this.toArray=function(){return r.slice(0)};this.iterator=function(){return new t(r)}}return n}(),ht=function(){function n(){function f(n){var i=g(n)%t.length;return i<0?t.length+i:i}function s(){var n,i,h,e,s,o;if(!(u<=c*t.length)){for(n=[],i=0;i<t.length;++i)t[i]!==r&&(n=n.concat(t[i]));for(h=t.length*2,t=[],t.length=h,e=0;e<n.length;++e)s=f(n[e].key),o=t[s],o===r&&(t[s]=o=[]),o.push(n[e])}}function a(n,i){function s(){while(!o)if(++f,u>=t.length)o=!0;else if(t[u]===r||f>=t[u].length)f=-1,++u;else return}var u=0,f=-1,o=!1,e;this.hasNext=function(){return!o};this.next=function(){return e=n(t[u][f]),s(),e};this.remove=function(){e!==r&&(i(e),--f,s())};s()}function e(n,t,r){this.clear=function(){i.clear()};this.contains=function(n){return t(n)};this.containsAll=function(n){for(var t=n.iterator();t.hasNext();)if(!this.contains(t.next()))return!1;return!0};this.isEmpty=function(){return i.isEmpty()};this.iterator=function(){return new a(n,r)};this.remove=function(n){return this.contains(n)?(r(n),!0):!1};this.removeAll=function(n){for(var i=n.iterator(),u=!1,t;i.hasNext();)t=i.next(),this.contains(t)&&(r(t),u=!0);return!0};this.retainAll=function(n){for(var f=this.iterator(),t=[],u,i;f.hasNext();)u=f.next(),n.contains(u)||t.push(u);for(i=0;i<t.length;++i)r(t[i]);return t.length>0};this.size=function(){return i.size()};this.toArray=function(){for(var n=[],t=this.iterator();t.hasNext();)n.push(t.next());return n}}function h(n){this._isIn=function(t){return t===i&&n.removed===r};this.equals=function(t){return l(n.key,t.getKey())};this.getKey=function(){return n.key};this.getValue=function(){return n.value};this.hashCode=function(){return g(n.key)};this.setValue=function(t){var i=n.value;return n.value=t,i}}var u,i;if(arguments.length===1&&arguments[0]instanceof n)return arguments[0].clone();var o=arguments.length>0?arguments[0]:16,c=arguments.length>1?arguments[1]:.75,t=[];t.length=o;u=0;i=this;this.clear=function(){u=0;t=[];t.length=o};this.clone=function(){var t=new n;return t.putAll(this),t};this.containsKey=function(n){var e=f(n),u=t[e],i;if(u===r)return!1;for(i=0;i<u.length;++i)if(l(u[i].key,n))return!0;return!1};this.containsValue=function(n){for(var u,f,i=0;i<t.length;++i)if(u=t[i],u!==r)for(f=0;f<u.length;++f)if(l(u[f].value,n))return!0;return!1};this.entrySet=function(){return new e(function(n){return new h(n)},function(n){return n instanceof h&&n._isIn(i)},function(n){return i.remove(n.getKey())})};this.get=function(n){var e=f(n),u=t[e],i;if(u===r)return null;for(i=0;i<u.length;++i)if(l(u[i].key,n))return u[i].value;return null};this.isEmpty=function(){return u===0};this.keySet=function(){return new e(function(n){return n.key},function(n){return i.containsKey(n)},function(n){return i.remove(n)})};this.values=function(){return new e(function(n){return n.value},function(n){return i.containsValue(n)},function(n){return i.removeByValue(n)})};this.put=function(n,i){var h=f(n),e=t[h],o,c;if(e===r)return++u,t[h]=[{key:n,value:i}],s(),null;for(o=0;o<e.length;++o)if(l(e[o].key,n))return c=e[o].value,e[o].value=i,c;return++u,e.push({key:n,value:i}),s(),null};this.putAll=function(n){for(var i=n.entrySet().iterator(),t;i.hasNext();)t=i.next(),this.put(t.getKey(),t.getValue())};this.remove=function(n){var o=f(n),i=t[o],e,s;if(i===r)return null;for(e=0;e<i.length;++e)if(l(i[e].key,n))return--u,s=i[e].value,i[e].removed=!0,i.length>1?i.splice(e,1):t[o]=r,s;return null};this.removeByValue=function(n){var i,r,u,f;for(i in t)if(t.hasOwnProperty(i))for(r=0,u=t[i].length;r<u;r++)if(f=t[i][r],f.value===n)return t[i].splice(r,1),!0;return!1};this.size=function(){return u}}return n}(),h=function(){function n(n,t,i){this.x=n||0;this.y=t||0;this.z=i||0}function r(n){return function(t,i){var r=t.get();return r[n](i),r}}n.dist=function(n,t){return n.dist(t)};n.dot=function(n,t){return n.dot(t)};n.cross=function(n,t){return n.cross(t)};n.angleBetween=function(n,t){return i.acos(n.dot(t)/(n.mag()*t.mag()))};n.prototype={set:function(n,t,i){arguments.length===1?this.set(n.x||n[0]||0,n.y||n[1]||0,n.z||n[2]||0):(this.x=n,this.y=t,this.z=i)},get:function(){return new n(this.x,this.y,this.z)},mag:function(){var n=this.x,t=this.y,r=this.z;return i.sqrt(n*n+t*t+r*r)},add:function(n,t,i){arguments.length===1?(this.x+=n.x,this.y+=n.y,this.z+=n.z):(this.x+=n,this.y+=t,this.z+=i)},sub:function(n,t,i){arguments.length===1?(this.x-=n.x,this.y-=n.y,this.z-=n.z):(this.x-=n,this.y-=t,this.z-=i)},mult:function(n){typeof n=="number"?(this.x*=n,this.y*=n,this.z*=n):(this.x*=n.x,this.y*=n.y,this.z*=n.z)},div:function(n){typeof n=="number"?(this.x/=n,this.y/=n,this.z/=n):(this.x/=n.x,this.y/=n.y,this.z/=n.z)},dist:function(n){var t=this.x-n.x,r=this.y-n.y,u=this.z-n.z;return i.sqrt(t*t+r*r+u*u)},dot:function(n,t,i){return arguments.length===1?this.x*n.x+this.y*n.y+this.z*n.z:this.x*n+this.y*t+this.z*i},cross:function(t){var i=this.x,r=this.y,u=this.z;return new n(r*t.z-t.y*u,u*t.x-t.z*i,i*t.y-t.x*r)},normalize:function(){var n=this.mag();n>0&&this.div(n)},limit:function(n){this.mag()>n&&(this.normalize(),this.mult(n))},heading2D:function(){return-i.atan2(-this.y,this.x)},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};for(var t in n.prototype)n.prototype.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=r(t));return n}();rt.prototype=p;o=new rt;o.ArrayList=st;o.HashMap=ht;o.PVector=h;o.ObjectIterator=nt;o.PConstants=p;o.defineProperty=function(n,t,i){"defineProperty"in Object?Object.defineProperty(n,t,i):(i.hasOwnProperty("get")&&n.__defineGetter__(t,i.get),i.hasOwnProperty("set")&&n.__defineSetter__(t,i.set))};o.extendClassChain=function(n){for(var i=[n],t=n.$upcast;t;t=t.$upcast)tt(t,n),i.push(t),n=t;while(i.length>0)i.pop().$self=n};o.extendStaticMembers=function(n,t){tt(n,t)};o.extendInterfaceMembers=function(n,t){tt(n,t)};o.addMethod=function(n,t,i,r){var f=n[t],e,u,o;f||r?(e=i.length,"$overloads"in f?f.$overloads[e]=i:(u=function(){var n=u.$overloads[arguments.length]||("$methodArgsIndex"in u&&arguments.length>u.$methodArgsIndex?u.$overloads[u.$methodArgsIndex]:null)||u.$defaultOverload;return n.apply(this,arguments)},o=[],f&&(o[f.length]=f),o[e]=i,u.$overloads=o,u.$defaultOverload=f||i,r&&(u.$methodArgsIndex=e),u.name=t,n[t]=u)):n[t]=i};o.createJavaArray=function(n,t){var i=null,f=null,r,u,s,e;if(typeof n=="string"&&(n==="boolean"?f=!1:lt(n)&&(f=0)),typeof t[0]=="number")if(r=0|t[0],t.length<=1)for(i=[],i.length=r,u=0;u<r;++u)i[u]=f;else for(i=[],s=t.slice(1),e=0;e<r;++e)i.push(o.createJavaArray(n,s));return i};a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},function(n){function f(n){return function(){throw"Processing.js does not support "+n+".";}}for(var i="open() createOutput() createInput() BufferedReader selectFolder() dataPath() createWriter() selectOutput() beginRecord() saveStream() endRecord() selectInput() saveBytes() createReader() beginRaw() endRaw() PrintWriter delay()".split(" "),r=i.length,t,u;r--;)t=i[r],u=t.replace("()",""),n[u]=f(t)}(o);o.defineProperty(o,"screenWidth",{get:function(){return n.innerWidth}});o.defineProperty(o,"screenHeight",{get:function(){return n.innerHeight}});o.defineProperty(o,"online",{get:function(){return!0}});var c=[],w={},at=function(n){c.splice(w[n],1);delete w[n]},vt=function(n){n.externals.canvas.id!==r&&n.externals.canvas.id.length||(n.externals.canvas.id="__processing"+c.length);w[n.externals.canvas.id]=c.length;c.push(n)};e.prototype.caching=!0;e.prototype.getCSSDefinition=function(n,t){n===r&&(n=this.size+"px");t===r&&(t=this.leading+"px");var i=[this.style,"normal",this.weight,n+"/"+t,this.family];return i.join(" ")};e.prototype.measureTextWidth=function(n){return this.context2d.measureText(n).width};e.prototype.measureTextWidthFallback=function(n){var r=t.createElement("canvas"),i=r.getContext("2d");return i.font=this.css,i.measureText(n).width};e.PFontCache={length:0};e.get=function(n,t){var i,r,u;if(t=(t*10+.5|0)/10,i=e.PFontCache,r=n+"/"+t,!i[r]){if(i[r]=new e(n,t),i.length++,i.length===50){e.prototype.measureTextWidth=e.prototype.measureTextWidthFallback;e.prototype.caching=!1;for(u in i)u!=="length"&&(i[u].context2d=null);return new e(n,t)}if(i.length===400)return e.PFontCache={},e.get=e.getFallback,new e(n,t)}return i[r]};e.getFallback=function(n,t){return new e(n,t)};e.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]};e.preloading={template:{},initialized:!1,initialize:function(){var r=function(){var n=function(n){return"AAAAAAAA".substr(~~n?7-n:6)};return"#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#".replace(/[#237]/g,n)},i=t.createElement("style"),n;i.setAttribute("type","text/css");i.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+r()+"')\n       format('truetype');\n}";t.head.appendChild(i);n=t.createElement("span");n.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;';n.innerHTML="AAAAAAAA";t.body.appendChild(n);this.template=n;this.initialized=!0},getElementWidth:function(n){return t.defaultView.getComputedStyle(n,"").getPropertyValue("width")},timeAttempted:0,pending:function(n){var r,u,f,i;for(this.initialized||this.initialize(),f=this.getElementWidth(this.template),i=0;i<this.fontList.length;i++){if(r=this.fontList[i],u=this.getElementWidth(r),this.timeAttempted<4e3&&u===f)return this.timeAttempted+=n,!0;t.body.removeChild(r);this.fontList.splice(i--,1);this.timeAttempted=0}return this.fontList.length===0?!1:!0},fontList:[],addedList:{},add:function(n){var r,f,u,i;(this.initialized||this.initialize(),r=typeof n=="object"?n.fontFace:n,f=typeof n=="object"?n.url:n,this.addedList[r])||(u=t.createElement("style"),u.setAttribute("type","text/css"),u.innerHTML="@font-face{\n  font-family: '"+r+"';\n  src:  url('"+f+"');\n}\n",t.head.appendChild(u),this.addedList[r]=!0,i=t.createElement("span"),i.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",i.style.fontFamily='"'+r+'", "PjsEmptyFont", fantasy',i.innerHTML="AAAAAAAA",t.body.appendChild(i),this.fontList.push(i))}};o.PFont=e;u=this.Processing=function(c,l){function bf(n){u.debug("Unimplemented - "+n)}function dt(n,t,i,u){var f=or.locations[n];f===r&&(f=y.getUniformLocation(t,i),or.locations[n]=f);f!==null&&(u.length===4?y.uniform4fv(f,u):u.length===3?y.uniform3fv(f,u):u.length===2?y.uniform2fv(f,u):y.uniform1f(f,u))}function gt(n,t,i,u){var f=or.locations[n];f===r&&(f=y.getUniformLocation(t,i),or.locations[n]=f);f!==null&&(u.length===4?y.uniform4iv(f,u):u.length===3?y.uniform3iv(f,u):u.length===2?y.uniform2iv(f,u):y.uniform1i(f,u))}function kt(n,t,i,u,f){var e=or.locations[n];e===r&&(e=y.getUniformLocation(t,i),or.locations[n]=e);e!==-1&&(f.length===16?y.uniformMatrix4fv(e,u,f):f.length===9?y.uniformMatrix3fv(e,u,f):y.uniformMatrix2fv(e,u,f))}function fi(n,t,i,u,f){var e=or.attributes[n];e===r&&(e=y.getAttribLocation(t,i),or.attributes[n]=e);e!==-1&&(y.bindBuffer(y.ARRAY_BUFFER,f),y.vertexAttribPointer(e,u,y.FLOAT,!1,0,0),y.enableVertexAttribArray(e))}function gi(n,t,i){var u=or.attributes[n];u===r&&(u=y.getAttribLocation(t,i),or.attributes[n]=u);u!==-1&&y.disableVertexAttribArray(u)}function ir(n,t,r,u){var f,e,o,s,h;return gr===3?(h=v.color.toRGB(n,t,r),f=h[0],e=h[1],o=h[2]):(f=i.round(255*(n/bi)),e=i.round(255*(t/er)),o=i.round(255*(r/ki))),s=i.round(255*(u/oi)),f=f<0?0:f,e=e<0?0:e,o=o<0?0:o,s=s<0?0:s,f=f>255?255:f,e=e>255?255:e,o=o>255?255:o,s=s>255?255:s,s<<24&4278190080|f<<16&16711680|e<<8&65280|o&255}function ra(n,t){var r;return n&4278190080?(r=i.round(255*(t/oi)),r=r>255?255:r,r=r<0?0:r,n-(n&4278190080)+(r<<24&4278190080)):gr===1?ir(n,n,n,t):gr===3?ir(0,0,n/bi*ki,t):void 0}function ua(n){if(n<=bi&&n>=0){if(gr===1)return ir(n,n,n,oi);if(gr===3)return ir(0,0,n/bi*ki,oi)}if(n)return n>2147483647&&(n-=4294967296),n}function fe(n){var r,u,e,t,f,i,o;return(r=(n>>16&255)/255,u=(n>>8&255)/255,e=(n&255)/255,t=v.max(v.max(r,u),e),f=v.min(v.min(r,u),e),f===t)?[0,0,t*ki]:(o=(t-f)/t,i=r===t?(u-e)/(t-f):u===t?2+(e-r)/(t-f):4+(r-u)/(t-f),i/=6,i<0?i+=1:i>1&&(i-=1),[i*bi,o*er,t*ki])}function du(){y.save()}function gu(){y.restore();ce=!0;eu=!0}function sc(){var n=(Date.now()-ko)/1e3,t;be++;t=be/n;n>.5&&(ko=Date.now(),be=0,v.__frameRate=t);v.frameCount++}function ii(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent("on"+t,i);nf.push({elem:n,type:t,fn:i})}function ws(n){var t=n.elem,i=n.type,r=n.fn;t.removeEventListener?t.removeEventListener(i,r,!1):t.detachEvent&&t.detachEvent("on"+i,r)}function hc(n,t,u,f,e,o){var w=n<0?u:t,b=e===0,c=e===r||e<0?0:e,h=i.abs(n),l,v,y,s,p,a;if(b)for(c=1,h*=10;i.abs(i.round(h)-h)>1e-6&&c<7;)++c,h*=10;else c!==0&&(h*=i.pow(10,c));for(v=h*2,i.floor(h)===h?l=h:i.floor(v)===v?(y=i.floor(h),l=y+y%2):l=i.round(h),s="",p=f+c;p>0||l>0;)p--,s=""+l%10+s,l=i.floor(l/10);if(o!==r)for(a=s.length-3-c;a>0;)s=s.substring(0,a)+o+s.substring(a),a-=3;return c>0?w+s.substring(0,s.length-c)+"."+s.substring(s.length-c,s.length):w+s}function fo(n,t,i,r,u,f){var o,e,s;if(n instanceof Array){for(o=[],e=0,s=n.length;e<s;e++)o.push(hc(n[e],t,i,r,u,f));return o}return hc(n,t,i,r,u,f)}function lc(n){var t=parseInt("0x"+n,16);return t>2147483647&&(t-=4294967296),t}function hr(n){return Array.prototype.slice.call(n,1)}function ac(n){return typeof n=="number"?n!==0:typeof n=="boolean"?n:typeof n=="string"?n.toLowerCase()==="true":n instanceof yi?n.code===49||n.code===84||n.code===116:void 0}function vc(n){return typeof n=="number"?n:typeof n=="boolean"?n?1:0:typeof n=="string"?parseFloat(n):n instanceof yi?n.code:void 0}function yc(n,t){if(typeof n=="number")return n&4294967295;if(typeof n=="boolean")return n?1:0;if(typeof n=="string"){var i=parseInt(n,t||10);return i&4294967295}if(n instanceof yi)return n.code}function af(n,t){var i=n||362436069,r=t||521288629,u=function(){return i=36969*(i&65535)+(i>>>16)&4294967295,r=18e3*(r&65535)+(r>>>16)&4294967295,((i&65535)<<16|r&65535)&4294967295};this.nextDouble=function(){var n=u()/4294967296;return n<0?1+n:n};this.nextInt=u}function fa(n){function e(n,t,i,r){var u=n&15,f=u<8?t:i,e=u<4?i:u===12||u===14?t:r;return((u&1)==0?f:-f)+((u&2)==0?e:-e)}function o(n,t,i){var r=(n&1)==0?t:i;return(n&2)==0?-r:r}function c(n,t){return(n&1)==0?-t:t}function f(n,t,i){return t+n*(i-t)}for(var l=n!==r?new af(n):af.createRandomized(),s,t=new it(512),h,u=0;u<256;++u)t[u]=u;for(u=0;u<256;++u)h=t[s=l.nextInt()&255],t[s]=t[u],t[u]=h;for(u=0;u<256;++u)t[u+256]=t[u];this.noise3d=function(n,r,u){var h=i.floor(n)&255,c=i.floor(r)&255,o=i.floor(u)&255;n-=i.floor(n);r-=i.floor(r);u-=i.floor(u);var s=(3-2*n)*n*n,l=(3-2*r)*r*r,k=(3-2*u)*u*u,a=t[h]+c,v=t[a]+o,y=t[a+1]+o,p=t[h+1]+c,w=t[p]+o,b=t[p+1]+o;return f(k,f(l,f(s,e(t[v],n,r,u),e(t[w],n-1,r,u)),f(s,e(t[y],n,r-1,u),e(t[b],n-1,r-1,u))),f(l,f(s,e(t[v+1],n,r,u-1),e(t[w+1],n-1,r,u-1)),f(s,e(t[y+1],n,r-1,u-1),e(t[b+1],n-1,r-1,u-1))))};this.noise2d=function(n,r){var u=i.floor(n)&255,e=i.floor(r)&255;n-=i.floor(n);r-=i.floor(r);var s=(3-2*n)*n*n,l=(3-2*r)*r*r,h=t[u]+e,c=t[u+1]+e;return f(l,f(s,o(t[h],n,r),o(t[c],n-1,r)),f(s,o(t[h+1],n,r-1),o(t[c+1],n-1,r-1)))};this.noise1d=function(n){var r=i.floor(n)&255,u;return n-=i.floor(n),u=(3-2*n)*n*n,f(u,c(t[r],n),c(t[r+1],n-1))}}function ru(){wt&&(eu&&(y.fillStyle=v.color.toString(fu),eu=!1),y.fill())}function dr(){lt&&(ce&&(y.strokeStyle=v.color.toString(ou),ce=!1),y.stroke())}function se(){ru();dr();y.closePath()}function vf(n,i,u){var f=ds.shift();f===r&&(f={},f.canvas=t.createElement("canvas"),f.context=f.canvas.getContext("2d"));ds.push(f);var h=f.canvas,e=f.context,o=i||n.width,s=u||n.height;return h.width=o,h.height=s,n?"data"in n?e.putImageData(n,0,0):(e.clearRect(0,0,o,s),e.drawImage(n,0,0,o,s)):e.clearRect(0,0,o,s),f}function ea(n){return{getLength:function(n){return function(){if(n.isRemote)throw"Image is loaded remotely. Cannot get length.";else return n.imageData.data.length?n.imageData.data.length/4:0}}(n),getPixel:function(n){return function(t){var i=t*4,r=n.imageData.data;if(n.isRemote)throw"Image is loaded remotely. Cannot get pixels.";return(r[i+3]&255)<<24|(r[i]&255)<<16|(r[i+1]&255)<<8|r[i+2]&255}}(n),setPixel:function(n){return function(t,i){var r=t*4,u=n.imageData.data;if(n.isRemote)throw"Image is loaded remotely. Cannot set pixel.";u[r+0]=i>>16&255;u[r+1]=i>>8&255;u[r+2]=i&255;u[r+3]=i>>24&255;n.__isDirty=!0}}(n),toArray:function(n){return function(){var u=[],i=n.imageData.data,f=n.width*n.height,r,t;if(n.isRemote)throw"Image is loaded remotely. Cannot get pixels.";for(r=0,t=0;r<f;r++,t+=4)u.push((i[t+3]&255)<<24|(i[t]&255)<<16|(i[t+1]&255)<<8|i[t+2]&255);return u}}(n),set:function(n){return function(t){var i,r,u,f,e;if(this.isRemote)throw"Image is loaded remotely. Cannot set pixels.";for(r=n.imageData.data,f=0,e=t.length;f<e;f++)u=t[f],i=f*4,r[i+0]=u>>16&255,r[i+1]=u>>8&255,r[i+2]=u&255,r[i+3]=u>>24&255;n.__isDirty=!0}}(n)}}function oa(n,t){var i,r;return n>=v.width||n<0||t<0||t>=v.height?0:gf?(r=((0|n)+v.width*(0|t))*4,i=v.imageData.data,(i[r+3]&255)<<24|(i[r]&255)<<16|(i[r+1]&255)<<8|i[r+2]&255):(i=v.toImageData(0|n,0|t,1,1).data,(i[3]&255)<<24|(i[0]&255)<<16|(i[1]&255)<<8|i[2]&255)}function sa(n,t,i){if(i.isRemote)throw"Image is loaded remotely. Cannot get x,y.";var r=t*i.width*4+n*4,u=i.imageData.data;return(u[r+3]&255)<<24|(u[r]&255)<<16|(u[r+1]&255)<<8|u[r+2]&255}function nl(n,t,i,r){var u=new ur(i,r,2);return u.fromImageData(v.toImageData(n,t,i,r)),u}function tl(n,t,r,u,f){var e,o,s,v;if(f.isRemote)throw"Image is loaded remotely. Cannot get x,y,w,h.";var l=new ur(r,u,2),h=l.imageData.data,y=f.width,p=f.height,c=f.imageData.data,w=i.max(0,-t),a=i.max(0,-n),b=i.min(u,p-t),k=i.min(r,y-n);for(e=w;e<b;++e)for(o=((t+e)*y+(n+a))*4,s=(e*r+a)*4,v=a;v<k;++v)h[s++]=c[o++],h[s++]=c[o++],h[s++]=c[o++],h[s++]=c[o++];return l.__isDirty=!0,l}function he(){gf&&(y=vh,gf=!1,v.updatePixels())}function ha(){function t(n,t){function i(){he();y[t].apply(y,arguments)}n[t]=i}function i(n,t){function i(){return he(),y[t]}function r(n){he();y[t]=n}v.defineProperty(n,t,{get:i,set:r})}for(var n in y)typeof y[n]=="function"?t(this,n):i(this,n)}function ca(){gf||(v.loadPixels(),cs===null&&(vh=y,cs=new ha),gf=!0,y=cs,yh=0)}function la(n,t,i){n<v.width&&n>=0&&t>=0&&t<v.height&&(ca(),v.pixels.setPixel((0|n)+v.width*(0|t),i),++yh>ph&&he())}function aa(n,t,i,r){if(r.isRemote)throw"Image is loaded remotely. Cannot set x,y.";var u=v.color.toArray(i),f=t*r.width*4+n*4,e=r.imageData.data;e[f]=u[0];e[f+1]=u[1];e[f+2]=u[2];e[f+3]=u[3]}function yf(n){return n instanceof String?n:typeof n=="number"?n===(0|n)?n.toString():v.nf(n,0,3):n===null||n===r?"":n.toString()}function rl(n,t,i,r){var e,f,u,o,s;for(n.indexOf("\n")<0?(e=[n],f=1):(e=n.split(/\r?\n/g),f=e.length),u=0,nu===101?u=tu+ar:nu===3?u=tu/2-(f-1)*tr/2:nu===102&&(u=-(ar+(f-1)*tr)),o=0;o<f;++o)s=e[o],ei.text$line(s,t,i+u,r,vu),u+=tr}function ul(n,t,r,u,f,e){var o,w,p,c,b,g,v,nt,k;if(n.length!==0&&u!==0&&f!==0&&!(lr>f)){var l=-1,s=0,h=0,a=[];for(o=0,w=n.length;o<w;o++){var y=n[o],tt=y===" ",d=ti.measureTextWidth(y);if(y!=="\n"&&h+d<=u)tt&&(l=o),h+=d;else{if(l+1===s)if(o>0)l=o;else return;y==="\n"?(a.push({text:n.substring(s,o),width:h}),s=o+1):(a.push({text:n.substring(s,l+1),width:h}),s=l+1);h=0;o=s-1}}for(s<w&&a.push({text:n.substring(s),width:h}),p=1,c=tu,vu===3?p=u/2:vu===39&&(p=u),b=a.length,g=i.min(b,i.floor(f/tr)),nu===101?c=tu+ar:nu===3?c=f/2-tr*(g/2-1):nu===102&&(c=ar+tr),v=0;v<b;v++){if(k=v*tr,c+k>f-ar)break;nt=a[v];ei.text$line(nt.text,t+p,r+c+k,e,vu)}}}function pf(n){ei=n==="3D"?new rt:n==="2D"?new tt:new nt;for(var t in nt.prototype)nt.prototype.hasOwnProperty(t)&&t.indexOf("$")<0&&(v[t]=ei[t]);ei.$init()}function st(n){return function(){return pf("2D"),ei[n].apply(this,arguments)}}function fl(t){var i=t,r=0,u=0;if(v.pmouseX=v.mouseX,v.pmouseY=v.mouseY,i.offsetParent)do r+=i.offsetLeft,u+=i.offsetTop;while(!!(i=i.offsetParent));i=t;do r-=i.scrollLeft||0,u-=i.scrollTop||0;while(!!(i=i.parentNode));return r+=wh,u+=bh,r+=kh,u+=dh,r+=n.pageXOffset,u+=n.pageYOffset,{X:r,Y:u}}function eo(n,t){var i=fl(n,t);v.mouseX=t.pageX-i.X;v.mouseY=t.pageY-i.Y}function oo(n){for(var i=fl(n.changedTouches[0].target,n.changedTouches[0]),r,u,f,t=0;t<n.touches.length;t++)r=n.touches[t],r.offsetX=r.pageX-i.X,r.offsetY=r.pageY-i.Y;for(t=0;t<n.targetTouches.length;t++)u=n.targetTouches[t],u.offsetX=u.pageX-i.X,u.offsetY=u.pageY-i.Y;for(t=0;t<n.changedTouches.length;t++)f=n.changedTouches[t],f.offsetX=f.pageX-i.X,f.offsetY=f.pageY-i.Y;return n}function el(n){var t=n.which||n.keyCode;switch(t){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return t}function pa(n){var t=n.which||n.keyCode,i=n.shiftKey||n.ctrlKey||n.altKey||n.metaKey;switch(t){case 13:t=i?13:10;break;case 8:t=i?127:8}return new yi(t)}function ol(n){return typeof n.preventDefault=="function"?n.preventDefault():typeof n.stopPropagation=="function"&&n.stopPropagation(),!1}function th(){for(var n in yu)if(yu.hasOwnProperty(n)){v.__keyPressed=!0;return}v.__keyPressed=!1}function sl(){v.__keyPressed=!1;yu=[];ef=null}function hl(n,t){yu[n]=t;ef=null;v.key=t;v.keyCode=n;v.keyPressed();v.keyCode=0;v.keyTyped();th()}function wa(n){var t=el(n),i;if(t===127){hl(t,new yi(127));return}if(al.indexOf(t)<0){ef=t;return}return i=new yi(65535),v.key=i,v.keyCode=t,yu[t]=i,v.keyPressed(),ef=null,th(),ol(n)}function ba(n){if(ef!==null){var t=ef,i=pa(n);return hl(t,i),ol(n)}}function ka(n){var t=el(n),i=yu[t];i!==r&&(v.key=i,v.keyCode=t,v.keyReleased(),delete yu[t],th())}var d,ho,v,uo,yi,ys,pt,ue,iu,oc,ps,br,ut,kr,nf,cc,ee,oe,cr,pc,bs,ks,bc,kc,dc,gc,ds,ur,gs,hi,nh,so,wf,ih,rh;if(!(this instanceof u))throw"called Processing constructor as if it were a function: missing 'new'.";if(ho=c===r&&l===r,d=ho?t.createElement("canvas"):typeof c=="string"?t.getElementById(c):c,!(d instanceof HTMLCanvasElement))throw"called Processing constructor without passing canvas element reference or id.";v=this;v.externals={canvas:d,context:r,sketch:r};v.name="Processing.js Instance";v.use3DContext=!1;v.focused=!1;v.breakShape=!1;v.glyphTable={};v.pmouseX=0;v.pmouseY=0;v.mouseX=0;v.mouseY=0;v.mouseButton=0;v.mouseScroll=0;v.mouseClicked=r;v.mouseDragged=r;v.mouseMoved=r;v.mousePressed=r;v.mouseReleased=r;v.mouseScrolled=r;v.mouseOver=r;v.mouseOut=r;v.touchStart=r;v.touchEnd=r;v.touchMove=r;v.touchCancel=r;v.key=r;v.keyCode=r;v.keyPressed=s;v.keyReleased=s;v.keyTyped=s;v.draw=r;v.setup=r;v.__mousePressed=!1;v.__keyPressed=!1;v.__frameRate=60;v.frameCount=0;v.width=100;v.height=100;var y,ri,ei,wt=!0,di=[1,1,1,1],fu=4294967295,eu=!0,lt=!0,pi=[0,0,0,1],ou=4278190080,ce=!0,si=1,le=!1,su=!1,lu=!0,ae=0,fr=0,wi=3,co=0,lo=0,ao=0,ve=0,vo=60,uh=1e3/vo,ye="default",cl=d.style.cursor,ni=20,ll=[],yo=0,po=20,fh=!1,au=-3355444,wo=20,oi=255,bi=255,er=255,ki=255,pe=0,we=0,gr=1,hu=null,bo=null,eh=Date.now(),ko=eh,be=0,nr,kf,ke,tf,rf,go,ns,or={attributes:{},locations:{}},b,ft,ci,ts,is,rs,de,us,df,fs,oh,es,sh,ge,hh,ch,lh,uf={width:0,height:0},ah=2,ai=!1,os,ss,hs,vu=37,nu=0,no=4,ff="Arial",lr=12,tu=9,ar=2,tr=14,ti=e.get(ff,lr),vh,cs=null,gf=!1,yh,ph=1e3,yu=[],ef=null,al=[16,17,18,20,33,34,35,36,37,38,39,40,144,155,112,113,114,115,116,117,118,119,120,121,122,123,157],wh,bh,kh,dh;t.defaultView&&t.defaultView.getComputedStyle&&(wh=parseInt(t.defaultView.getComputedStyle(d,null).paddingLeft,10)||0,bh=parseInt(t.defaultView.getComputedStyle(d,null).paddingTop,10)||0,kh=parseInt(t.defaultView.getComputedStyle(d,null).borderLeftWidth,10)||0,dh=parseInt(t.defaultView.getComputedStyle(d,null).borderTopWidth,10)||0);var ct=0,to=0,pu=0,vr=[],yr=[],pr=[],ne=new f(720),te=new f(720),yt,wu,wr,ht,ui,of,sf,ie,sr,io=!1,gh=!1,ro=i.PI/3,ls=v.width/2,bu=v.height/2,ku=bu/i.tan(ro/2),nc=ku/10,tc=ku*10,ic=v.width/v.height,w=[],vi=[],li=0,hf=!1,cf=!1,cu=!0,re=0,rc=[],uc=new f([.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),fc=new f([.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5]),vl=new f([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),as=new f([0,0,0,0,1,0,1,1,0,1,0,0]),yl=new f([0,0,1,0,0,1,0,0,1,0,0,1]),pl="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;void main(void) {  vFrontColor = aColor;  gl_PointSize = uPointSize;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}",wl="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  gl_FragColor = vFrontColor;}",bl="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec2 aTextureCoord;uniform vec4 uColor;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = uPointSize;  vFrontColor = uColor;  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);  vTextureCoord = aTextureCoord;}",kl="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int uIsDrawingText;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  if(uIsDrawingText == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);  }  else{    gl_FragColor = vFrontColor;  }}",dl=/Windows/.test(navigator.userAgent),gl="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec3 aNormal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 uColor;uniform bool uUsingMat;uniform vec3 uSpecular;uniform vec3 uMaterialEmissive;uniform vec3 uMaterialAmbient;uniform vec3 uMaterialSpecular;uniform float uShininess;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform mat4 uNormalTransform;uniform int uLightCount;uniform vec3 uFalloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light uLights0;uniform Light uLights1;uniform Light uLights2;uniform Light uLights3;uniform Light uLights4;uniform Light uLights5;uniform Light uLights6;uniform Light uLights7;Light getLight(int index){  if(index == 0) return uLights0;  if(index == 1) return uLights1;  if(index == 2) return uLights2;  if(index == 3) return uLights3;  if(index == 4) return uLights4;  if(index == 5) return uLights5;  if(index == 6) return uLights6;  return uLights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));  if( nDotVP != 0.0 ){    powerFactor = pow( nDotVH, uShininess );  }  col += light.color * nDotVP;  spec += uSpecular * powerFactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerFactor = 0.0;  }  else {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float spotAttenuation;  float powerFactor = 0.0;  vec3 VP = light.position - ecPos;  vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );  float spotDot = dot( VP, ldir );"+(dl?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {    spotAttenuation = pow( spotDot, light.concentration );  }  else{    spotAttenuation = 0.0;  }  attenuation *= spotAttenuation;")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ) );  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );  if( nDotVP != 0.0 ) {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void main(void) {  vec3 finalAmbient = vec3( 0.0 );  vec3 finalDiffuse = vec3( 0.0 );  vec3 finalSpecular = vec3( 0.0 );  vec4 col = uColor;  if ( uColor[0] == -1.0 ){    col = aColor;  }  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;  if( uLightCount == 0 ) {    vFrontColor = col + vec4(uMaterialSpecular, 1.0);  }  else {    for( int i = 0; i < 8; i++ ) {      Light l = getLight(i);      if( i >= uLightCount ){        break;      }      if( l.type == 0 ) {        AmbientLight( finalAmbient, ecPos, l );      }      else if( l.type == 1 ) {        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else if( l.type == 2 ) {        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else {        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }    }   if( uUsingMat == false ) {     vFrontColor = vec4(       vec3( col ) * finalAmbient +       vec3( col ) * finalDiffuse +       vec3( col ) * finalSpecular,       col[3] );   }   else{     vFrontColor = vec4(        uMaterialEmissive +        (vec3(col) * uMaterialAmbient * finalAmbient ) +        (vec3(col) * finalDiffuse) +        (uMaterialSpecular * finalSpecular),        col[3] );    }  }  vTexture.xy = aTexture.xy;  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );}",na="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform sampler2D uSampler;uniform bool uUsingTexture;varying vec2 vTexture;void main(void){  if( uUsingTexture ){    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;  }  else{    gl_FragColor = vFrontColor;  }}";var vs=function(n,t,i){var f=n.createShader(n.VERTEX_SHADER),r,u;if(n.shaderSource(f,t),n.compileShader(f),!n.getShaderParameter(f,n.COMPILE_STATUS))throw n.getShaderInfoLog(f);if(r=n.createShader(n.FRAGMENT_SHADER),n.shaderSource(r,i),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw n.getShaderInfoLog(r);if(u=n.createProgram(),n.attachShader(u,f),n.attachShader(u,r),n.linkProgram(u),!n.getProgramParameter(u,n.LINK_STATUS))throw"Error linking shaders.";return u},ec=function(n,t,i,r){return{x:n,y:t,w:i,h:r}},lf=ec,ta=function(n,t,i,r,u){return{x:n,y:t,w:u?i:i-n,h:u?r:r-t}},ia=function(n,t,i,r){return{x:n-i/2,y:t-r/2,w:i,h:r}},bt=function(){},tt=function(){},rt=function(){},nt=function(){};tt.prototype=new bt;tt.prototype.constructor=tt;rt.prototype=new bt;rt.prototype.constructor=rt;nt.prototype=new bt;nt.prototype.constructor=nt;bt.prototype.a3DOnlyFunction=s;uo={};yi=v.Character=function(n){return this.code=typeof n=="string"&&n.length===1?n.charCodeAt(0):typeof n=="number"?n:n instanceof yi?n:NaN,uo[this.code]===r?uo[this.code]=this:uo[this.code]};yi.prototype.toString=function(){return String.fromCharCode(this.code)};yi.prototype.valueOf=function(){return this.code};ys=v.PShape=function(n){this.family=n||0;this.visible=!0;this.style=!0;this.children=[];this.nameTable=[];this.params=[];this.name="";this.image=null;this.matrix=null;this.kind=null;this.close=null;this.width=null;this.height=null;this.parent=null};ys.prototype={isVisible:function(){return this.visible},setVisible:function(n){this.visible=n},disableStyle:function(){this.style=!1;for(var n=0,t=this.children.length;n<t;n++)this.children[n].disableStyle()},enableStyle:function(){this.style=!0;for(var n=0,t=this.children.length;n<t;n++)this.children[n].enableStyle()},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(n){this.name=n},getName:function(){return this.name},draw:function(n){n=n||v;this.visible&&(this.pre(n),this.drawImpl(n),this.post(n))},drawImpl:function(n){this.family===0?this.drawGroup(n):this.family===1?this.drawPrimitive(n):this.family===3?this.drawGeometry(n):this.family===21&&this.drawPath(n)},drawPath:function(n){var i,r,t;if(this.vertices.length!==0){if(n.beginShape(),this.vertexCodes.length===0)if(this.vertices[0].length===2)for(i=0,r=this.vertices.length;i<r;i++)n.vertex(this.vertices[i][0],this.vertices[i][1]);else for(i=0,r=this.vertices.length;i<r;i++)n.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]);else if(t=0,this.vertices[0].length===2)for(i=0,r=this.vertexCodes.length;i<r;i++)this.vertexCodes[i]===0?(n.vertex(this.vertices[t][0],this.vertices[t][1],this.vertices[t].moveTo),n.breakShape=!1,t++):this.vertexCodes[i]===1?(n.bezierVertex(this.vertices[t+0][0],this.vertices[t+0][1],this.vertices[t+1][0],this.vertices[t+1][1],this.vertices[t+2][0],this.vertices[t+2][1]),t+=3):this.vertexCodes[i]===2?(n.curveVertex(this.vertices[t][0],this.vertices[t][1]),t++):this.vertexCodes[i]===3&&(n.breakShape=!0);else for(i=0,r=this.vertexCodes.length;i<r;i++)this.vertexCodes[i]===0?(n.vertex(this.vertices[t][0],this.vertices[t][1],this.vertices[t][2]),this.vertices[t].moveTo===!0?w[w.length-1].moveTo=!0:this.vertices[t].moveTo===!1&&(w[w.length-1].moveTo=!1),n.breakShape=!1):this.vertexCodes[i]===1?(n.bezierVertex(this.vertices[t+0][0],this.vertices[t+0][1],this.vertices[t+0][2],this.vertices[t+1][0],this.vertices[t+1][1],this.vertices[t+1][2],this.vertices[t+2][0],this.vertices[t+2][1],this.vertices[t+2][2]),t+=3):this.vertexCodes[i]===2?(n.curveVertex(this.vertices[t][0],this.vertices[t][1],this.vertices[t][2]),t++):this.vertexCodes[i]===3&&(n.breakShape=!0);n.endShape(this.close?2:1)}},drawGeometry:function(n){var t,r,i;if(n.beginShape(this.kind),this.style)for(t=0,r=this.vertices.length;t<r;t++)n.vertex(this.vertices[t]);else for(t=0,r=this.vertices.length;t<r;t++)i=this.vertices[t],i[2]===0?n.vertex(i[0],i[1]):n.vertex(i[0],i[1],i[2]);n.endShape()},drawGroup:function(n){for(var t=0,i=this.children.length;t<i;t++)this.children[t].draw(n)},drawPrimitive:function(n){var t,i,r,u;this.kind===2?n.point(this.params[0],this.params[1]):this.kind===4?this.params.length===4?n.line(this.params[0],this.params[1],this.params[2],this.params[3]):n.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]):this.kind===8?n.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]):this.kind===16?n.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7]):this.kind===30?this.image!==null?(t=lf,n.imageMode(0),n.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3]),lf=t):(i=fr,n.rectMode(0),n.rect(this.params[0],this.params[1],this.params[2],this.params[3]),fr=i):this.kind===31?(r=wi,n.ellipseMode(0),n.ellipse(this.params[0],this.params[1],this.params[2],this.params[3]),wi=r):this.kind===32?(u=wi,n.ellipseMode(0),n.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]),wi=u):this.kind===41?this.params.length===1?n.box(this.params[0]):n.box(this.params[0],this.params[1],this.params[2]):this.kind===40&&n.sphere(this.params[0])},pre:function(n){this.matrix&&(n.pushMatrix(),n.transform(this.matrix));this.style&&(n.pushStyle(),this.styles(n))},post:function(n){this.matrix&&n.popMatrix();this.style&&n.popStyle()},styles:function(n){this.stroke?(n.stroke(this.strokeColor),n.strokeWeight(this.strokeWeight),n.strokeCap(this.strokeCap),n.strokeJoin(this.strokeJoin)):n.noStroke();this.fill?n.fill(this.fillColor):n.noFill()},getChild:function(n){var t,r,i;if(typeof n=="number")return this.children[n];if(n===""||this.name===n)return this;if(this.nameTable.length>0){for(t=0,r=this.nameTable.length;t<r||i;t++)if(this.nameTable[t].getName===n){i=this.nameTable[t];break}if(i)return i}for(t=0,r=this.children.length;t<r;t++)if(i=this.children[t].getChild(n),i)return i;return null},getChildCount:function(){return this.children.length},addChild:function(n){this.children.push(n);n.parent=this;n.getName()!==null&&this.addName(n.getName(),n)},addName:function(n,t){this.parent!==null?this.parent.addName(n,t):this.nameTable.push([n,t])},translate:function(){arguments.length===2?(this.checkMatrix(2),this.matrix.translate(arguments[0],arguments[1])):(this.checkMatrix(3),this.matrix.translate(arguments[0],arguments[1],0))},checkMatrix:function(n){this.matrix===null?this.matrix=n===2?new v.PMatrix2D:new v.PMatrix3D:n===3&&this.matrix instanceof v.PMatrix2D&&(this.matrix=new v.PMatrix3D)},rotateX:function(n){this.rotate(n,1,0,0)},rotateY:function(n){this.rotate(n,0,1,0)},rotateZ:function(n){this.rotate(n,0,0,1)},rotate:function(){arguments.length===1?(this.checkMatrix(2),this.matrix.rotate(arguments[0])):(this.checkMatrix(3),this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3]))},scale:function(){arguments.length===2?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1])):arguments.length===3?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1],arguments[2])):(this.checkMatrix(2),this.matrix.scale(arguments[0]))},resetMatrix:function(){this.checkMatrix(2);this.matrix.reset()},applyMatrix:function(n){arguments.length===1?this.applyMatrix(n.elements[0],n.elements[1],0,n.elements[2],n.elements[3],n.elements[4],0,n.elements[5],0,0,1,0,0,0,0,1):arguments.length===6?(this.checkMatrix(2),this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)):arguments.length===16&&(this.checkMatrix(3),this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]))}};pt=v.PShapeSVG=function(){var u,n,t,i,r,f;if(v.PShape.call(this),arguments.length===1){if(this.element=arguments[0],this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=4278190080,this.strokeWeight=1,this.strokeCap="butt",this.strokeJoin="miter",this.strokeGradient=null,this.strokeGradientPaint=null,this.strokeName=null,this.strokeOpacity=1,this.fill=!0,this.fillColor=4278190080,this.fillGradient=null,this.fillGradientPaint=null,this.fillName=null,this.fillOpacity=1,this.element.getName()!=="svg")throw"root is not <svg>, it's <"+this.element.getName()+">";}else arguments.length===2&&(typeof arguments[1]=="string"?arguments[1].indexOf(".svg")>-1&&(this.element=new v.XMLElement(v,arguments[1]),this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=4278190080,this.strokeWeight=1,this.strokeCap="butt",this.strokeJoin="miter",this.strokeGradient="",this.strokeGradientPaint="",this.strokeName="",this.strokeOpacity=1,this.fill=!0,this.fillColor=4278190080,this.fillGradient=null,this.fillGradientPaint=null,this.fillOpacity=1):arguments[0]&&(this.element=arguments[1],this.vertexCodes=arguments[0].vertexCodes.slice(),this.vertices=arguments[0].vertices.slice(),this.stroke=arguments[0].stroke,this.strokeColor=arguments[0].strokeColor,this.strokeWeight=arguments[0].strokeWeight,this.strokeCap=arguments[0].strokeCap,this.strokeJoin=arguments[0].strokeJoin,this.strokeGradient=arguments[0].strokeGradient,this.strokeGradientPaint=arguments[0].strokeGradientPaint,this.strokeName=arguments[0].strokeName,this.fill=arguments[0].fill,this.fillColor=arguments[0].fillColor,this.fillGradient=arguments[0].fillGradient,this.fillGradientPaint=arguments[0].fillGradientPaint,this.fillName=arguments[0].fillName,this.strokeOpacity=arguments[0].strokeOpacity,this.fillOpacity=arguments[0].fillOpacity,this.opacity=arguments[0].opacity));if(this.name=this.element.getStringAttribute("id"),u=this.element.getStringAttribute("display","inline"),this.visible=u!=="none",n=this.element.getAttribute("transform"),n&&(this.matrix=this.parseMatrix(n)),t=this.element.getStringAttribute("viewBox"),t!==null&&(i=t.split(" "),this.width=i[2],this.height=i[3]),r=this.element.getStringAttribute("width"),f=this.element.getStringAttribute("height"),r!==null)this.width=this.parseUnitSize(r),this.height=this.parseUnitSize(f);else if(this.width===0||this.height===0){this.width=1;this.height=1;throw"The width and/or height is not readable in the <svg> tag of this file.";}this.parseColors(this.element);this.parseChildren(this.element)};pt.prototype=new ys;pt.prototype.parseMatrix=function(){function n(n){var t=[];return n.replace(/\((.*?)\)/,function(){return function(n,i){t=i.replace(/,+/g," ").split(/\s+/)}}()),t}return function(t){var r,u,f,i,e,o,s,h,c;if(this.checkMatrix(2),r=[],t.replace(/\s*(\w+)\((.*?)\)/g,function(n){r.push(v.trim(n))}),r.length===0)return null;for(u=0,f=r.length;u<f;u++)i=n(r[u]),r[u].indexOf("matrix")!==-1?this.matrix.set(i[0],i[2],i[4],i[1],i[3],i[5]):r[u].indexOf("translate")!==-1?(e=i[0],o=i.length===2?i[1]:0,this.matrix.translate(e,o)):r[u].indexOf("scale")!==-1?(s=i[0],h=i.length===2?i[1]:i[0],this.matrix.scale(s,h)):r[u].indexOf("rotate")!==-1?(c=i[0],i.length===1?this.matrix.rotate(v.radians(c)):i.length===3&&(this.matrix.translate(i[1],i[2]),this.matrix.rotate(v.radians(i[0])),this.matrix.translate(-i[1],-i[2]))):r[u].indexOf("skewX")!==-1?this.matrix.skewX(parseFloat(i[0])):r[u].indexOf("skewY")!==-1?this.matrix.skewY(i[0]):r[u].indexOf("shearX")!==-1?this.matrix.shearX(i[0]):r[u].indexOf("shearY")!==-1&&this.matrix.shearY(i[0]);return this.matrix}}();pt.prototype.parseChildren=function(n){for(var i,r=n.getChildren(),u=new v.PShape,t=0,f=r.length;t<f;t++)i=this.parseChild(r[t]),i&&u.addChild(i);this.children.push(u)};pt.prototype.getName=function(){return this.name};pt.prototype.parseChild=function(n){var i=n.getName(),t;return i==="g"?t=new pt(this,n):i==="defs"?t=new pt(this,n):i==="line"?(t=new pt(this,n),t.parseLine()):i==="circle"?(t=new pt(this,n),t.parseEllipse(!0)):i==="ellipse"?(t=new pt(this,n),t.parseEllipse(!1)):i==="rect"?(t=new pt(this,n),t.parseRect()):i==="polygon"?(t=new pt(this,n),t.parsePoly(!0)):i==="polyline"?(t=new pt(this,n),t.parsePoly(!1)):i==="path"?(t=new pt(this,n),t.parsePath()):i==="radialGradient"?bf("PShapeSVG.prototype.parseChild, name = radialGradient"):i==="linearGradient"?bf("PShapeSVG.prototype.parseChild, name = linearGradient"):i==="text"?bf("PShapeSVG.prototype.parseChild, name = text"):i==="filter"?bf("PShapeSVG.prototype.parseChild, name = filter"):i==="mask"?bf("PShapeSVG.prototype.parseChild, name = mask"):s(),t};pt.prototype.parsePath=function(){var ut,h;if(this.family=21,this.kind=0,ut=[],h=v.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," ")),h!==null){h=v.__toCharArray(h);for(var i=0,r=0,y=0,p=0,w=0,d=0,b=0,g=0,e=0,o=0,nt=0,tt=0,c=0,l=0,s=0,u=0,a="",n=[],rt=!1,k,it,t,f;s<h.length;)if(u=h[s].valueOf(),u>=65&&u<=90||u>=97&&u<=122){if(t=s,s++,s<h.length)for(n=[],u=h[s].valueOf();!(u>=65&&u<=90||u>=97&&u<=100||u>=102&&u<=122)&&rt===!1;)u===32?(a!==""&&(n.push(parseFloat(a)),a=""),s++):u===45?h[s-1].valueOf()===101?(a+=h[s].toString(),s++):(a!==""&&n.push(parseFloat(a)),a=h[s].toString(),s++):(a+=h[s].toString(),s++),s===h.length?rt=!0:u=h[s].valueOf();if(a!==""&&(n.push(parseFloat(a)),a=""),it=h[t],u=it.valueOf(),u===77){if(n.length>=2&&n.length%2==0&&(i=n[0],r=n[1],this.parsePathMoveto(i,r),n.length>2))for(t=2,f=n.length;t<f;t+=2)i=n[t],r=n[t+1],this.parsePathLineto(i,r)}else if(u===109){if(n.length>=2&&n.length%2==0&&(i+=n[0],r+=n[1],this.parsePathMoveto(i,r),n.length>2))for(t=2,f=n.length;t<f;t+=2)i+=n[t],r+=n[t+1],this.parsePathLineto(i,r)}else if(u===76){if(n.length>=2&&n.length%2==0)for(t=0,f=n.length;t<f;t+=2)i=n[t],r=n[t+1],this.parsePathLineto(i,r)}else if(u===108){if(n.length>=2&&n.length%2==0)for(t=0,f=n.length;t<f;t+=2)i+=n[t],r+=n[t+1],this.parsePathLineto(i,r)}else if(u===72)for(t=0,f=n.length;t<f;t++)i=n[t],this.parsePathLineto(i,r);else if(u===104)for(t=0,f=n.length;t<f;t++)i+=n[t],this.parsePathLineto(i,r);else if(u===86)for(t=0,f=n.length;t<f;t++)r=n[t],this.parsePathLineto(i,r);else if(u===118)for(t=0,f=n.length;t<f;t++)r+=n[t],this.parsePathLineto(i,r);else if(u===67){if(n.length>=6&&n.length%6==0)for(t=0,f=n.length;t<f;t+=6)w=n[t],b=n[t+1],d=n[t+2],g=n[t+3],e=n[t+4],o=n[t+5],this.parsePathCurveto(w,b,d,g,e,o),i=e,r=o}else if(u===99){if(n.length>=6&&n.length%6==0)for(t=0,f=n.length;t<f;t+=6)w=i+n[t],b=r+n[t+1],d=i+n[t+2],g=r+n[t+3],e=i+n[t+4],o=r+n[t+5],this.parsePathCurveto(w,b,d,g,e,o),i=e,r=o}else if(u===83){if(n.length>=4&&n.length%4==0)for(t=0,f=n.length;t<f;t+=4)k.toLowerCase()==="c"||k.toLowerCase()==="s"?(nt=this.vertices[this.vertices.length-2][0],tt=this.vertices[this.vertices.length-2][1],c=this.vertices[this.vertices.length-1][0],l=this.vertices[this.vertices.length-1][1],w=c+(c-nt),b=l+(l-tt)):(w=this.vertices[this.vertices.length-1][0],b=this.vertices[this.vertices.length-1][1]),d=n[t],g=n[t+1],e=n[t+2],o=n[t+3],this.parsePathCurveto(w,b,d,g,e,o),i=e,r=o}else if(u===115){if(n.length>=4&&n.length%4==0)for(t=0,f=n.length;t<f;t+=4)k.toLowerCase()==="c"||k.toLowerCase()==="s"?(nt=this.vertices[this.vertices.length-2][0],tt=this.vertices[this.vertices.length-2][1],c=this.vertices[this.vertices.length-1][0],l=this.vertices[this.vertices.length-1][1],w=c+(c-nt),b=l+(l-tt)):(w=this.vertices[this.vertices.length-1][0],b=this.vertices[this.vertices.length-1][1]),d=i+n[t],g=r+n[t+1],e=i+n[t+2],o=r+n[t+3],this.parsePathCurveto(w,b,d,g,e,o),i=e,r=o}else if(u===81){if(n.length>=4&&n.length%4==0)for(t=0,f=n.length;t<f;t+=4)y=n[t],p=n[t+1],e=n[t+2],o=n[t+3],this.parsePathQuadto(i,r,y,p,e,o),i=e,r=o}else if(u===113){if(n.length>=4&&n.length%4==0)for(t=0,f=n.length;t<f;t+=4)y=i+n[t],p=r+n[t+1],e=i+n[t+2],o=r+n[t+3],this.parsePathQuadto(i,r,y,p,e,o),i=e,r=o}else if(u===84){if(n.length>=2&&n.length%2==0)for(t=0,f=n.length;t<f;t+=2)k.toLowerCase()==="q"||k.toLowerCase()==="t"?(nt=this.vertices[this.vertices.length-2][0],tt=this.vertices[this.vertices.length-2][1],c=this.vertices[this.vertices.length-1][0],l=this.vertices[this.vertices.length-1][1],y=c+(c-nt),p=l+(l-tt)):(y=i,p=r),e=n[t],o=n[t+1],this.parsePathQuadto(i,r,y,p,e,o),i=e,r=o}else if(u===116){if(n.length>=2&&n.length%2==0)for(t=0,f=n.length;t<f;t+=2)k.toLowerCase()==="q"||k.toLowerCase()==="t"?(nt=this.vertices[this.vertices.length-2][0],tt=this.vertices[this.vertices.length-2][1],c=this.vertices[this.vertices.length-1][0],l=this.vertices[this.vertices.length-1][1],y=c+(c-nt),p=l+(l-tt)):(y=i,p=r),e=i+n[t],o=r+n[t+1],this.parsePathQuadto(i,r,y,p,e,o),i=e,r=o}else(u===90||u===122)&&(this.close=!0);k=it.toString()}else s++}};pt.prototype.parsePathQuadto=function(n,t,i,r,u,f){if(this.vertices.length>0)this.parsePathCode(1),this.parsePathVertex(n+(i-n)*2/3,t+(r-t)*2/3),this.parsePathVertex(u+(i-u)*2/3,f+(r-f)*2/3),this.parsePathVertex(u,f);else throw"Path must start with M/m";};pt.prototype.parsePathCurveto=function(n,t,i,r,u,f){if(this.vertices.length>0)this.parsePathCode(1),this.parsePathVertex(n,t),this.parsePathVertex(i,r),this.parsePathVertex(u,f);else throw"Path must start with M/m";};pt.prototype.parsePathLineto=function(n,t){if(this.vertices.length>0)this.parsePathCode(0),this.parsePathVertex(n,t),this.vertices[this.vertices.length-1].moveTo=!1;else throw"Path must start with M/m";};pt.prototype.parsePathMoveto=function(n,t){this.vertices.length>0&&this.parsePathCode(3);this.parsePathCode(0);this.parsePathVertex(n,t);this.vertices[this.vertices.length-1].moveTo=!0};pt.prototype.parsePathVertex=function(n,t){var i=[];i[0]=n;i[1]=t;this.vertices.push(i)};pt.prototype.parsePathCode=function(n){this.vertexCodes.push(n)};pt.prototype.parsePoly=function(n){var u,t,i,f,r;if(this.family=21,this.close=n,u=v.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," ")),u!==null)if(t=u.split(" "),t.length%2==0)for(i=0,f=t.length;i<f;i++)r=[],r[0]=t[i],r[1]=t[++i],this.vertices.push(r);else throw"Error parsing polygon points: odd number of coordinates provided";};pt.prototype.parseRect=function(){if(this.kind=30,this.family=1,this.params=[],this.params[0]=this.element.getFloatAttribute("x"),this.params[1]=this.element.getFloatAttribute("y"),this.params[2]=this.element.getFloatAttribute("width"),this.params[3]=this.element.getFloatAttribute("height"),this.params[2]<0||this.params[3]<0)throw"svg error: negative width or height found while parsing <rect>";};pt.prototype.parseEllipse=function(n){this.kind=31;this.family=1;this.params=[];this.params[0]=this.element.getFloatAttribute("cx")|0;this.params[1]=this.element.getFloatAttribute("cy")|0;var t,i;if(n){if(t=i=this.element.getFloatAttribute("r"),t<0)throw"svg error: negative radius found while parsing <circle>";}else if(t=this.element.getFloatAttribute("rx"),i=this.element.getFloatAttribute("ry"),t<0||i<0)throw"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>";this.params[0]-=t;this.params[1]-=i;this.params[2]=t*2;this.params[3]=i*2};pt.prototype.parseLine=function(){this.kind=4;this.family=1;this.params=[];this.params[0]=this.element.getFloatAttribute("x1");this.params[1]=this.element.getFloatAttribute("y1");this.params[2]=this.element.getFloatAttribute("x2");this.params[3]=this.element.getFloatAttribute("y2")};pt.prototype.parseColors=function(n){var u,r,i,f,t;if(n.hasAttribute("opacity")&&this.setOpacity(n.getAttribute("opacity")),n.hasAttribute("stroke")&&this.setStroke(n.getAttribute("stroke")),n.hasAttribute("stroke-width")&&this.setStrokeWeight(n.getAttribute("stroke-width")),n.hasAttribute("stroke-linejoin")&&this.setStrokeJoin(n.getAttribute("stroke-linejoin")),n.hasAttribute("stroke-linecap")&&this.setStrokeCap(n.getStringAttribute("stroke-linecap")),n.hasAttribute("fill")&&this.setFill(n.getStringAttribute("fill")),n.hasAttribute("style"))for(u=n.getStringAttribute("style"),r=u.toString().split(";"),i=0,f=r.length;i<f;i++)t=v.trim(r[i].split(":")),t[0]==="fill"?this.setFill(t[1]):t[0]==="fill-opacity"?this.setFillOpacity(t[1]):t[0]==="stroke"?this.setStroke(t[1]):t[0]==="stroke-width"?this.setStrokeWeight(t[1]):t[0]==="stroke-linecap"?this.setStrokeCap(t[1]):t[0]==="stroke-linejoin"?this.setStrokeJoin(t[1]):t[0]==="stroke-opacity"?this.setStrokeOpacity(t[1]):t[0]==="opacity"&&this.setOpacity(t[1])};pt.prototype.setFillOpacity=function(n){this.fillOpacity=parseFloat(n);this.fillColor=this.fillOpacity*255<<24|this.fillColor&16777215};pt.prototype.setFill=function(n){var t=this.fillColor&4278190080;n==="none"?this.fill=!1:n.indexOf("#")===0?(this.fill=!0,n.length===4&&(n=n.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.fillColor=t|parseInt(n.substring(1),16)&16777215):n.indexOf("rgb")===0?(this.fill=!0,this.fillColor=t|this.parseRGB(n)):n.indexOf("url(#")===0?this.fillName=n.substring(5,n.length-1):a[n]&&(this.fill=!0,this.fillColor=t|parseInt(a[n].substring(1),16)&16777215)};pt.prototype.setOpacity=function(n){this.strokeColor=parseFloat(n)*255<<24|this.strokeColor&16777215;this.fillColor=parseFloat(n)*255<<24|this.fillColor&16777215};pt.prototype.setStroke=function(n){var t=this.strokeColor&4278190080;n==="none"?this.stroke=!1:n.charAt(0)==="#"?(this.stroke=!0,n.length===4&&(n=n.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.strokeColor=t|parseInt(n.substring(1),16)&16777215):n.indexOf("rgb")===0?(this.stroke=!0,this.strokeColor=t|this.parseRGB(n)):n.indexOf("url(#")===0?this.strokeName=n.substring(5,n.length-1):a[n]&&(this.stroke=!0,this.strokeColor=t|parseInt(a[n].substring(1),16)&16777215)};pt.prototype.setStrokeWeight=function(n){this.strokeWeight=this.parseUnitSize(n)};pt.prototype.setStrokeJoin=function(n){n==="miter"?this.strokeJoin="miter":n==="round"?this.strokeJoin="round":n==="bevel"&&(this.strokeJoin="bevel")};pt.prototype.setStrokeCap=function(n){n==="butt"?this.strokeCap="butt":n==="round"?this.strokeCap="round":n==="square"&&(this.strokeCap="square")};pt.prototype.setStrokeOpacity=function(n){this.strokeOpacity=parseFloat(n);this.strokeColor=this.strokeOpacity*255<<24|this.strokeColor&16777215};pt.prototype.parseRGB=function(n){var i=n.substring(n.indexOf("(")+1,n.indexOf(")")),t=i.split(", ");return t[0]<<16|t[1]<<8|t[2]};pt.prototype.parseUnitSize=function(n){var t=n.length-2;return t<0?n:n.indexOf("pt")===t?parseFloat(n.substring(0,t))*1.25:n.indexOf("pc")===t?parseFloat(n.substring(0,t))*15:n.indexOf("mm")===t?parseFloat(n.substring(0,t))*3.543307:n.indexOf("cm")===t?parseFloat(n.substring(0,t))*35.43307:n.indexOf("in")===t?parseFloat(n.substring(0,t))*90:n.indexOf("px")===t?parseFloat(n.substring(0,t)):parseFloat(n)};v.shape=function(n,t,i,r,u){arguments.length>=1&&arguments[0]!==null&&n.isVisible()&&(v.pushMatrix(),re===3?arguments.length===5?(v.translate(t-r/2,i-u/2),v.scale(r/n.getWidth(),u/n.getHeight())):arguments.length===3?v.translate(t-n.getWidth()/2,-n.getHeight()/2):v.translate(-n.getWidth()/2,-n.getHeight()/2):re===0?arguments.length===5?(v.translate(t,i),v.scale(r/n.getWidth(),u/n.getHeight())):arguments.length===3&&v.translate(t,i):re===1&&(arguments.length===5?(r-=t,u-=i,v.translate(t,i),v.scale(r/n.getWidth(),u/n.getHeight())):arguments.length===3&&v.translate(t,i)),n.draw(v),(arguments.length===1&&re===3||arguments.length>1)&&v.popMatrix())};v.shapeMode=function(n){re=n};v.loadShape=function(n){return arguments.length===1&&n.indexOf(".svg")>-1?new pt(null,n):null};ue=function(n,t,i,r,u){this.fullName=n||"";this.name=t||"";this.namespace=i||"";this.value=r;this.type=u};ue.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(n){this.value=n}};iu=v.XMLElement=function(n,t,i,u){this.attributes=[];this.children=[];this.fullName=null;this.name=null;this.namespace="";this.content=null;this.parent=null;this.lineNr="";this.systemID="";this.type="ELEMENT";n&&(typeof n=="string"?t===r&&n.indexOf("<")>-1?this.parse(n):(this.fullName=n,this.namespace=t,this.systemId=i,this.lineNr=u):this.parse(t))};iu.prototype={parse:function(n){var r,t,i;try{if(t=n.substring(n.length-4),(t===".xml"||t===".svg")&&(n=k(n)),r=(new DOMParser).parseFromString(n,"text/xml"),i=r.documentElement,i)this.parseChildrenRecursive(null,i);else throw"Error loading document";return this}catch(u){throw u;}},parseChildrenRecursive:function(n,t){var i,o,u,r,f,e,s;if(n?(i=new iu(t.nodeName),i.parent=n):(this.fullName=t.localName,this.name=t.nodeName,i=this),t.nodeType===3&&t.textContent!=="")return this.createPCDataElement(t.textContent);if(t.nodeType===4)return this.createCDataElement(t.textContent);if(t.attributes)for(r=0,f=t.attributes.length;r<f;r++)u=t.attributes[r],o=new ue(u.getname,u.nodeName,u.namespaceURI,u.nodeValue,u.nodeType),i.attributes.push(o);if(t.childNodes)for(r=0,f=t.childNodes.length;r<f;r++)s=t.childNodes[r],e=i.parseChildrenRecursive(i,s),e!==null&&i.children.push(e);return i},createElement:function(n,t,i,u){return i===r?new iu(n,t):new iu(n,t,i,u)},createPCDataElement:function(n){if(n.replace(/^\s+$/g,"")==="")return null;var t=new iu;return t.type="TEXT",t.content=n,t},createCDataElement:function(n){var t=this.createPCDataElement(n),i,r;if(t===null)return null;t.type="CDATA";i={"<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};for(r in i)Object.hasOwnProperty(i,r)||(n=n.replace(new RegExp(r,"g"),i[r]));return t.cdata=n,t},hasAttribute:function(){return arguments.length===1?this.getAttribute(arguments[0])!==null:arguments.length===2?this.getAttribute(arguments[0],arguments[1])!==null:void 0},equals:function(n){var t,i,u,f,r,e,o;if(!(n instanceof iu)||this.fullName!==n.fullName||this.attributes.length!==n.getAttributeCount()||this.attributes.length!==n.attributes.length)return!1;for(t=0,i=this.attributes.length;t<i;t++)if((u=this.attributes[t].getName(),f=this.attributes[t].getNamespace(),r=n.findAttribute(u,f),r===null)||this.attributes[t].getValue()!==r.getValue()||this.attributes[t].getType()!==r.getType())return!1;if(this.children.length!==n.getChildCount())return!1;if(this.children.length>0){for(t=0,i=this.children.length;t<i;t++)if(e=this.getChild(t),o=n.getChild(t),!e.equals(o))return!1;return!0}return this.content===n.content},getContent:function(){if(this.type==="TEXT"||this.type==="CDATA")return this.content;var n=this.children;return n.length===1&&(n[0].type==="TEXT"||n[0].type==="CDATA")?n[0].content:null},getAttribute:function(){var n;return arguments.length===2?(n=this.findAttribute(arguments[0]),n)?n.getValue():arguments[1]:arguments.length===1?(n=this.findAttribute(arguments[0]),n)?n.getValue():null:arguments.length===3?(n=this.findAttribute(arguments[0],arguments[1]),n)?n.getValue():arguments[2]:void 0},getStringAttribute:function(){return arguments.length===1?this.getAttribute(arguments[0]):arguments.length===2?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(n){return this.getStringAttribute(n)},getFloatAttribute:function(){return arguments.length===1?parseFloat(this.getAttribute(arguments[0],0)):arguments.length===2?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(n){return this.getFloatAttribute(n)},getIntAttribute:function(){return arguments.length===1?this.getAttribute(arguments[0],0):arguments.length===2?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(n){return this.getIntAttribute(n)},hasChildren:function(){return this.children.length>0},addChild:function(n){n!==null&&(n.parent=this,this.children.push(n))},insertChild:function(n,t){if(n){if(n.getLocalName()===null&&!this.hasChildren()){var i=this.children[this.children.length-1];if(i.getLocalName()===null){i.setContent(i.getContent()+n.getContent());return}}n.parent=this;this.children.splice(t,0,n)}},getChild:function(n){var i,r,t,u;if(typeof n=="number")return this.children[n];if(n.indexOf("/")!==-1)return this.getChildRecursive(n.split("/"),0);for(t=0,u=this.getChildCount();t<u;t++)if(i=this.getChild(t),r=i.getName(),r!==null&&r===n)return i;return null},getChildren:function(){var t,i,r,n,u;if(arguments.length===1){if(typeof arguments[0]=="number")return this.getChild(arguments[0]);if(arguments[0].indexOf("/")!==-1)return this.getChildrenRecursive(arguments[0].split("/"),0);for(t=[],n=0,u=this.getChildCount();n<u;n++)i=this.getChild(n),r=i.getName(),r!==null&&r===arguments[0]&&t.push(i);return t}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(n,t){var r,u,f,i,e;if(t===n.length)return this;for(f=n[t],i=0,e=this.getChildCount();i<e;i++)if(r=this.getChild(i),u=r.getName(),u!==null&&u===f)return r.getChildRecursive(n,t+1);return null},getChildrenRecursive:function(n,t){var u,i,r;if(t===n.length-1)return this.getChildren(n[t]);for(u=this.getChildren(n[t]),i=[],r=0;r<u.length;r++)i=i.concat(u[r].getChildrenRecursive(n,t+1));return i},isLeaf:function(){return!this.hasChildren()},listChildren:function(){for(var t=[],n=0,i=this.children.length;n<i;n++)t.push(this.getChild(n).getName());return t},removeAttribute:function(n,t){this.namespace=t||"";for(var i=0,r=this.attributes.length;i<r;i++)if(this.attributes[i].getName()===n&&this.attributes[i].getNamespace()===this.namespace){this.attributes.splice(i,1);break}},removeChild:function(n){if(n)for(var t=0,i=this.children.length;t<i;t++)if(this.children[t].equals(n)){this.children.splice(t,1);break}},removeChildAtIndex:function(n){this.children.length>n&&this.children.splice(n,1)},findAttribute:function(n,t){this.namespace=t||"";for(var i=0,r=this.attributes.length;i<r;i++)if(this.attributes[i].getName()===n&&this.attributes[i].getNamespace()===this.namespace)return this.attributes[i];return null},setAttribute:function(){var n,i,t;arguments.length===3?(i=arguments[0].indexOf(":"),t=arguments[0].substring(i+1),n=this.findAttribute(t,arguments[1]),n?n.setValue(arguments[2]):(n=new ue(arguments[0],t,arguments[1],arguments[2],"CDATA"),this.attributes.push(n))):(n=this.findAttribute(arguments[0]),n?n.setValue(arguments[1]):(n=new ue(arguments[0],arguments[0],null,arguments[1],"CDATA"),this.attributes.push(n)))},setString:function(n,t){this.setAttribute(n,t)},setInt:function(n,t){this.setAttribute(n,t)},setFloat:function(n,t){this.setAttribute(n,t)},setContent:function(n){this.children.length>0&&u.debug("Tried to set content for XMLElement with children");this.content=n},setName:function(){if(arguments.length===1)this.name=arguments[0],this.fullName=arguments[0],this.namespace=null;else{var n=arguments[0].indexOf(":");this.name=arguments[1]===null||n<0?arguments[0]:arguments[0].substring(n+1);this.fullName=arguments[0];this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){var t,n,i,r,u;if(this.type==="TEXT")return this.content;if(this.type==="CDATA")return this.cdata;for(t=this.fullName,n="<"+t,i=0;i<this.attributes.length;i++)u=this.attributes[i],n+=" "+u.getName()+'="'+u.getValue()+'"';if(this.children.length===0)n+=this.content===""?"/>":">"+this.content+"<\/"+t+">";else{for(n+=">",r=0;r<this.children.length;r++)n+=this.children[r].toString();n+="<\/"+t+">"}return n}};iu.parse=function(n){var t=new iu;return t.parse(n),t};oc=v.XML=v.XMLElement;v.loadXML=function(n){return new oc(v,n)};ps=function(n){for(var t,u=0,r=0;r<n.length;r++)u=r!==0?i.max(u,i.abs(n[r])):i.abs(n[r]);return t=(u+"").indexOf("."),t===0?t=1:t===-1&&(t=(u+"").length),t};br=v.PMatrix2D=function(){arguments.length===0?this.reset():arguments.length===1&&arguments[0]instanceof br?this.set(arguments[0].array()):arguments.length===6&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};br.prototype={set:function(){if(arguments.length===6){var n=arguments;this.set([n[0],n[1],n[2],n[3],n[4],n[5]])}else arguments.length===1&&arguments[0]instanceof br?this.elements=arguments[0].array():arguments.length===1&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var n=new br;return n.set(this.elements),n},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(n,t){this.elements[2]=n*this.elements[0]+t*this.elements[1]+this.elements[2];this.elements[5]=n*this.elements[3]+t*this.elements[4]+this.elements[5]},invTranslate:function(n,t){this.translate(-n,-t)},transpose:function(){},mult:function(n,t){var i,r;return n instanceof h?(i=n.x,r=n.y,t||(t=new h)):n instanceof Array&&(i=n[0],r=n[1],t||(t=[])),t instanceof Array?(t[0]=this.elements[0]*i+this.elements[1]*r+this.elements[2],t[1]=this.elements[3]*i+this.elements[4]*r+this.elements[5]):t instanceof h&&(t.x=this.elements[0]*i+this.elements[1]*r+this.elements[2],t.y=this.elements[3]*i+this.elements[4]*r+this.elements[5],t.z=0),t},multX:function(n,t){return n*this.elements[0]+t*this.elements[1]+this.elements[2]},multY:function(n,t){return n*this.elements[3]+t*this.elements[4]+this.elements[5]},skewX:function(n){this.apply(1,0,1,n,0,0)},skewY:function(n){this.apply(1,0,1,0,n,0)},shearX:function(n){this.apply(1,0,1,i.tan(n),0,0)},shearY:function(n){this.apply(1,0,1,0,i.tan(n),0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){var n=this.determinant();if(i.abs(n)>-2147483648){var t=this.elements[0],r=this.elements[1],u=this.elements[2],f=this.elements[3],e=this.elements[4],o=this.elements[5];return this.elements[0]=e/n,this.elements[3]=-f/n,this.elements[1]=-r/n,this.elements[4]=t/n,this.elements[2]=(r*o-e*u)/n,this.elements[5]=(f*u-t*o)/n,!0}return!1},scale:function(n,t){n&&!t&&(t=n);n&&t&&(this.elements[0]*=n,this.elements[1]*=t,this.elements[3]*=n,this.elements[4]*=t)},invScale:function(n,t){n&&!t&&(t=n);this.scale(1/n,1/t)},apply:function(){var n,r,u,t,i;for(arguments.length===1&&arguments[0]instanceof br?n=arguments[0].array():arguments.length===6?n=Array.prototype.slice.call(arguments):arguments.length===1&&arguments[0]instanceof Array&&(n=arguments[0]),r=[0,0,this.elements[2],0,0,this.elements[5]],u=0,t=0;t<2;t++)for(i=0;i<3;i++,u++)r[u]+=this.elements[t*3+0]*n[i+0]+this.elements[t*3+1]*n[i+3];this.elements=r.slice()},preApply:function(){var n,t;arguments.length===1&&arguments[0]instanceof br?n=arguments[0].array():arguments.length===6?n=Array.prototype.slice.call(arguments):arguments.length===1&&arguments[0]instanceof Array&&(n=arguments[0]);t=[0,0,n[2],0,0,n[5]];t[2]=n[2]+this.elements[2]*n[0]+this.elements[5]*n[1];t[5]=n[5]+this.elements[2]*n[3]+this.elements[5]*n[4];t[0]=this.elements[0]*n[0]+this.elements[3]*n[1];t[3]=this.elements[0]*n[3]+this.elements[3]*n[4];t[1]=this.elements[1]*n[0]+this.elements[4]*n[1];t[4]=this.elements[1]*n[3]+this.elements[4]*n[4];this.elements=t.slice()},rotate:function(n){var u=i.cos(n),f=i.sin(n),t=this.elements[0],r=this.elements[1];this.elements[0]=u*t+f*r;this.elements[1]=-f*t+u*r;t=this.elements[3];r=this.elements[4];this.elements[3]=u*t+f*r;this.elements[4]=-f*t+u*r},rotateZ:function(n){this.rotate(n)},invRotateZ:function(n){this.rotateZ(n-i.PI)},print:function(){var n=ps(this.elements),t=""+v.nfs(this.elements[0],n,4)+" "+v.nfs(this.elements[1],n,4)+" "+v.nfs(this.elements[2],n,4)+"\n"+v.nfs(this.elements[3],n,4)+" "+v.nfs(this.elements[4],n,4)+" "+v.nfs(this.elements[5],n,4)+"\n\n";v.println(t)}};ut=v.PMatrix3D=function(){this.reset()};ut.prototype={set:function(){arguments.length===16?this.elements=Array.prototype.slice.call(arguments):arguments.length===1&&arguments[0]instanceof ut?this.elements=arguments[0].array():arguments.length===1&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var n=new ut;return n.set(this.elements),n},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(n,t,i){i===r&&(i=0);this.elements[3]+=n*this.elements[0]+t*this.elements[1]+i*this.elements[2];this.elements[7]+=n*this.elements[4]+t*this.elements[5]+i*this.elements[6];this.elements[11]+=n*this.elements[8]+t*this.elements[9]+i*this.elements[10];this.elements[15]+=n*this.elements[12]+t*this.elements[13]+i*this.elements[14]},transpose:function(){var n=this.elements[4];this.elements[4]=this.elements[1];this.elements[1]=n;n=this.elements[8];this.elements[8]=this.elements[2];this.elements[2]=n;n=this.elements[6];this.elements[6]=this.elements[9];this.elements[9]=n;n=this.elements[3];this.elements[3]=this.elements[12];this.elements[12]=n;n=this.elements[7];this.elements[7]=this.elements[13];this.elements[13]=n;n=this.elements[11];this.elements[11]=this.elements[14];this.elements[14]=n},mult:function(n,t){var i,r,u,f;return n instanceof h?(i=n.x,r=n.y,u=n.z,f=1,t||(t=new h)):n instanceof Array&&(i=n[0],r=n[1],u=n[2],f=n[3]||1,t&&(t.length===3||t.length===4)||(t=[0,0,0])),t instanceof Array&&(t.length===3?(t[0]=this.elements[0]*i+this.elements[1]*r+this.elements[2]*u+this.elements[3],t[1]=this.elements[4]*i+this.elements[5]*r+this.elements[6]*u+this.elements[7],t[2]=this.elements[8]*i+this.elements[9]*r+this.elements[10]*u+this.elements[11]):t.length===4&&(t[0]=this.elements[0]*i+this.elements[1]*r+this.elements[2]*u+this.elements[3]*f,t[1]=this.elements[4]*i+this.elements[5]*r+this.elements[6]*u+this.elements[7]*f,t[2]=this.elements[8]*i+this.elements[9]*r+this.elements[10]*u+this.elements[11]*f,t[3]=this.elements[12]*i+this.elements[13]*r+this.elements[14]*u+this.elements[15]*f)),t instanceof h&&(t.x=this.elements[0]*i+this.elements[1]*r+this.elements[2]*u+this.elements[3],t.y=this.elements[4]*i+this.elements[5]*r+this.elements[6]*u+this.elements[7],t.z=this.elements[8]*i+this.elements[9]*r+this.elements[10]*u+this.elements[11]),t},preApply:function(){var n,r,u,t,i;for(arguments.length===1&&arguments[0]instanceof ut?n=arguments[0].array():arguments.length===16?n=Array.prototype.slice.call(arguments):arguments.length===1&&arguments[0]instanceof Array&&(n=arguments[0]),r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,t=0;t<4;t++)for(i=0;i<4;i++,u++)r[u]+=this.elements[i+0]*n[t*4+0]+this.elements[i+4]*n[t*4+1]+this.elements[i+8]*n[t*4+2]+this.elements[i+12]*n[t*4+3];this.elements=r.slice()},apply:function(){var n,r,u,t,i;for(arguments.length===1&&arguments[0]instanceof ut?n=arguments[0].array():arguments.length===16?n=Array.prototype.slice.call(arguments):arguments.length===1&&arguments[0]instanceof Array&&(n=arguments[0]),r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,t=0;t<4;t++)for(i=0;i<4;i++,u++)r[u]+=this.elements[t*4+0]*n[i+0]+this.elements[t*4+1]*n[i+4]+this.elements[t*4+2]*n[i+8]+this.elements[t*4+3]*n[i+12];this.elements=r.slice()},rotate:function(n,t,i,r){if(i){var e=v.cos(n),f=v.sin(n),u=1-e;this.apply(u*t*t+e,u*t*i-f*r,u*t*r+f*i,0,u*t*i+f*r,u*i*i+e,u*i*r-f*t,0,u*t*r-f*i,u*i*r+f*t,u*r*r+e,0,0,0,0,1)}else this.rotateZ(n)},invApply:function(){ie===r&&(ie=new ut);var n=arguments;return(ie.set(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]),!ie.invert())?!1:(this.preApply(ie),!0)},rotateX:function(n){var t=v.cos(n),i=v.sin(n);this.apply([1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1])},rotateY:function(n){var t=v.cos(n),i=v.sin(n);this.apply([t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1])},rotateZ:function(n){var t=i.cos(n),r=i.sin(n);this.apply([t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1])},scale:function(n,t,i){!n||t||i?n&&t&&!i&&(i=1):t=i=n;n&&t&&i&&(this.elements[0]*=n,this.elements[1]*=t,this.elements[2]*=i,this.elements[4]*=n,this.elements[5]*=t,this.elements[6]*=i,this.elements[8]*=n,this.elements[9]*=t,this.elements[10]*=i,this.elements[12]*=n,this.elements[13]*=t,this.elements[14]*=i)},skewX:function(n){var t=i.tan(n);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(n){var t=i.tan(n);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},shearX:function(n){var t=i.tan(n);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},shearY:function(n){var t=i.tan(n);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},multX:function(n,t,i,r){return i?r?this.elements[0]*n+this.elements[1]*t+this.elements[2]*i+this.elements[3]*r:this.elements[0]*n+this.elements[1]*t+this.elements[2]*i+this.elements[3]:this.elements[0]*n+this.elements[1]*t+this.elements[3]},multY:function(n,t,i,r){return i?r?this.elements[4]*n+this.elements[5]*t+this.elements[6]*i+this.elements[7]*r:this.elements[4]*n+this.elements[5]*t+this.elements[6]*i+this.elements[7]:this.elements[4]*n+this.elements[5]*t+this.elements[7]},multZ:function(n,t,i,r){return r?this.elements[8]*n+this.elements[9]*t+this.elements[10]*i+this.elements[11]*r:this.elements[8]*n+this.elements[9]*t+this.elements[10]*i+this.elements[11]},multW:function(n,t,i,r){return r?this.elements[12]*n+this.elements[13]*t+this.elements[14]*i+this.elements[15]*r:this.elements[12]*n+this.elements[13]*t+this.elements[14]*i+this.elements[15]},invert:function(){var r=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],u=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],f=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],e=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],o=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],s=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],h=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],c=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],l=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],a=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],v=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],y=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],p=r*y-u*v+f*a+e*l-o*c+s*h,n,t;return i.abs(p)<=1e-9?!1:(n=[],n[0]=+this.elements[5]*y-this.elements[6]*v+this.elements[7]*a,n[4]=-this.elements[4]*y+this.elements[6]*l-this.elements[7]*c,n[8]=+this.elements[4]*v-this.elements[5]*l+this.elements[7]*h,n[12]=-this.elements[4]*a+this.elements[5]*c-this.elements[6]*h,n[1]=-this.elements[1]*y+this.elements[2]*v-this.elements[3]*a,n[5]=+this.elements[0]*y-this.elements[2]*l+this.elements[3]*c,n[9]=-this.elements[0]*v+this.elements[1]*l-this.elements[3]*h,n[13]=+this.elements[0]*a-this.elements[1]*c+this.elements[2]*h,n[2]=+this.elements[13]*s-this.elements[14]*o+this.elements[15]*e,n[6]=-this.elements[12]*s+this.elements[14]*f-this.elements[15]*u,n[10]=+this.elements[12]*o-this.elements[13]*f+this.elements[15]*r,n[14]=-this.elements[12]*e+this.elements[13]*u-this.elements[14]*r,n[3]=-this.elements[9]*s+this.elements[10]*o-this.elements[11]*e,n[7]=+this.elements[8]*s-this.elements[10]*f+this.elements[11]*u,n[11]=-this.elements[8]*o+this.elements[9]*f-this.elements[11]*r,n[15]=+this.elements[8]*e-this.elements[9]*u+this.elements[10]*r,t=1/p,n[0]*=t,n[1]*=t,n[2]*=t,n[3]*=t,n[4]*=t,n[5]*=t,n[6]*=t,n[7]*=t,n[8]*=t,n[9]*=t,n[10]*=t,n[11]*=t,n[12]*=t,n[13]*=t,n[14]*=t,n[15]*=t,this.elements=n.slice(),!0)},toString:function(){for(var t="",n=0;n<15;n++)t+=this.elements[n]+", ";return t+this.elements[15]},print:function(){var n=ps(this.elements),t=""+v.nfs(this.elements[0],n,4)+" "+v.nfs(this.elements[1],n,4)+" "+v.nfs(this.elements[2],n,4)+" "+v.nfs(this.elements[3],n,4)+"\n"+v.nfs(this.elements[4],n,4)+" "+v.nfs(this.elements[5],n,4)+" "+v.nfs(this.elements[6],n,4)+" "+v.nfs(this.elements[7],n,4)+"\n"+v.nfs(this.elements[8],n,4)+" "+v.nfs(this.elements[9],n,4)+" "+v.nfs(this.elements[10],n,4)+" "+v.nfs(this.elements[11],n,4)+"\n"+v.nfs(this.elements[12],n,4)+" "+v.nfs(this.elements[13],n,4)+" "+v.nfs(this.elements[14],n,4)+" "+v.nfs(this.elements[15],n,4)+"\n\n";v.println(t)},invTranslate:function(n,t,i){this.preApply(1,0,0,-n,0,1,0,-t,0,0,1,-i,0,0,0,1)},invRotateX:function(n){var t=i.cos(-n),r=i.sin(-n);this.preApply([1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1])},invRotateY:function(n){var t=i.cos(-n),r=i.sin(-n);this.preApply([t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1])},invRotateZ:function(n){var t=i.cos(-n),r=i.sin(-n);this.preApply([t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1])},invScale:function(n,t,i){this.preApply([1/n,0,0,0,0,1/t,0,0,0,0,1/i,0,0,0,0,1])}};kr=v.PMatrixStack=function(){this.matrixStack=[]};kr.prototype.load=function(){var n=ei.$newPMatrix();arguments.length===1?n.set(arguments[0]):n.set(arguments);this.matrixStack.push(n)};tt.prototype.$newPMatrix=function(){return new br};rt.prototype.$newPMatrix=function(){return new ut};kr.prototype.push=function(){this.matrixStack.push(this.peek())};kr.prototype.pop=function(){return this.matrixStack.pop()};kr.prototype.peek=function(){var n=ei.$newPMatrix();return n.set(this.matrixStack[this.matrixStack.length-1]),n};kr.prototype.mult=function(n){this.matrixStack[this.matrixStack.length-1].apply(n)};v.split=function(n,t){return n.split(t)};v.splitTokens=function(n,t){if(t===r)return n.split(/\s+/g);for(var o=t.split(/()/g),i="",s=n.length,f,e=[],u=0;u<s;u++)f=n[u],o.indexOf(f)>-1?(i!==""&&e.push(i),i=""):i+=f;return i!==""&&e.push(i),e};v.append=function(n,t){return n[n.length]=t,n};v.concat=function(n,t){return n.concat(t)};v.sort=function(n,t){var i=[],f,r,u;if(n.length>0){for(f=t>0?t:n.length,r=0;r<f;r++)i.push(n[r]);if(typeof n[0]=="string"?i.sort():i.sort(function(n,t){return n-t}),t>0)for(u=i.length;u<n.length;u++)i.push(n[u])}return i};v.splice=function(n,t,i){if(t.length===0)return n;if(t instanceof Array)for(var r=0,u=i;r<t.length;u++,r++)n.splice(u,0,t[r]);else n.splice(i,0,t);return n};v.subset=function(n,t,i){var u=i!==r?t+i:n.length;return n.slice(t,u)};v.join=function(n,t){return n.join(t)};v.shorten=function(n){for(var i=[],r=n.length,t=0;t<r;t++)i[t]=n[t];return i.pop(),i};v.expand=function(n,t){var i=n.slice(0),r=t||n.length*2;return i.length=r,i};v.arrayCopy=function(){var n,e=0,t,o=0,i,u,f;for(arguments.length===2?(n=arguments[0],t=arguments[1],i=n.length):arguments.length===3?(n=arguments[0],t=arguments[1],i=arguments[2]):arguments.length===5&&(n=arguments[0],e=arguments[1],t=arguments[2],o=arguments[3],i=arguments[4]),u=e,f=o;u<i+e;u++,f++)if(t[f]!==r)t[f]=n[u];else throw"array index out of bounds exception";};v.reverse=function(n){return n.reverse()};v.mix=function(n,t,i){return n+((t-n)*i>>8)};v.peg=function(n){return n<0?0:n>255?255:n};v.modes=function(){function e(n,t,i,r,u,e,o,s,h,c,l){var p=f(((n&4278190080)>>>24)+t,255)<<24,y=i+((h-i)*t>>8),a,v;return y=(y<0?0:y>255?255:y)<<16,a=r+((c-r)*t>>8),a=(a<0?0:a>255?255:a)<<8,v=u+((l-u)*t>>8),v=v<0?0:v>255?255:v,p|y|a|v}var u=4278190080,t=16711680,n=65280,r=255,f=i.min,o=i.max;return{replace:function(n,t){return t},blend:function(i,e){var o=(e&u)>>>24,s=i&t,h=i&n,c=i&r,l=e&t,a=e&n,v=e&r;return f(((i&u)>>>24)+o,255)<<24|s+((l-s)*o>>8)&t|h+((a-h)*o>>8)&n|c+((v-c)*o>>8)&r},add:function(i,e){var o=(e&u)>>>24;return f(((i&u)>>>24)+o,255)<<24|f((i&t)+((e&t)>>8)*o,t)&t|f((i&n)+((e&n)>>8)*o,n)&n|f((i&r)+((e&r)*o>>8),r)},subtract:function(i,e){var s=(e&u)>>>24;return f(((i&u)>>>24)+s,255)<<24|o((i&t)-((e&t)>>8)*s,n)&t|o((i&n)-((e&n)>>8)*s,r)&n|o((i&r)-((e&r)*s>>8),0)},lightest:function(i,e){var s=(e&u)>>>24;return f(((i&u)>>>24)+s,255)<<24|o(i&t,((e&t)>>8)*s)&t|o(i&n,((e&n)>>8)*s)&n|o(i&r,(e&r)*s>>8)},darkest:function(i,e){var o=(e&u)>>>24,s=i&t,h=i&n,c=i&r,l=f(i&t,((e&t)>>8)*o),a=f(i&n,((e&n)>>8)*o),v=f(i&r,(e&r)*o>>8);return f(((i&u)>>>24)+o,255)<<24|s+((l-s)*o>>8)&t|h+((a-h)*o>>8)&n|c+((v-c)*o>>8)&r},difference:function(i,f){var v=(f&u)>>>24,o=(i&t)>>16,s=(i&n)>>8,h=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,y=o>c?o-c:c-o,p=s>l?s-l:l-s,w=h>a?h-a:a-h;return e(i,v,o,s,h,c,l,a,y,p,w)},exclusion:function(i,f){var v=(f&u)>>>24,o=(i&t)>>16,s=(i&n)>>8,h=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,y=o+c-(o*c>>7),p=s+l-(s*l>>7),w=h+a-(h*a>>7);return e(i,v,o,s,h,c,l,a,y,p,w)},multiply:function(i,f){var v=(f&u)>>>24,o=(i&t)>>16,s=(i&n)>>8,h=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,y=o*c>>8,p=s*l>>8,w=h*a>>8;return e(i,v,o,s,h,c,l,a,y,p,w)},screen:function(i,f){var v=(f&u)>>>24,o=(i&t)>>16,s=(i&n)>>8,h=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,y=255-((255-o)*(255-c)>>8),p=255-((255-s)*(255-l)>>8),w=255-((255-h)*(255-a)>>8);return e(i,v,o,s,h,c,l,a,y,p,w)},hard_light:function(i,f){var v=(f&u)>>>24,c=(i&t)>>16,l=(i&n)>>8,a=i&r,o=(f&t)>>16,s=(f&n)>>8,h=f&r,y=o<128?c*o>>7:255-((255-c)*(255-o)>>7),p=s<128?l*s>>7:255-((255-l)*(255-s)>>7),w=h<128?a*h>>7:255-((255-a)*(255-h)>>7);return e(i,v,c,l,a,o,s,h,y,p,w)},soft_light:function(i,f){var v=(f&u)>>>24,o=(i&t)>>16,s=(i&n)>>8,h=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,y=(o*c>>7)+(o*o>>8)-(o*o*c>>15),p=(s*l>>7)+(s*s>>8)-(s*s*l>>15),w=(h*a>>7)+(h*h>>8)-(h*h*a>>15);return e(i,v,o,s,h,c,l,a,y,p,w)},overlay:function(i,f){var v=(f&u)>>>24,o=(i&t)>>16,s=(i&n)>>8,h=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,y=o<128?o*c>>7:255-((255-o)*(255-c)>>7),p=s<128?s*l>>7:255-((255-s)*(255-l)>>7),w=h<128?h*a>>7:255-((255-h)*(255-a)>>7);return e(i,v,o,s,h,c,l,a,y,p,w)},dodge:function(i,f){var w=(f&u)>>>24,v=(i&t)>>16,y=(i&n)>>8,p=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,h=255,o,s;return c!==255&&(h=(v<<8)/(255-c),h=h<0?0:h>255?255:h),o=255,l!==255&&(o=(y<<8)/(255-l),o=o<0?0:o>255?255:o),s=255,a!==255&&(s=(p<<8)/(255-a),s=s<0?0:s>255?255:s),e(i,w,v,y,p,c,l,a,h,o,s)},burn:function(i,f){var w=(f&u)>>>24,v=(i&t)>>16,y=(i&n)>>8,p=i&r,c=(f&t)>>16,l=(f&n)>>8,a=f&r,h=0,o,s;return c!==0&&(h=(255-v<<8)/c,h=255-(h<0?0:h>255?255:h)),o=0,l!==0&&(o=(255-y<<8)/l,o=255-(o<0?0:o>255?255:o)),s=0,a!==0&&(s=(255-p<<8)/a,s=255-(s<0?0:s>255?255:s)),e(i,w,v,y,p,c,l,a,h,o,s)}}}();v.color=function(n,t,i,u){return n!==r&&t!==r&&i!==r&&u!==r?ir(n,t,i,u):n!==r&&t!==r&&i!==r?ir(n,t,i,oi):n!==r&&t!==r?ra(n,t):typeof n=="number"?ua(n):ir(bi,er,ki,oi)};v.color.toString=function(n){return"rgba("+(n>>16&255)+","+(n>>8&255)+","+(n&255)+","+(n>>24&255)/255+")"};v.color.toInt=function(n,t,i,r){return r<<24&4278190080|n<<16&16711680|t<<8&65280|i&255};v.color.toArray=function(n){return[n>>16&255,n>>8&255,n&255,n>>24&255]};v.color.toGLArray=function(n){return[((n&16711680)>>>16)/255,(n>>8&255)/255,(n&255)/255,(n>>24&255)/255]};v.color.toRGB=function(n,t,r){var u;if(n=n>bi?bi:n,t=t>er?er:t,r=r>ki?ki:r,n=n/bi*360,t=t/er*100,r=r/ki*100,u=i.round(r/100*255),t===0)return[u,u,u];var s=n%360,h=s%60,f=i.round(r*(100-t)/1e4*255),e=i.round(r*(6e3-t*h)/6e5*255),o=i.round(r*(6e3-t*(60-h))/6e5*255);switch(i.floor(s/60)){case 0:return[u,o,f];case 1:return[e,u,f];case 2:return[f,u,o];case 3:return[f,e,u];case 4:return[o,f,u];case 5:return[u,f,e]}};v.brightness=function(n){return fe(n)[2]};v.saturation=function(n){return fe(n)[1]};v.hue=function(n){return fe(n)[0]};v.red=function(n){return(n>>16&255)/255*bi};v.green=function(n){return((n&65280)>>>8)/255*er};v.blue=function(n){return(n&255)/255*ki};v.alpha=function(n){return(n>>24&255)/255*oi};v.lerpColor=function(n,t,i){var a,y,f,e,p,w,b,o,k,d,g,s,h,c,l,nt,tt,r=v.color(n),u=v.color(t);return gr===3?(h=fe(r),o=(r>>24&255)/oi,c=fe(u),s=((u&4278190080)>>>24)/oi,nt=v.lerp(h[0],c[0],i),tt=v.lerp(h[1],c[1],i),f=v.lerp(h[2],c[2],i),l=v.color.toRGB(nt,tt,f),e=v.lerp(o,s,i)*oi,e<<24&4278190080|(l[0]&255)<<16|(l[1]&255)<<8|l[2]&255):(p=r>>16&255,w=r>>8&255,b=r&255,o=(r>>24&255)/oi,k=(u&16711680)>>>16,d=u>>8&255,g=u&255,s=(u>>24&255)/oi,a=v.lerp(p,k,i)|0,y=v.lerp(w,d,i)|0,f=v.lerp(b,g,i)|0,e=v.lerp(o,s,i)*oi,e<<24&4278190080|a<<16&16711680|y<<8&65280|f&255)};v.colorMode=function(){gr=arguments[0];arguments.length>1&&(bi=arguments[1],er=arguments[2]||arguments[1],ki=arguments[3]||arguments[1],oi=arguments[4]||arguments[1])};v.blendColor=function(n,t,i){return i===0?v.modes.replace(n,t):i===1?v.modes.blend(n,t):i===2?v.modes.add(n,t):i===4?v.modes.subtract(n,t):i===8?v.modes.lightest(n,t):i===16?v.modes.darkest(n,t):i===32?v.modes.difference(n,t):i===64?v.modes.exclusion(n,t):i===128?v.modes.multiply(n,t):i===256?v.modes.screen(n,t):i===1024?v.modes.hard_light(n,t):i===2048?v.modes.soft_light(n,t):i===512?v.modes.overlay(n,t):i===4096?v.modes.dodge(n,t):i===8192?v.modes.burn(n,t):void 0};v.printMatrix=function(){ht.print()};tt.prototype.translate=function(n,t){ht.translate(n,t);ui.invTranslate(n,t);y.translate(n,t)};rt.prototype.translate=function(n,t,i){ht.translate(n,t,i);ui.invTranslate(n,t,i)};tt.prototype.scale=function(n,t){ht.scale(n,t);ui.invScale(n,t);y.scale(n,t||n)};rt.prototype.scale=function(n,t,i){ht.scale(n,t,i);ui.invScale(n,t,i)};tt.prototype.transform=function(n){var t=n.array();y.transform(t[0],t[3],t[1],t[4],t[2],t[5])};rt.prototype.transformm=function(){throw"p.transform is currently not supported in 3D mode";};tt.prototype.pushMatrix=function(){of.load(ht);sf.load(ui);du()};rt.prototype.pushMatrix=function(){of.load(ht);sf.load(ui)};tt.prototype.popMatrix=function(){ht.set(of.pop());ui.set(sf.pop());gu()};rt.prototype.popMatrix=function(){ht.set(of.pop());ui.set(sf.pop())};tt.prototype.resetMatrix=function(){ht.reset();ui.reset();y.setTransform(1,0,0,1,0,0)};rt.prototype.resetMatrix=function(){ht.reset();ui.reset()};bt.prototype.applyMatrix=function(){var n=arguments;ht.apply(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);ui.invApply(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])};tt.prototype.applyMatrix=function(){for(var n=arguments,t=n.length;t<16;t++)n[t]=0;n[10]=n[15]=1;bt.prototype.applyMatrix.apply(this,n)};v.rotateX=function(n){ht.rotateX(n);ui.invRotateX(n)};tt.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead.";};rt.prototype.rotateZ=function(n){ht.rotateZ(n);ui.invRotateZ(n)};v.rotateY=function(n){ht.rotateY(n);ui.invRotateY(n)};tt.prototype.rotate=function(n){ht.rotateZ(n);ui.invRotateZ(n);y.rotate(n)};rt.prototype.rotate=function(n){v.rotateZ(n)};tt.prototype.shearX=function(n){ht.shearX(n);y.transform(1,0,n,1,0,0)};rt.prototype.shearX=function(n){ht.shearX(n)};tt.prototype.shearY=function(n){ht.shearY(n);y.transform(1,n,0,1,0,0)};rt.prototype.shearY=function(n){ht.shearY(n)};v.pushStyle=function(){du();v.pushMatrix();var n={doFill:wt,currentFillColor:fu,doStroke:lt,currentStrokeColor:ou,curTint:hu,curRectMode:fr,curColorMode:gr,colorModeX:bi,colorModeZ:ki,colorModeY:er,colorModeA:oi,curTextFont:ti,horizontalTextAlignment:vu,verticalTextAlignment:nu,textMode:no,curFontName:ff,curTextSize:lr,curTextAscent:tu,curTextDescent:ar,curTextLeading:tr};rc.push(n)};v.popStyle=function(){var n=rc.pop();if(n)gu(),v.popMatrix(),wt=n.doFill,fu=n.currentFillColor,lt=n.doStroke,ou=n.currentStrokeColor,hu=n.curTint,fr=n.curRectMode,gr=n.curColorMode,bi=n.colorModeX,ki=n.colorModeZ,er=n.colorModeY,oi=n.colorModeA,ti=n.curTextFont,ff=n.curFontName,lr=n.curTextSize,vu=n.horizontalTextAlignment,nu=n.verticalTextAlignment,no=n.textMode,tu=n.curTextAscent,ar=n.curTextDescent,tr=n.curTextLeading;else throw"Too many popStyle() without enough pushStyle()";};v.year=function(){return(new Date).getFullYear()};v.month=function(){return(new Date).getMonth()+1};v.day=function(){return(new Date).getDate()};v.hour=function(){return(new Date).getHours()};v.minute=function(){return(new Date).getMinutes()};v.second=function(){return(new Date).getSeconds()};v.millis=function(){return Date.now()-eh};tt.prototype.redraw=function(){sc();y.lineWidth=si;var n=v.pmouseX,t=v.pmouseY;v.pmouseX=pe;v.pmouseY=we;du();v.draw();gu();pe=v.mouseX;we=v.mouseY;v.pmouseX=n;v.pmouseY=t};rt.prototype.redraw=function(){sc();var n=v.pmouseX,t=v.pmouseY;v.pmouseX=pe;v.pmouseY=we;y.clear(y.DEPTH_BUFFER_BIT);or={attributes:{},locations:{}};v.noLights();v.lightFalloff(1,0,0);v.shininess(1);v.ambient(255,255,255);v.specular(0,0,0);v.emissive(0,0,0);v.camera();v.draw();pe=v.mouseX;we=v.mouseY;v.pmouseX=n;v.pmouseY=t};v.noLoop=function(){lu=!1;le=!1;clearInterval(ae);ri.onPause()};v.loop=function(){le||(ko=Date.now(),be=0,ae=n.setInterval(function(){try{ri.onFrameStart();v.redraw();ri.onFrameEnd()}catch(t){n.clearInterval(ae);throw t;}},uh),lu=!0,le=!0,ri.onLoop())};v.frameRate=function(n){vo=n;uh=1e3/vo;lu&&(v.noLoop(),v.loop())};nf=[];v.exit=function(){var t,i;n.clearInterval(ae);at(v.externals.canvas.id);delete d.onmousedown;for(t in u.lib)u.lib.hasOwnProperty(t)&&u.lib[t].hasOwnProperty("detach")&&u.lib[t].detach(v);for(i=nf.length;i--;)ws(nf[i]);ri.onExit()};v.cursor=function(){var n,t,i,r,u,f;if(arguments.length>1||arguments.length===1&&arguments[0]instanceof v.PImage){if(n=arguments[0],arguments.length>=3){if(t=arguments[1],i=arguments[2],t<0||i<0||i>=n.height||t>=n.width)throw"x and y must be non-negative and less than the dimensions of the image";}else t=n.width>>>1,i=n.height>>>1;r=n.toDataURL();u='url("'+r+'") '+t+" "+i+", default";ye=d.style.cursor=u}else arguments.length===1?(f=arguments[0],ye=d.style.cursor=f):ye=d.style.cursor=cl};v.noCursor=function(){ye=d.style.cursor=p.NOCURSOR};v.link=function(t,i){i!==r?n.open(t,i):n.location=t};v.beginDraw=s;v.endDraw=s;tt.prototype.toImageData=function(n,t,i,u){return n=n!==r?n:0,t=t!==r?t:0,i=i!==r?i:v.width,u=u!==r?u:v.height,y.getImageData(n,t,i,u)};rt.prototype.toImageData=function(n,u,f,e){n=n!==r?n:0;u=u!==r?u:0;f=f!==r?f:v.width;e=e!==r?e:v.height;var c=t.createElement("canvas"),l=c.getContext("2d"),h=l.createImageData(f,e),s=new it(f*e*4);y.readPixels(n,u,f,e,y.RGBA,y.UNSIGNED_BYTE,s);for(var o=0,a=s.length,p=h.data;o<a;o++)p[o]=s[(e-1-i.floor(o/4/f))*f*4+o%(f*4)];return h};v.status=function(t){n.status=t};v.binary=function(n,t){var i,r;if(t>0)i=t;else if(n instanceof yi)i=16,n|=0;else for(i=32;i>1&&!(n>>>i-1&1);)i--;for(r="";i>0;)r+=n>>>--i&1?"1":"0";return r};v.unbinary=function(n){for(var i=n.length-1,r=1,u=0,t;i>=0;){if(t=n[i--],t!=="0"&&t!=="1")throw"the value passed into unbinary was not an 8 bit binary number";t==="1"&&(u+=r);r<<=1}return u};v.nf=function(n,t,i){return fo(n,"","-",t,i)};v.nfs=function(n,t,i){return fo(n," ","-",t,i)};v.nfp=function(n,t,i){return fo(n,"+","-",t,i)};v.nfc=function(n,t,i){return fo(n,"","-",t,i,",")};cc=function(n,t){t=t===r||t===null?t=8:t;n<0&&(n=4294967295+n+1);for(var i=Number(n).toString(16).toUpperCase();i.length<t;)i="0"+i;return i.length>=t&&(i=i.substring(i.length-t,i.length)),i};v.hex=function(n,t){return arguments.length===1&&(t=n instanceof yi?4:8),cc(n,t)};v.unhex=function(n){var i,t;if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(lc(n[t]));return i}return lc(n)};v.loadStrings=function(n){if(localStorage[n])return localStorage[n].split("\n");var t=k(n);return typeof t!="string"||t===""?[]:(t=t.replace(/(\r\n?)/g,"\n").replace(/\n$/,""),t.split("\n"))};v.saveStrings=function(n,t){localStorage[n]=t.join("\n")};v.loadBytes=function(n){for(var i=k(n),r=[],t=0;t<i.length;t++)r.push(i.charCodeAt(t));return r};v.matchAll=function(n,t){for(var i=[],r,u=new RegExp(t,"g");(r=u.exec(n))!==null;)i.push(r),r[0].length===0&&++u.lastIndex;return i.length>0?i:null};v.__contains=function(n,t){return typeof n!="string"?n.contains.apply(n,hr(arguments)):n!==null&&t!==null&&typeof t=="string"&&n.indexOf(t)>-1};v.__replaceAll=function(n,t,i){return typeof n!="string"?n.replaceAll.apply(n,hr(arguments)):n.replace(new RegExp(t,"g"),i)};v.__replaceFirst=function(n,t,i){return typeof n!="string"?n.replaceFirst.apply(n,hr(arguments)):n.replace(new RegExp(t,""),i)};v.__replace=function(n,t,i){var r,u,f;if(typeof n!="string")return n.replace.apply(n,hr(arguments));if(t instanceof RegExp)return n.replace(t,i);if((typeof t!="string"&&(t=t.toString()),t==="")||(r=n.indexOf(t),r<0))return n;u=0;f="";do f+=n.substring(u,r)+i,u=r+t.length;while((r=n.indexOf(t,u))>=0);return f+n.substring(u)};v.__equals=function(n,t){return n.equals instanceof Function?n.equals.apply(n,hr(arguments)):n.valueOf()===t.valueOf()};v.__equalsIgnoreCase=function(n,t){return typeof n!="string"?n.equalsIgnoreCase.apply(n,hr(arguments)):n.toLowerCase()===t.toLowerCase()};v.__toCharArray=function(n){var i,t,r;if(typeof n!="string")return n.toCharArray.apply(n,hr(arguments));for(i=[],t=0,r=n.length;t<r;++t)i[t]=new yi(n.charAt(t));return i};v.__split=function(n,t,i){var e,f,u,o,s;if(typeof n!="string")return n.split.apply(n,hr(arguments));if(e=new RegExp(t),i===r||i<1)return n.split(e);for(f=[],u=n;(o=u.search(e))!==-1&&f.length<i-1;)s=e.exec(u).toString(),f.push(u.substring(0,o)),u=u.substring(o+s.length);return(o!==-1||u!=="")&&f.push(u),f};v.__codePointAt=function(n,t){var i=n.charCodeAt(t),r,u;return 55296<=i&&i<=56319?(r=i,u=n.charCodeAt(t+1),(r-55296)*1024+(u-56320)+65536):i};v.match=function(n,t){return n.match(t)};v.__matches=function(n,t){return new RegExp(t).test(n)};v.__startsWith=function(n,t,i){return typeof n!="string"?n.startsWith.apply(n,hr(arguments)):(i=i||0,i<0||i>n.length)?!1:t===""||t===n?!0:n.indexOf(t)===i};v.__endsWith=function(n,t){if(typeof n!="string")return n.endsWith.apply(n,hr(arguments));var i=t?t.length:0;return t===""||t===n?!0:n.indexOf(t)===n.length-i};v.__hashCode=function(n){return n.hashCode instanceof Function?n.hashCode.apply(n,hr(arguments)):g(n)};v.__printStackTrace=function(n){v.println("Exception: "+n.toString())};ee=[];v.println=function(n){var t=ee.length;t&&(u.logger.log(ee.join("")),ee.length=0);arguments.length===0&&t===0?u.logger.log(""):arguments.length!==0&&u.logger.log(n)};v.print=function(n){ee.push(n)};v.str=function(n){var i,t;if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(n[t].toString()+"");return i}return n.toString()+""};v.trim=function(n){var i,t;if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(n[t].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""));return i}return n.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")};v.parseBoolean=function(n){var i,t;if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(ac(n[t]));return i}return ac(n)};v.parseByte=function(n){var i,t;if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(0-(n[t]&128)|n[t]&127);return i}return 0-(n&128)|n&127};v.parseChar=function(n){var i,t;if(typeof n=="number")return new yi(String.fromCharCode(n&65535));if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(new yi(String.fromCharCode(n[t]&65535)));return i}throw"char() may receive only one argument of type int, byte, int[], or byte[].";};v.parseFloat=function(n){var i,t;if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(vc(n[t]));return i}return vc(n)};v.parseInt=function(n,t){var r,i;if(n instanceof Array){for(r=[],i=0;i<n.length;i++)typeof n[i]!="string"||/^\s*[+\-]?\d+\s*$/.test(n[i])?r.push(yc(n[i],t)):r.push(0);return r}return yc(n,t)};v.__int_cast=function(n){return 0|n};v.__instanceof=function(n,t){var i,r,u;if(typeof t!="function")throw"Function is expected as type argument for instanceof operator";if(typeof n=="string")return t===Object||t===String;if(n instanceof t)return!0;if(typeof n!="object"||n===null)return!1;if(i=n.constructor,t.$isInterface){for(r=[];i;)i.$interfaces&&(r=r.concat(i.$interfaces)),i=i.$base;while(r.length>0){if(u=r.shift(),u===t)return!0;u.$interfaces&&(r=r.concat(u.$interfaces))}return!1}while(i.hasOwnProperty("$base"))if(i=i.$base,i===t)return!0;return!1};v.abs=i.abs;v.ceil=i.ceil;v.constrain=function(n,t,i){return n>i?i:n<t?t:n};v.dist=function(){var n,t,r;return arguments.length===4?(n=arguments[0]-arguments[2],t=arguments[1]-arguments[3],i.sqrt(n*n+t*t)):arguments.length===6?(n=arguments[0]-arguments[3],t=arguments[1]-arguments[4],r=arguments[2]-arguments[5],i.sqrt(n*n+t*t+r*r)):void 0};v.exp=i.exp;v.floor=i.floor;v.lerp=function(n,t,i){return(t-n)*i+n};v.log=i.log;v.mag=function(n,t,r){return r?i.sqrt(n*n+t*t+r*r):i.sqrt(n*n+t*t)};v.map=function(n,t,i,r,u){return r+(u-r)*((n-t)/(i-t))};v.max=function(){var n,i,r,t;if(arguments.length===2)return arguments[0]<arguments[1]?arguments[1]:arguments[0];if(n=arguments.length===1?arguments[0]:arguments,!("length"in n&&n.length>0))throw"Non-empty array is expected";for(i=n[0],r=n.length,t=1;t<r;++t)i<n[t]&&(i=n[t]);return i};v.min=function(){var n,i,r,t;if(arguments.length===2)return arguments[0]<arguments[1]?arguments[0]:arguments[1];if(n=arguments.length===1?arguments[0]:arguments,!("length"in n&&n.length>0))throw"Non-empty array is expected";for(i=n[0],r=n.length,t=1;t<r;++t)i>n[t]&&(i=n[t]);return i};v.norm=function(n,t,i){return(n-t)/(i-t)};v.pow=i.pow;v.round=i.round;v.sq=function(n){return n*n};v.sqrt=i.sqrt;v.acos=i.acos;v.asin=i.asin;v.atan=i.atan;v.atan2=i.atan2;v.cos=i.cos;v.degrees=function(n){return n*180/i.PI};v.radians=function(n){return n/180*i.PI};v.sin=i.sin;v.tan=i.tan;oe=i.random;v.random=function(){if(arguments.length===0)return oe();if(arguments.length===1)return oe()*arguments[0];var n=arguments[0],t=arguments[1];return oe()*(t-n)+n};af.createRandomized=function(){var n=new Date;return new af(n/6e4&4294967295,n&4294967295)};v.randomSeed=function(n){oe=new af(n).nextDouble};v.Random=function(n){var t=!1,f,u;this.nextGaussian=function(){var r,e,n,o;if(t)return t=!1,f;do r=2*u()-1,e=2*u()-1,n=r*r+e*e;while(n>=1||n===0);return o=i.sqrt(-2*i.log(n)/n),f=e*o,t=!0,r*o};u=n===r?i.random:new af(n).nextDouble};cr={generator:r,octaves:4,fallout:.5,seed:r};v.noise=function(n,t,i){var s;cr.generator===r&&(cr.generator=new fa(cr.seed));var o=cr.generator,f=1,u=1,e=0;for(s=0;s<cr.octaves;++s){f*=cr.fallout;switch(arguments.length){case 1:e+=f*(1+o.noise1d(u*n))/2;break;case 2:e+=f*(1+o.noise2d(u*n,u*t))/2;break;case 3:e+=f*(1+o.noise3d(u*n,u*t,u*i))/2}u*=2}return e};v.noiseDetail=function(n,t){cr.octaves=n;t!==r&&(cr.fallout=t)};v.noiseSeed=function(n){cr.seed=n;cr.generator=r};bt.prototype.size=function(n,t){var u,f,r;lt&&v.stroke(0);wt&&v.fill(255);u={fillStyle:y.fillStyle,strokeStyle:y.strokeStyle,lineCap:y.lineCap,lineJoin:y.lineJoin};d.style.length>0&&(d.style.removeProperty("width"),d.style.removeProperty("height"));d.width=v.width=n||100;d.height=v.height=t||100;for(f in u)u.hasOwnProperty(f)&&(y[f]=u[f]);for(v.textFont(ti),v.background(),ph=i.max(1e3,n*t*.05),v.externals.context=y,r=0;r<720;r++)ne[r]=v.sin(r*(i.PI/180)*.5),te[r]=v.cos(r*(i.PI/180)*.5)};tt.prototype.size=function(){y===r&&(y=d.getContext("2d"),of=new kr,sf=new kr,ht=new br,ui=new br);bt.prototype.size.apply(this,arguments)};rt.prototype.size=function(){var n=!1;return function(t,i){function r(n){for(var r=["experimental-webgl","webgl","webkit-3d"],t,i=0,u=r.length;i<u;i++)if(t=n.getContext(r[i],{antialias:!1,preserveDrawingBuffer:!0}),t)break;return t}if(n)throw"Multiple calls to size() for 3D renders are not allowed.";n=!0;try{d.width=v.width=t||100;d.height=v.height=i||100;y=r(d);ch=y.createTexture();lh=y.createTexture()}catch(e){u.debug(e)}if(!y)throw"WebGL context is not supported on this browser.";y.viewport(0,0,d.width,d.height);y.enable(y.DEPTH_TEST);y.enable(y.BLEND);y.blendFunc(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA);ft=vs(y,bl,kl);ci=vs(y,pl,wl);v.strokeWeight(1);b=vs(y,gl,na);y.useProgram(b);gt("usingTexture3d",b,"usingTexture",ai);v.lightFalloff(1,0,0);v.shininess(1);v.ambient(255,255,255);v.specular(0,0,0);v.emissive(0,0,0);ts=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,ts);y.bufferData(y.ARRAY_BUFFER,uc,y.STATIC_DRAW);is=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,is);y.bufferData(y.ARRAY_BUFFER,vl,y.STATIC_DRAW);rs=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,rs);y.bufferData(y.ARRAY_BUFFER,fc,y.STATIC_DRAW);de=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,de);y.bufferData(y.ARRAY_BUFFER,as,y.STATIC_DRAW);us=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,us);y.bufferData(y.ARRAY_BUFFER,yl,y.STATIC_DRAW);df=y.createBuffer();fs=y.createBuffer();oh=y.createBuffer();es=y.createBuffer();sh=y.createBuffer();hh=y.createBuffer();ge=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,ge);y.bufferData(y.ARRAY_BUFFER,new f([0,0,0]),y.STATIC_DRAW);os=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,os);y.bufferData(y.ARRAY_BUFFER,new f([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),y.STATIC_DRAW);ss=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,ss);y.bufferData(y.ARRAY_BUFFER,new f([0,0,1,0,1,1,0,1]),y.STATIC_DRAW);hs=y.createBuffer();y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,hs);y.bufferData(y.ELEMENT_ARRAY_BUFFER,new ot([0,1,2,2,3,0]),y.STATIC_DRAW);wu=new ut;wr=new ut;ht=new ut;ui=new ut;sr=new ut;v.camera();v.perspective();of=new kr;sf=new kr;kf=new ut;ke=new ut;tf=new ut;rf=new ut;go=new ut;ns=new ut;ns.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);bt.prototype.size.apply(this,arguments)}}();tt.prototype.ambientLight=bt.prototype.a3DOnlyFunction;rt.prototype.ambientLight=function(n,t,i,r,u,f){var e,o,s,c;if(ct===8)throw"can only create 8 lights";e=new h(r,u,f);o=new ut;o.scale(1,-1,1);o.apply(ht.array());o.mult(e,e);s=ir(n,t,i,0);c=[(s>>16&255)/255,(s>>8&255)/255,(s&255)/255];y.useProgram(b);dt("uLights.color.3d."+ct,b,"uLights"+ct+".color",c);dt("uLights.position.3d."+ct,b,"uLights"+ct+".position",e.array());gt("uLights.type.3d."+ct,b,"uLights"+ct+".type",0);gt("uLightCount3d",b,"uLightCount",++ct)};tt.prototype.directionalLight=bt.prototype.a3DOnlyFunction;rt.prototype.directionalLight=function(n,t,i,r,u,f){var e;if(ct===8)throw"can only create 8 lights";y.useProgram(b);e=new ut;e.scale(1,-1,1);e.apply(ht.array());e=e.array();var s=[e[0]*r+e[4]*u+e[8]*f,e[1]*r+e[5]*u+e[9]*f,e[2]*r+e[6]*u+e[10]*f],o=ir(n,t,i,0),h=[(o>>16&255)/255,(o>>8&255)/255,(o&255)/255];dt("uLights.color.3d."+ct,b,"uLights"+ct+".color",h);dt("uLights.position.3d."+ct,b,"uLights"+ct+".position",s);gt("uLights.type.3d."+ct,b,"uLights"+ct+".type",1);gt("uLightCount3d",b,"uLightCount",++ct)};tt.prototype.lightFalloff=bt.prototype.a3DOnlyFunction;rt.prototype.lightFalloff=function(n,t,i){y.useProgram(b);dt("uFalloff3d",b,"uFalloff",[n,t,i])};tt.prototype.lightSpecular=bt.prototype.a3DOnlyFunction;rt.prototype.lightSpecular=function(n,t,i){var r=ir(n,t,i,0),u=[(r>>16&255)/255,(r>>8&255)/255,(r&255)/255];y.useProgram(b);dt("uSpecular3d",b,"uSpecular",u)};v.lights=function(){v.ambientLight(128,128,128);v.directionalLight(128,128,128,0,0,-1);v.lightFalloff(1,0,0);v.lightSpecular(0,0,0)};tt.prototype.pointLight=bt.prototype.a3DOnlyFunction;rt.prototype.pointLight=function(n,t,i,r,u,f){var e,o,s,c;if(ct===8)throw"can only create 8 lights";e=new h(r,u,f);o=new ut;o.scale(1,-1,1);o.apply(ht.array());o.mult(e,e);s=ir(n,t,i,0);c=[(s>>16&255)/255,(s>>8&255)/255,(s&255)/255];y.useProgram(b);dt("uLights.color.3d."+ct,b,"uLights"+ct+".color",c);dt("uLights.position.3d."+ct,b,"uLights"+ct+".position",e.array());gt("uLights.type.3d."+ct,b,"uLights"+ct+".type",2);gt("uLightCount3d",b,"uLightCount",++ct)};tt.prototype.noLights=bt.prototype.a3DOnlyFunction;rt.prototype.noLights=function(){ct=0;y.useProgram(b);gt("uLightCount3d",b,"uLightCount",ct)};tt.prototype.spotLight=bt.prototype.a3DOnlyFunction;rt.prototype.spotLight=function(n,t,i,r,u,f,e,o,s,c,l){var v,a;if(ct===8)throw"can only create 8 lights";y.useProgram(b);v=new h(r,u,f);a=new ut;a.scale(1,-1,1);a.apply(ht.array());a.mult(v,v);a=a.array();var w=[a[0]*e+a[4]*o+a[8]*s,a[1]*e+a[5]*o+a[9]*s,a[2]*e+a[6]*o+a[10]*s],p=ir(n,t,i,0),k=[(p>>16&255)/255,(p>>8&255)/255,(p&255)/255];dt("uLights.color.3d."+ct,b,"uLights"+ct+".color",k);dt("uLights.position.3d."+ct,b,"uLights"+ct+".position",v.array());dt("uLights.direction.3d."+ct,b,"uLights"+ct+".direction",w);dt("uLights.concentration.3d."+ct,b,"uLights"+ct+".concentration",l);dt("uLights.angle.3d."+ct,b,"uLights"+ct+".angle",c);gt("uLights.type.3d."+ct,b,"uLights"+ct+".type",3);gt("uLightCount3d",b,"uLightCount",++ct)};tt.prototype.beginCamera=function(){throw"beginCamera() is not available in 2D mode";};rt.prototype.beginCamera=function(){if(io)throw"You cannot call beginCamera() again before calling endCamera()";io=!0;ht=wr;ui=wu};tt.prototype.endCamera=function(){throw"endCamera() is not available in 2D mode";};rt.prototype.endCamera=function(){if(!io)throw"You cannot call endCamera() before calling beginCamera()";ht.set(wu);ui.set(wr);io=!1};v.camera=function(n,t,u,f,e,o,s,c,l){var a,y,p;n===r&&(ls=v.width/2,bu=v.height/2,ku=bu/i.tan(ro/2),n=ls,t=bu,u=ku,f=ls,e=bu,o=0,s=0,c=1,l=0);a=new h(n-f,t-e,u-o);y=new h(s,c,l);a.normalize();p=h.cross(y,a);y=h.cross(a,p);p.normalize();y.normalize();var w=p.x,b=p.y,k=p.z,d=y.x,g=y.y,nt=y.z,tt=a.x,it=a.y,rt=a.z;wu.set(w,b,k,0,d,g,nt,0,tt,it,rt,0,0,0,0,1);wu.translate(-n,-t,-u);wr.reset();wr.invApply(w,b,k,0,d,g,nt,0,tt,it,rt,0,0,0,0,1);wr.translate(n,t,u);ht.set(wu);ui.set(wr)};v.perspective=function(n,t,r,u){arguments.length===0&&(bu=d.height/2,ku=bu/i.tan(ro/2),nc=ku/10,tc=ku*10,ic=v.width/v.height,n=ro,t=ic,r=nc,u=tc);var f,e,o,s;f=r*i.tan(n/2);e=-f;o=f*t;s=e*t;v.frustum(s,o,e,f,r,u)};tt.prototype.frustum=function(){throw"Processing.js: frustum() is not supported in 2D mode";};rt.prototype.frustum=function(n,t,i,r,u,f){gh=!0;sr=new ut;sr.set(2*u/(t-n),0,(t+n)/(t-n),0,0,2*u/(r-i),(r+i)/(r-i),0,0,0,-(f+u)/(f-u),-(2*f*u)/(f-u),0,0,-1,0);var e=new ut;e.set(sr);e.transpose();y.useProgram(ft);kt("projection2d",ft,"uProjection",!1,e.array());y.useProgram(b);kt("projection3d",b,"uProjection",!1,e.array());y.useProgram(ci);kt("uProjectionUS",ci,"uProjection",!1,e.array())};v.ortho=function(n,t,i,r,u,f){var e;arguments.length===0&&(n=0,t=v.width,i=0,r=v.height,u=-10,f=10);var o=2/(t-n),s=2/(r-i),h=-2/(f-u),c=-(t+n)/(t-n),l=-(r+i)/(r-i),a=-(f+u)/(f-u);sr=new ut;sr.set(o,0,0,c,0,s,0,l,0,0,h,a,0,0,0,1);e=new ut;e.set(sr);e.transpose();y.useProgram(ft);kt("projection2d",ft,"uProjection",!1,e.array());y.useProgram(b);kt("projection3d",b,"uProjection",!1,e.array());y.useProgram(ci);kt("uProjectionUS",ci,"uProjection",!1,e.array());gh=!1};v.printProjection=function(){sr.print()};v.printCamera=function(){wu.print()};tt.prototype.box=bt.prototype.a3DOnlyFunction;rt.prototype.box=function(n,t,i){var u,r,e,o,f;t&&i||(t=i=n);u=new ut;u.scale(n,t,i);r=new ut;r.scale(1,-1,1);r.apply(ht.array());r.transpose();wt&&(y.useProgram(b),kt("model3d",b,"uModel",!1,u.array()),kt("view3d",b,"uView",!1,r.array()),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),dt("color3d",b,"uColor",di),ct>0?(e=new ut,e.set(r),o=new ut,o.set(u),e.mult(o),f=new ut,f.set(e),f.invert(),f.transpose(),kt("uNormalTransform3d",b,"uNormalTransform",!1,f.array()),fi("aNormal3d",b,"aNormal",3,is)):gi("aNormal3d",b,"aNormal"),fi("aVertex3d",b,"aVertex",3,ts),gi("aColor3d",b,"aColor"),gi("aTexture3d",b,"aTexture"),y.drawArrays(y.TRIANGLES,0,uc.length/3),y.disable(y.POLYGON_OFFSET_FILL));si>0&&lt&&(y.useProgram(ft),kt("uModel2d",ft,"uModel",!1,u.array()),kt("uView2d",ft,"uView",!1,r.array()),dt("uColor2d",ft,"uColor",pi),gt("uIsDrawingText2d",ft,"uIsDrawingText",!1),fi("vertex2d",ft,"aVertex",3,rs),gi("aTextureCoord2d",ft,"aTextureCoord"),y.drawArrays(y.LINES,0,fc.length/3))};pc=function(){var n,r,e,t,i,u;for(yt=[],n=0;n<pu;n++)yt.push(0),yt.push(-1),yt.push(0),yt.push(vr[n]),yt.push(yr[n]),yt.push(pr[n]);for(yt.push(0),yt.push(-1),yt.push(0),yt.push(vr[0]),yt.push(yr[0]),yt.push(pr[0]),i=0,n=2;n<to;n++){for(r=e=i,i+=pu,t=i,u=0;u<pu;u++)yt.push(vr[r]),yt.push(yr[r]),yt.push(pr[r++]),yt.push(vr[t]),yt.push(yr[t]),yt.push(pr[t++]);r=e;t=i;yt.push(vr[r]);yt.push(yr[r]);yt.push(pr[r]);yt.push(vr[t]);yt.push(yr[t]);yt.push(pr[t])}for(n=0;n<pu;n++)t=i+n,yt.push(vr[t]),yt.push(yr[t]),yt.push(pr[t]),yt.push(0),yt.push(1),yt.push(0);yt.push(vr[i]);yt.push(yr[i]);yt.push(pr[i]);yt.push(0);yt.push(1);yt.push(0);y.bindBuffer(y.ARRAY_BUFFER,df);y.bufferData(y.ARRAY_BUFFER,new f(yt),y.STATIC_DRAW)};v.sphereDetail=function(n,t){var i,u,e,s,o,h,v,r;if(arguments.length===1&&(n=t=arguments[0]),n<3&&(n=3),t<2&&(t=2),n!==pu||t!==to){var c=720/n,l=new f(n),a=new f(n);for(i=0;i<n;i++)l[i]=te[i*c%720|0],a[i]=ne[i*c%720|0];for(u=n*(t-1)+2,e=0,vr=new f(u),yr=new f(u),pr=new f(u),s=720*.5/t,o=s,i=1;i<t;i++){for(h=ne[o%720|0],v=-te[o%720|0],r=0;r<n;r++)vr[e]=l[r]*h,yr[e]=v,pr[e++]=a[r]*h;o+=s}pu=n;to=t;pc()}};tt.prototype.sphere=bt.prototype.a3DOnlyFunction;rt.prototype.sphere=function(){var u=arguments[0],t,n,r,f,i;(pu<3||to<2)&&v.sphereDetail(30);t=new ut;t.scale(u,u,u);n=new ut;n.scale(1,-1,1);n.apply(ht.array());n.transpose();wt&&(ct>0?(r=new ut,r.set(n),f=new ut,f.set(t),r.mult(f),i=new ut,i.set(r),i.invert(),i.transpose(),kt("uNormalTransform3d",b,"uNormalTransform",!1,i.array()),fi("aNormal3d",b,"aNormal",3,df)):gi("aNormal3d",b,"aNormal"),y.useProgram(b),gi("aTexture3d",b,"aTexture"),kt("uModel3d",b,"uModel",!1,t.array()),kt("uView3d",b,"uView",!1,n.array()),fi("aVertex3d",b,"aVertex",3,df),gi("aColor3d",b,"aColor"),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),dt("uColor3d",b,"uColor",di),y.drawArrays(y.TRIANGLE_STRIP,0,yt.length/3),y.disable(y.POLYGON_OFFSET_FILL));si>0&&lt&&(y.useProgram(ft),kt("uModel2d",ft,"uModel",!1,t.array()),kt("uView2d",ft,"uView",!1,n.array()),fi("aVertex2d",ft,"aVertex",3,df),gi("aTextureCoord2d",ft,"aTextureCoord"),dt("uColor2d",ft,"uColor",pi),gt("uIsDrawingText",ft,"uIsDrawingText",!1),y.drawArrays(y.LINE_STRIP,0,yt.length/3))};v.modelX=function(n,t,i){var r=ht.array(),u=wr.array(),f=r[0]*n+r[1]*t+r[2]*i+r[3],e=r[4]*n+r[5]*t+r[6]*i+r[7],o=r[8]*n+r[9]*t+r[10]*i+r[11],s=r[12]*n+r[13]*t+r[14]*i+r[15],h=u[0]*f+u[1]*e+u[2]*o+u[3]*s,c=u[12]*f+u[13]*e+u[14]*o+u[15]*s;return c!==0?h/c:h};v.modelY=function(n,t,i){var r=ht.array(),u=wr.array(),f=r[0]*n+r[1]*t+r[2]*i+r[3],e=r[4]*n+r[5]*t+r[6]*i+r[7],o=r[8]*n+r[9]*t+r[10]*i+r[11],s=r[12]*n+r[13]*t+r[14]*i+r[15],h=u[4]*f+u[5]*e+u[6]*o+u[7]*s,c=u[12]*f+u[13]*e+u[14]*o+u[15]*s;return c!==0?h/c:h};v.modelZ=function(n,t,i){var r=ht.array(),u=wr.array(),f=r[0]*n+r[1]*t+r[2]*i+r[3],e=r[4]*n+r[5]*t+r[6]*i+r[7],o=r[8]*n+r[9]*t+r[10]*i+r[11],s=r[12]*n+r[13]*t+r[14]*i+r[15],h=u[8]*f+u[9]*e+u[10]*o+u[11]*s,c=u[12]*f+u[13]*e+u[14]*o+u[15]*s;return c!==0?h/c:h};tt.prototype.ambient=bt.prototype.a3DOnlyFunction;rt.prototype.ambient=function(n,t,i){y.useProgram(b);gt("uUsingMat3d",b,"uUsingMat",!0);var r=v.color(n,t,i);dt("uMaterialAmbient3d",b,"uMaterialAmbient",v.color.toGLArray(r).slice(0,3))};tt.prototype.emissive=bt.prototype.a3DOnlyFunction;rt.prototype.emissive=function(n,t,i){y.useProgram(b);gt("uUsingMat3d",b,"uUsingMat",!0);var r=v.color(n,t,i);dt("uMaterialEmissive3d",b,"uMaterialEmissive",v.color.toGLArray(r).slice(0,3))};tt.prototype.shininess=bt.prototype.a3DOnlyFunction;rt.prototype.shininess=function(n){y.useProgram(b);gt("uUsingMat3d",b,"uUsingMat",!0);dt("uShininess3d",b,"uShininess",n)};tt.prototype.specular=bt.prototype.a3DOnlyFunction;rt.prototype.specular=function(n,t,i){y.useProgram(b);gt("uUsingMat3d",b,"uUsingMat",!0);var r=v.color(n,t,i);dt("uMaterialSpecular3d",b,"uMaterialSpecular",v.color.toGLArray(r).slice(0,3))};v.screenX=function(n,t,i){var r=ht.array();if(r.length===16){var f=r[0]*n+r[1]*t+r[2]*i+r[3],e=r[4]*n+r[5]*t+r[6]*i+r[7],o=r[8]*n+r[9]*t+r[10]*i+r[11],s=r[12]*n+r[13]*t+r[14]*i+r[15],u=sr.array(),h=u[0]*f+u[1]*e+u[2]*o+u[3]*s,c=u[12]*f+u[13]*e+u[14]*o+u[15]*s;return c!==0&&(h/=c),v.width*(1+h)/2}return ht.multX(n,t)};v.screenY=function(n,t,i){var r=ht.array();if(r.length===16){var f=r[0]*n+r[1]*t+r[2]*i+r[3],e=r[4]*n+r[5]*t+r[6]*i+r[7],o=r[8]*n+r[9]*t+r[10]*i+r[11],s=r[12]*n+r[13]*t+r[14]*i+r[15],u=sr.array(),h=u[4]*f+u[5]*e+u[6]*o+u[7]*s,c=u[12]*f+u[13]*e+u[14]*o+u[15]*s;return c!==0&&(h/=c),v.height*(1+h)/2}return ht.multY(n,t)};v.screenZ=function(n,t,i){var r=ht.array();if(r.length!==16)return 0;var u=sr.array(),f=r[0]*n+r[1]*t+r[2]*i+r[3],e=r[4]*n+r[5]*t+r[6]*i+r[7],o=r[8]*n+r[9]*t+r[10]*i+r[11],s=r[12]*n+r[13]*t+r[14]*i+r[15],h=u[8]*f+u[9]*e+u[10]*o+u[11]*s,c=u[12]*f+u[13]*e+u[14]*o+u[15]*s;return c!==0&&(h/=c),(h+1)/2};bt.prototype.fill=function(){var n=v.color(arguments[0],arguments[1],arguments[2],arguments[3]);n===fu&&wt||(wt=!0,fu=n)};tt.prototype.fill=function(){bt.prototype.fill.apply(this,arguments);eu=!0};rt.prototype.fill=function(){bt.prototype.fill.apply(this,arguments);di=v.color.toGLArray(fu)};v.noFill=function(){wt=!1};bt.prototype.stroke=function(){var n=v.color(arguments[0],arguments[1],arguments[2],arguments[3]);n===ou&&lt||(lt=!0,ou=n)};tt.prototype.stroke=function(){bt.prototype.stroke.apply(this,arguments);ce=!0};rt.prototype.stroke=function(){bt.prototype.stroke.apply(this,arguments);pi=v.color.toGLArray(ou)};v.noStroke=function(){lt=!1};bt.prototype.strokeWeight=function(n){si=n};tt.prototype.strokeWeight=function(n){bt.prototype.strokeWeight.apply(this,arguments);y.lineWidth=n};rt.prototype.strokeWeight=function(n){bt.prototype.strokeWeight.apply(this,arguments);y.useProgram(ft);dt("pointSize2d",ft,"uPointSize",n);y.useProgram(ci);dt("pointSizeUnlitShape",ci,"uPointSize",n);y.lineWidth(n)};v.strokeCap=function(n){ei.$ensureContext().lineCap=n};v.strokeJoin=function(n){ei.$ensureContext().lineJoin=n};tt.prototype.smooth=function(){su=!0;var n=d.style;n.setProperty("image-rendering","optimizeQuality","important");n.setProperty("-ms-interpolation-mode","bicubic","important");y.hasOwnProperty("mozImageSmoothingEnabled")&&(y.mozImageSmoothingEnabled=!0)};rt.prototype.smooth=function(){su=!0};tt.prototype.noSmooth=function(){su=!1;var n=d.style;n.setProperty("image-rendering","optimizeSpeed","important");n.setProperty("image-rendering","-moz-crisp-edges","important");n.setProperty("image-rendering","-webkit-optimize-contrast","important");n.setProperty("image-rendering","optimize-contrast","important");n.setProperty("-ms-interpolation-mode","nearest-neighbor","important");y.hasOwnProperty("mozImageSmoothingEnabled")&&(y.mozImageSmoothingEnabled=!1)};rt.prototype.noSmooth=function(){su=!1};tt.prototype.point=function(n,t){lt&&(n=i.round(n),t=i.round(t),y.fillStyle=v.color.toString(ou),eu=!0,si>1?(y.beginPath(),y.arc(n,t,si/2,0,6.2831853071795862,!1),y.fill()):y.fillRect(n,t,1,1))};rt.prototype.point=function(n,t,i){var u=new ut,r;u.translate(n,t,i||0);u.transpose();r=new ut;r.scale(1,-1,1);r.apply(ht.array());r.transpose();y.useProgram(ft);kt("uModel2d",ft,"uModel",!1,u.array());kt("uView2d",ft,"uView",!1,r.array());si>0&&lt&&(dt("uColor2d",ft,"uColor",pi),gt("uIsDrawingText2d",ft,"uIsDrawingText",!1),gt("uSmooth2d",ft,"uSmooth",su),fi("aVertex2d",ft,"aVertex",3,ge),gi("aTextureCoord2d",ft,"aTextureCoord"),y.drawArrays(y.POINTS,0,1))};v.beginShape=function(n){ni=n;ll=[];w=[]};tt.prototype.vertex=function(n,t,i){var r=[];cu&&(cu=!1);r.isVert=!0;r[0]=n;r[1]=t;r[2]=0;r[3]=0;r[4]=0;r[5]=fu;r[6]=ou;w.push(r);i&&(w[w.length-1].moveTo=i)};rt.prototype.vertex=function(n,t,i,u,f){var e=[];cu&&(cu=!1);e.isVert=!0;f===r&&ai&&(f=u,u=i,i=0);u!==r&&f!==r&&(ah===2&&(u/=uf.width,f/=uf.height),u=u>1?1:u,u=u<0?0:u,f=f>1?1:f,f=f<0?0:f);e[0]=n;e[1]=t;e[2]=i||0;e[3]=u||0;e[4]=f||0;e[5]=di[0];e[6]=di[1];e[7]=di[2];e[8]=di[3];e[9]=pi[0];e[10]=pi[1];e[11]=pi[2];e[12]=pi[3];e[13]=co;e[14]=lo;e[15]=ao;w.push(e)};var wc=function(n,t){var i=new ut;i.scale(1,-1,1);i.apply(ht.array());i.transpose();y.useProgram(ci);kt("uViewUS",ci,"uView",!1,i.array());gt("uSmoothUS",ci,"uSmooth",su);fi("aVertexUS",ci,"aVertex",3,ge);y.bufferData(y.ARRAY_BUFFER,new f(n),y.STREAM_DRAW);fi("aColorUS",ci,"aColor",4,es);y.bufferData(y.ARRAY_BUFFER,new f(t),y.STREAM_DRAW);y.drawArrays(y.POINTS,0,n.length/3)},rr=function(n,t,i){var u,r;u=t==="LINES"?y.LINES:t==="LINE_LOOP"?y.LINE_LOOP:y.LINE_STRIP;r=new ut;r.scale(1,-1,1);r.apply(ht.array());r.transpose();y.useProgram(ci);kt("uViewUS",ci,"uView",!1,r.array());fi("aVertexUS",ci,"aVertex",3,fs);y.bufferData(y.ARRAY_BUFFER,new f(n),y.STREAM_DRAW);fi("aColorUS",ci,"aColor",4,sh);y.bufferData(y.ARRAY_BUFFER,new f(i),y.STREAM_DRAW);y.drawArrays(u,0,n.length/3)},uu=function(n,t,i,r){var e,u;e=t==="TRIANGLES"?y.TRIANGLES:t==="TRIANGLE_FAN"?y.TRIANGLE_FAN:y.TRIANGLE_STRIP;u=new ut;u.scale(1,-1,1);u.apply(ht.array());u.transpose();y.useProgram(b);kt("model3d",b,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);kt("view3d",b,"uView",!1,u.array());y.enable(y.POLYGON_OFFSET_FILL);y.polygonOffset(1,1);dt("color3d",b,"uColor",[-1,0,0,0]);fi("vertex3d",b,"aVertex",3,oh);y.bufferData(y.ARRAY_BUFFER,new f(n),y.STREAM_DRAW);ai&&hu!==null&&bo(i);fi("aColor3d",b,"aColor",4,es);y.bufferData(y.ARRAY_BUFFER,new f(i),y.STREAM_DRAW);gi("aNormal3d",b,"aNormal");ai&&(gt("uUsingTexture3d",b,"uUsingTexture",ai),fi("aTexture3d",b,"aTexture",2,hh),y.bufferData(y.ARRAY_BUFFER,new f(r),y.STREAM_DRAW));y.drawArrays(e,0,n.length/3);y.disable(y.POLYGON_OFFSET_FILL)};tt.prototype.endShape=function(n){var s,t,f,u,e,o;if(w.length!==0){s=n===2;s&&w.push(w[0]);var c=[],l=[],a=[],h=[],i;for(cu=!0,u=w.length,t=0;t<u;t++)for(i=w[t],f=0;f<3;f++)c.push(i[f]);for(t=0;t<u;t++)for(i=w[t],f=5;f<9;f++)l.push(i[f]);for(t=0;t<u;t++)for(i=w[t],f=9;f<13;f++)a.push(i[f]);for(t=0;t<u;t++)i=w[t],h.push(i[3]),h.push(i[4]);if(hf&&(ni===20||ni===r)){if(u>3){for(e=[],o=1-yo,y.beginPath(),y.moveTo(w[1][0],w[1][1]),t=1;t+2<u;t++)i=w[t],e[0]=[i[0],i[1]],e[1]=[i[0]+(o*w[t+1][0]-o*w[t-1][0])/6,i[1]+(o*w[t+1][1]-o*w[t-1][1])/6],e[2]=[w[t+1][0]+(o*w[t][0]-o*w[t+2][0])/6,w[t+1][1]+(o*w[t][1]-o*w[t+2][1])/6],e[3]=[w[t+1][0],w[t+1][1]],y.bezierCurveTo(e[1][0],e[1][1],e[2][0],e[2][1],e[3][0],e[3][1]);se()}}else if(cf&&(ni===20||ni===r)){for(y.beginPath(),t=0;t<u;t++)i=w[t],w[t].isVert?w[t].moveTo?y.moveTo(i[0],i[1]):y.lineTo(i[0],i[1]):y.bezierCurveTo(w[t][0],w[t][1],w[t][2],w[t][3],w[t][4],w[t][5]);se()}else if(ni===2)for(t=0;t<u;t++)i=w[t],lt&&v.stroke(i[6]),v.point(i[0],i[1]);else if(ni===4)for(t=0;t+1<u;t+=2)i=w[t],lt&&v.stroke(w[t+1][6]),v.line(i[0],i[1],w[t+1][0],w[t+1][1]);else if(ni===9)for(t=0;t+2<u;t+=3)i=w[t],y.beginPath(),y.moveTo(i[0],i[1]),y.lineTo(w[t+1][0],w[t+1][1]),y.lineTo(w[t+2][0],w[t+2][1]),y.lineTo(i[0],i[1]),wt&&(v.fill(w[t+2][5]),ru()),lt&&(v.stroke(w[t+2][6]),dr()),y.closePath();else if(ni===10)for(t=0;t+1<u;t++)i=w[t],y.beginPath(),y.moveTo(w[t+1][0],w[t+1][1]),y.lineTo(i[0],i[1]),lt&&v.stroke(w[t+1][6]),wt&&v.fill(w[t+1][5]),t+2<u&&(y.lineTo(w[t+2][0],w[t+2][1]),lt&&v.stroke(w[t+2][6]),wt&&v.fill(w[t+2][5])),se();else if(ni===11){if(u>2)for(y.beginPath(),y.moveTo(w[0][0],w[0][1]),y.lineTo(w[1][0],w[1][1]),y.lineTo(w[2][0],w[2][1]),wt&&(v.fill(w[2][5]),ru()),lt&&(v.stroke(w[2][6]),dr()),y.closePath(),t=3;t<u;t++)i=w[t],y.beginPath(),y.moveTo(w[0][0],w[0][1]),y.lineTo(w[t-1][0],w[t-1][1]),y.lineTo(i[0],i[1]),wt&&(v.fill(i[5]),ru()),lt&&(v.stroke(i[6]),dr()),y.closePath()}else if(ni===16)for(t=0;t+3<u;t+=4){for(i=w[t],y.beginPath(),y.moveTo(i[0],i[1]),f=1;f<4;f++)y.lineTo(w[t+f][0],w[t+f][1]);y.lineTo(i[0],i[1]);wt&&(v.fill(w[t+3][5]),ru());lt&&(v.stroke(w[t+3][6]),dr());y.closePath()}else if(ni===17){if(u>3)for(t=0;t+1<u;t+=2)i=w[t],y.beginPath(),t+3<u?(y.moveTo(w[t+2][0],w[t+2][1]),y.lineTo(i[0],i[1]),y.lineTo(w[t+1][0],w[t+1][1]),y.lineTo(w[t+3][0],w[t+3][1]),wt&&v.fill(w[t+3][5]),lt&&v.stroke(w[t+3][6])):(y.moveTo(i[0],i[1]),y.lineTo(w[t+1][0],w[t+1][1])),se()}else{for(y.beginPath(),y.moveTo(w[0][0],w[0][1]),t=1;t<u;t++)i=w[t],i.isVert&&(i.moveTo?y.moveTo(i[0],i[1]):y.lineTo(i[0],i[1]));se()}hf=!1;cf=!1;vi=[];li=0;s&&w.pop()}};rt.prototype.endShape=function(n){var i,t,f,c,v;if(w.length!==0){var a=n===2,u=[],s=[],l=[],e=[],h=[],o;for(cu=!0,c=w.length,i=0;i<c;i++)for(o=w[i],t=0;t<3;t++)s.push(o[t]);for(i=0;i<c;i++)for(o=w[i],t=5;t<9;t++)l.push(o[t]);for(i=0;i<c;i++)for(o=w[i],t=9;t<13;t++)e.push(o[t]);for(i=0;i<c;i++)o=w[i],h.push(o[3]),h.push(o[4]);if(a){for(s.push(w[0][0]),s.push(w[0][1]),s.push(w[0][2]),i=5;i<9;i++)l.push(w[0][i]);for(i=9;i<13;i++)e.push(w[0][i]);h.push(w[0][3]);h.push(w[0][4])}if(hf&&(ni===20||ni===r))u=s,lt&&rr(u,null,e),wt&&uu(s,null,l);else if(cf&&(ni===20||ni===r))u=s,u.splice(u.length-3),e.splice(e.length-4),lt&&rr(u,null,e),wt&&uu(s,"TRIANGLES",l);else{if(ni===2){for(i=0;i<c;i++)for(o=w[i],t=0;t<3;t++)u.push(o[t]);wc(u,e)}else if(ni===4){for(i=0;i<c;i++)for(o=w[i],t=0;t<3;t++)u.push(o[t]);for(i=0;i<c;i++)for(o=w[i],t=5;t<9;t++)l.push(o[t]);rr(u,"LINES",e)}else if(ni===9){if(c>2)for(i=0;i+2<c;i+=3){for(s=[],h=[],u=[],l=[],e=[],t=0;t<3;t++)for(f=0;f<3;f++)u.push(w[i+t][f]),s.push(w[i+t][f]);for(t=0;t<3;t++)for(f=3;f<5;f++)h.push(w[i+t][f]);for(t=0;t<3;t++)for(f=5;f<9;f++)l.push(w[i+t][f]),e.push(w[i+t][f+4]);lt&&rr(u,"LINE_LOOP",e);(wt||ai)&&uu(s,"TRIANGLES",l,h)}}else if(ni===10){if(c>2)for(i=0;i+2<c;i++){for(u=[],s=[],e=[],l=[],h=[],t=0;t<3;t++)for(f=0;f<3;f++)u.push(w[i+t][f]),s.push(w[i+t][f]);for(t=0;t<3;t++)for(f=3;f<5;f++)h.push(w[i+t][f]);for(t=0;t<3;t++)for(f=5;f<9;f++)e.push(w[i+t][f+4]),l.push(w[i+t][f]);(wt||ai)&&uu(s,"TRIANGLE_STRIP",l,h);lt&&rr(u,"LINE_LOOP",e)}}else if(ni===11){if(c>2){for(i=0;i<3;i++)for(o=w[i],t=0;t<3;t++)u.push(o[t]);for(i=0;i<3;i++)for(o=w[i],t=9;t<13;t++)e.push(o[t]);for(lt&&rr(u,"LINE_LOOP",e),i=2;i+1<c;i++){for(u=[],e=[],u.push(w[0][0]),u.push(w[0][1]),u.push(w[0][2]),e.push(w[0][9]),e.push(w[0][10]),e.push(w[0][11]),e.push(w[0][12]),t=0;t<2;t++)for(f=0;f<3;f++)u.push(w[i+t][f]);for(t=0;t<2;t++)for(f=9;f<13;f++)e.push(w[i+t][f]);lt&&rr(u,"LINE_STRIP",e)}(wt||ai)&&uu(s,"TRIANGLE_FAN",l,h)}}else if(ni===16)for(i=0;i+3<c;i+=4){for(u=[],t=0;t<4;t++)for(o=w[i+t],f=0;f<3;f++)u.push(o[f]);if(lt&&rr(u,"LINE_LOOP",e),wt){for(s=[],l=[],h=[],t=0;t<3;t++)s.push(w[i][t]);for(t=5;t<9;t++)l.push(w[i][t]);for(t=0;t<3;t++)s.push(w[i+1][t]);for(t=5;t<9;t++)l.push(w[i+1][t]);for(t=0;t<3;t++)s.push(w[i+3][t]);for(t=5;t<9;t++)l.push(w[i+3][t]);for(t=0;t<3;t++)s.push(w[i+2][t]);for(t=5;t<9;t++)l.push(w[i+2][t]);ai&&(h.push(w[i+0][3]),h.push(w[i+0][4]),h.push(w[i+1][3]),h.push(w[i+1][4]),h.push(w[i+3][3]),h.push(w[i+3][4]),h.push(w[i+2][3]),h.push(w[i+2][4]));uu(s,"TRIANGLE_STRIP",l,h)}}else if(ni===17){if(v=[],c>3){for(i=0;i<2;i++)for(o=w[i],t=0;t<3;t++)u.push(o[t]);for(i=0;i<2;i++)for(o=w[i],t=9;t<13;t++)e.push(o[t]);for(rr(u,"LINE_STRIP",e),c>4&&c%2>0&&(v=s.splice(s.length-3),w.pop()),i=0;i+3<c;i+=2){for(u=[],e=[],t=0;t<3;t++)u.push(w[i+1][t]);for(t=0;t<3;t++)u.push(w[i+3][t]);for(t=0;t<3;t++)u.push(w[i+2][t]);for(t=0;t<3;t++)u.push(w[i+0][t]);for(t=9;t<13;t++)e.push(w[i+1][t]);for(t=9;t<13;t++)e.push(w[i+3][t]);for(t=9;t<13;t++)e.push(w[i+2][t]);for(t=9;t<13;t++)e.push(w[i+0][t]);lt&&rr(u,"LINE_STRIP",e)}(wt||ai)&&uu(s,"TRIANGLE_LIST",l,h)}}else if(c===1){for(t=0;t<3;t++)u.push(w[0][t]);for(t=9;t<13;t++)e.push(w[0][t]);wc(u,e)}else{for(i=0;i<c;i++){for(o=w[i],t=0;t<3;t++)u.push(o[t]);for(t=5;t<9;t++)e.push(o[t])}lt&&a?rr(u,"LINE_LOOP",e):lt&&!a&&rr(u,"LINE_STRIP",e);(wt||ai)&&uu(s,"TRIANGLE_FAN",l,h)}ai=!1;y.useProgram(b);gt("usingTexture3d",b,"uUsingTexture",ai)}hf=!1;cf=!1;vi=[];li=0}};bs=function(n,t){var i=1/n,r=i*i,u=r*i;t.set(0,0,0,1,u,r,i,0,6*u,2*r,0,0,6*u,0,0,0)};ks=function(){tf||(kf=new ut,tf=new ut,fh=!0);var n=yo;kf.set((n-1)/2,(n+3)/2,(-3-n)/2,(1-n)/2,1-n,(-5-n)/2,n+2,(n-1)/2,(n-1)/2,0,(1-n)/2,0,0,1,0,0);bs(po,tf);go||(ke=new ut);ke.set(kf);ke.preApply(go);tf.apply(kf)};tt.prototype.bezierVertex=function(){var t,n;if(cf=!0,t=[],cu)throw"vertex() must be used at least once before calling bezierVertex()";for(n=0;n<arguments.length;n++)t[n]=arguments[n];w.push(t);w[w.length-1].isVert=!1};rt.prototype.bezierVertex=function(){var y,f,e;if(cf=!0,y=[],cu)throw"vertex() must be used at least once before calling bezierVertex()";if(arguments.length===9){rf===r&&(rf=new ut);f=w.length-1;bs(wo,rf);rf.apply(ns);var n=rf.array(),t=w[f][0],i=w[f][1],u=w[f][2],o=n[4]*t+n[5]*arguments[0]+n[6]*arguments[3]+n[7]*arguments[6],s=n[8]*t+n[9]*arguments[0]+n[10]*arguments[3]+n[11]*arguments[6],p=n[12]*t+n[13]*arguments[0]+n[14]*arguments[3]+n[15]*arguments[6],h=n[4]*i+n[5]*arguments[1]+n[6]*arguments[4]+n[7]*arguments[7],c=n[8]*i+n[9]*arguments[1]+n[10]*arguments[4]+n[11]*arguments[7],b=n[12]*i+n[13]*arguments[1]+n[14]*arguments[4]+n[15]*arguments[7],l=n[4]*u+n[5]*arguments[2]+n[6]*arguments[5]+n[7]*arguments[8],a=n[8]*u+n[9]*arguments[2]+n[10]*arguments[5]+n[11]*arguments[8],k=n[12]*u+n[13]*arguments[2]+n[14]*arguments[5]+n[15]*arguments[8];for(e=0;e<wo;e++)t+=o,o+=s,s+=p,i+=h,h+=c,c+=b,u+=l,l+=a,a+=k,v.vertex(t,i,u);v.vertex(arguments[6],arguments[7],arguments[8])}};v.texture=function(n){var i=ei.$ensureContext();if(n.__texture)i.bindTexture(i.TEXTURE_2D,n.__texture);else if(n.localName==="canvas")i.bindTexture(i.TEXTURE_2D,ch),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.generateMipmap(i.TEXTURE_2D),uf.width=n.width,uf.height=n.height;else{var f=i.createTexture(),r=t.createElement("canvas"),e=r.getContext("2d"),u;if(n.width&n.width-1==0)r.width=n.width;else{for(u=1;u<n.width;)u*=2;r.width=u}if(n.height&n.height-1==0)r.height=n.height;else{for(u=1;u<n.height;)u*=2;r.height=u}e.drawImage(n.sourceImg,0,0,n.width,n.height,0,0,r.width,r.height);i.bindTexture(i.TEXTURE_2D,f);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r);i.generateMipmap(i.TEXTURE_2D);n.__texture=f;uf.width=n.width;uf.height=n.height}ai=!0;i.useProgram(b);gt("usingTexture3d",b,"uUsingTexture",ai)};v.textureMode=function(n){ah=n};bc=function(n,t,i,r,u,f,e,o,s,h,c,l){var y=r,p=u,w=f,a=tf.array(),k=a[4]*n+a[5]*r+a[6]*e+a[7]*h,d=a[8]*n+a[9]*r+a[10]*e+a[11]*h,rt=a[12]*n+a[13]*r+a[14]*e+a[15]*h,g=a[4]*t+a[5]*u+a[6]*o+a[7]*c,nt=a[8]*t+a[9]*u+a[10]*o+a[11]*c,ut=a[12]*t+a[13]*u+a[14]*o+a[15]*c,tt=a[4]*i+a[5]*f+a[6]*s+a[7]*l,it=a[8]*i+a[9]*f+a[10]*s+a[11]*l,ft=a[12]*i+a[13]*f+a[14]*s+a[15]*l,b;for(v.vertex(y,p,w),b=0;b<po;b++)y+=k,k+=d,d+=rt,p+=g,g+=nt,nt+=ut,w+=tt,tt+=it,it+=ft,v.vertex(y,p,w)};tt.prototype.curveVertex=function(n,t){hf=!0;v.vertex(n,t)};rt.prototype.curveVertex=function(n,t,i){hf=!0;fh||ks();var r=[];r[0]=n;r[1]=t;r[2]=i;vi.push(r);li++;li>3&&bc(vi[li-4][0],vi[li-4][1],vi[li-4][2],vi[li-3][0],vi[li-3][1],vi[li-3][2],vi[li-2][0],vi[li-2][1],vi[li-2][2],vi[li-1][0],vi[li-1][1],vi[li-1][2])};tt.prototype.curve=function(n,t,i,r,u,f,e,o){v.beginShape();v.curveVertex(n,t);v.curveVertex(i,r);v.curveVertex(u,f);v.curveVertex(e,o);v.endShape()};rt.prototype.curve=function(n,t,i,u,f,e,o,s,h,c,l,a){if(a!==r){v.beginShape();v.curveVertex(n,t,i);v.curveVertex(u,f,e);v.curveVertex(o,s,h);v.curveVertex(c,l,a);v.endShape();return}v.beginShape();v.curveVertex(n,t);v.curveVertex(i,u);v.curveVertex(f,e);v.curveVertex(o,s);v.endShape()};v.curveTightness=function(n){yo=n};v.curveDetail=function(n){po=n;ks()};v.rectMode=function(n){fr=n};v.imageMode=function(n){switch(n){case 0:lf=ec;break;case 1:lf=ta;break;case 3:lf=ia;break;default:throw"Invalid imageMode";}};v.ellipseMode=function(n){wi=n};v.arc=function(n,t,i,r,u,f){var p,w;if(!(i<=0)&&!(f<u)){for(wi===1?(i=i-n,r=r-t):wi===2?(n=n-i,t=t-r,i=i*2,r=r*2):wi===3&&(n=n-i/2,t=t-r/2);u<0;)u+=6.2831853071795862,f+=6.2831853071795862;f-u>6.2831853071795862&&(u=0,f=6.2831853071795862);var s=i/2,h=r/2,c=n+s,l=t+h,a=0|.5+u*v.RAD_TO_DEG*2,y=0|.5+f*v.RAD_TO_DEG*2,e,o;if(wt){for(p=lt,lt=!1,v.beginShape(),v.vertex(c,l),e=a;e<=y;e++)o=e%720,v.vertex(c+te[o]*s,l+ne[o]*h);v.endShape(2);lt=p}if(lt){for(w=wt,wt=!1,v.beginShape(),e=a;e<=y;e++)o=e%720,v.vertex(c+te[o]*s,l+ne[o]*h);v.endShape();wt=w}}};tt.prototype.line=function(n,t,u,f){var e;if(lt){if(n=i.round(n),u=i.round(u),t=i.round(t),f=i.round(f),n===u&&t===f){v.point(n,t);return}var o=r,h=r,s=!0,c=ht.array(),l=[1,0,0,0,1,0];for(e=0;e<6&&s;e++)s=c[e]===l[e];s&&(n===u?(t>f&&(o=t,t=f,f=o),f++,si%2==1&&y.translate(.5,0)):t===f&&(n>u&&(o=n,n=u,u=o),u++,si%2==1&&y.translate(0,.5)),si===1&&(h=y.lineCap,y.lineCap="butt"));y.beginPath();y.moveTo(n||0,t||0);y.lineTo(u||0,f||0);dr();s&&(n===u&&si%2==1?y.translate(-.5,0):t===f&&si%2==1&&y.translate(0,-.5),si===1&&(y.lineCap=h))}};rt.prototype.line=function(n,t,i,u,e,o){if((e===r||o===r)&&(o=0,e=u,u=i,i=0),n===u&&t===e&&i===o){v.point(n,t,i);return}var h=[n,t,i,u,e,o],s=new ut;s.scale(1,-1,1);s.apply(ht.array());s.transpose();si>0&&lt&&(y.useProgram(ft),kt("uModel2d",ft,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),kt("uView2d",ft,"uView",!1,s.array()),dt("uColor2d",ft,"uColor",pi),gt("uIsDrawingText",ft,"uIsDrawingText",!1),fi("aVertex2d",ft,"aVertex",3,fs),gi("aTextureCoord2d",ft,"aTextureCoord"),y.bufferData(y.ARRAY_BUFFER,new f(h),y.STREAM_DRAW),y.drawArrays(y.LINES,0,2))};tt.prototype.bezier=function(){if(arguments.length!==8)throw"You must use 8 parameters for bezier() in 2D mode";v.beginShape();v.vertex(arguments[0],arguments[1]);v.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);v.endShape()};rt.prototype.bezier=function(){if(arguments.length!==12)throw"You must use 12 parameters for bezier() in 3D mode";v.beginShape();v.vertex(arguments[0],arguments[1],arguments[2]);v.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);v.endShape()};v.bezierDetail=function(n){wo=n};v.bezierPoint=function(n,t,i,r,u){return(1-u)*(1-u)*(1-u)*n+3*(1-u)*(1-u)*u*t+3*(1-u)*u*u*i+u*u*u*r};v.bezierTangent=function(n,t,i,r,u){return 3*u*u*(-n+3*t-3*i+r)+6*u*(n-2*t+i)+3*(-n+t)};v.curvePoint=function(n,t,i,r,u){return.5*(2*t+(-n+i)*u+(2*n-5*t+4*i-r)*u*u+(-n+3*t-3*i+r)*u*u*u)};v.curveTangent=function(n,t,i,r,u){return.5*(-n+i+2*(2*n-5*t+4*i-r)*u+3*(-n+3*t-3*i+r)*u*u)};v.triangle=function(n,t,i,r,u,f){v.beginShape(9);v.vertex(n,t,0);v.vertex(i,r,0);v.vertex(u,f,0);v.endShape()};v.quad=function(n,t,i,r,u,f,e,o){v.beginShape(16);v.vertex(n,t,0);v.vertex(i,r,0);v.vertex(u,f,0);v.vertex(e,o,0);v.endShape()};kc=function(n,t,u,f,e,o,s,h){h===r&&(o=e,s=e,h=e);var c=u/2,l=f/2;(e>c||e>l)&&(e=i.min(c,l));(o>c||o>l)&&(o=i.min(c,l));(s>c||s>l)&&(s=i.min(c,l));(h>c||h>l)&&(h=i.min(c,l));(!wt||lt)&&y.translate(.5,.5);y.beginPath();y.moveTo(n+e,t);y.lineTo(n+u-o,t);y.quadraticCurveTo(n+u,t,n+u,t+o);y.lineTo(n+u,t+f-s);y.quadraticCurveTo(n+u,t+f,n+u-s,t+f);y.lineTo(n+h,t+f);y.quadraticCurveTo(n,t+f,n,t+f-h);y.lineTo(n,t+e);y.quadraticCurveTo(n,t,n+e,t);(!wt||lt)&&y.translate(-.5,-.5);ru();dr()};tt.prototype.rect=function(n,t,u,f,e,o,s,h){if(u||f){if(fr===1?(u-=n,f-=t):fr===2?(u*=2,f*=2,n-=u/2,t-=f/2):fr===3&&(n-=u/2,t-=f/2),n=i.round(n),t=i.round(t),u=i.round(u),f=i.round(f),e!==r){kc(n,t,u,f,e,o,s,h);return}lt&&si%2==1&&y.translate(.5,.5);y.beginPath();y.rect(n,t,u,f);ru();dr();lt&&si%2==1&&y.translate(-.5,-.5)}};rt.prototype.rect=function(n,t,i,u,f){var e,o,h,c,s;if(f!==r)throw"rect() with rounded corners is not supported in 3D mode";fr===1?(i-=n,u-=t):fr===2?(i*=2,u*=2,n-=i/2,t-=u/2):fr===3&&(n-=i/2,t-=u/2);e=new ut;e.translate(n,t,0);e.scale(i,u,1);e.transpose();o=new ut;o.scale(1,-1,1);o.apply(ht.array());o.transpose();si>0&&lt&&(y.useProgram(ft),kt("uModel2d",ft,"uModel",!1,e.array()),kt("uView2d",ft,"uView",!1,o.array()),dt("uColor2d",ft,"uColor",pi),gt("uIsDrawingText2d",ft,"uIsDrawingText",!1),fi("aVertex2d",ft,"aVertex",3,de),gi("aTextureCoord2d",ft,"aTextureCoord"),y.drawArrays(y.LINE_LOOP,0,as.length/3));wt&&(y.useProgram(b),kt("uModel3d",b,"uModel",!1,e.array()),kt("uView3d",b,"uView",!1,o.array()),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),dt("color3d",b,"uColor",di),ct>0?(h=new ut,h.set(o),c=new ut,c.set(e),h.mult(c),s=new ut,s.set(h),s.invert(),s.transpose(),kt("uNormalTransform3d",b,"uNormalTransform",!1,s.array()),fi("aNormal3d",b,"aNormal",3,us)):gi("normal3d",b,"aNormal"),fi("vertex3d",b,"aVertex",3,de),y.drawArrays(y.TRIANGLE_FAN,0,as.length/3),y.disable(y.POLYGON_OFFSET_FILL))};tt.prototype.ellipse=function(n,t,i,r){if(n=n||0,t=t||0,!(i<=0)||!(r<=0))if(wi===2?(i*=2,r*=2):wi===1?(i=i-n,r=r-t,n+=i/2,t+=r/2):wi===0&&(n+=i/2,t+=r/2),i===r)y.beginPath(),y.arc(n,t,i/2,0,6.2831853071795862,!1),ru(),dr();else{var u=i/2,f=r/2,s=.55228474983079334,e=s*u,o=s*f;v.beginShape();v.vertex(n+u,t);v.bezierVertex(n+u,t-o,n+e,t-f,n,t-f);v.bezierVertex(n-e,t-f,n-u,t-o,n-u,t);v.bezierVertex(n-u,t+o,n-e,t+f,n,t+f);v.bezierVertex(n+e,t+f,n+u,t+o,n+u,t);v.endShape()}};rt.prototype.ellipse=function(n,t,i,r){var l,a,f,o;if(n=n||0,t=t||0,!(i<=0)||!(r<=0)){wi===2?(i*=2,r*=2):wi===1?(i=i-n,r=r-t,n+=i/2,t+=r/2):wi===0&&(n+=i/2,t+=r/2);var e=i/2,s=r/2,y=.55228474983079334,h=y*e,c=y*s;if(v.beginShape(),v.vertex(n+e,t),v.bezierVertex(n+e,t-c,0,n+h,t-s,0,n,t-s,0),v.bezierVertex(n-h,t-s,0,n-e,t-c,0,n-e,t,0),v.bezierVertex(n-e,t+c,0,n-h,t+s,0,n,t+s,0),v.bezierVertex(n+h,t+s,0,n+e,t+c,0,n+e,t,0),v.endShape(),wt){for(l=0,a=0,f=0;f<w.length;f++)l+=w[f][0],a+=w[f][1];l/=w.length;a/=w.length;var u=[],p=[],b=[];for(u[0]=l,u[1]=a,u[2]=0,u[3]=0,u[4]=0,u[5]=di[0],u[6]=di[1],u[7]=di[2],u[8]=di[3],u[9]=pi[0],u[10]=pi[1],u[11]=pi[2],u[12]=pi[3],u[13]=co,u[14]=lo,u[15]=ao,w.unshift(u),f=0;f<w.length;f++){for(o=0;o<3;o++)p.push(w[f][o]);for(o=5;o<9;o++)b.push(w[f][o])}uu(p,"TRIANGLE_FAN",b)}}};v.normal=function(n,t,i){if(arguments.length!==3||!(typeof n=="number"&&typeof t=="number"&&typeof i=="number"))throw"normal() requires three numeric arguments.";co=n;lo=t;ao=i;ni!==0&&(ve===0?ve=1:ve===1&&(ve=2))};v.save=function(t,i){return i!==r?n.open(i.toDataURL(),"_blank"):n.open(v.externals.canvas.toDataURL(),"_blank")};dc=0;v.saveFrame=function(n){n===r&&(n="screen-####.png");var t=n.replace(/#+/,function(n){for(var t=""+dc++;t.length<n.length;)t="0"+t;return t});v.save(t)};gc=t.createElement("canvas").getContext("2d");ds=[r,r,r];ur=function(n,i,r){var u,o;if(this.__isDirty=!1,n instanceof HTMLImageElement)this.fromHTMLImageData(n);else if(i||r){if(this.width=n||1,this.height=i||1,u=this.sourceImg=t.createElement("canvas"),u.width=this.width,u.height=this.height,o=this.imageData=u.getContext("2d").createImageData(this.width,this.height),this.format=r===2||r===4?r:1,this.format===1)for(var f=3,e=this.imageData.data,s=e.length;f<s;f+=4)e[f]=255;this.__isDirty=!0;this.updatePixels()}else this.width=0,this.height=0,this.imageData=gc.createImageData(1,1),this.format=2;this.pixels=ea(this)};ur.prototype={__isPImage:!0,updatePixels:function(){var n=this.sourceImg;n&&n instanceof HTMLCanvasElement&&this.__isDirty&&n.getContext("2d").putImageData(this.imageData,0,0);this.__isDirty=!1},fromHTMLImageData:function(n){var i=vf(n),t;try{t=i.context.getImageData(0,0,n.width,n.height);this.fromImageData(t)}catch(r){n.width&&n.height&&(this.isRemote=!0,this.width=n.width,this.height=n.height)}this.sourceImg=n},get:function(n,t,i,r){return arguments.length?arguments.length===2?v.get(n,t,this):arguments.length===4?v.get(n,t,i,r,this):void 0:v.get(this)},set:function(n,t,i){v.set(n,t,i,this);this.__isDirty=!0},blend:function(n,t,i,r,u,f,e,o,s,h){arguments.length===9?v.blend(this,n,t,i,r,u,f,e,o,s,this):arguments.length===10&&v.blend(n,t,i,r,u,f,e,o,s,h,this);delete this.sourceImg},copy:function(n,t,i,r,u,f,e,o,s){arguments.length===8?v.blend(this,n,t,i,r,u,f,e,o,0,this):arguments.length===9&&v.blend(n,t,i,r,u,f,e,o,s,0,this);delete this.sourceImg},filter:function(n,t){arguments.length===2?v.filter(n,t,this):arguments.length===1&&v.filter(n,null,this);delete this.sourceImg},save:function(n){v.save(n,this)},resize:function(n,t){if(this.isRemote)throw"Image is loaded remotely. Cannot resize.";if(this.width!==0||this.height!==0){n===0&&t!==0?n=i.floor(this.width/this.height*t):t===0&&n!==0&&(t=i.floor(this.height/this.width*n));var r=vf(this.imageData).canvas,u=vf(r,n,t).context.getImageData(0,0,n,t);this.fromImageData(u)}},mask:function(n){var r=this.toImageData(),t,i;if(n instanceof ur||n.__isPImage)if(n.width===this.width&&n.height===this.height)for(n=n.toImageData(),t=2,i=this.width*this.height*4;t<i;t+=4)r.data[t+1]=n.data[t];else throw"mask must have the same dimensions as PImage.";else if(n instanceof Array)if(this.width*this.height===n.length)for(t=0,i=n.length;t<i;++t)r.data[t*4+3]=n[t];else throw"mask array must be the same length as PImage pixels array.";this.fromImageData(r)},loadPixels:s,toImageData:function(){if(this.isRemote)return this.sourceImg;if(!this.__isDirty)return this.imageData;var n=vf(this.sourceImg);return n.context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote)throw"Image is loaded remotely. Cannot create dataURI.";var n=vf(this.imageData);return n.canvas.toDataURL()},fromImageData:function(n){var r=n.width,u=n.height,i=t.createElement("canvas"),f=i.getContext("2d");this.width=i.width=r;this.height=i.height=u;f.putImageData(n,0,0);this.format=2;this.imageData=n;this.sourceImg=i}};v.PImage=ur;v.createImage=function(n,t,i){return new ur(n,t,i)};v.loadImage=function(n,i,r){var u,f;return(i&&(n=n+"."+i),ri.imageCache.images[n])?(u=new ur(ri.imageCache.images[n]),u.loaded=!0,u):(u=new ur,f=t.createElement("img"),u.sourceImg=f,f.onload=function(n,t,i){var f=n,r=t,u=i;return function(){r.fromHTMLImageData(f);r.loaded=!0;u&&u()}}(f,u,r),f.src=n,u)};v.requestImage=v.loadImage;v.get=function(n,t,i,r,u){return u!==undefined?tl(n,t,i,r,u):r!==undefined?nl(n,t,i,r):i!==undefined?sa(n,t,i):t!==undefined?oa(n,t):n!==undefined?tl(0,0,n.width,n.height,n):nl(0,0,v.width,v.height)};v.createGraphics=function(n,t,i){var r=new u;return r.size(n,t,i),r.background(0,0),r};v.set=function(n,t,i,r){arguments.length===3?typeof i=="number"?la(n,t,i):(i instanceof ur||i.__isPImage)&&v.image(i,n,t):arguments.length===4&&aa(n,t,i,r)};v.imageData={};v.pixels={getLength:function(){return v.imageData.data.length?v.imageData.data.length/4:0},getPixel:function(n){var t=n*4,i=v.imageData.data;return i[t+3]<<24&4278190080|i[t+0]<<16&16711680|i[t+1]<<8&65280|i[t+2]&255},setPixel:function(n,t){var i=n*4,r=v.imageData.data;r[i+0]=(t&16711680)>>>16;r[i+1]=(t&65280)>>>8;r[i+2]=t&255;r[i+3]=(t&4278190080)>>>24},toArray:function(){for(var i=[],u=v.imageData.width*v.imageData.height,t=v.imageData.data,r=0,n=0;r<u;r++,n+=4)i.push(t[n+3]<<24&4278190080|t[n+0]<<16&16711680|t[n+1]<<8&65280|t[n+2]&255);return i},set:function(n){for(var t=0,i=n.length;t<i;t++)this.setPixel(t,n[t])}};v.loadPixels=function(){v.imageData=ei.$ensureContext().getImageData(0,0,v.width,v.height)};v.updatePixels=function(){v.imageData&&ei.$ensureContext().putImageData(v.imageData,0,0)};v.hint=function(n){var t=ei.$ensureContext();n===4?(t.disable(t.DEPTH_TEST),t.depthMask(!1),t.clear(t.DEPTH_BUFFER_BIT)):n===-4?(t.enable(t.DEPTH_TEST),t.depthMask(!0)):n===-1||n===2?su=!0:n===1&&(su=!1)};gs=function(n,t,i,r){var u;if(n instanceof ur||n.__isPImage){if(u=n,!u.loaded)throw"Error using image in background(): PImage not loaded.";if(u.width!==v.width||u.height!==v.height)throw"Background image must be the same dimensions as the canvas.";}else u=v.color(n,t,i,r);au=u};tt.prototype.background=function(n,t,i,u){n!==r&&gs(n,t,i,u);au instanceof ur||au.__isPImage?(du(),y.setTransform(1,0,0,1,0,0),v.image(au,0,0),gu()):(du(),y.setTransform(1,0,0,1,0,0),v.alpha(au)!==oi&&y.clearRect(0,0,v.width,v.height),y.fillStyle=v.color.toString(au),y.fillRect(0,0,v.width,v.height),eu=!0,gu())};rt.prototype.background=function(n,t,i,r){arguments.length>0&&gs(n,t,i,r);var u=v.color.toGLArray(au);y.clearColor(u[0],u[1],u[2],u[3]);y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT)};tt.prototype.image=function(n,t,r,u,f){var o,s;if(t=i.round(t),r=i.round(r),n.width>0){var c=u||n.width,l=f||n.height,e=lf(t||0,r||0,u||n.width,f||n.height,arguments.length<4),h=!!n.sourceImg&&hu===null;h?(o=n.sourceImg,n.__isDirty&&n.updatePixels(),y.drawImage(o,0,0,o.width,o.height,e.x,e.y,e.w,e.h)):(s=n.toImageData(),hu!==null&&(hu(s),n.__isDirty=!0),y.drawImage(vf(s).canvas,0,0,n.width,n.height,e.x,e.y,e.w,e.h))}};rt.prototype.image=function(n,t,r,u,f){n.width>0&&(t=i.round(t),r=i.round(r),u=u||n.width,f=f||n.height,v.beginShape(v.QUADS),v.texture(n),v.vertex(t,r,0,0,0),v.vertex(t,r+f,0,0,f),v.vertex(t+u,r+f,0,u,f),v.vertex(t+u,r,0,u,0),v.endShape())};v.tint=function(n,t,i,r){var u=v.color(n,t,i,r),f=v.red(u)/bi,e=v.green(u)/er,o=v.blue(u)/ki,s=v.alpha(u)/oi;hu=function(n){for(var i=n.data,r=4*n.width*n.height,t=0;t<r;)i[t++]*=f,i[t++]*=e,i[t++]*=o,i[t++]*=s};bo=function(n){for(var t=0;t<n.length;)n[t++]=f,n[t++]=e,n[t++]=o,n[t++]=s}};v.noTint=function(){hu=null;bo=null};v.copy=function(n,t,i,u,f,e,o,s,h){h===r&&(h=s,s=o,o=e,e=f,f=u,u=i,i=t,t=n,n=v);v.blend(n,t,i,u,f,e,o,s,h,0)};v.blend=function(n,t,i,u,f,e,o,s,h,c,l){if(n.isRemote)throw"Image is loaded remotely. Cannot blend image.";c===r&&(c=h,h=s,s=o,o=e,e=f,f=u,u=i,i=t,t=n,n=v);var y=t+u,p=i+f,w=e+s,b=o+h,a=l||v;(l===r||c===r)&&v.loadPixels();n.loadPixels();n===v&&v.intersect(t,i,y,p,e,o,w,b)?v.blit_resize(v.get(t,i,y-t,p-i),0,0,y-t-1,p-i-1,a.imageData.data,a.width,a.height,e,o,w,b,c):v.blit_resize(n,t,i,y,p,a.imageData.data,a.width,a.height,e,o,w,b,c);l===r&&v.updatePixels()};var va=function(n){var t=v.floor(n*3.5),i,e,u;if(t=t<1?1:t<248?t:248,v.shared.blurRadius!==t){v.shared.blurRadius=t;v.shared.blurKernelSize=1+(v.shared.blurRadius<<1);v.shared.blurKernel=new f(v.shared.blurKernelSize);var r=v.shared.blurKernel,o=v.shared.blurKernelSize,s=v.shared.blurRadius;for(i=0;i<o;i++)r[i]=0;for(u=(t-1)*(t-1),i=1;i<t;i++)r[t+i]=r[e]=u;r[t]=t*t}},ya=function(n,t){var r,y,p,w,b,u,i,s,a,it,k,nt=t.pixels.getLength(),rt=new f(nt),ut=new f(nt),ft=new f(nt),et=new f(nt),d=0,e,g,c,o;va(n);var tt=t.height,h=t.width,ot=v.shared.blurKernelSize,st=v.shared.blurRadius,ht=v.shared.blurKernel,l=t.imageData.data;for(g=0;g<tt;g++){for(e=0;e<h;e++){if(w=p=y=b=r=0,i=e-st,i<0)k=-i,i=0;else{if(i>=h)break;k=0}for(c=k;c<ot;c++){if(i>=h)break;o=(i+d)*4;u=ht[c];b+=u*l[o+3];y+=u*l[o];p+=u*l[o+1];w+=u*l[o+2];r+=u;i++}s=d+e;et[s]=b/r;rt[s]=y/r;ut[s]=p/r;ft[s]=w/r}d+=h}for(d=0,a=-st,it=a*h,g=0;g<tt;g++){for(e=0;e<h;e++){if(w=p=y=b=r=0,a<0)k=s=-a,i=e;else{if(a>=tt)break;k=0;s=a;i=e+it}for(c=k;c<ot;c++){if(s>=tt)break;u=ht[c];b+=u*et[i];y+=u*rt[i];p+=u*ut[i];w+=u*ft[i];r+=u;s++;i+=h}o=(e+d)*4;l[o]=y/r;l[o+1]=p/r;l[o+2]=w/r;l[o+3]=b/r}d+=h;it+=h;a++}},il=function(n,t){var i=0,d=t.pixels.getLength(),nt=new et(d),g,y,h,u,r,c,l,a,v,f,e,o,s,p,w,b,k;if(n)while(i<d)for(g=i,y=i+t.width;i<y;)h=u=t.pixels.getPixel(i),l=i-1,c=i+1,a=i-t.width,v=i+t.width,l<g&&(l=i),c>=y&&(c=i),a<0&&(a=0),v>=d&&(v=i),o=t.pixels.getPixel(a),e=t.pixels.getPixel(l),s=t.pixels.getPixel(v),f=t.pixels.getPixel(c),r=77*(h>>16&255)+151*(h>>8&255)+28*(h&255),w=77*(e>>16&255)+151*(e>>8&255)+28*(e&255),p=77*(f>>16&255)+151*(f>>8&255)+28*(f&255),b=77*(o>>16&255)+151*(o>>8&255)+28*(o&255),k=77*(s>>16&255)+151*(s>>8&255)+28*(s&255),w<r&&(u=e,r=w),p<r&&(u=f,r=p),b<r&&(u=o,r=b),k<r&&(u=s,r=k),nt[i++]=u;else while(i<d)for(g=i,y=i+t.width;i<y;)h=u=t.pixels.getPixel(i),l=i-1,c=i+1,a=i-t.width,v=i+t.width,l<g&&(l=i),c>=y&&(c=i),a<0&&(a=0),v>=d&&(v=i),o=t.pixels.getPixel(a),e=t.pixels.getPixel(l),s=t.pixels.getPixel(v),f=t.pixels.getPixel(c),r=77*(h>>16&255)+151*(h>>8&255)+28*(h&255),w=77*(e>>16&255)+151*(e>>8&255)+28*(e&255),p=77*(f>>16&255)+151*(f>>8&255)+28*(f&255),b=77*(o>>16&255)+151*(o>>8&255)+28*(o&255),k=77*(s>>16&255)+151*(s>>8&255)+28*(s&255),w>r&&(u=e,r=w),p>r&&(u=f,r=p),b>r&&(u=o,r=b),k>r&&(u=s,r=k),nt[i++]=u;t.pixels.set(nt)};if(v.filter=function(n,t,i){var f,e,h,u,o,p,s,c,w,b;if(arguments.length===3?(i.loadPixels(),f=i):(v.loadPixels(),f=v),t===r&&(t=null),f.isRemote)throw"Image is loaded remotely. Cannot filter image.";o=f.pixels.getLength();switch(n){case 11:p=t||1;ya(p,f);break;case 12:if(f.format===4){for(u=0;u<o;u++)e=255-f.pixels.getPixel(u),f.pixels.setPixel(u,4278190080|e<<16|e<<8|e);f.format=1}else for(u=0;u<o;u++)e=f.pixels.getPixel(u),h=77*(e>>16&255)+151*(e>>8&255)+28*(e&255)>>8,f.pixels.setPixel(u,e&4278190080|h<<16|h<<8|h);break;case 13:for(u=0;u<o;u++)f.pixels.setPixel(u,f.pixels.getPixel(u)^16777215);break;case 15:if(t===null)throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)";if(s=v.floor(t),s<2||s>255)throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)";for(c=s-1,u=0;u<o;u++){var l=f.pixels.getPixel(u)>>16&255,a=f.pixels.getPixel(u)>>8&255,y=f.pixels.getPixel(u)&255;l=(l*s>>8)*255/c;a=(a*s>>8)*255/c;y=(y*s>>8)*255/c;f.pixels.setPixel(u,4278190080&f.pixels.getPixel(u)|l<<16|a<<8|y)}break;case 14:for(u=0;u<o;u++)f.pixels.setPixel(u,f.pixels.getPixel(u)|4278190080);f.format=1;break;case 16:if(t===null&&(t=.5),t<0||t>1)throw"Level must be between 0 and 1 for filter(THRESHOLD, level)";for(w=v.floor(t*255),u=0;u<o;u++)b=v.max((f.pixels.getPixel(u)&16711680)>>16,v.max((f.pixels.getPixel(u)&65280)>>8,f.pixels.getPixel(u)&255)),f.pixels.setPixel(u,f.pixels.getPixel(u)&4278190080|(b<w?0:16777215));break;case 17:il(!0,f);break;case 18:il(!1,f)}f.updatePixels()},v.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null},v.intersect=function(n,t,i,r,u,f,e,o){var c=i-n+1,l=r-t+1,s=e-u+1,h=o-f+1,a,v;return u<n?(s+=u-n,s>c&&(s=c)):(a=c+n-u,s>a&&(s=a)),f<t?(h+=f-t,h>l&&(h=l)):(v=l+t-f,h>v&&(h=v)),!(s<=0||h<=0)},hi={},hi[1]=v.modes.blend,hi[2]=v.modes.add,hi[4]=v.modes.subtract,hi[8]=v.modes.lightest,hi[16]=v.modes.darkest,hi[0]=v.modes.replace,hi[32]=v.modes.difference,hi[64]=v.modes.exclusion,hi[128]=v.modes.multiply,hi[256]=v.modes.screen,hi[512]=v.modes.overlay,hi[1024]=v.modes.hard_light,hi[2048]=v.modes.soft_light,hi[4096]=v.modes.dodge,hi[8192]=v.modes.burn,v.blit_resize=function(n,t,r,u,f,e,o,s,h,c,l,a,y){var ht,lt,at,bt;t<0&&(t=0);r<0&&(r=0);u>=n.width&&(u=n.width-1);f>=n.height&&(f=n.height-1);var vt=u-t,yt=f-r,it=l-h,rt=a-c;if(!(it<=0)&&!(rt<=0)&&!(vt<=0)&&!(yt<=0)&&!(h>=o)&&!(c>=s)&&!(t>=n.width)&&!(r>=n.height)){var pt=i.floor(vt/it*32768),wt=i.floor(yt/rt*32768),p=v.shared;p.srcXOffset=i.floor(h<0?-h*pt:t*32768);p.srcYOffset=i.floor(c<0?-c*wt:r*32768);h<0&&(it+=h,h=0);c<0&&(rt+=c,c=0);it=i.min(it,o-h);rt=i.min(rt,s-c);at=c*o+h;p.srcBuffer=n.imageData.data;p.iw=n.width;p.iw1=n.width-1;p.ih1=n.height-1;var gt=v.filter_bilinear,ni=v.filter_new_scanline,dt=hi[y],ut,nt,ft,et,ot,st,b=4278190080,k=16711680,d=65280,g=255,ct=32767,tt=15,w=p.srcBuffer,kt=i.min;for(lt=0;lt<rt;lt++){for(p.sX=p.srcXOffset,p.fracV=p.srcYOffset&ct,p.ifV=ct-p.fracV,p.v1=(p.srcYOffset>>tt)*p.iw,p.v2=kt((p.srcYOffset>>tt)+1,p.ih1)*p.iw,ht=0;ht<it;ht++)nt=(at+ht)*4,bt=e[nt+3]<<24&b|e[nt]<<16&k|e[nt+1]<<8&d|e[nt+2]&g,p.fracU=p.sX&ct,p.ifU=ct-p.fracU,p.ul=p.ifU*p.ifV>>tt,p.ll=p.ifU*p.fracV>>tt,p.ur=p.fracU*p.ifV>>tt,p.lr=p.fracU*p.fracV>>tt,p.u1=p.sX>>tt,p.u2=kt(p.u1+1,p.iw1),ft=(p.v1+p.u1)*4,et=(p.v1+p.u2)*4,ot=(p.v2+p.u1)*4,st=(p.v2+p.u2)*4,p.cUL=w[ft+3]<<24&b|w[ft]<<16&k|w[ft+1]<<8&d|w[ft+2]&g,p.cUR=w[et+3]<<24&b|w[et]<<16&k|w[et+1]<<8&d|w[et+2]&g,p.cLL=w[ot+3]<<24&b|w[ot]<<16&k|w[ot+1]<<8&d|w[ot+2]&g,p.cLR=w[st+3]<<24&b|w[st]<<16&k|w[st+1]<<8&d|w[st+2]&g,p.r=p.ul*((p.cUL&k)>>16)+p.ll*((p.cLL&k)>>16)+p.ur*((p.cUR&k)>>16)+p.lr*((p.cLR&k)>>16)<<1&k,p.g=p.ul*(p.cUL&d)+p.ll*(p.cLL&d)+p.ur*(p.cUR&d)+p.lr*(p.cLR&d)>>>tt&d,p.b=p.ul*(p.cUL&g)+p.ll*(p.cLL&g)+p.ur*(p.cUR&g)+p.lr*(p.cLR&g)>>>tt,p.a=p.ul*((p.cUL&b)>>>24)+p.ll*((p.cLL&b)>>>24)+p.ur*((p.cUR&b)>>>24)+p.lr*((p.cLR&b)>>>24)<<9&b,ut=dt(bt,p.a|p.r|p.g|p.b),e[nt]=(ut&k)>>>16,e[nt+1]=(ut&d)>>>8,e[nt+2]=ut&g,e[nt+3]=(ut&b)>>>24,p.sX+=pt;at+=o;p.srcYOffset+=wt}}},v.loadFont=function(n,t){if(n===r)throw"font name required in loadFont.";if(n.indexOf(".svg")===-1)return t===r&&(t=ti.size),e.get(n,t);var i=v.loadGlyphs(n);return{name:n,css:"12px sans-serif",glyph:!0,units_per_em:i.units_per_em,horiz_adv_x:1/i.units_per_em*i.horiz_adv_x,ascent:i.ascent,descent:i.descent,width:function(t){for(var r=0,f=t.length,i=0;i<f;i++)try{r+=parseFloat(v.glyphLook(v.glyphTable[n],t[i]).horiz_adv_x)}catch(e){u.debug(e)}return r/v.glyphTable[n].units_per_em}}},v.createFont=function(n,t){return v.loadFont(n,t)},v.textFont=function(n,t){t!==r&&(n.glyph||(n=e.get(n.name,t)),lr=t);ti=n;ff=ti.name;tu=ti.ascent;ar=ti.descent;tr=ti.leading;var i=ei.$ensureContext();i.font=ti.css},v.textSize=function(n){ti=e.get(ff,n);lr=n;tu=ti.ascent;ar=ti.descent;tr=ti.leading;var t=ei.$ensureContext();t.font=ti.css},v.textAscent=function(){return tu},v.textDescent=function(){return ar},v.textLeading=function(n){tr=n},v.textAlign=function(n,t){vu=n;nu=t||0},tt.prototype.textWidth=function(n){var u=yf(n).split(/\r?\n/g),r=0,t,f=u.length;for(y.font=ti.css,t=0;t<f;++t)r=i.max(r,ti.measureTextWidth(u[t]));return r|0},rt.prototype.textWidth=function(n){var o=yf(n).split(/\r?\n/g),f=0,u,s=o.length,e;for(nr===r&&(nr=t.createElement("canvas")),e=nr.getContext("2d"),e.font=ti.css,u=0;u<s;++u)f=i.max(f,e.measureText(o[u]).width);return f|0},v.glyphLook=function(n,t){try{switch(t){case"1":return n.one;case"2":return n.two;case"3":return n.three;case"4":return n.four;case"5":return n.five;case"6":return n.six;case"7":return n.seven;case"8":return n.eight;case"9":return n.nine;case"0":return n.zero;case" ":return n.space;case"$":return n.dollar;case"!":return n.exclam;case'"':return n.quotedbl;case"#":return n.numbersign;case"%":return n.percent;case"&":return n.ampersand;case"'":return n.quotesingle;case"(":return n.parenleft;case")":return n.parenright;case"*":return n.asterisk;case"+":return n.plus;case",":return n.comma;case"-":return n.hyphen;case".":return n.period;case"/":return n.slash;case"_":return n.underscore;case":":return n.colon;case";":return n.semicolon;case"<":return n.less;case"=":return n.equal;case">":return n.greater;case"?":return n.question;case"@":return n.at;case"[":return n.bracketleft;case"\\":return n.backslash;case"]":return n.bracketright;case"^":return n.asciicircum;case"`":return n.grave;case"{":return n.braceleft;case"|":return n.bar;case"}":return n.braceright;case"~":return n.asciitilde;default:return n[t]}}catch(i){u.debug(i)}},tt.prototype.text$line=function(n,t,i,r,f){var e=0,h=0,o,l,c,s,a;if(ti.glyph){for(o=v.glyphTable[ff],du(),y.translate(t,i+lr),(f===39||f===3)&&(e=o.width(n),h=f===39?-e:-e/2),l=o.units_per_em,c=1/l*lr,y.scale(c,c),s=0,a=n.length;s<a;s++)try{v.glyphLook(o,n[s]).draw()}catch(p){u.debug(p)}gu()}else n&&"fillText"in y&&(eu&&(y.fillStyle=v.color.toString(fu),eu=!1),(f===39||f===3)&&(e=ti.measureTextWidth(n),h=f===39?-e:-e/2),y.fillText(n,t+h,i))},rt.prototype.text$line=function(n,i,u,f,e){var a,c,v,l,o,s,h;nr===r&&(nr=t.createElement("canvas"));a=y;y=nr.getContext("2d");y.font=ti.css;c=ti.measureTextWidth(n);nr.width=c;nr.height=lr;y=nr.getContext("2d");y.font=ti.css;y.textBaseline="top";tt.prototype.text$line(n,0,0,0,37);v=nr.width/nr.height;y=a;y.bindTexture(y.TEXTURE_2D,lh);y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,nr);y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR);y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE);y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE);l=0;e===39?l=-c:e===3&&(l=-c/2);o=new ut;s=lr*.5;o.translate(i+l-s/2,u-s,f);o.scale(-v*s,-s,s);o.translate(-1,-1,-1);o.transpose();h=new ut;h.scale(1,-1,1);h.apply(ht.array());h.transpose();y.useProgram(ft);fi("aVertex2d",ft,"aVertex",3,os);fi("aTextureCoord2d",ft,"aTextureCoord",2,ss);gt("uSampler2d",ft,"uSampler",[0]);gt("uIsDrawingText2d",ft,"uIsDrawingText",!0);kt("uModel2d",ft,"uModel",!1,o.array());kt("uView2d",ft,"uView",!1,h.array());dt("uColor2d",ft,"uColor",di);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,hs);y.drawElements(y.TRIANGLES,6,y.UNSIGNED_SHORT,0)},v.text=function(){no!==5&&(arguments.length===3?rl(yf(arguments[0]),arguments[1],arguments[2],0):arguments.length===4?rl(yf(arguments[0]),arguments[1],arguments[2],arguments[3]):arguments.length===5?ul(yf(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0):arguments.length===6&&ul(yf(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]))},v.textMode=function(n){no=n},v.loadGlyphs=function(f){var e,o,h,c,l,a,b,p,w,k,y,nt="[0-9\\-]+",s,d=function(n,t){for(var i=0,r=[],f=new RegExp(n,"g"),u=r[i]=f.exec(t);u;)i++,u=r[i]=f.exec(t);return r},tt=function(n){var f=d("[A-Za-z][0-9\\- ]+|Z",n),v=function(){return du(),ei.$ensureContext()},b=function(){ru();dr();gu()},r,u,t;for(s="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();",e=0,o=0,h=0,c=0,l=0,a=0,n=0,p=0,w="",k=f.length-1,r=0;r<k;r++){u=f[r][0];t=d(nt,u);switch(u[0]){case"M":e=parseFloat(t[0][0]);o=parseFloat(t[1][0]);s+="curContext.moveTo("+e+","+-o+");";break;case"L":e=parseFloat(t[0][0]);o=parseFloat(t[1][0]);s+="curContext.lineTo("+e+","+-o+");";break;case"H":e=parseFloat(t[0][0]);s+="curContext.lineTo("+e+","+-o+");";break;case"V":o=parseFloat(t[0][0]);s+="curContext.lineTo("+e+","+-o+");";break;case"T":l=parseFloat(t[0][0]);a=parseFloat(t[1][0]);w==="Q"||w==="T"?(n=i.sqrt(i.pow(e-h,2)+i.pow(c-o,2)),p=i.PI+i.atan2(h-e,c-o),h=e+i.sin(p)*n,c=o+i.cos(p)*n):(h=e,c=o);s+="curContext.quadraticCurveTo("+h+","+-c+","+l+","+-a+");";e=l;o=a;break;case"Q":h=parseFloat(t[0][0]);c=parseFloat(t[1][0]);l=parseFloat(t[2][0]);a=parseFloat(t[3][0]);s+="curContext.quadraticCurveTo("+h+","+-c+","+l+","+-a+");";e=l;o=a;break;case"Z":s+="curContext.closePath();"}w=u[0]}return s+="afterPathDraw();",s+="curContext.translate("+y+",0);",s+="}}",new Function("beforePathDraw","afterPathDraw",s)(v,b)},g=function(n){var c=n.getElementsByTagName("font"),u,i,o,t,h,e;for(v.glyphTable[f].horiz_adv_x=c[0].getAttribute("horiz-adv-x"),u=n.getElementsByTagName("font-face")[0],v.glyphTable[f].units_per_em=parseFloat(u.getAttribute("units-per-em")),v.glyphTable[f].ascent=parseFloat(u.getAttribute("ascent")),v.glyphTable[f].descent=parseFloat(u.getAttribute("descent")),i=n.getElementsByTagName("glyph"),o=i.length,t=0;t<o;t++)h=i[t].getAttribute("unicode"),e=i[t].getAttribute("glyph-name"),y=i[t].getAttribute("horiz-adv-x"),y===null&&(y=v.glyphTable[f].horiz_adv_x),b=i[t].getAttribute("d"),b!==r&&(s=tt(b),v.glyphTable[f][e]={name:e,unicode:h,horiz_adv_x:y,draw:s.draw})},it=function(){var i,r;try{i=t.implementation.createDocument("","",null)}catch(o){u.debug(o.message);return}try{i.async=!1;i.load(f);g(i.getElementsByTagName("svg")[0])}catch(e){u.debug(e);try{r=new n.XMLHttpRequest;r.open("GET",f,!1);r.send(null);g(r.responseXML.documentElement)}catch(s){u.debug(e)}}};return v.glyphTable[f]={},it(f),v.glyphTable[f]},v.param=function(n){var r="data-processing-"+n,i,u,t;if(d.hasAttribute(r))return d.getAttribute(r);for(i=0,u=d.childNodes.length;i<u;++i)if((t=d.childNodes.item(i),t.nodeType===1&&t.tagName.toLowerCase()==="param")&&t.getAttribute("name")===n)return t.getAttribute("value");return ri.params.hasOwnProperty(n)?ri.params[n]:null},nt.prototype.translate=st("translate"),nt.prototype.transform=st("transform"),nt.prototype.scale=st("scale"),nt.prototype.pushMatrix=st("pushMatrix"),nt.prototype.popMatrix=st("popMatrix"),nt.prototype.resetMatrix=st("resetMatrix"),nt.prototype.applyMatrix=st("applyMatrix"),nt.prototype.rotate=st("rotate"),nt.prototype.rotateZ=st("rotateZ"),nt.prototype.shearX=st("shearX"),nt.prototype.shearY=st("shearY"),nt.prototype.redraw=st("redraw"),nt.prototype.toImageData=st("toImageData"),nt.prototype.ambientLight=st("ambientLight"),nt.prototype.directionalLight=st("directionalLight"),nt.prototype.lightFalloff=st("lightFalloff"),nt.prototype.lightSpecular=st("lightSpecular"),nt.prototype.pointLight=st("pointLight"),nt.prototype.noLights=st("noLights"),nt.prototype.spotLight=st("spotLight"),nt.prototype.beginCamera=st("beginCamera"),nt.prototype.endCamera=st("endCamera"),nt.prototype.frustum=st("frustum"),nt.prototype.box=st("box"),nt.prototype.sphere=st("sphere"),nt.prototype.ambient=st("ambient"),nt.prototype.emissive=st("emissive"),nt.prototype.shininess=st("shininess"),nt.prototype.specular=st("specular"),nt.prototype.fill=st("fill"),nt.prototype.stroke=st("stroke"),nt.prototype.strokeWeight=st("strokeWeight"),nt.prototype.smooth=st("smooth"),nt.prototype.noSmooth=st("noSmooth"),nt.prototype.point=st("point"),nt.prototype.vertex=st("vertex"),nt.prototype.endShape=st("endShape"),nt.prototype.bezierVertex=st("bezierVertex"),nt.prototype.curveVertex=st("curveVertex"),nt.prototype.curve=st("curve"),nt.prototype.line=st("line"),nt.prototype.bezier=st("bezier"),nt.prototype.rect=st("rect"),nt.prototype.ellipse=st("ellipse"),nt.prototype.background=st("background"),nt.prototype.image=st("image"),nt.prototype.textWidth=st("textWidth"),nt.prototype.text$line=st("text$line"),nt.prototype.$ensureContext=st("$ensureContext"),nt.prototype.$newPMatrix=st("$newPMatrix"),nt.prototype.size=function(n,t,i){pf(i===2?"3D":"2D");v.size(n,t,i)},nt.prototype.$init=s,tt.prototype.$init=function(){v.size(v.width,v.height);y.lineCap="round";v.noSmooth();v.disableContextMenu()},rt.prototype.$init=function(){v.use3DContext=!0;v.disableContextMenu()},bt.prototype.$ensureContext=function(){return y},ii(d,"touchstart",function(n){var i,u,t;for(d.setAttribute("style","-webkit-user-select: none"),d.setAttribute("onclick","void(0)"),d.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)"),i=0,u=nf.length;i<u;i++)t=nf[i].type,(t==="mouseout"||t==="mousemove"||t==="mousedown"||t==="mouseup"||t==="DOMMouseScroll"||t==="mousewheel"||t==="touchstart")&&ws(nf[i]);v.touchStart!==r||v.touchMove!==r||v.touchEnd!==r||v.touchCancel!==r?(ii(d,"touchstart",function(n){v.touchStart!==r&&(n=oo(n),v.touchStart(n))}),ii(d,"touchmove",function(n){v.touchMove!==r&&(n.preventDefault(),n=oo(n),v.touchMove(n))}),ii(d,"touchend",function(n){v.touchEnd!==r&&(n=oo(n),v.touchEnd(n))}),ii(d,"touchcancel",function(n){v.touchCancel!==r&&(n=oo(n),v.touchCancel(n))})):(ii(d,"touchstart",function(n){eo(d,n.touches[0]);v.__mousePressed=!0;v.mouseDragging=!1;v.mouseButton=37;typeof v.mousePressed=="function"&&v.mousePressed()}),ii(d,"touchmove",function(n){n.preventDefault();eo(d,n.touches[0]);typeof v.mouseMoved!="function"||v.__mousePressed||v.mouseMoved();typeof v.mouseDragged=="function"&&v.__mousePressed&&(v.mouseDragged(),v.mouseDragging=!0)}),ii(d,"touchend",function(){v.__mousePressed=!1;typeof v.mouseClicked!="function"||v.mouseDragging||v.mouseClicked();typeof v.mouseReleased=="function"&&v.mouseReleased()}));d.dispatchEvent(n)}),function(){var n=!0,t=function(n){n.preventDefault();n.stopPropagation()};v.disableContextMenu=function(){n&&(ii(d,"contextmenu",t),n=!1)};v.enableContextMenu=function(){n||(ws({elem:d,type:"contextmenu",fn:t}),n=!0)}}(),ii(d,"mousemove",function(n){eo(d,n);typeof v.mouseMoved!="function"||v.__mousePressed||v.mouseMoved();typeof v.mouseDragged=="function"&&v.__mousePressed&&(v.mouseDragged(),v.mouseDragging=!0)}),ii(d,"mouseout",function(){typeof v.mouseOut=="function"&&v.mouseOut()}),ii(d,"mouseover",function(n){eo(d,n);typeof v.mouseOver=="function"&&v.mouseOver()}),d.onmousedown=function(){return d.focus(),!1},ii(d,"mousedown",function(n){v.__mousePressed=!0;v.mouseDragging=!1;switch(n.which){case 1:v.mouseButton=37;break;case 2:v.mouseButton=3;break;case 3:v.mouseButton=39}typeof v.mousePressed=="function"&&v.mousePressed()}),ii(d,"mouseup",function(){v.__mousePressed=!1;typeof v.mouseClicked!="function"||v.mouseDragging||v.mouseClicked();typeof v.mouseReleased=="function"&&v.mouseReleased()}),nh=function(t){var i=0;t.wheelDelta?(i=t.wheelDelta/120,n.opera&&(i=-i)):t.detail&&(i=-t.detail/3);v.mouseScroll=i;i&&typeof v.mouseScrolled=="function"&&v.mouseScrolled()},ii(t,"DOMMouseScroll",nh),ii(t,"mousewheel",nh),d.getAttribute("tabindex")||d.setAttribute("tabindex",0),ho)ri=new u.Sketch,pf(),v.size=function(n,t,i){i&&i===2?pf("3D"):pf("2D");v.size(n,t,i)};else{ri=l instanceof u.Sketch?l:typeof l=="function"?new u.Sketch(l):l?u.compile(l):new u.Sketch(function(){});v.externals.sketch=ri;pf();d.onfocus=function(){v.focused=!0};d.onblur=function(){v.focused=!1;ri.options.globalKeyEvents||sl()};ri.options.pauseOnBlur&&(ii(n,"focus",function(){lu&&v.loop()}),ii(n,"blur",function(){lu&&le&&(v.noLoop(),lu=!0);sl()}));so=ri.options.globalKeyEvents?n:d;ii(so,"keydown",wa);ii(so,"keypress",ba);ii(so,"keyup",ka);for(wf in u.lib)u.lib.hasOwnProperty(wf)&&(u.lib[wf].hasOwnProperty("attach")?u.lib[wf].attach(v):u.lib[wf]instanceof Function&&u.lib[wf].call(this));ih=100;rh=function(i){if(ri.imageCache.pending||e.preloading.pending(ih))n.setTimeout(function(){rh(i)},ih);else{if(n.opera){var r,f,u=ri.imageCache.operaCache;for(r in u)u.hasOwnProperty(r)&&(f=u[r],f!==null&&t.body.removeChild(f),delete u[r])}ri.attach(i,o);ri.onLoad(i);i.setup&&(i.setup(),i.resetMatrix(),ri.onSetup());he();i.draw&&(lu?i.loop():i.redraw())}};vt(this);rh(v)}};u.debug=ft;u.prototype=o;u.compile=function(n){var t=new u.Sketch,i=bt(n,t),r=wt(i);return t.sourceCode=r,t};ut=function(){var n={},u="undefined",f="function",i=!1,e=!0,o=512,r="log";return typeof tinylog!==u&&typeof tinylog[r]===f?n[r]=tinylog[r]:typeof t===u||t.fake?typeof print===f&&(n[r]=print):function(){var f=t,s="div",a="style",v="title",d={zIndex:1e4,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black"},g={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",paddingTop:"5px"},nt={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},tt={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},it={minHeight:"16px"},rt={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},p=f.defaultView,l=f.documentElement,y=l[a],w=function(){for(var i=arguments.length,r,n,t;i--;){n=arguments[i--];r=arguments[i][a];for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t])}},h=function(n,t,r){return n.addEventListener?n.addEventListener(t,r,i):n.attachEvent&&n.attachEvent("on"+t,r),[n,t,r]},ut=function(n,t,r){n.removeEventListener?n.removeEventListener(t,r,i):n.detachEvent&&n.detachEvent("on"+t,r)},b=function(n){for(var t=n.childNodes,i=t.length;i--;)n.removeChild(t.item(0))},u=function(n,t){return n.appendChild(t)},c=function(n){return f.createElement(n)},k=function(n){return f.createTextNode(n)},ft=n[r]=function(t){var vt,dt=y.paddingBottom,et=c(s),yt=et[a],st=u(et,c(s)),ot=u(et,c(s)),ct=u(et,c(s)),ht=i,lt=i,at=i,pt=0,wt=function(){y.paddingBottom=et.clientHeight+"px"},bt=function(n){var t=p.innerHeight,i=st.clientHeight;n<0?n=0:n+i>t&&(n=t-i);yt.height=n/t*100+"%";wt()},kt=[h(f,"mousemove",function(n){ht&&(bt(p.innerHeight-n.clientY),ot.scrollTop=at)}),h(f,"mouseup",function(){ht&&(ht=at=i)}),h(st,"dblclick",function(n){n.preventDefault();lt?(bt(lt),lt=i):(lt=et.clientHeight,yt.height="0px")}),h(st,"mousedown",function(n){n.preventDefault();ht=e;at=ot.scrollTop}),h(st,"contextmenu",function(){ht=i}),h(ct,"click",function(){vt()})];vt=function(){for(var t=kt.length;t--;)ut.apply(n,kt[t]);l.removeChild(et);y.paddingBottom=dt;b(ot);b(et);n[r]=ft};w(et,d,ot,g,st,nt,ct,tt);ct[v]="Close Log";u(ct,k("✖"));st[v]="Double-click to toggle log minimization";l.insertBefore(et,l.firstChild);n[r]=function(n){pt===o?ot.removeChild(ot.firstChild):pt++;var t=u(ot,c(s)),i=u(t,c(s));t[v]=(new Date).toLocaleTimeString();w(t,it,i,rt);u(i,k(n));ot.scrollTop=ot.scrollHeight};n[r](t);wt()}}(),n}();u.logger=ut;u.version="1.4.1";u.lib={};u.registerLibrary=function(n,t){u.lib[n]=t;t.hasOwnProperty("init")&&t.init(o)};u.instances=c;u.getInstanceById=function(n){return c[w[n]]};u.Sketch=function(i){this.attachFunction=i;this.options={pauseOnBlur:!1,globalKeyEvents:!1};this.onLoad=s;this.onSetup=s;this.onPause=s;this.onLoop=s;this.onFrameStart=s;this.onFrameEnd=s;this.onExit=s;this.params={};this.imageCache={pending:0,images:{},operaCache:{},add:function(i,r){if(!this.images[i]&&(d||(this.images[i]=null),r||(r=new Image,r.onload=function(n){return function(){n.pending--}}(this),this.pending++,r.src=i),this.images[i]=r,n.opera)){var u=t.createElement("div");u.appendChild(r);u.style.position="absolute";u.style.opacity=0;u.style.width="1px";u.style.height="1px";this.operaCache[i]||(t.body.appendChild(u),this.operaCache[i]=u)}}};this.sourceCode=undefined;this.attach=function(n){if(typeof this.attachFunction=="function")this.attachFunction(n);else if(this.sourceCode){var t=new Function("return ("+this.sourceCode+");")();t(n);this.attachFunction=t}else throw"Unable to attach sketch to the processing instance";};this.toString=function(){var n,t="((function(Sketch) {\n",i;t+="var sketch = new Sketch(\n"+this.sourceCode+");\n";for(n in this.options)this.options.hasOwnProperty(n)&&(i=this.options[n],t+="sketch.options."+n+" = "+(typeof i=="string"?'"'+i+'"':""+i)+";\n");for(n in this.imageCache)this.options.hasOwnProperty(n)&&(t+='sketch.imageCache.add("'+n+'");\n');return t+"return sketch;\n})(Processing.Sketch))"}};b=function(i,r){function c(t,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4){var t;r.status!==200&&r.status!==0?t="Invalid XHR status "+r.status:r.responseText===""&&(t="withCredentials"in new XMLHttpRequest&&(new XMLHttpRequest).withCredentials===!1&&n.location.protocol==="file:"?"XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions.":"File is empty.");i(r.responseText,t)}};r.open("GET",t,!0);r.overrideMimeType&&r.overrideMimeType("application/json");r.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");r.send(null)}function l(n,r){function f(t,f){if(o[n]=t,++h,f&&e.push(r+" ==> "+f),h===s)if(e.length===0)try{return new u(i,o.join("\n"))}catch(c){throw"Processing.js: Unable to execute pjs sketch: "+c;}else throw"Processing.js: Unable to load pjs sketch files: "+e.join("\n");}if(r.charAt(0)==="#"){var l=t.getElementById(r.substring(1));l?f(l.text||l.textContent):f("","Unable to load pjs sketch: element with id '"+r.substring(1)+"' was not found");return}c(r,f)}for(var o=[],e=[],s=r.length,h=0,f=0;f<s;++f)l(f,r[f])};v=function(){var n,o,s,k,h,l,f,d,g,nt,p,a,i,y,w,e;for(t.removeEventListener("DOMContentLoaded",v,!1),c=[],n=t.getElementsByTagName("canvas"),s=0,k=n.length;s<k;s++)if(h=n[s].getAttribute("data-processing-sources"),h===null&&(h=n[s].getAttribute("data-src"),h===null&&(h=n[s].getAttribute("datasrc"))),h){for(o=h.split(/\s+/g),l=0;l<o.length;)o[l]?l++:o.splice(l,1);b(n[s],o)}for(p=t.getElementsByTagName("script"),a=[],f=p.length-1;f>=0;f--)a.push(p[f]);for(f=0,d=a.length;f<d;f++)if((i=a[f],i.getAttribute)&&(y=i.getAttribute("type"),y&&(y.toLowerCase()==="text/processing"||y.toLowerCase()==="application/processing"))){if(w=i.getAttribute("data-processing-target"),n=r,w)n=t.getElementById(w);else{for(e=i.nextSibling;e&&e.nodeType!==1;)e=e.nextSibling;e&&e.nodeName.toLowerCase()==="canvas"&&(n=e)}if(n){if(i.getAttribute("src")){o=i.getAttribute("src").split(/\s+/);b(n,o);continue}g=i.textContent||i.text;nt=new u(n,g)}}};u.reload=function(){if(c.length>0)for(var n=c.length-1;n>=0;n--)c[n]&&c[n].exit();v()};u.loadSketchFromSources=b;u.disableInit=function(){d&&t.removeEventListener("DOMContentLoaded",v,!1)};d?(n.Processing=u,t.addEventListener("DOMContentLoaded",v,!1)):this.Processing=u}(window,window.document,Math)